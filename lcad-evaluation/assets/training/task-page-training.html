<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Page</title>
    <link rel="stylesheet" href="../page-templates/task-page.css">
    <script src="../../../revisitUtilities/revisit-communicate.js"></script>
    <script type="module">
        import {Registry, initializeTrrack} from 'https://cdn.jsdelivr.net/npm/@trrack/core@1.3.0/+esm'

        const initialState = {
            selectedButton: 'task-description'
        };

        const registry = Registry.create();

        const clickButton = registry.register(
            'click-tab',
            (state, task) => {
                state.selectedButton = task;
                return state;
            }
        );

        const trrack = initializeTrrack({
            initialState,
            registry
        });

        window.trrack = trrack;

        window.showContent = function(page, button) {
            document.querySelectorAll('.content').forEach(div => div.style.display = 'none');
            document.getElementById(page).style.display = 'block';
            document.querySelectorAll('.tab').forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');

            trrack.apply('Change data view', clickButton(page));

            // Save the current state to ReVISit
            saveToReVISit();
        }

        trrack.currentChange(() => {
            const selectedButton = trrack.getState().selectedButton;
            document.querySelectorAll('.tab').forEach(btn => {
                btn.classList.toggle('active', btn.getAttribute('onclick').includes(selectedButton));
            });
            document.querySelectorAll('.content').forEach(div => {
                div.style.display = div.id === selectedButton ? 'block' : 'none';
            });

            // Save the current state to ReVISit
            saveToReVISit();
        });

        function saveToReVISit() {
            Revisit.postAnswers({
                selectedButton: trrack.getState().selectedButton
            });
            Revisit.postProvenance(trrack.graph.backend);
            // console.log(trrack.graph.backend)
        }

        // Call saveToReVISit when the page is about to unload (e.g., when closing the tab)
        window.addEventListener('beforeunload', saveToReVISit);
    </script>
    <!-- <script type="module" src="../page-templates/trrack-setup-main.js"></script> -->
</head>
<body>
    <div class="tabs">
        <div class="tab active" onclick="showContent('task-description', this)">Task description</div>
        <div class="tab" onclick="showContent('lca-results', this)">LCA results</div>
        <div class="tab" onclick="showContent('process-tree', this)">Process tree</div>
        <div class="tab" onclick="showContent('cad-model', this)">CAD model</div>
        <div class="tab" onclick="showContent('cad-drawings', this)">CAD drawings</div>
        <div class="tab" onclick="showContent('fea-results', this)">FEA results</div>
        <div class="tab" onclick="showContent('lcad-app', this)">3D LCA Visualizasion</div>
    </div>
    <div id="task-description" class="content" height="100%">
        <iframe src="task-description-training.html" width="100%" height="auto"></iframe>
    </div>
    <div id="lca-results" class="content">
        <!-- <iframe src="../page-templates/lca-results.html" width="100%" height="500px"></iframe> -->
        <!-- <div class="subtabs">
            <div class="subtab active" onclick="showContent('lca-results-processes', this)">Processes</div>
            <div class="subtab" onclick="showContent('lca-results-components', this)">Components</div>
        </div> -->
        <!-- <div id="lca-results-processes" class="subcontent">
            <h2>Add process level LCA results here.</h2>
        </div>
        <div id="lca-results-components" class="subcontent">
            <h2>Add component level LCA results here.</h2>
        </div> -->
        <h1>Process contribution</h1>
        <p><strong>Calculation:</strong> Analyze</p>
        <p><strong>Results:</strong> Process contribution</p>
        <p><strong>Product:</strong> 1 p Screw Pump Shaft (of project Screw Pump Shaft)</p>
        <p><strong>Method:</strong> ReCiPe 2016 Midpoint (H) V1.00</p>
        <p><strong>Indicator:</strong> Inventory</p>
        <p><strong>Default units:</strong> Yes</p>
        <p><strong>Exclude infrastructure processes:</strong> No</p>
        <p><strong>Exclude long-term emissions:</strong> No</p>
        <p><strong>Sorted on item:</strong> Process</p>
        <p><strong>Sort order:</strong> Ascending</p>
          
          <table border="1">
            <tr>
                <th>No</th>
                <th>Process</th>
                <th>Project</th>
                <th>Unit</th>
                <th>Total</th>
                <th>Steel, chromium steel 18/8 {GLO}| market for | Alloc Def, S</th>
                <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
                <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
                <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
                <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
                <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
                <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
                <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
                <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
                <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
                <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
                <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
                <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
                <th>Chromium steel removed by drilling, computer numerical controlled {RER}| chromium steel drilling, computer numerical controlled | Alloc Def, S</th>
                <th>Chromium steel removed by milling, average {RER}| chromium steel milling, average | Alloc Def, S</th>
                <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
                <th>Chromium steel removed by turning, primarily dressing, computer numerical controlled {RER}| chromium steel turning, primarily dressing, computer numerical controlled | Alloc Def, S</th>
            </tr>
            <tr>
                <td>1</td>
                <td>Chromium steel removed by drilling, computer numerical controlled {RER}| chromium steel drilling, computer numerical controlled | Alloc Def, S</td>
                <td>Ecoinvent 3 - allocation, default - system</td>
                <td>kg</td>
                <td>0.09132</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0.09132</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
            </tr>
            <tr>
                <td>2</td>
                <td>Chromium steel removed by milling, average {RER}| chromium steel milling, average | Alloc Def, S</td>
                <td>Ecoinvent 3 - allocation, default - system</td>
                <td>kg</td>
                <td>0.02224</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0.02224</td>
                <td>0</td>
                <td>0</td>
            </tr>
            <tr>
                <td>3</td>
                <td>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</td>
                <td>Ecoinvent 3 - allocation, default - system</td>
                <td>kg</td>
                <td>9.90234</td>
                <td>0</td>
                <td>0.70598</td>
                <td>0.21985</td>
                <td>0.00043</td>
                <td>0.04842</td>
                <td>2.45273</td>
                <td>4.8298</td>
                <td>0.00316</td>
                <td>0.75184</td>
                <td>0.02251</td>
                <td>0.07568</td>
                <td>0.78442</td>
                <td>0.00264</td>
                <td>0.00445</td>
                <td>0</td>
                <td>0</td>
                <td>0.00043</td>
                <td>0</td>
            </tr>
            <tr>
                <td>4</td>
                <td>Chromium steel removed by turning, primarily dressing, computer numerical controlled {RER}| chromium steel turning, primarily dressing, computer numerical controlled | Alloc Def, S</td>
                <td>Ecoinvent 3 - allocation, default - system</td>
                <td>kg</td>
                <td>0.001</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0.001</td>
            </tr>
            <tr>
                <td>5</td>
                <td>Steel, chromium steel 18/8 {GLO}| market for | Alloc Def, S</td>
                <td>Ecoinvent 3 - allocation, default - system</td>
                <td>kg</td>
                <td>13.59001</td>
                <td>13.59001</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
            </tr>
        </table>

          

          <h1>Impact Assessment</h1>
          <p><strong>Calculation:</strong> Analyze</p>
          <p><strong>Results:</strong> Impact assessment</p>
          <p><strong>Product:</strong> 1 p Screw Pump Shaft (of project Screw Pump Shaft)</p>
          <p><strong>Method:</strong> ReCiPe 2016 Midpoint (H) V1.00</p>
          <p><strong>Indicator:</strong> Characterization</p>
          <p><strong>Skip categories:</strong> With factor = 0</p>
          <p><strong>Exclude infrastructure processes:</strong> No</p>
          <p><strong>Exclude long-term emissions:</strong> No</p>
          <p><strong>Sorted on item:</strong> Impact category</p>
          <p><strong>Sort order:</strong> Ascending</p>

          <table border="1">
            <tr>
              <th>Impact category</th>
              <th>Unit</th>
              <th>Total</th>
              <th>Steel, chromium steel 18/8 {GLO}| market for | Alloc Def, S</th>
              <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
              <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
              <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
              <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
              <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
              <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
              <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
              <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
              <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
              <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
              <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
              <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
              <th>Chromium steel removed by drilling, computer numerical controlled {RER}| chromium steel drilling, computer numerical controlled | Alloc Def, S</th>
              <th>Chromium steel removed by milling, average {RER}| chromium steel milling, average | Alloc Def, S</th>
              <th>Chromium steel removed by turning, average, computer numerical controlled {RER}| chromium steel turning, average, computer numerical controlled | Alloc Def, S</th>
              <th>Chromium steel removed by turning, primarily dressing, computer numerical controlled {RER}| chromium steel turning, primarily dressing, computer numerical controlled | Alloc Def, S</th>
            </tr>
            <tr>
              <td>Global warming</td>
              <td>kg CO2 eq</td>
              <td>139.6141014</td>
              <td>63.95893237</td>
              <td>5.339331315</td>
              <td>1.662726975</td>
              <td>0.003252093</td>
              <td>0.366200774</td>
              <td>18.55001289</td>
              <td>36.5278087</td>
              <td>0.0238991</td>
              <td>5.686170792</td>
              <td>0.170243276</td>
              <td>0.57236833</td>
              <td>5.932573544</td>
              <td>0.019966337</td>
              <td>0.033655379</td>
              <td>0.607949409</td>
              <td>0.147161586</td>
              <td>0.003252093</td>
              <td>0.00859644</td>
            </tr>
          </table>
          
          <img src="../data/LCA/Impact assessment - GWP 2.BMP" style="width: 100%; height: auto;"></img>

    </div>
    <div id="process-tree" class="content">
      <h2>Tree</h2>
      <img src="../data/LCA/Tree.BMP" style="width: 100%; height: auto;"></img>
      <h2>Network</h2>
      <img src="../data/LCA/Network.BMP" style="width: 100%; height: auto;"></img>
    </div>
    <div id="cad-model" class="content">
        <iframe src="model-viewer-training.html" width="100%" height="100%"></iframe>
    </div>
    <div id="cad-drawings" class="content">
      <img src="../data/CAD/ScrewPumpShaft Drawing.png" style="width: 100%; height: auto;"></img>
    </div>
    <div id="fea-results" class="content">
        <img src="../data/FEA/Screw Pump Shaft (1)-Static 1-Results-Stress2.png" style="height: auto; width: 100%;"></img>
        <img src="../data/FEA/Screw Pump Shaft (1)-Static 1-Results-Stress3.png" style="height: auto; width: 100%;"></img>
        <img src="../data/FEA/Screw Pump Shaft (1)-Static 1-Results-Stress4.png" style="height: auto; width: 100%;"></img>
        <img src="../data/FEA/Screw Pump Shaft (1)-Static 1-Results-Stress5.png" style="height: auto; width: 100%;"></img>
    </div>
    <div id="lcad-app" class="content">
        <iframe src="../unity-app/index.html" title="3D Visualization" width="1040" height="440" style="border:none;"></iframe>
    </div>
</body>
</html>
