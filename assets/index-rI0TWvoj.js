var ije=Object.defineProperty;var sje=(e,t,n)=>t in e?ije(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var oje=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var uu=(e,t,n)=>(sje(e,typeof t!="symbol"?t+"":t,n),n);var oon=oje((gan,Hre)=>{function aje(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Zs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function uje(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var B0e={exports:{}},MM={},U0e={exports:{}},On={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MI=Symbol.for("react.element"),lje=Symbol.for("react.portal"),cje=Symbol.for("react.fragment"),fje=Symbol.for("react.strict_mode"),dje=Symbol.for("react.profiler"),hje=Symbol.for("react.provider"),pje=Symbol.for("react.context"),mje=Symbol.for("react.forward_ref"),gje=Symbol.for("react.suspense"),yje=Symbol.for("react.memo"),vje=Symbol.for("react.lazy"),pie=Symbol.iterator;function bje(e){return e===null||typeof e!="object"?null:(e=pie&&e[pie]||e["@@iterator"],typeof e=="function"?e:null)}var z0e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V0e=Object.assign,H0e={};function kx(e,t,n){this.props=e,this.context=t,this.refs=H0e,this.updater=n||z0e}kx.prototype.isReactComponent={};kx.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};kx.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function q0e(){}q0e.prototype=kx.prototype;function pq(e,t,n){this.props=e,this.context=t,this.refs=H0e,this.updater=n||z0e}var mq=pq.prototype=new q0e;mq.constructor=pq;V0e(mq,kx.prototype);mq.isPureReactComponent=!0;var mie=Array.isArray,W0e=Object.prototype.hasOwnProperty,gq={current:null},G0e={key:!0,ref:!0,__self:!0,__source:!0};function Y0e(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)W0e.call(t,r)&&!G0e.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:MI,type:e,key:s,ref:o,props:i,_owner:gq.current}}function _je(e,t){return{$$typeof:MI,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function yq(e){return typeof e=="object"&&e!==null&&e.$$typeof===MI}function wje(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var gie=/\/+/g;function O5(e,t){return typeof e=="object"&&e!==null&&e.key!=null?wje(""+e.key):t.toString(36)}function PP(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case MI:case lje:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+O5(o,0):r,mie(i)?(n="",e!=null&&(n=e.replace(gie,"$&/")+"/"),PP(i,t,n,"",function(l){return l})):i!=null&&(yq(i)&&(i=_je(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(gie,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",mie(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+O5(s,a);o+=PP(s,t,n,u,i)}else if(u=bje(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+O5(s,a++),o+=PP(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function VR(e,t,n){if(e==null)return e;var r=[],i=0;return PP(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Eje(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Za={current:null},DP={transition:null},xje={ReactCurrentDispatcher:Za,ReactCurrentBatchConfig:DP,ReactCurrentOwner:gq};function K0e(){throw Error("act(...) is not supported in production builds of React.")}On.Children={map:VR,forEach:function(e,t,n){VR(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return VR(e,function(){t++}),t},toArray:function(e){return VR(e,function(t){return t})||[]},only:function(e){if(!yq(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};On.Component=kx;On.Fragment=cje;On.Profiler=dje;On.PureComponent=pq;On.StrictMode=fje;On.Suspense=gje;On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xje;On.act=K0e;On.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=V0e({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=gq.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)W0e.call(t,u)&&!G0e.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:MI,type:e.type,key:i,ref:s,props:r,_owner:o}};On.createContext=function(e){return e={$$typeof:pje,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:hje,_context:e},e.Consumer=e};On.createElement=Y0e;On.createFactory=function(e){var t=Y0e.bind(null,e);return t.type=e,t};On.createRef=function(){return{current:null}};On.forwardRef=function(e){return{$$typeof:mje,render:e}};On.isValidElement=yq;On.lazy=function(e){return{$$typeof:vje,_payload:{_status:-1,_result:e},_init:Eje}};On.memo=function(e,t){return{$$typeof:yje,type:e,compare:t===void 0?null:t}};On.startTransition=function(e){var t=DP.transition;DP.transition={};try{e()}finally{DP.transition=t}};On.unstable_act=K0e;On.useCallback=function(e,t){return Za.current.useCallback(e,t)};On.useContext=function(e){return Za.current.useContext(e)};On.useDebugValue=function(){};On.useDeferredValue=function(e){return Za.current.useDeferredValue(e)};On.useEffect=function(e,t){return Za.current.useEffect(e,t)};On.useId=function(){return Za.current.useId()};On.useImperativeHandle=function(e,t,n){return Za.current.useImperativeHandle(e,t,n)};On.useInsertionEffect=function(e,t){return Za.current.useInsertionEffect(e,t)};On.useLayoutEffect=function(e,t){return Za.current.useLayoutEffect(e,t)};On.useMemo=function(e,t){return Za.current.useMemo(e,t)};On.useReducer=function(e,t,n){return Za.current.useReducer(e,t,n)};On.useRef=function(e){return Za.current.useRef(e)};On.useState=function(e){return Za.current.useState(e)};On.useSyncExternalStore=function(e,t,n){return Za.current.useSyncExternalStore(e,t,n)};On.useTransition=function(){return Za.current.useTransition()};On.version="18.3.1";U0e.exports=On;var I=U0e.exports;const vr=Hl(I),QD=aje({__proto__:null,default:vr},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sje=I,Tje=Symbol.for("react.element"),Aje=Symbol.for("react.fragment"),Cje=Object.prototype.hasOwnProperty,Ije=Sje.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kje={key:!0,ref:!0,__self:!0,__source:!0};function X0e(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Cje.call(t,r)&&!kje.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Tje,type:e,key:s,ref:o,props:i,_owner:Ije.current}}MM.Fragment=Aje;MM.jsx=X0e;MM.jsxs=X0e;B0e.exports=MM;var _=B0e.exports,IB={},Q0e={exports:{}},ql={},J0e={exports:{}},Z0e={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,H){var D=U.length;U.push(H);e:for(;0<D;){var z=D-1>>>1,W=U[z];if(0<i(W,H))U[z]=H,U[D]=W,D=z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var H=U[0],D=U.pop();if(D!==H){U[0]=D;e:for(var z=0,W=U.length,j=W>>>1;z<j;){var q=2*(z+1)-1,G=U[q],re=q+1,de=U[re];if(0>i(G,D))re<W&&0>i(de,G)?(U[z]=de,U[re]=D,z=re):(U[z]=G,U[q]=D,z=q);else if(re<W&&0>i(de,D))U[z]=de,U[re]=D,z=re;else break e}}return H}function i(U,H){var D=U.sortIndex-H.sortIndex;return D!==0?D:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var H=n(l);H!==null;){if(H.callback===null)r(l);else if(H.startTime<=U)r(l),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(l)}}function w(U){if(m=!1,b(U),!p)if(n(u)!==null)p=!0,M(E);else{var H=n(l);H!==null&&B(w,H.startTime-U)}}function E(U,H){p=!1,m&&(m=!1,y(A),A=-1),h=!0;var D=d;try{for(b(H),f=n(u);f!==null&&(!(f.expirationTime>H)||U&&!N());){var z=f.callback;if(typeof z=="function"){f.callback=null,d=f.priorityLevel;var W=z(f.expirationTime<=H);H=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(H)}else r(u);f=n(u)}if(f!==null)var j=!0;else{var q=n(l);q!==null&&B(w,q.startTime-H),j=!1}return j}finally{f=null,d=D,h=!1}}var T=!1,S=null,A=-1,C=5,k=-1;function N(){return!(e.unstable_now()-k<C)}function O(){if(S!==null){var U=e.unstable_now();k=U;var H=!0;try{H=S(!0,U)}finally{H?P():(T=!1,S=null)}}else T=!1}var P;if(typeof v=="function")P=function(){v(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,F=$.port2;$.port1.onmessage=O,P=function(){F.postMessage(null)}}else P=function(){g(O,0)};function M(U){S=U,T||(T=!0,P())}function B(U,H){A=g(function(){U(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,M(E))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(U){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var D=d;d=H;try{return U()}finally{d=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var D=d;d=U;try{return H()}finally{d=D}},e.unstable_scheduleCallback=function(U,H,D){var z=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?z+D:z):D=z,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=D+W,U={id:c++,callback:H,priorityLevel:U,startTime:D,expirationTime:W,sortIndex:-1},D>z?(U.sortIndex=D,t(l,U),n(u)===null&&U===n(l)&&(m?(y(A),A=-1):m=!0,B(w,D-z))):(U.sortIndex=W,t(u,U),p||h||(p=!0,M(E))),U},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(U){var H=d;return function(){var D=d;d=H;try{return U.apply(this,arguments)}finally{d=D}}}})(Z0e);J0e.exports=Z0e;var Rje=J0e.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nje=I,Rl=Rje;function rt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eye=new Set,WA={};function _b(e,t){fE(e,t),fE(e+"Capture",t)}function fE(e,t){for(WA[e]=t,e=0;e<t.length;e++)eye.add(t[e])}var im=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kB=Object.prototype.hasOwnProperty,Pje=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yie={},vie={};function Dje(e){return kB.call(vie,e)?!0:kB.call(yie,e)?!1:Pje.test(e)?vie[e]=!0:(yie[e]=!0,!1)}function Oje(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $je(e,t,n,r){if(t===null||typeof t>"u"||Oje(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function eu(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Oo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Oo[e]=new eu(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Oo[t]=new eu(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Oo[e]=new eu(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Oo[e]=new eu(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Oo[e]=new eu(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Oo[e]=new eu(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Oo[e]=new eu(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Oo[e]=new eu(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Oo[e]=new eu(e,5,!1,e.toLowerCase(),null,!1,!1)});var vq=/[\-:]([a-z])/g;function bq(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vq,bq);Oo[t]=new eu(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vq,bq);Oo[t]=new eu(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vq,bq);Oo[t]=new eu(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Oo[e]=new eu(e,1,!1,e.toLowerCase(),null,!1,!1)});Oo.xlinkHref=new eu("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Oo[e]=new eu(e,1,!1,e.toLowerCase(),null,!0,!0)});function _q(e,t,n,r){var i=Oo.hasOwnProperty(t)?Oo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($je(t,n,i,r)&&(n=null),r||i===null?Dje(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Om=Nje.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,HR=Symbol.for("react.element"),Z_=Symbol.for("react.portal"),ew=Symbol.for("react.fragment"),wq=Symbol.for("react.strict_mode"),RB=Symbol.for("react.profiler"),tye=Symbol.for("react.provider"),nye=Symbol.for("react.context"),Eq=Symbol.for("react.forward_ref"),NB=Symbol.for("react.suspense"),PB=Symbol.for("react.suspense_list"),xq=Symbol.for("react.memo"),Eg=Symbol.for("react.lazy"),rye=Symbol.for("react.offscreen"),bie=Symbol.iterator;function eT(e){return e===null||typeof e!="object"?null:(e=bie&&e[bie]||e["@@iterator"],typeof e=="function"?e:null)}var Ni=Object.assign,$5;function t2(e){if($5===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$5=t&&t[1]||""}return`
`+$5+e}var M5=!1;function L5(e,t){if(!e||M5)return"";M5=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{M5=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?t2(e):""}function Mje(e){switch(e.tag){case 5:return t2(e.type);case 16:return t2("Lazy");case 13:return t2("Suspense");case 19:return t2("SuspenseList");case 0:case 2:case 15:return e=L5(e.type,!1),e;case 11:return e=L5(e.type.render,!1),e;case 1:return e=L5(e.type,!0),e;default:return""}}function DB(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ew:return"Fragment";case Z_:return"Portal";case RB:return"Profiler";case wq:return"StrictMode";case NB:return"Suspense";case PB:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nye:return(e.displayName||"Context")+".Consumer";case tye:return(e._context.displayName||"Context")+".Provider";case Eq:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xq:return t=e.displayName||null,t!==null?t:DB(e.type)||"Memo";case Eg:t=e._payload,e=e._init;try{return DB(e(t))}catch{}}return null}function Lje(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return DB(t);case 8:return t===wq?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function R0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function iye(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Fje(e){var t=iye(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qR(e){e._valueTracker||(e._valueTracker=Fje(e))}function sye(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=iye(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function JD(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function OB(e,t){var n=t.checked;return Ni({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function _ie(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=R0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function oye(e,t){t=t.checked,t!=null&&_q(e,"checked",t,!1)}function $B(e,t){oye(e,t);var n=R0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?MB(e,t.type,n):t.hasOwnProperty("defaultValue")&&MB(e,t.type,R0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function wie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function MB(e,t,n){(t!=="number"||JD(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var n2=Array.isArray;function Tw(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+R0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function LB(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(rt(91));return Ni({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Eie(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(rt(92));if(n2(n)){if(1<n.length)throw Error(rt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:R0(n)}}function aye(e,t){var n=R0(t.value),r=R0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function xie(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function uye(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function FB(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?uye(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var WR,lye=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(WR=WR||document.createElement("div"),WR.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=WR.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function GA(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var G2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jje=["Webkit","ms","Moz","O"];Object.keys(G2).forEach(function(e){jje.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),G2[t]=G2[e]})});function cye(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||G2.hasOwnProperty(e)&&G2[e]?(""+t).trim():t+"px"}function fye(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=cye(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Bje=Ni({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jB(e,t){if(t){if(Bje[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(rt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(rt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(rt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(rt(62))}}function BB(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var UB=null;function Sq(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zB=null,Aw=null,Cw=null;function Sie(e){if(e=jI(e)){if(typeof zB!="function")throw Error(rt(280));var t=e.stateNode;t&&(t=UM(t),zB(e.stateNode,e.type,t))}}function dye(e){Aw?Cw?Cw.push(e):Cw=[e]:Aw=e}function hye(){if(Aw){var e=Aw,t=Cw;if(Cw=Aw=null,Sie(e),t)for(e=0;e<t.length;e++)Sie(t[e])}}function pye(e,t){return e(t)}function mye(){}var F5=!1;function gye(e,t,n){if(F5)return e(t,n);F5=!0;try{return pye(e,t,n)}finally{F5=!1,(Aw!==null||Cw!==null)&&(mye(),hye())}}function YA(e,t){var n=e.stateNode;if(n===null)return null;var r=UM(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(rt(231,t,typeof n));return n}var VB=!1;if(im)try{var tT={};Object.defineProperty(tT,"passive",{get:function(){VB=!0}}),window.addEventListener("test",tT,tT),window.removeEventListener("test",tT,tT)}catch{VB=!1}function Uje(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Y2=!1,ZD=null,eO=!1,HB=null,zje={onError:function(e){Y2=!0,ZD=e}};function Vje(e,t,n,r,i,s,o,a,u){Y2=!1,ZD=null,Uje.apply(zje,arguments)}function Hje(e,t,n,r,i,s,o,a,u){if(Vje.apply(this,arguments),Y2){if(Y2){var l=ZD;Y2=!1,ZD=null}else throw Error(rt(198));eO||(eO=!0,HB=l)}}function wb(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function yye(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Tie(e){if(wb(e)!==e)throw Error(rt(188))}function qje(e){var t=e.alternate;if(!t){if(t=wb(e),t===null)throw Error(rt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Tie(i),e;if(s===r)return Tie(i),t;s=s.sibling}throw Error(rt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(rt(189))}}if(n.alternate!==r)throw Error(rt(190))}if(n.tag!==3)throw Error(rt(188));return n.stateNode.current===n?e:t}function vye(e){return e=qje(e),e!==null?bye(e):null}function bye(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=bye(e);if(t!==null)return t;e=e.sibling}return null}var _ye=Rl.unstable_scheduleCallback,Aie=Rl.unstable_cancelCallback,Wje=Rl.unstable_shouldYield,Gje=Rl.unstable_requestPaint,ns=Rl.unstable_now,Yje=Rl.unstable_getCurrentPriorityLevel,Tq=Rl.unstable_ImmediatePriority,wye=Rl.unstable_UserBlockingPriority,tO=Rl.unstable_NormalPriority,Kje=Rl.unstable_LowPriority,Eye=Rl.unstable_IdlePriority,LM=null,Xd=null;function Xje(e){if(Xd&&typeof Xd.onCommitFiberRoot=="function")try{Xd.onCommitFiberRoot(LM,e,void 0,(e.current.flags&128)===128)}catch{}}var Rf=Math.clz32?Math.clz32:Zje,Qje=Math.log,Jje=Math.LN2;function Zje(e){return e>>>=0,e===0?32:31-(Qje(e)/Jje|0)|0}var GR=64,YR=4194304;function r2(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function nO(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=r2(a):(s&=o,s!==0&&(r=r2(s)))}else o=n&~i,o!==0?r=r2(o):s!==0&&(r=r2(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Rf(t),i=1<<n,r|=e[n],t&=~i;return r}function e8e(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function t8e(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Rf(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=e8e(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function qB(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function xye(){var e=GR;return GR<<=1,!(GR&4194240)&&(GR=64),e}function j5(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function LI(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Rf(t),e[t]=n}function n8e(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Rf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Aq(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Rf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Pr=0;function Sye(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Tye,Cq,Aye,Cye,Iye,WB=!1,KR=[],i0=null,s0=null,o0=null,KA=new Map,XA=new Map,Pg=[],r8e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cie(e,t){switch(e){case"focusin":case"focusout":i0=null;break;case"dragenter":case"dragleave":s0=null;break;case"mouseover":case"mouseout":o0=null;break;case"pointerover":case"pointerout":KA.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":XA.delete(t.pointerId)}}function nT(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=jI(t),t!==null&&Cq(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function i8e(e,t,n,r,i){switch(t){case"focusin":return i0=nT(i0,e,t,n,r,i),!0;case"dragenter":return s0=nT(s0,e,t,n,r,i),!0;case"mouseover":return o0=nT(o0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return KA.set(s,nT(KA.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,XA.set(s,nT(XA.get(s)||null,e,t,n,r,i)),!0}return!1}function kye(e){var t=qv(e.target);if(t!==null){var n=wb(t);if(n!==null){if(t=n.tag,t===13){if(t=yye(n),t!==null){e.blockedOn=t,Iye(e.priority,function(){Aye(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function OP(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=GB(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);UB=r,n.target.dispatchEvent(r),UB=null}else return t=jI(n),t!==null&&Cq(t),e.blockedOn=n,!1;t.shift()}return!0}function Iie(e,t,n){OP(e)&&n.delete(t)}function s8e(){WB=!1,i0!==null&&OP(i0)&&(i0=null),s0!==null&&OP(s0)&&(s0=null),o0!==null&&OP(o0)&&(o0=null),KA.forEach(Iie),XA.forEach(Iie)}function rT(e,t){e.blockedOn===t&&(e.blockedOn=null,WB||(WB=!0,Rl.unstable_scheduleCallback(Rl.unstable_NormalPriority,s8e)))}function QA(e){function t(i){return rT(i,e)}if(0<KR.length){rT(KR[0],e);for(var n=1;n<KR.length;n++){var r=KR[n];r.blockedOn===e&&(r.blockedOn=null)}}for(i0!==null&&rT(i0,e),s0!==null&&rT(s0,e),o0!==null&&rT(o0,e),KA.forEach(t),XA.forEach(t),n=0;n<Pg.length;n++)r=Pg[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Pg.length&&(n=Pg[0],n.blockedOn===null);)kye(n),n.blockedOn===null&&Pg.shift()}var Iw=Om.ReactCurrentBatchConfig,rO=!0;function o8e(e,t,n,r){var i=Pr,s=Iw.transition;Iw.transition=null;try{Pr=1,Iq(e,t,n,r)}finally{Pr=i,Iw.transition=s}}function a8e(e,t,n,r){var i=Pr,s=Iw.transition;Iw.transition=null;try{Pr=4,Iq(e,t,n,r)}finally{Pr=i,Iw.transition=s}}function Iq(e,t,n,r){if(rO){var i=GB(e,t,n,r);if(i===null)K5(e,t,r,iO,n),Cie(e,r);else if(i8e(i,e,t,n,r))r.stopPropagation();else if(Cie(e,r),t&4&&-1<r8e.indexOf(e)){for(;i!==null;){var s=jI(i);if(s!==null&&Tye(s),s=GB(e,t,n,r),s===null&&K5(e,t,r,iO,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else K5(e,t,r,null,n)}}var iO=null;function GB(e,t,n,r){if(iO=null,e=Sq(r),e=qv(e),e!==null)if(t=wb(e),t===null)e=null;else if(n=t.tag,n===13){if(e=yye(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return iO=e,null}function Rye(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yje()){case Tq:return 1;case wye:return 4;case tO:case Kje:return 16;case Eye:return 536870912;default:return 16}default:return 16}}var zg=null,kq=null,$P=null;function Nye(){if($P)return $P;var e,t=kq,n=t.length,r,i="value"in zg?zg.value:zg.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return $P=i.slice(e,1<r?1-r:void 0)}function MP(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function XR(){return!0}function kie(){return!1}function Wl(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?XR:kie,this.isPropagationStopped=kie,this}return Ni(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=XR)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=XR)},persist:function(){},isPersistent:XR}),t}var Rx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rq=Wl(Rx),FI=Ni({},Rx,{view:0,detail:0}),u8e=Wl(FI),B5,U5,iT,FM=Ni({},FI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nq,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==iT&&(iT&&e.type==="mousemove"?(B5=e.screenX-iT.screenX,U5=e.screenY-iT.screenY):U5=B5=0,iT=e),B5)},movementY:function(e){return"movementY"in e?e.movementY:U5}}),Rie=Wl(FM),l8e=Ni({},FM,{dataTransfer:0}),c8e=Wl(l8e),f8e=Ni({},FI,{relatedTarget:0}),z5=Wl(f8e),d8e=Ni({},Rx,{animationName:0,elapsedTime:0,pseudoElement:0}),h8e=Wl(d8e),p8e=Ni({},Rx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),m8e=Wl(p8e),g8e=Ni({},Rx,{data:0}),Nie=Wl(g8e),y8e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},v8e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b8e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _8e(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=b8e[e])?!!t[e]:!1}function Nq(){return _8e}var w8e=Ni({},FI,{key:function(e){if(e.key){var t=y8e[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=MP(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?v8e[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nq,charCode:function(e){return e.type==="keypress"?MP(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?MP(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),E8e=Wl(w8e),x8e=Ni({},FM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pie=Wl(x8e),S8e=Ni({},FI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nq}),T8e=Wl(S8e),A8e=Ni({},Rx,{propertyName:0,elapsedTime:0,pseudoElement:0}),C8e=Wl(A8e),I8e=Ni({},FM,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),k8e=Wl(I8e),R8e=[9,13,27,32],Pq=im&&"CompositionEvent"in window,K2=null;im&&"documentMode"in document&&(K2=document.documentMode);var N8e=im&&"TextEvent"in window&&!K2,Pye=im&&(!Pq||K2&&8<K2&&11>=K2),Die=" ",Oie=!1;function Dye(e,t){switch(e){case"keyup":return R8e.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oye(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var tw=!1;function P8e(e,t){switch(e){case"compositionend":return Oye(t);case"keypress":return t.which!==32?null:(Oie=!0,Die);case"textInput":return e=t.data,e===Die&&Oie?null:e;default:return null}}function D8e(e,t){if(tw)return e==="compositionend"||!Pq&&Dye(e,t)?(e=Nye(),$P=kq=zg=null,tw=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pye&&t.locale!=="ko"?null:t.data;default:return null}}var O8e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $ie(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!O8e[e.type]:t==="textarea"}function $ye(e,t,n,r){dye(r),t=sO(t,"onChange"),0<t.length&&(n=new Rq("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var X2=null,JA=null;function $8e(e){Wye(e,0)}function jM(e){var t=iw(e);if(sye(t))return e}function M8e(e,t){if(e==="change")return t}var Mye=!1;if(im){var V5;if(im){var H5="oninput"in document;if(!H5){var Mie=document.createElement("div");Mie.setAttribute("oninput","return;"),H5=typeof Mie.oninput=="function"}V5=H5}else V5=!1;Mye=V5&&(!document.documentMode||9<document.documentMode)}function Lie(){X2&&(X2.detachEvent("onpropertychange",Lye),JA=X2=null)}function Lye(e){if(e.propertyName==="value"&&jM(JA)){var t=[];$ye(t,JA,e,Sq(e)),gye($8e,t)}}function L8e(e,t,n){e==="focusin"?(Lie(),X2=t,JA=n,X2.attachEvent("onpropertychange",Lye)):e==="focusout"&&Lie()}function F8e(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return jM(JA)}function j8e(e,t){if(e==="click")return jM(t)}function B8e(e,t){if(e==="input"||e==="change")return jM(t)}function U8e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ff=typeof Object.is=="function"?Object.is:U8e;function ZA(e,t){if(Ff(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!kB.call(t,i)||!Ff(e[i],t[i]))return!1}return!0}function Fie(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jie(e,t){var n=Fie(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fie(n)}}function Fye(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Fye(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jye(){for(var e=window,t=JD();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=JD(e.document)}return t}function Dq(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function z8e(e){var t=jye(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Fye(n.ownerDocument.documentElement,n)){if(r!==null&&Dq(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=jie(n,s);var o=jie(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var V8e=im&&"documentMode"in document&&11>=document.documentMode,nw=null,YB=null,Q2=null,KB=!1;function Bie(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;KB||nw==null||nw!==JD(r)||(r=nw,"selectionStart"in r&&Dq(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Q2&&ZA(Q2,r)||(Q2=r,r=sO(YB,"onSelect"),0<r.length&&(t=new Rq("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=nw)))}function QR(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var rw={animationend:QR("Animation","AnimationEnd"),animationiteration:QR("Animation","AnimationIteration"),animationstart:QR("Animation","AnimationStart"),transitionend:QR("Transition","TransitionEnd")},q5={},Bye={};im&&(Bye=document.createElement("div").style,"AnimationEvent"in window||(delete rw.animationend.animation,delete rw.animationiteration.animation,delete rw.animationstart.animation),"TransitionEvent"in window||delete rw.transitionend.transition);function BM(e){if(q5[e])return q5[e];if(!rw[e])return e;var t=rw[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Bye)return q5[e]=t[n];return e}var Uye=BM("animationend"),zye=BM("animationiteration"),Vye=BM("animationstart"),Hye=BM("transitionend"),qye=new Map,Uie="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yy(e,t){qye.set(e,t),_b(t,[e])}for(var W5=0;W5<Uie.length;W5++){var G5=Uie[W5],H8e=G5.toLowerCase(),q8e=G5[0].toUpperCase()+G5.slice(1);yy(H8e,"on"+q8e)}yy(Uye,"onAnimationEnd");yy(zye,"onAnimationIteration");yy(Vye,"onAnimationStart");yy("dblclick","onDoubleClick");yy("focusin","onFocus");yy("focusout","onBlur");yy(Hye,"onTransitionEnd");fE("onMouseEnter",["mouseout","mouseover"]);fE("onMouseLeave",["mouseout","mouseover"]);fE("onPointerEnter",["pointerout","pointerover"]);fE("onPointerLeave",["pointerout","pointerover"]);_b("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_b("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_b("onBeforeInput",["compositionend","keypress","textInput","paste"]);_b("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_b("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_b("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var i2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W8e=new Set("cancel close invalid load scroll toggle".split(" ").concat(i2));function zie(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Hje(r,t,void 0,e),e.currentTarget=null}function Wye(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;zie(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;zie(i,a,l),s=u}}}if(eO)throw e=HB,eO=!1,HB=null,e}function ii(e,t){var n=t[eU];n===void 0&&(n=t[eU]=new Set);var r=e+"__bubble";n.has(r)||(Gye(t,e,2,!1),n.add(r))}function Y5(e,t,n){var r=0;t&&(r|=4),Gye(n,e,r,t)}var JR="_reactListening"+Math.random().toString(36).slice(2);function eC(e){if(!e[JR]){e[JR]=!0,eye.forEach(function(n){n!=="selectionchange"&&(W8e.has(n)||Y5(n,!1,e),Y5(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[JR]||(t[JR]=!0,Y5("selectionchange",!1,t))}}function Gye(e,t,n,r){switch(Rye(t)){case 1:var i=o8e;break;case 4:i=a8e;break;default:i=Iq}n=i.bind(null,t,n,e),i=void 0,!VB||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function K5(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=qv(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}gye(function(){var l=s,c=Sq(n),f=[];e:{var d=qye.get(e);if(d!==void 0){var h=Rq,p=e;switch(e){case"keypress":if(MP(n)===0)break e;case"keydown":case"keyup":h=E8e;break;case"focusin":p="focus",h=z5;break;case"focusout":p="blur",h=z5;break;case"beforeblur":case"afterblur":h=z5;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Rie;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=c8e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=T8e;break;case Uye:case zye:case Vye:h=h8e;break;case Hye:h=C8e;break;case"scroll":h=u8e;break;case"wheel":h=k8e;break;case"copy":case"cut":case"paste":h=m8e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Pie}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=YA(v,y),w!=null&&m.push(tC(v,w,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==UB&&(p=n.relatedTarget||n.fromElement)&&(qv(p)||p[sm]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?qv(p):null,p!==null&&(g=wb(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=Rie,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=Pie,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:iw(h),b=p==null?d:iw(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,w=null,qv(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=f_(b))v++;for(b=0,w=y;w;w=f_(w))b++;for(;0<v-b;)m=f_(m),v--;for(;0<b-v;)y=f_(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=f_(m),y=f_(y)}m=null}else m=null;h!==null&&Vie(f,d,h,m,!1),p!==null&&g!==null&&Vie(f,g,p,m,!0)}}e:{if(d=l?iw(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=M8e;else if($ie(d))if(Mye)E=B8e;else{E=F8e;var T=L8e}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=j8e);if(E&&(E=E(e,l))){$ye(f,E,n,c);break e}T&&T(e,d,l),e==="focusout"&&(T=d._wrapperState)&&T.controlled&&d.type==="number"&&MB(d,"number",d.value)}switch(T=l?iw(l):window,e){case"focusin":($ie(T)||T.contentEditable==="true")&&(nw=T,YB=l,Q2=null);break;case"focusout":Q2=YB=nw=null;break;case"mousedown":KB=!0;break;case"contextmenu":case"mouseup":case"dragend":KB=!1,Bie(f,n,c);break;case"selectionchange":if(V8e)break;case"keydown":case"keyup":Bie(f,n,c)}var S;if(Pq)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else tw?Dye(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Pye&&n.locale!=="ko"&&(tw||A!=="onCompositionStart"?A==="onCompositionEnd"&&tw&&(S=Nye()):(zg=c,kq="value"in zg?zg.value:zg.textContent,tw=!0)),T=sO(l,A),0<T.length&&(A=new Nie(A,e,null,n,c),f.push({event:A,listeners:T}),S?A.data=S:(S=Oye(n),S!==null&&(A.data=S)))),(S=N8e?P8e(e,n):D8e(e,n))&&(l=sO(l,"onBeforeInput"),0<l.length&&(c=new Nie("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=S))}Wye(f,t)})}function tC(e,t,n){return{instance:e,listener:t,currentTarget:n}}function sO(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=YA(e,n),s!=null&&r.unshift(tC(e,s,i)),s=YA(e,t),s!=null&&r.push(tC(e,s,i))),e=e.return}return r}function f_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Vie(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=YA(n,s),u!=null&&o.unshift(tC(n,u,a))):i||(u=YA(n,s),u!=null&&o.push(tC(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var G8e=/\r\n?/g,Y8e=/\u0000|\uFFFD/g;function Hie(e){return(typeof e=="string"?e:""+e).replace(G8e,`
`).replace(Y8e,"")}function ZR(e,t,n){if(t=Hie(t),Hie(e)!==t&&n)throw Error(rt(425))}function oO(){}var XB=null,QB=null;function JB(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ZB=typeof setTimeout=="function"?setTimeout:void 0,K8e=typeof clearTimeout=="function"?clearTimeout:void 0,qie=typeof Promise=="function"?Promise:void 0,X8e=typeof queueMicrotask=="function"?queueMicrotask:typeof qie<"u"?function(e){return qie.resolve(null).then(e).catch(Q8e)}:ZB;function Q8e(e){setTimeout(function(){throw e})}function X5(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),QA(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);QA(t)}function a0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Wie(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Nx=Math.random().toString(36).slice(2),Rd="__reactFiber$"+Nx,nC="__reactProps$"+Nx,sm="__reactContainer$"+Nx,eU="__reactEvents$"+Nx,J8e="__reactListeners$"+Nx,Z8e="__reactHandles$"+Nx;function qv(e){var t=e[Rd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[sm]||n[Rd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Wie(e);e!==null;){if(n=e[Rd])return n;e=Wie(e)}return t}e=n,n=e.parentNode}return null}function jI(e){return e=e[Rd]||e[sm],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function iw(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(rt(33))}function UM(e){return e[nC]||null}var tU=[],sw=-1;function vy(e){return{current:e}}function li(e){0>sw||(e.current=tU[sw],tU[sw]=null,sw--)}function Zr(e,t){sw++,tU[sw]=e.current,e.current=t}var N0={},ga=vy(N0),Ou=vy(!1),I1=N0;function dE(e,t){var n=e.type.contextTypes;if(!n)return N0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function $u(e){return e=e.childContextTypes,e!=null}function aO(){li(Ou),li(ga)}function Gie(e,t,n){if(ga.current!==N0)throw Error(rt(168));Zr(ga,t),Zr(Ou,n)}function Yye(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(rt(108,Lje(e)||"Unknown",i));return Ni({},n,r)}function uO(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||N0,I1=ga.current,Zr(ga,e),Zr(Ou,Ou.current),!0}function Yie(e,t,n){var r=e.stateNode;if(!r)throw Error(rt(169));n?(e=Yye(e,t,I1),r.__reactInternalMemoizedMergedChildContext=e,li(Ou),li(ga),Zr(ga,e)):li(Ou),Zr(Ou,n)}var xp=null,zM=!1,Q5=!1;function Kye(e){xp===null?xp=[e]:xp.push(e)}function e9e(e){zM=!0,Kye(e)}function by(){if(!Q5&&xp!==null){Q5=!0;var e=0,t=Pr;try{var n=xp;for(Pr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}xp=null,zM=!1}catch(i){throw xp!==null&&(xp=xp.slice(e+1)),_ye(Tq,by),i}finally{Pr=t,Q5=!1}}return null}var ow=[],aw=0,lO=null,cO=0,uc=[],lc=0,k1=null,$p=1,Mp="";function gv(e,t){ow[aw++]=cO,ow[aw++]=lO,lO=e,cO=t}function Xye(e,t,n){uc[lc++]=$p,uc[lc++]=Mp,uc[lc++]=k1,k1=e;var r=$p;e=Mp;var i=32-Rf(r)-1;r&=~(1<<i),n+=1;var s=32-Rf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$p=1<<32-Rf(t)+i|n<<i|r,Mp=s+e}else $p=1<<s|n<<i|r,Mp=e}function Oq(e){e.return!==null&&(gv(e,1),Xye(e,1,0))}function $q(e){for(;e===lO;)lO=ow[--aw],ow[aw]=null,cO=ow[--aw],ow[aw]=null;for(;e===k1;)k1=uc[--lc],uc[lc]=null,Mp=uc[--lc],uc[lc]=null,$p=uc[--lc],uc[lc]=null}var Tl=null,yl=null,bi=!1,df=null;function Qye(e,t){var n=gc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Kie(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Tl=e,yl=a0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Tl=e,yl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=k1!==null?{id:$p,overflow:Mp}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=gc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Tl=e,yl=null,!0):!1;default:return!1}}function nU(e){return(e.mode&1)!==0&&(e.flags&128)===0}function rU(e){if(bi){var t=yl;if(t){var n=t;if(!Kie(e,t)){if(nU(e))throw Error(rt(418));t=a0(n.nextSibling);var r=Tl;t&&Kie(e,t)?Qye(r,n):(e.flags=e.flags&-4097|2,bi=!1,Tl=e)}}else{if(nU(e))throw Error(rt(418));e.flags=e.flags&-4097|2,bi=!1,Tl=e}}}function Xie(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Tl=e}function eN(e){if(e!==Tl)return!1;if(!bi)return Xie(e),bi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!JB(e.type,e.memoizedProps)),t&&(t=yl)){if(nU(e))throw Jye(),Error(rt(418));for(;t;)Qye(e,t),t=a0(t.nextSibling)}if(Xie(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(rt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){yl=a0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}yl=null}}else yl=Tl?a0(e.stateNode.nextSibling):null;return!0}function Jye(){for(var e=yl;e;)e=a0(e.nextSibling)}function hE(){yl=Tl=null,bi=!1}function Mq(e){df===null?df=[e]:df.push(e)}var t9e=Om.ReactCurrentBatchConfig;function sT(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(rt(309));var r=n.stateNode}if(!r)throw Error(rt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(rt(284));if(!n._owner)throw Error(rt(290,e))}return e}function tN(e,t){throw e=Object.prototype.toString.call(t),Error(rt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qie(e){var t=e._init;return t(e._payload)}function Zye(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=f0(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,w){return v===null||v.tag!==6?(v=ij(b,y.mode,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,w){var E=b.type;return E===ew?c(y,v,b.props.children,w,b.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Eg&&Qie(E)===v.type)?(w=i(v,b.props),w.ref=sT(y,v,b),w.return=y,w):(w=VP(b.type,b.key,b.props,null,y.mode,w),w.ref=sT(y,v,b),w.return=y,w)}function l(y,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=sj(b,y.mode,w),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,w,E){return v===null||v.tag!==7?(v=h1(b,y.mode,w,E),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=ij(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case HR:return b=VP(v.type,v.key,v.props,null,y.mode,b),b.ref=sT(y,null,v),b.return=y,b;case Z_:return v=sj(v,y.mode,b),v.return=y,v;case Eg:var w=v._init;return f(y,w(v._payload),b)}if(n2(v)||eT(v))return v=h1(v,y.mode,b,null),v.return=y,v;tN(y,v)}return null}function d(y,v,b,w){var E=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:a(y,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case HR:return b.key===E?u(y,v,b,w):null;case Z_:return b.key===E?l(y,v,b,w):null;case Eg:return E=b._init,d(y,v,E(b._payload),w)}if(n2(b)||eT(b))return E!==null?null:c(y,v,b,w,null);tN(y,b)}return null}function h(y,v,b,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case HR:return y=y.get(w.key===null?b:w.key)||null,u(v,y,w,E);case Z_:return y=y.get(w.key===null?b:w.key)||null,l(v,y,w,E);case Eg:var T=w._init;return h(y,v,b,T(w._payload),E)}if(n2(w)||eT(w))return y=y.get(b)||null,c(v,y,w,E,null);tN(v,w)}return null}function p(y,v,b,w){for(var E=null,T=null,S=v,A=v=0,C=null;S!==null&&A<b.length;A++){S.index>A?(C=S,S=null):C=S.sibling;var k=d(y,S,b[A],w);if(k===null){S===null&&(S=C);break}e&&S&&k.alternate===null&&t(y,S),v=s(k,v,A),T===null?E=k:T.sibling=k,T=k,S=C}if(A===b.length)return n(y,S),bi&&gv(y,A),E;if(S===null){for(;A<b.length;A++)S=f(y,b[A],w),S!==null&&(v=s(S,v,A),T===null?E=S:T.sibling=S,T=S);return bi&&gv(y,A),E}for(S=r(y,S);A<b.length;A++)C=h(S,y,A,b[A],w),C!==null&&(e&&C.alternate!==null&&S.delete(C.key===null?A:C.key),v=s(C,v,A),T===null?E=C:T.sibling=C,T=C);return e&&S.forEach(function(N){return t(y,N)}),bi&&gv(y,A),E}function m(y,v,b,w){var E=eT(b);if(typeof E!="function")throw Error(rt(150));if(b=E.call(b),b==null)throw Error(rt(151));for(var T=E=null,S=v,A=v=0,C=null,k=b.next();S!==null&&!k.done;A++,k=b.next()){S.index>A?(C=S,S=null):C=S.sibling;var N=d(y,S,k.value,w);if(N===null){S===null&&(S=C);break}e&&S&&N.alternate===null&&t(y,S),v=s(N,v,A),T===null?E=N:T.sibling=N,T=N,S=C}if(k.done)return n(y,S),bi&&gv(y,A),E;if(S===null){for(;!k.done;A++,k=b.next())k=f(y,k.value,w),k!==null&&(v=s(k,v,A),T===null?E=k:T.sibling=k,T=k);return bi&&gv(y,A),E}for(S=r(y,S);!k.done;A++,k=b.next())k=h(S,y,A,k.value,w),k!==null&&(e&&k.alternate!==null&&S.delete(k.key===null?A:k.key),v=s(k,v,A),T===null?E=k:T.sibling=k,T=k);return e&&S.forEach(function(O){return t(y,O)}),bi&&gv(y,A),E}function g(y,v,b,w){if(typeof b=="object"&&b!==null&&b.type===ew&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case HR:e:{for(var E=b.key,T=v;T!==null;){if(T.key===E){if(E=b.type,E===ew){if(T.tag===7){n(y,T.sibling),v=i(T,b.props.children),v.return=y,y=v;break e}}else if(T.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Eg&&Qie(E)===T.type){n(y,T.sibling),v=i(T,b.props),v.ref=sT(y,T,b),v.return=y,y=v;break e}n(y,T);break}else t(y,T);T=T.sibling}b.type===ew?(v=h1(b.props.children,y.mode,w,b.key),v.return=y,y=v):(w=VP(b.type,b.key,b.props,null,y.mode,w),w.ref=sT(y,v,b),w.return=y,y=w)}return o(y);case Z_:e:{for(T=b.key;v!==null;){if(v.key===T)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=sj(b,y.mode,w),v.return=y,y=v}return o(y);case Eg:return T=b._init,g(y,v,T(b._payload),w)}if(n2(b))return p(y,v,b,w);if(eT(b))return m(y,v,b,w);tN(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=ij(b,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var pE=Zye(!0),eve=Zye(!1),fO=vy(null),dO=null,uw=null,Lq=null;function Fq(){Lq=uw=dO=null}function jq(e){var t=fO.current;li(fO),e._currentValue=t}function iU(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function kw(e,t){dO=e,Lq=uw=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Iu=!0),e.firstContext=null)}function Sc(e){var t=e._currentValue;if(Lq!==e)if(e={context:e,memoizedValue:t,next:null},uw===null){if(dO===null)throw Error(rt(308));uw=e,dO.dependencies={lanes:0,firstContext:e}}else uw=uw.next=e;return t}var Wv=null;function Bq(e){Wv===null?Wv=[e]:Wv.push(e)}function tve(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Bq(t)):(n.next=i.next,i.next=n),t.interleaved=n,om(e,r)}function om(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var xg=!1;function Uq(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nve(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gp(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function u0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,or&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,om(e,n)}return i=r.interleaved,i===null?(t.next=t,Bq(r)):(t.next=i.next,i.next=t),r.interleaved=t,om(e,n)}function LP(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Aq(e,n)}}function Jie(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function hO(e,t,n,r){var i=e.updateQueue;xg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Ni({},f,d);break e;case 2:xg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);N1|=o,e.lanes=o,e.memoizedState=f}}function Zie(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(rt(191,i));i.call(r)}}}var BI={},Qd=vy(BI),rC=vy(BI),iC=vy(BI);function Gv(e){if(e===BI)throw Error(rt(174));return e}function zq(e,t){switch(Zr(iC,t),Zr(rC,e),Zr(Qd,BI),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:FB(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=FB(t,e)}li(Qd),Zr(Qd,t)}function mE(){li(Qd),li(rC),li(iC)}function rve(e){Gv(iC.current);var t=Gv(Qd.current),n=FB(t,e.type);t!==n&&(Zr(rC,e),Zr(Qd,n))}function Vq(e){rC.current===e&&(li(Qd),li(rC))}var ki=vy(0);function pO(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var J5=[];function Hq(){for(var e=0;e<J5.length;e++)J5[e]._workInProgressVersionPrimary=null;J5.length=0}var FP=Om.ReactCurrentDispatcher,Z5=Om.ReactCurrentBatchConfig,R1=0,Ri=null,As=null,Ys=null,mO=!1,J2=!1,sC=0,n9e=0;function qo(){throw Error(rt(321))}function qq(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ff(e[n],t[n]))return!1;return!0}function Wq(e,t,n,r,i,s){if(R1=s,Ri=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,FP.current=e===null||e.memoizedState===null?o9e:a9e,e=n(r,i),J2){s=0;do{if(J2=!1,sC=0,25<=s)throw Error(rt(301));s+=1,Ys=As=null,t.updateQueue=null,FP.current=u9e,e=n(r,i)}while(J2)}if(FP.current=gO,t=As!==null&&As.next!==null,R1=0,Ys=As=Ri=null,mO=!1,t)throw Error(rt(300));return e}function Gq(){var e=sC!==0;return sC=0,e}function _d(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ys===null?Ri.memoizedState=Ys=e:Ys=Ys.next=e,Ys}function Tc(){if(As===null){var e=Ri.alternate;e=e!==null?e.memoizedState:null}else e=As.next;var t=Ys===null?Ri.memoizedState:Ys.next;if(t!==null)Ys=t,As=e;else{if(e===null)throw Error(rt(310));As=e,e={memoizedState:As.memoizedState,baseState:As.baseState,baseQueue:As.baseQueue,queue:As.queue,next:null},Ys===null?Ri.memoizedState=Ys=e:Ys=Ys.next=e}return Ys}function oC(e,t){return typeof t=="function"?t(e):t}function ej(e){var t=Tc(),n=t.queue;if(n===null)throw Error(rt(311));n.lastRenderedReducer=e;var r=As,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((R1&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Ri.lanes|=c,N1|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Ff(r,t.memoizedState)||(Iu=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ri.lanes|=s,N1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function tj(e){var t=Tc(),n=t.queue;if(n===null)throw Error(rt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Ff(s,t.memoizedState)||(Iu=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function ive(){}function sve(e,t){var n=Ri,r=Tc(),i=t(),s=!Ff(r.memoizedState,i);if(s&&(r.memoizedState=i,Iu=!0),r=r.queue,Yq(uve.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Ys!==null&&Ys.memoizedState.tag&1){if(n.flags|=2048,aC(9,ave.bind(null,n,r,i,t),void 0,null),so===null)throw Error(rt(349));R1&30||ove(n,t,i)}return i}function ove(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ri.updateQueue,t===null?(t={lastEffect:null,stores:null},Ri.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ave(e,t,n,r){t.value=n,t.getSnapshot=r,lve(t)&&cve(e)}function uve(e,t,n){return n(function(){lve(t)&&cve(e)})}function lve(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ff(e,n)}catch{return!0}}function cve(e){var t=om(e,1);t!==null&&Nf(t,e,1,-1)}function ese(e){var t=_d();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oC,lastRenderedState:e},t.queue=e,e=e.dispatch=s9e.bind(null,Ri,e),[t.memoizedState,e]}function aC(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ri.updateQueue,t===null?(t={lastEffect:null,stores:null},Ri.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function fve(){return Tc().memoizedState}function jP(e,t,n,r){var i=_d();Ri.flags|=e,i.memoizedState=aC(1|t,n,void 0,r===void 0?null:r)}function VM(e,t,n,r){var i=Tc();r=r===void 0?null:r;var s=void 0;if(As!==null){var o=As.memoizedState;if(s=o.destroy,r!==null&&qq(r,o.deps)){i.memoizedState=aC(t,n,s,r);return}}Ri.flags|=e,i.memoizedState=aC(1|t,n,s,r)}function tse(e,t){return jP(8390656,8,e,t)}function Yq(e,t){return VM(2048,8,e,t)}function dve(e,t){return VM(4,2,e,t)}function hve(e,t){return VM(4,4,e,t)}function pve(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function mve(e,t,n){return n=n!=null?n.concat([e]):null,VM(4,4,pve.bind(null,t,e),n)}function Kq(){}function gve(e,t){var n=Tc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&qq(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function yve(e,t){var n=Tc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&qq(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function vve(e,t,n){return R1&21?(Ff(n,t)||(n=xye(),Ri.lanes|=n,N1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Iu=!0),e.memoizedState=n)}function r9e(e,t){var n=Pr;Pr=n!==0&&4>n?n:4,e(!0);var r=Z5.transition;Z5.transition={};try{e(!1),t()}finally{Pr=n,Z5.transition=r}}function bve(){return Tc().memoizedState}function i9e(e,t,n){var r=c0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_ve(e))wve(t,n);else if(n=tve(e,t,n,r),n!==null){var i=za();Nf(n,e,r,i),Eve(n,t,r)}}function s9e(e,t,n){var r=c0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_ve(e))wve(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ff(a,o)){var u=t.interleaved;u===null?(i.next=i,Bq(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=tve(e,t,i,r),n!==null&&(i=za(),Nf(n,e,r,i),Eve(n,t,r))}}function _ve(e){var t=e.alternate;return e===Ri||t!==null&&t===Ri}function wve(e,t){J2=mO=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Eve(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Aq(e,n)}}var gO={readContext:Sc,useCallback:qo,useContext:qo,useEffect:qo,useImperativeHandle:qo,useInsertionEffect:qo,useLayoutEffect:qo,useMemo:qo,useReducer:qo,useRef:qo,useState:qo,useDebugValue:qo,useDeferredValue:qo,useTransition:qo,useMutableSource:qo,useSyncExternalStore:qo,useId:qo,unstable_isNewReconciler:!1},o9e={readContext:Sc,useCallback:function(e,t){return _d().memoizedState=[e,t===void 0?null:t],e},useContext:Sc,useEffect:tse,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,jP(4194308,4,pve.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jP(4194308,4,e,t)},useInsertionEffect:function(e,t){return jP(4,2,e,t)},useMemo:function(e,t){var n=_d();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_d();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=i9e.bind(null,Ri,e),[r.memoizedState,e]},useRef:function(e){var t=_d();return e={current:e},t.memoizedState=e},useState:ese,useDebugValue:Kq,useDeferredValue:function(e){return _d().memoizedState=e},useTransition:function(){var e=ese(!1),t=e[0];return e=r9e.bind(null,e[1]),_d().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ri,i=_d();if(bi){if(n===void 0)throw Error(rt(407));n=n()}else{if(n=t(),so===null)throw Error(rt(349));R1&30||ove(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,tse(uve.bind(null,r,s,e),[e]),r.flags|=2048,aC(9,ave.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=_d(),t=so.identifierPrefix;if(bi){var n=Mp,r=$p;n=(r&~(1<<32-Rf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=sC++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=n9e++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},a9e={readContext:Sc,useCallback:gve,useContext:Sc,useEffect:Yq,useImperativeHandle:mve,useInsertionEffect:dve,useLayoutEffect:hve,useMemo:yve,useReducer:ej,useRef:fve,useState:function(){return ej(oC)},useDebugValue:Kq,useDeferredValue:function(e){var t=Tc();return vve(t,As.memoizedState,e)},useTransition:function(){var e=ej(oC)[0],t=Tc().memoizedState;return[e,t]},useMutableSource:ive,useSyncExternalStore:sve,useId:bve,unstable_isNewReconciler:!1},u9e={readContext:Sc,useCallback:gve,useContext:Sc,useEffect:Yq,useImperativeHandle:mve,useInsertionEffect:dve,useLayoutEffect:hve,useMemo:yve,useReducer:tj,useRef:fve,useState:function(){return tj(oC)},useDebugValue:Kq,useDeferredValue:function(e){var t=Tc();return As===null?t.memoizedState=e:vve(t,As.memoizedState,e)},useTransition:function(){var e=tj(oC)[0],t=Tc().memoizedState;return[e,t]},useMutableSource:ive,useSyncExternalStore:sve,useId:bve,unstable_isNewReconciler:!1};function of(e,t){if(e&&e.defaultProps){t=Ni({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function sU(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ni({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var HM={isMounted:function(e){return(e=e._reactInternals)?wb(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=za(),i=c0(e),s=Gp(r,i);s.payload=t,n!=null&&(s.callback=n),t=u0(e,s,i),t!==null&&(Nf(t,e,i,r),LP(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=za(),i=c0(e),s=Gp(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=u0(e,s,i),t!==null&&(Nf(t,e,i,r),LP(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=za(),r=c0(e),i=Gp(n,r);i.tag=2,t!=null&&(i.callback=t),t=u0(e,i,r),t!==null&&(Nf(t,e,r,n),LP(t,e,r))}};function nse(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!ZA(n,r)||!ZA(i,s):!0}function xve(e,t,n){var r=!1,i=N0,s=t.contextType;return typeof s=="object"&&s!==null?s=Sc(s):(i=$u(t)?I1:ga.current,r=t.contextTypes,s=(r=r!=null)?dE(e,i):N0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=HM,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function rse(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&HM.enqueueReplaceState(t,t.state,null)}function oU(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Uq(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Sc(s):(s=$u(t)?I1:ga.current,i.context=dE(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(sU(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&HM.enqueueReplaceState(i,i.state,null),hO(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function gE(e,t){try{var n="",r=t;do n+=Mje(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function nj(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function aU(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var l9e=typeof WeakMap=="function"?WeakMap:Map;function Sve(e,t,n){n=Gp(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){vO||(vO=!0,yU=r),aU(e,t)},n}function Tve(e,t,n){n=Gp(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){aU(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){aU(e,t),typeof r!="function"&&(l0===null?l0=new Set([this]):l0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function ise(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new l9e;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=x9e.bind(null,e,t,n),t.then(e,e))}function sse(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ose(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Gp(-1,1),t.tag=2,u0(n,t,1))),n.lanes|=1),e)}var c9e=Om.ReactCurrentOwner,Iu=!1;function Pa(e,t,n,r){t.child=e===null?eve(t,null,n,r):pE(t,e.child,n,r)}function ase(e,t,n,r,i){n=n.render;var s=t.ref;return kw(t,i),r=Wq(e,t,n,r,s,i),n=Gq(),e!==null&&!Iu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,am(e,t,i)):(bi&&n&&Oq(t),t.flags|=1,Pa(e,t,r,i),t.child)}function use(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!rW(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Ave(e,t,s,r,i)):(e=VP(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ZA,n(o,r)&&e.ref===t.ref)return am(e,t,i)}return t.flags|=1,e=f0(s,r),e.ref=t.ref,e.return=t,t.child=e}function Ave(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(ZA(s,r)&&e.ref===t.ref)if(Iu=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Iu=!0);else return t.lanes=e.lanes,am(e,t,i)}return uU(e,t,n,r,i)}function Cve(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zr(cw,cl),cl|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Zr(cw,cl),cl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Zr(cw,cl),cl|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Zr(cw,cl),cl|=r;return Pa(e,t,i,n),t.child}function Ive(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function uU(e,t,n,r,i){var s=$u(n)?I1:ga.current;return s=dE(t,s),kw(t,i),n=Wq(e,t,n,r,s,i),r=Gq(),e!==null&&!Iu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,am(e,t,i)):(bi&&r&&Oq(t),t.flags|=1,Pa(e,t,n,i),t.child)}function lse(e,t,n,r,i){if($u(n)){var s=!0;uO(t)}else s=!1;if(kw(t,i),t.stateNode===null)BP(e,t),xve(t,n,r),oU(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Sc(l):(l=$u(n)?I1:ga.current,l=dE(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&rse(t,o,r,l),xg=!1;var d=t.memoizedState;o.state=d,hO(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Ou.current||xg?(typeof c=="function"&&(sU(t,n,c,r),u=t.memoizedState),(a=xg||nse(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,nve(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:of(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Sc(u):(u=$u(n)?I1:ga.current,u=dE(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&rse(t,o,r,u),xg=!1,d=t.memoizedState,o.state=d,hO(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Ou.current||xg?(typeof h=="function"&&(sU(t,n,h,r),p=t.memoizedState),(l=xg||nse(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return lU(e,t,n,r,s,i)}function lU(e,t,n,r,i,s){Ive(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Yie(t,n,!1),am(e,t,s);r=t.stateNode,c9e.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=pE(t,e.child,null,s),t.child=pE(t,null,a,s)):Pa(e,t,a,s),t.memoizedState=r.state,i&&Yie(t,n,!0),t.child}function kve(e){var t=e.stateNode;t.pendingContext?Gie(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Gie(e,t.context,!1),zq(e,t.containerInfo)}function cse(e,t,n,r,i){return hE(),Mq(i),t.flags|=256,Pa(e,t,n,r),t.child}var cU={dehydrated:null,treeContext:null,retryLane:0};function fU(e){return{baseLanes:e,cachePool:null,transitions:null}}function Rve(e,t,n){var r=t.pendingProps,i=ki.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Zr(ki,i&1),e===null)return rU(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=GM(o,r,0,null),e=h1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=fU(n),t.memoizedState=cU,e):Xq(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return f9e(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=f0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=f0(a,s):(s=h1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?fU(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=cU,r}return s=e.child,e=s.sibling,r=f0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Xq(e,t){return t=GM({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function nN(e,t,n,r){return r!==null&&Mq(r),pE(t,e.child,null,n),e=Xq(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function f9e(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=nj(Error(rt(422))),nN(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=GM({mode:"visible",children:r.children},i,0,null),s=h1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&pE(t,e.child,null,o),t.child.memoizedState=fU(o),t.memoizedState=cU,s);if(!(t.mode&1))return nN(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(rt(419)),r=nj(s,r,void 0),nN(e,t,o,r)}if(a=(o&e.childLanes)!==0,Iu||a){if(r=so,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,om(e,i),Nf(r,e,i,-1))}return nW(),r=nj(Error(rt(421))),nN(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=S9e.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,yl=a0(i.nextSibling),Tl=t,bi=!0,df=null,e!==null&&(uc[lc++]=$p,uc[lc++]=Mp,uc[lc++]=k1,$p=e.id,Mp=e.overflow,k1=t),t=Xq(t,r.children),t.flags|=4096,t)}function fse(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),iU(e.return,t,n)}function rj(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Nve(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Pa(e,t,r.children,n),r=ki.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fse(e,n,t);else if(e.tag===19)fse(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Zr(ki,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&pO(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rj(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&pO(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rj(t,!0,n,null,s);break;case"together":rj(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function BP(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function am(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),N1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(rt(153));if(t.child!==null){for(e=t.child,n=f0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=f0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function d9e(e,t,n){switch(t.tag){case 3:kve(t),hE();break;case 5:rve(t);break;case 1:$u(t.type)&&uO(t);break;case 4:zq(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Zr(fO,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Zr(ki,ki.current&1),t.flags|=128,null):n&t.child.childLanes?Rve(e,t,n):(Zr(ki,ki.current&1),e=am(e,t,n),e!==null?e.sibling:null);Zr(ki,ki.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Nve(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Zr(ki,ki.current),r)break;return null;case 22:case 23:return t.lanes=0,Cve(e,t,n)}return am(e,t,n)}var Pve,dU,Dve,Ove;Pve=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dU=function(){};Dve=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Gv(Qd.current);var s=null;switch(n){case"input":i=OB(e,i),r=OB(e,r),s=[];break;case"select":i=Ni({},i,{value:void 0}),r=Ni({},r,{value:void 0}),s=[];break;case"textarea":i=LB(e,i),r=LB(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=oO)}jB(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(WA.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(WA.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&ii("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};Ove=function(e,t,n,r){n!==r&&(t.flags|=4)};function oT(e,t){if(!bi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wo(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function h9e(e,t,n){var r=t.pendingProps;switch($q(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(t),null;case 1:return $u(t.type)&&aO(),Wo(t),null;case 3:return r=t.stateNode,mE(),li(Ou),li(ga),Hq(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(eN(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,df!==null&&(_U(df),df=null))),dU(e,t),Wo(t),null;case 5:Vq(t);var i=Gv(iC.current);if(n=t.type,e!==null&&t.stateNode!=null)Dve(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(rt(166));return Wo(t),null}if(e=Gv(Qd.current),eN(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Rd]=t,r[nC]=s,e=(t.mode&1)!==0,n){case"dialog":ii("cancel",r),ii("close",r);break;case"iframe":case"object":case"embed":ii("load",r);break;case"video":case"audio":for(i=0;i<i2.length;i++)ii(i2[i],r);break;case"source":ii("error",r);break;case"img":case"image":case"link":ii("error",r),ii("load",r);break;case"details":ii("toggle",r);break;case"input":_ie(r,s),ii("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ii("invalid",r);break;case"textarea":Eie(r,s),ii("invalid",r)}jB(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ZR(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ZR(r.textContent,a,e),i=["children",""+a]):WA.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ii("scroll",r)}switch(n){case"input":qR(r),wie(r,s,!0);break;case"textarea":qR(r),xie(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=oO)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=uye(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Rd]=t,e[nC]=r,Pve(e,t,!1,!1),t.stateNode=e;e:{switch(o=BB(n,r),n){case"dialog":ii("cancel",e),ii("close",e),i=r;break;case"iframe":case"object":case"embed":ii("load",e),i=r;break;case"video":case"audio":for(i=0;i<i2.length;i++)ii(i2[i],e);i=r;break;case"source":ii("error",e),i=r;break;case"img":case"image":case"link":ii("error",e),ii("load",e),i=r;break;case"details":ii("toggle",e),i=r;break;case"input":_ie(e,r),i=OB(e,r),ii("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ni({},r,{value:void 0}),ii("invalid",e);break;case"textarea":Eie(e,r),i=LB(e,r),ii("invalid",e);break;default:i=r}jB(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?fye(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&lye(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&GA(e,u):typeof u=="number"&&GA(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(WA.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ii("scroll",e):u!=null&&_q(e,s,u,o))}switch(n){case"input":qR(e),wie(e,r,!1);break;case"textarea":qR(e),xie(e);break;case"option":r.value!=null&&e.setAttribute("value",""+R0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Tw(e,!!r.multiple,s,!1):r.defaultValue!=null&&Tw(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=oO)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Wo(t),null;case 6:if(e&&t.stateNode!=null)Ove(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(rt(166));if(n=Gv(iC.current),Gv(Qd.current),eN(t)){if(r=t.stateNode,n=t.memoizedProps,r[Rd]=t,(s=r.nodeValue!==n)&&(e=Tl,e!==null))switch(e.tag){case 3:ZR(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ZR(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rd]=t,t.stateNode=r}return Wo(t),null;case 13:if(li(ki),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(bi&&yl!==null&&t.mode&1&&!(t.flags&128))Jye(),hE(),t.flags|=98560,s=!1;else if(s=eN(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(rt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(rt(317));s[Rd]=t}else hE(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Wo(t),s=!1}else df!==null&&(_U(df),df=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ki.current&1?Ps===0&&(Ps=3):nW())),t.updateQueue!==null&&(t.flags|=4),Wo(t),null);case 4:return mE(),dU(e,t),e===null&&eC(t.stateNode.containerInfo),Wo(t),null;case 10:return jq(t.type._context),Wo(t),null;case 17:return $u(t.type)&&aO(),Wo(t),null;case 19:if(li(ki),s=t.memoizedState,s===null)return Wo(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)oT(s,!1);else{if(Ps!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=pO(e),o!==null){for(t.flags|=128,oT(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Zr(ki,ki.current&1|2),t.child}e=e.sibling}s.tail!==null&&ns()>yE&&(t.flags|=128,r=!0,oT(s,!1),t.lanes=4194304)}else{if(!r)if(e=pO(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),oT(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!bi)return Wo(t),null}else 2*ns()-s.renderingStartTime>yE&&n!==1073741824&&(t.flags|=128,r=!0,oT(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ns(),t.sibling=null,n=ki.current,Zr(ki,r?n&1|2:n&1),t):(Wo(t),null);case 22:case 23:return tW(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?cl&1073741824&&(Wo(t),t.subtreeFlags&6&&(t.flags|=8192)):Wo(t),null;case 24:return null;case 25:return null}throw Error(rt(156,t.tag))}function p9e(e,t){switch($q(t),t.tag){case 1:return $u(t.type)&&aO(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mE(),li(Ou),li(ga),Hq(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Vq(t),null;case 13:if(li(ki),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(rt(340));hE()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return li(ki),null;case 4:return mE(),null;case 10:return jq(t.type._context),null;case 22:case 23:return tW(),null;case 24:return null;default:return null}}var rN=!1,ia=!1,m9e=typeof WeakSet=="function"?WeakSet:Set,St=null;function lw(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Bi(e,t,r)}else n.current=null}function hU(e,t,n){try{n()}catch(r){Bi(e,t,r)}}var dse=!1;function g9e(e,t){if(XB=rO,e=jye(),Dq(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(QB={focusedElem:e,selectionRange:n},rO=!1,St=t;St!==null;)if(t=St,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,St=e;else for(;St!==null;){t=St;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:of(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(rt(163))}}catch(w){Bi(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,St=e;break}St=t.return}return p=dse,dse=!1,p}function Z2(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&hU(t,n,s)}i=i.next}while(i!==r)}}function qM(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function pU(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function $ve(e){var t=e.alternate;t!==null&&(e.alternate=null,$ve(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Rd],delete t[nC],delete t[eU],delete t[J8e],delete t[Z8e])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Mve(e){return e.tag===5||e.tag===3||e.tag===4}function hse(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Mve(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=oO));else if(r!==4&&(e=e.child,e!==null))for(mU(e,t,n),e=e.sibling;e!==null;)mU(e,t,n),e=e.sibling}function gU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(gU(e,t,n),e=e.sibling;e!==null;)gU(e,t,n),e=e.sibling}var _o=null,uf=!1;function lg(e,t,n){for(n=n.child;n!==null;)Lve(e,t,n),n=n.sibling}function Lve(e,t,n){if(Xd&&typeof Xd.onCommitFiberUnmount=="function")try{Xd.onCommitFiberUnmount(LM,n)}catch{}switch(n.tag){case 5:ia||lw(n,t);case 6:var r=_o,i=uf;_o=null,lg(e,t,n),_o=r,uf=i,_o!==null&&(uf?(e=_o,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):_o.removeChild(n.stateNode));break;case 18:_o!==null&&(uf?(e=_o,n=n.stateNode,e.nodeType===8?X5(e.parentNode,n):e.nodeType===1&&X5(e,n),QA(e)):X5(_o,n.stateNode));break;case 4:r=_o,i=uf,_o=n.stateNode.containerInfo,uf=!0,lg(e,t,n),_o=r,uf=i;break;case 0:case 11:case 14:case 15:if(!ia&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&hU(n,t,o),i=i.next}while(i!==r)}lg(e,t,n);break;case 1:if(!ia&&(lw(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Bi(n,t,a)}lg(e,t,n);break;case 21:lg(e,t,n);break;case 22:n.mode&1?(ia=(r=ia)||n.memoizedState!==null,lg(e,t,n),ia=r):lg(e,t,n);break;default:lg(e,t,n)}}function pse(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new m9e),t.forEach(function(r){var i=T9e.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Yc(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:_o=a.stateNode,uf=!1;break e;case 3:_o=a.stateNode.containerInfo,uf=!0;break e;case 4:_o=a.stateNode.containerInfo,uf=!0;break e}a=a.return}if(_o===null)throw Error(rt(160));Lve(s,o,i),_o=null,uf=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Bi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Fve(t,e),t=t.sibling}function Fve(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yc(t,e),dd(e),r&4){try{Z2(3,e,e.return),qM(3,e)}catch(m){Bi(e,e.return,m)}try{Z2(5,e,e.return)}catch(m){Bi(e,e.return,m)}}break;case 1:Yc(t,e),dd(e),r&512&&n!==null&&lw(n,n.return);break;case 5:if(Yc(t,e),dd(e),r&512&&n!==null&&lw(n,n.return),e.flags&32){var i=e.stateNode;try{GA(i,"")}catch(m){Bi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&oye(i,s),BB(a,o);var l=BB(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?fye(i,f):c==="dangerouslySetInnerHTML"?lye(i,f):c==="children"?GA(i,f):_q(i,c,f,l)}switch(a){case"input":$B(i,s);break;case"textarea":aye(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Tw(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Tw(i,!!s.multiple,s.defaultValue,!0):Tw(i,!!s.multiple,s.multiple?[]:"",!1))}i[nC]=s}catch(m){Bi(e,e.return,m)}}break;case 6:if(Yc(t,e),dd(e),r&4){if(e.stateNode===null)throw Error(rt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Bi(e,e.return,m)}}break;case 3:if(Yc(t,e),dd(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{QA(t.containerInfo)}catch(m){Bi(e,e.return,m)}break;case 4:Yc(t,e),dd(e);break;case 13:Yc(t,e),dd(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Zq=ns())),r&4&&pse(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ia=(l=ia)||c,Yc(t,e),ia=l):Yc(t,e),dd(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(St=e,c=e.child;c!==null;){for(f=St=c;St!==null;){switch(d=St,h=d.child,d.tag){case 0:case 11:case 14:case 15:Z2(4,d,d.return);break;case 1:lw(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Bi(r,n,m)}}break;case 5:lw(d,d.return);break;case 22:if(d.memoizedState!==null){gse(f);continue}}h!==null?(h.return=d,St=h):gse(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=cye("display",o))}catch(m){Bi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Bi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Yc(t,e),dd(e),r&4&&pse(e);break;case 21:break;default:Yc(t,e),dd(e)}}function dd(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Mve(n)){var r=n;break e}n=n.return}throw Error(rt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(GA(i,""),r.flags&=-33);var s=hse(e);gU(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=hse(e);mU(e,a,o);break;default:throw Error(rt(161))}}catch(u){Bi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function y9e(e,t,n){St=e,jve(e)}function jve(e,t,n){for(var r=(e.mode&1)!==0;St!==null;){var i=St,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||rN;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||ia;a=rN;var l=ia;if(rN=o,(ia=u)&&!l)for(St=i;St!==null;)o=St,u=o.child,o.tag===22&&o.memoizedState!==null?yse(i):u!==null?(u.return=o,St=u):yse(i);for(;s!==null;)St=s,jve(s),s=s.sibling;St=i,rN=a,ia=l}mse(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,St=s):mse(e)}}function mse(e){for(;St!==null;){var t=St;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ia||qM(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ia)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:of(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Zie(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Zie(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&QA(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(rt(163))}ia||t.flags&512&&pU(t)}catch(d){Bi(t,t.return,d)}}if(t===e){St=null;break}if(n=t.sibling,n!==null){n.return=t.return,St=n;break}St=t.return}}function gse(e){for(;St!==null;){var t=St;if(t===e){St=null;break}var n=t.sibling;if(n!==null){n.return=t.return,St=n;break}St=t.return}}function yse(e){for(;St!==null;){var t=St;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{qM(4,t)}catch(u){Bi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Bi(t,i,u)}}var s=t.return;try{pU(t)}catch(u){Bi(t,s,u)}break;case 5:var o=t.return;try{pU(t)}catch(u){Bi(t,o,u)}}}catch(u){Bi(t,t.return,u)}if(t===e){St=null;break}var a=t.sibling;if(a!==null){a.return=t.return,St=a;break}St=t.return}}var v9e=Math.ceil,yO=Om.ReactCurrentDispatcher,Qq=Om.ReactCurrentOwner,wc=Om.ReactCurrentBatchConfig,or=0,so=null,vs=null,Io=0,cl=0,cw=vy(0),Ps=0,uC=null,N1=0,WM=0,Jq=0,eA=null,_u=null,Zq=0,yE=1/0,vp=null,vO=!1,yU=null,l0=null,iN=!1,Vg=null,bO=0,tA=0,vU=null,UP=-1,zP=0;function za(){return or&6?ns():UP!==-1?UP:UP=ns()}function c0(e){return e.mode&1?or&2&&Io!==0?Io&-Io:t9e.transition!==null?(zP===0&&(zP=xye()),zP):(e=Pr,e!==0||(e=window.event,e=e===void 0?16:Rye(e.type)),e):1}function Nf(e,t,n,r){if(50<tA)throw tA=0,vU=null,Error(rt(185));LI(e,n,r),(!(or&2)||e!==so)&&(e===so&&(!(or&2)&&(WM|=n),Ps===4&&Dg(e,Io)),Mu(e,r),n===1&&or===0&&!(t.mode&1)&&(yE=ns()+500,zM&&by()))}function Mu(e,t){var n=e.callbackNode;t8e(e,t);var r=nO(e,e===so?Io:0);if(r===0)n!==null&&Aie(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Aie(n),t===1)e.tag===0?e9e(vse.bind(null,e)):Kye(vse.bind(null,e)),X8e(function(){!(or&6)&&by()}),n=null;else{switch(Sye(r)){case 1:n=Tq;break;case 4:n=wye;break;case 16:n=tO;break;case 536870912:n=Eye;break;default:n=tO}n=Gve(n,Bve.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Bve(e,t){if(UP=-1,zP=0,or&6)throw Error(rt(327));var n=e.callbackNode;if(Rw()&&e.callbackNode!==n)return null;var r=nO(e,e===so?Io:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=_O(e,r);else{t=r;var i=or;or|=2;var s=zve();(so!==e||Io!==t)&&(vp=null,yE=ns()+500,d1(e,t));do try{w9e();break}catch(a){Uve(e,a)}while(!0);Fq(),yO.current=s,or=i,vs!==null?t=0:(so=null,Io=0,t=Ps)}if(t!==0){if(t===2&&(i=qB(e),i!==0&&(r=i,t=bU(e,i))),t===1)throw n=uC,d1(e,0),Dg(e,r),Mu(e,ns()),n;if(t===6)Dg(e,r);else{if(i=e.current.alternate,!(r&30)&&!b9e(i)&&(t=_O(e,r),t===2&&(s=qB(e),s!==0&&(r=s,t=bU(e,s))),t===1))throw n=uC,d1(e,0),Dg(e,r),Mu(e,ns()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(rt(345));case 2:yv(e,_u,vp);break;case 3:if(Dg(e,r),(r&130023424)===r&&(t=Zq+500-ns(),10<t)){if(nO(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){za(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ZB(yv.bind(null,e,_u,vp),t);break}yv(e,_u,vp);break;case 4:if(Dg(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Rf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ns()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*v9e(r/1960))-r,10<r){e.timeoutHandle=ZB(yv.bind(null,e,_u,vp),r);break}yv(e,_u,vp);break;case 5:yv(e,_u,vp);break;default:throw Error(rt(329))}}}return Mu(e,ns()),e.callbackNode===n?Bve.bind(null,e):null}function bU(e,t){var n=eA;return e.current.memoizedState.isDehydrated&&(d1(e,t).flags|=256),e=_O(e,t),e!==2&&(t=_u,_u=n,t!==null&&_U(t)),e}function _U(e){_u===null?_u=e:_u.push.apply(_u,e)}function b9e(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ff(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dg(e,t){for(t&=~Jq,t&=~WM,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Rf(t),r=1<<n;e[n]=-1,t&=~r}}function vse(e){if(or&6)throw Error(rt(327));Rw();var t=nO(e,0);if(!(t&1))return Mu(e,ns()),null;var n=_O(e,t);if(e.tag!==0&&n===2){var r=qB(e);r!==0&&(t=r,n=bU(e,r))}if(n===1)throw n=uC,d1(e,0),Dg(e,t),Mu(e,ns()),n;if(n===6)throw Error(rt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yv(e,_u,vp),Mu(e,ns()),null}function eW(e,t){var n=or;or|=1;try{return e(t)}finally{or=n,or===0&&(yE=ns()+500,zM&&by())}}function P1(e){Vg!==null&&Vg.tag===0&&!(or&6)&&Rw();var t=or;or|=1;var n=wc.transition,r=Pr;try{if(wc.transition=null,Pr=1,e)return e()}finally{Pr=r,wc.transition=n,or=t,!(or&6)&&by()}}function tW(){cl=cw.current,li(cw)}function d1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,K8e(n)),vs!==null)for(n=vs.return;n!==null;){var r=n;switch($q(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&aO();break;case 3:mE(),li(Ou),li(ga),Hq();break;case 5:Vq(r);break;case 4:mE();break;case 13:li(ki);break;case 19:li(ki);break;case 10:jq(r.type._context);break;case 22:case 23:tW()}n=n.return}if(so=e,vs=e=f0(e.current,null),Io=cl=t,Ps=0,uC=null,Jq=WM=N1=0,_u=eA=null,Wv!==null){for(t=0;t<Wv.length;t++)if(n=Wv[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Wv=null}return e}function Uve(e,t){do{var n=vs;try{if(Fq(),FP.current=gO,mO){for(var r=Ri.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}mO=!1}if(R1=0,Ys=As=Ri=null,J2=!1,sC=0,Qq.current=null,n===null||n.return===null){Ps=1,uC=t,vs=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Io,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=sse(o);if(h!==null){h.flags&=-257,ose(h,o,a,s,t),h.mode&1&&ise(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){ise(s,l,t),nW();break e}u=Error(rt(426))}}else if(bi&&a.mode&1){var g=sse(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),ose(g,o,a,s,t),Mq(gE(u,a));break e}}s=u=gE(u,a),Ps!==4&&(Ps=2),eA===null?eA=[s]:eA.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=Sve(s,u,t);Jie(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(l0===null||!l0.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=Tve(s,a,t);Jie(s,w);break e}}s=s.return}while(s!==null)}Hve(n)}catch(E){t=E,vs===n&&n!==null&&(vs=n=n.return);continue}break}while(!0)}function zve(){var e=yO.current;return yO.current=gO,e===null?gO:e}function nW(){(Ps===0||Ps===3||Ps===2)&&(Ps=4),so===null||!(N1&268435455)&&!(WM&268435455)||Dg(so,Io)}function _O(e,t){var n=or;or|=2;var r=zve();(so!==e||Io!==t)&&(vp=null,d1(e,t));do try{_9e();break}catch(i){Uve(e,i)}while(!0);if(Fq(),or=n,yO.current=r,vs!==null)throw Error(rt(261));return so=null,Io=0,Ps}function _9e(){for(;vs!==null;)Vve(vs)}function w9e(){for(;vs!==null&&!Wje();)Vve(vs)}function Vve(e){var t=Wve(e.alternate,e,cl);e.memoizedProps=e.pendingProps,t===null?Hve(e):vs=t,Qq.current=null}function Hve(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=p9e(n,t),n!==null){n.flags&=32767,vs=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ps=6,vs=null;return}}else if(n=h9e(n,t,cl),n!==null){vs=n;return}if(t=t.sibling,t!==null){vs=t;return}vs=t=e}while(t!==null);Ps===0&&(Ps=5)}function yv(e,t,n){var r=Pr,i=wc.transition;try{wc.transition=null,Pr=1,E9e(e,t,n,r)}finally{wc.transition=i,Pr=r}return null}function E9e(e,t,n,r){do Rw();while(Vg!==null);if(or&6)throw Error(rt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(rt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(n8e(e,s),e===so&&(vs=so=null,Io=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||iN||(iN=!0,Gve(tO,function(){return Rw(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=wc.transition,wc.transition=null;var o=Pr;Pr=1;var a=or;or|=4,Qq.current=null,g9e(e,n),Fve(n,e),z8e(QB),rO=!!XB,QB=XB=null,e.current=n,y9e(n),Gje(),or=a,Pr=o,wc.transition=s}else e.current=n;if(iN&&(iN=!1,Vg=e,bO=i),s=e.pendingLanes,s===0&&(l0=null),Xje(n.stateNode),Mu(e,ns()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(vO)throw vO=!1,e=yU,yU=null,e;return bO&1&&e.tag!==0&&Rw(),s=e.pendingLanes,s&1?e===vU?tA++:(tA=0,vU=e):tA=0,by(),null}function Rw(){if(Vg!==null){var e=Sye(bO),t=wc.transition,n=Pr;try{if(wc.transition=null,Pr=16>e?16:e,Vg===null)var r=!1;else{if(e=Vg,Vg=null,bO=0,or&6)throw Error(rt(331));var i=or;for(or|=4,St=e.current;St!==null;){var s=St,o=s.child;if(St.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(St=l;St!==null;){var c=St;switch(c.tag){case 0:case 11:case 15:Z2(8,c,s)}var f=c.child;if(f!==null)f.return=c,St=f;else for(;St!==null;){c=St;var d=c.sibling,h=c.return;if($ve(c),c===l){St=null;break}if(d!==null){d.return=h,St=d;break}St=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}St=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,St=o;else e:for(;St!==null;){if(s=St,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Z2(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,St=y;break e}St=s.return}}var v=e.current;for(St=v;St!==null;){o=St;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,St=b;else e:for(o=v;St!==null;){if(a=St,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:qM(9,a)}}catch(E){Bi(a,a.return,E)}if(a===o){St=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,St=w;break e}St=a.return}}if(or=i,by(),Xd&&typeof Xd.onPostCommitFiberRoot=="function")try{Xd.onPostCommitFiberRoot(LM,e)}catch{}r=!0}return r}finally{Pr=n,wc.transition=t}}return!1}function bse(e,t,n){t=gE(n,t),t=Sve(e,t,1),e=u0(e,t,1),t=za(),e!==null&&(LI(e,1,t),Mu(e,t))}function Bi(e,t,n){if(e.tag===3)bse(e,e,n);else for(;t!==null;){if(t.tag===3){bse(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(l0===null||!l0.has(r))){e=gE(n,e),e=Tve(t,e,1),t=u0(t,e,1),e=za(),t!==null&&(LI(t,1,e),Mu(t,e));break}}t=t.return}}function x9e(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=za(),e.pingedLanes|=e.suspendedLanes&n,so===e&&(Io&n)===n&&(Ps===4||Ps===3&&(Io&130023424)===Io&&500>ns()-Zq?d1(e,0):Jq|=n),Mu(e,t)}function qve(e,t){t===0&&(e.mode&1?(t=YR,YR<<=1,!(YR&130023424)&&(YR=4194304)):t=1);var n=za();e=om(e,t),e!==null&&(LI(e,t,n),Mu(e,n))}function S9e(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),qve(e,n)}function T9e(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(rt(314))}r!==null&&r.delete(t),qve(e,n)}var Wve;Wve=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ou.current)Iu=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Iu=!1,d9e(e,t,n);Iu=!!(e.flags&131072)}else Iu=!1,bi&&t.flags&1048576&&Xye(t,cO,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;BP(e,t),e=t.pendingProps;var i=dE(t,ga.current);kw(t,n),i=Wq(null,t,r,e,i,n);var s=Gq();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$u(r)?(s=!0,uO(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Uq(t),i.updater=HM,t.stateNode=i,i._reactInternals=t,oU(t,r,e,n),t=lU(null,t,r,!0,s,n)):(t.tag=0,bi&&s&&Oq(t),Pa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(BP(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=C9e(r),e=of(r,e),i){case 0:t=uU(null,t,r,e,n);break e;case 1:t=lse(null,t,r,e,n);break e;case 11:t=ase(null,t,r,e,n);break e;case 14:t=use(null,t,r,of(r.type,e),n);break e}throw Error(rt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:of(r,i),uU(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:of(r,i),lse(e,t,r,i,n);case 3:e:{if(kve(t),e===null)throw Error(rt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,nve(e,t),hO(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=gE(Error(rt(423)),t),t=cse(e,t,r,n,i);break e}else if(r!==i){i=gE(Error(rt(424)),t),t=cse(e,t,r,n,i);break e}else for(yl=a0(t.stateNode.containerInfo.firstChild),Tl=t,bi=!0,df=null,n=eve(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hE(),r===i){t=am(e,t,n);break e}Pa(e,t,r,n)}t=t.child}return t;case 5:return rve(t),e===null&&rU(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,JB(r,i)?o=null:s!==null&&JB(r,s)&&(t.flags|=32),Ive(e,t),Pa(e,t,o,n),t.child;case 6:return e===null&&rU(t),null;case 13:return Rve(e,t,n);case 4:return zq(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=pE(t,null,r,n):Pa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:of(r,i),ase(e,t,r,i,n);case 7:return Pa(e,t,t.pendingProps,n),t.child;case 8:return Pa(e,t,t.pendingProps.children,n),t.child;case 12:return Pa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Zr(fO,r._currentValue),r._currentValue=o,s!==null)if(Ff(s.value,o)){if(s.children===i.children&&!Ou.current){t=am(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Gp(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),iU(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(rt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),iU(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Pa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,kw(t,n),i=Sc(i),r=r(i),t.flags|=1,Pa(e,t,r,n),t.child;case 14:return r=t.type,i=of(r,t.pendingProps),i=of(r.type,i),use(e,t,r,i,n);case 15:return Ave(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:of(r,i),BP(e,t),t.tag=1,$u(r)?(e=!0,uO(t)):e=!1,kw(t,n),xve(t,r,i),oU(t,r,i,n),lU(null,t,r,!0,e,n);case 19:return Nve(e,t,n);case 22:return Cve(e,t,n)}throw Error(rt(156,t.tag))};function Gve(e,t){return _ye(e,t)}function A9e(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gc(e,t,n,r){return new A9e(e,t,n,r)}function rW(e){return e=e.prototype,!(!e||!e.isReactComponent)}function C9e(e){if(typeof e=="function")return rW(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Eq)return 11;if(e===xq)return 14}return 2}function f0(e,t){var n=e.alternate;return n===null?(n=gc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function VP(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")rW(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ew:return h1(n.children,i,s,t);case wq:o=8,i|=8;break;case RB:return e=gc(12,n,t,i|2),e.elementType=RB,e.lanes=s,e;case NB:return e=gc(13,n,t,i),e.elementType=NB,e.lanes=s,e;case PB:return e=gc(19,n,t,i),e.elementType=PB,e.lanes=s,e;case rye:return GM(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tye:o=10;break e;case nye:o=9;break e;case Eq:o=11;break e;case xq:o=14;break e;case Eg:o=16,r=null;break e}throw Error(rt(130,e==null?e:typeof e,""))}return t=gc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function h1(e,t,n,r){return e=gc(7,e,r,t),e.lanes=n,e}function GM(e,t,n,r){return e=gc(22,e,r,t),e.elementType=rye,e.lanes=n,e.stateNode={isHidden:!1},e}function ij(e,t,n){return e=gc(6,e,null,t),e.lanes=n,e}function sj(e,t,n){return t=gc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function I9e(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=j5(0),this.expirationTimes=j5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=j5(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function iW(e,t,n,r,i,s,o,a,u){return e=new I9e(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=gc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uq(s),e}function k9e(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z_,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Yve(e){if(!e)return N0;e=e._reactInternals;e:{if(wb(e)!==e||e.tag!==1)throw Error(rt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($u(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(rt(171))}if(e.tag===1){var n=e.type;if($u(n))return Yye(e,n,t)}return t}function Kve(e,t,n,r,i,s,o,a,u){return e=iW(n,r,!0,e,i,s,o,a,u),e.context=Yve(null),n=e.current,r=za(),i=c0(n),s=Gp(r,i),s.callback=t??null,u0(n,s,i),e.current.lanes=i,LI(e,i,r),Mu(e,r),e}function YM(e,t,n,r){var i=t.current,s=za(),o=c0(i);return n=Yve(n),t.context===null?t.context=n:t.pendingContext=n,t=Gp(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=u0(i,t,o),e!==null&&(Nf(e,i,o,s),LP(e,i,o)),o}function wO(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _se(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function sW(e,t){_se(e,t),(e=e.alternate)&&_se(e,t)}function R9e(){return null}var Xve=typeof reportError=="function"?reportError:function(e){console.error(e)};function oW(e){this._internalRoot=e}KM.prototype.render=oW.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(rt(409));YM(e,t,null,null)};KM.prototype.unmount=oW.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;P1(function(){YM(null,e,null,null)}),t[sm]=null}};function KM(e){this._internalRoot=e}KM.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cye();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pg.length&&t!==0&&t<Pg[n].priority;n++);Pg.splice(n,0,e),n===0&&kye(e)}};function aW(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function XM(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function wse(){}function N9e(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=wO(o);s.call(l)}}var o=Kve(t,r,e,0,null,!1,!1,"",wse);return e._reactRootContainer=o,e[sm]=o.current,eC(e.nodeType===8?e.parentNode:e),P1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=wO(u);a.call(l)}}var u=iW(e,0,!1,null,null,!1,!1,"",wse);return e._reactRootContainer=u,e[sm]=u.current,eC(e.nodeType===8?e.parentNode:e),P1(function(){YM(t,u,n,r)}),u}function QM(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=wO(o);a.call(u)}}YM(t,o,e,i)}else o=N9e(n,t,e,i,r);return wO(o)}Tye=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=r2(t.pendingLanes);n!==0&&(Aq(t,n|1),Mu(t,ns()),!(or&6)&&(yE=ns()+500,by()))}break;case 13:P1(function(){var r=om(e,1);if(r!==null){var i=za();Nf(r,e,1,i)}}),sW(e,1)}};Cq=function(e){if(e.tag===13){var t=om(e,134217728);if(t!==null){var n=za();Nf(t,e,134217728,n)}sW(e,134217728)}};Aye=function(e){if(e.tag===13){var t=c0(e),n=om(e,t);if(n!==null){var r=za();Nf(n,e,t,r)}sW(e,t)}};Cye=function(){return Pr};Iye=function(e,t){var n=Pr;try{return Pr=e,t()}finally{Pr=n}};zB=function(e,t,n){switch(t){case"input":if($B(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=UM(r);if(!i)throw Error(rt(90));sye(r),$B(r,i)}}}break;case"textarea":aye(e,n);break;case"select":t=n.value,t!=null&&Tw(e,!!n.multiple,t,!1)}};pye=eW;mye=P1;var P9e={usingClientEntryPoint:!1,Events:[jI,iw,UM,dye,hye,eW]},aT={findFiberByHostInstance:qv,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},D9e={bundleType:aT.bundleType,version:aT.version,rendererPackageName:aT.rendererPackageName,rendererConfig:aT.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Om.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vye(e),e===null?null:e.stateNode},findFiberByHostInstance:aT.findFiberByHostInstance||R9e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sN.isDisabled&&sN.supportsFiber)try{LM=sN.inject(D9e),Xd=sN}catch{}}ql.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P9e;ql.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!aW(t))throw Error(rt(200));return k9e(e,t,null,n)};ql.createRoot=function(e,t){if(!aW(e))throw Error(rt(299));var n=!1,r="",i=Xve;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=iW(e,1,!1,null,null,n,!1,r,i),e[sm]=t.current,eC(e.nodeType===8?e.parentNode:e),new oW(t)};ql.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(rt(188)):(e=Object.keys(e).join(","),Error(rt(268,e)));return e=vye(t),e=e===null?null:e.stateNode,e};ql.flushSync=function(e){return P1(e)};ql.hydrate=function(e,t,n){if(!XM(t))throw Error(rt(200));return QM(null,e,t,!0,n)};ql.hydrateRoot=function(e,t,n){if(!aW(e))throw Error(rt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Xve;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Kve(t,null,e,1,n??null,i,!1,s,o),e[sm]=t.current,eC(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new KM(t)};ql.render=function(e,t,n){if(!XM(t))throw Error(rt(200));return QM(null,e,t,!1,n)};ql.unmountComponentAtNode=function(e){if(!XM(e))throw Error(rt(40));return e._reactRootContainer?(P1(function(){QM(null,null,e,!1,function(){e._reactRootContainer=null,e[sm]=null})}),!0):!1};ql.unstable_batchedUpdates=eW;ql.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!XM(n))throw Error(rt(200));if(e==null||e._reactInternals===void 0)throw Error(rt(38));return QM(e,t,n,!1,r)};ql.version="18.3.1-next-f1338f8080-20240426";function Qve(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qve)}catch(e){console.error(e)}}Qve(),Q0e.exports=ql;var UI=Q0e.exports;const s2=Hl(UI);var Ese=UI;IB.createRoot=Ese.createRoot,IB.hydrateRoot=Ese.hydrateRoot;var Nd=function(){return Nd=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Nd.apply(this,arguments)};function zI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Ip(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function xse(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function O9e(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Wn(e){return this instanceof Wn?(this.v=e,this):new Wn(e)}function Yv(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Wn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function oj(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Wn(e[i](o)),done:!1}:s?s(o):o}:s}}function nA(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof xse=="function"?xse(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var HP="right-scroll-bar-position",qP="width-before-scroll-bar",$9e="with-scroll-bars-hidden",M9e="--removed-body-scroll-bar-size";function aj(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function L9e(e,t){var n=I.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var F9e=typeof window<"u"?I.useLayoutEffect:I.useEffect,Sse=new WeakMap;function j9e(e,t){var n=L9e(null,function(r){return e.forEach(function(i){return aj(i,r)})});return F9e(function(){var r=Sse.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||aj(a,null)}),s.forEach(function(a){i.has(a)||aj(a,o)})}Sse.set(n,e)},[e]),n}function B9e(e){return e}function U9e(e,t){t===void 0&&(t=B9e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function z9e(e){e===void 0&&(e={});var t=U9e(null);return t.options=Nd({async:!0,ssr:!1},e),t}var Jve=function(e){var t=e.sideCar,n=zI(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return I.createElement(r,Nd({},n))};Jve.isSideCarExport=!0;function V9e(e,t){return e.useMedium(t),Jve}var Zve=z9e(),uj=function(){},JM=I.forwardRef(function(e,t){var n=I.useRef(null),r=I.useState({onScrollCapture:uj,onWheelCapture:uj,onTouchMoveCapture:uj}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=zI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,E=j9e([n,t]),T=Nd(Nd({},b),i);return I.createElement(I.Fragment,null,c&&I.createElement(w,{sideCar:Zve,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?I.cloneElement(I.Children.only(a),Nd(Nd({},T),{ref:E})):I.createElement(y,Nd({},T,{className:u,ref:E}),a))});JM.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};JM.classNames={fullWidth:qP,zeroRight:HP};var H9e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function q9e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=H9e();return t&&e.setAttribute("nonce",t),e}function W9e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function G9e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Y9e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=q9e())&&(W9e(t,n),G9e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},K9e=function(){var e=Y9e();return function(t,n){I.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},e1e=function(){var e=K9e(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},X9e={left:0,top:0,right:0,gap:0},lj=function(e){return parseInt(e||"",10)||0},Q9e=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[lj(n),lj(r),lj(i)]},J9e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return X9e;var t=Q9e(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Z9e=e1e(),Nw="data-scroll-locked",eBe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat($9e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Nw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(HP,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(qP,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(HP," .").concat(HP,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(qP," .").concat(qP,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Nw,`] {
    `).concat(M9e,": ").concat(a,`px;
  }
`)},Tse=function(){var e=parseInt(document.body.getAttribute(Nw)||"0",10);return isFinite(e)?e:0},tBe=function(){I.useEffect(function(){return document.body.setAttribute(Nw,(Tse()+1).toString()),function(){var e=Tse()-1;e<=0?document.body.removeAttribute(Nw):document.body.setAttribute(Nw,e.toString())}},[])},nBe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;tBe();var s=I.useMemo(function(){return J9e(i)},[i]);return I.createElement(Z9e,{styles:eBe(s,!t,i,n?"":"!important")})},wU=!1;if(typeof window<"u")try{var oN=Object.defineProperty({},"passive",{get:function(){return wU=!0,!0}});window.addEventListener("test",oN,oN),window.removeEventListener("test",oN,oN)}catch{wU=!1}var d_=wU?{passive:!1}:!1,rBe=function(e){return e.tagName==="TEXTAREA"},t1e=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!rBe(e)&&n[t]==="visible")},iBe=function(e){return t1e(e,"overflowY")},sBe=function(e){return t1e(e,"overflowX")},Ase=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=n1e(e,r);if(i){var s=r1e(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},oBe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},aBe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},n1e=function(e,t){return e==="v"?iBe(t):sBe(t)},r1e=function(e,t){return e==="v"?oBe(t):aBe(t)},uBe=function(e,t){return e==="h"&&t==="rtl"?-1:1},lBe=function(e,t,n,r,i){var s=uBe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=r1e(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&n1e(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},aN=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Cse=function(e){return[e.deltaX,e.deltaY]},Ise=function(e){return e&&"current"in e?e.current:e},cBe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},fBe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},dBe=0,h_=[];function hBe(e){var t=I.useRef([]),n=I.useRef([0,0]),r=I.useRef(),i=I.useState(dBe++)[0],s=I.useState(e1e)[0],o=I.useRef(e);I.useEffect(function(){o.current=e},[e]),I.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=O9e([e.lockRef.current],(e.shards||[]).map(Ise),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=I.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=aN(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],E,T=m.target,S=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in m&&S==="h"&&T.type==="range")return!1;var A=Ase(S,T);if(!A)return!0;if(A?E=S:(E=S==="v"?"h":"v",A=Ase(S,T)),!A)return!1;if(!r.current&&"changedTouches"in m&&(b||w)&&(r.current=E),!E)return!0;var C=r.current||E;return lBe(C,g,m,C==="h"?b:w,!0)},[]),u=I.useCallback(function(m){var g=m;if(!(!h_.length||h_[h_.length-1]!==s)){var y="deltaY"in g?Cse(g):aN(g),v=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&cBe(E.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(Ise).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=b.length>0?a(g,b[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=I.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:pBe(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(w){return w!==b})},1)},[]),c=I.useCallback(function(m){n.current=aN(m),r.current=void 0},[]),f=I.useCallback(function(m){l(m.type,Cse(m),m.target,a(m,e.lockRef.current))},[]),d=I.useCallback(function(m){l(m.type,aN(m),m.target,a(m,e.lockRef.current))},[]);I.useEffect(function(){return h_.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,d_),document.addEventListener("touchmove",u,d_),document.addEventListener("touchstart",c,d_),function(){h_=h_.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,d_),document.removeEventListener("touchmove",u,d_),document.removeEventListener("touchstart",c,d_)}},[]);var h=e.removeScrollBar,p=e.inert;return I.createElement(I.Fragment,null,p?I.createElement(s,{styles:fBe(i)}):null,h?I.createElement(nBe,{gapMode:e.gapMode}):null)}function pBe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const mBe=V9e(Zve,hBe);var ZM=I.forwardRef(function(e,t){return I.createElement(JM,Nd({},e,{ref:t,sideCar:mBe}))});ZM.classNames=JM.classNames;function Yr(e){return Object.keys(e)}function cj(e){return e&&typeof e=="object"&&!Array.isArray(e)}function uW(e,t){const n={...e},r=t;return cj(e)&&cj(t)&&Object.keys(t).forEach(i=>{cj(r[i])&&i in e?n[i]=uW(n[i],r[i]):n[i]=r[i]}),n}function gBe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function yBe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function lC(e){const t=yBe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function fj(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function i1e(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?fj(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?fj(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?fj(s):s}}return r}return n}const Ie=i1e("rem",{shouldScale:!0}),EO=i1e("em");function _y(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function s1e(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function wy(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==I.Fragment:!1}function lo(e){const t=I.createContext(null);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>{const i=I.useContext(t);if(i===null)throw new Error(e);return i}]}function Px(e=null){const t=I.createContext(e);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>I.useContext(t)]}function xO(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function SO(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function vBe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function bBe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function _Be(e,t,n){return SO(e,n)===SO(t,n)}function lW({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=SO(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>_Be(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=bBe(l,u,r),f=vBe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const wBe={app:100,modal:200,popover:300,overlay:400,max:9999};function Gl(e){return wBe[e]}const EBe=()=>{};function xBe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||EBe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function en(e,t="size",n=!0){if(e!==void 0)return s1e(e)?n?Ie(e):e:`var(--${t}-${e})`}function is(e){return en(e,"mantine-spacing")}function jr(e){return e===void 0?"var(--mantine-radius-default)":en(e,"mantine-radius")}function oo(e){return en(e,"mantine-font-size")}function o1e(e){return en(e,"mantine-line-height",!1)}function cW(e){if(e)return en(e,"mantine-shadow",!1)}function Lp(e,t){return n=>{e==null||e(n),t==null||t(n)}}function fW(e,t){return e in t.breakpoints?lC(t.breakpoints[e]):lC(e)}function cC(e,t){const n=e.map(r=>({value:r,px:fW(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function Ef(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function SBe(e,t,n){var r;return n?Array.from(((r=SO(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function TBe(){const[e,t]=I.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Vd(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function Pw(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Pv(e){const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),I.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function eL(e,t){const n=Pv(e),r=I.useRef(0);return I.useEffect(()=>()=>window.clearTimeout(r.current),[]),I.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const kse=["mousedown","touchstart"];function ABe(e,t,n){const r=I.useRef();return I.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||kse).forEach(s=>document.addEventListener(s,i)),()=>{(t||kse).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function CBe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function IBe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function kBe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=I.useState(n?t:IBe(e)),s=I.useRef();return I.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),CBe(s.current,o=>i(o.matches))},[e]),r}const Eb=typeof document<"u"?I.useLayoutEffect:I.useEffect;function hh(e,t){const n=I.useRef(!1);I.useEffect(()=>()=>{n.current=!1},[]),I.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function a1e({opened:e,shouldReturnFocus:t=!0}){const n=I.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return hh(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function RBe(e,t="body > :not(script)"){const n=Pw(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const NBe=/input|select|textarea|button|object/,u1e="a, input, select, textarea, button, object, [tabindex]";function PBe(e){return e.style.display==="none"}function DBe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(PBe(n))return!1;n=n.parentNode}return!0}function l1e(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function EU(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(l1e(e));return(NBe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&DBe(e)}function c1e(e){const t=l1e(e);return(Number.isNaN(t)||t>=0)&&EU(e)}function OBe(e){return Array.from(e.querySelectorAll(u1e)).filter(c1e)}function $Be(e,t){const n=OBe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function MBe(e=!0){const t=I.useRef(),n=I.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(u1e));o=a.find(c1e)||a.find(EU)||null,!o&&EU(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=I.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=RBe(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return I.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&$Be(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const LBe=e=>(e+1)%1e6;function FBe(){const[,e]=I.useReducer(LBe,0);return e}const jBe=vr.useId||(()=>{});function BBe(){const e=jBe();return e?`mantine-${e.replace(/:/g,"")}`:""}function wa(e){const t=BBe(),[n,r]=I.useState(t);return Eb(()=>{r(Pw())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function f1e(e,t,n){I.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function dW(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function d1e(...e){return t=>{e.forEach(n=>dW(n,t))}}function ls(...e){return I.useCallback(d1e(...e),e)}function h1e(e,t,n="ltr"){const r=I.useRef(null),i=I.useRef(!1),s=I.useRef(!1),o=I.useRef(0),[a,u]=I.useState(!1);return I.useEffect(()=>{i.current=!0},[]),I.useEffect(()=>{var v,b;const l=({x:w,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const T=r.current.getBoundingClientRect();if(T.width&&T.height){const S=Vd((w-T.left)/T.width,0,1);e({x:n==="ltr"?S:1-S,y:Vd((E-T.top)/T.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function ws({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=I.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function tL(e,t){return kBe("(prefers-reduced-motion: reduce)",e,t)}const UBe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function p1(e){const t=I.useRef(0),n=I.useRef(null),[r,i]=I.useState(UBe),s=I.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return I.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function zBe(e){const[t,{width:n,height:r}]=p1(e);return{ref:t,width:n,height:r}}function VBe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function HBe(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function qBe(e){return t=>HBe(VBe(e),t)}function WBe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{qBe(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function nL(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=I.useState(e),o=I.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=I.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=I.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function GBe(e,t,n={autoInvoke:!1}){const r=I.useRef(null),i=I.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=I.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return I.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function YBe(e,t,n){const r=I.useRef(),i=I.useRef(null);return I.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function KBe(){const[e,t]=I.useState(!1);return I.useEffect(()=>t(!0),[]),e}function XBe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function QBe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});Eb(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>XBe(`${e}:${String(r)}`,i[0])}return[t,n]}var JBe={};function p1e(){return typeof process<"u"&&JBe?"production":"development"}function m1e(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=m1e(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Yi(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=m1e(e))&&(r&&(r+=" "),r+=t);return r}const ZBe={};function eUe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Yi(t[r],i):t[r]=i})}),t}function rL({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||ZBe);return eUe(s)}function TO({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const g1e=I.createContext(null);function Ey(){const e=I.useContext(g1e);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function tUe(){return Ey().cssVariablesResolver}function nUe(){return Ey().classNamesPrefix}function hW(){return Ey().getStyleNonce}function rUe(){return Ey().withStaticClasses}function iUe(){return Ey().headless}function sUe(){var e;return(e=Ey().stylesTransform)==null?void 0:e.sx}function oUe(){var e;return(e=Ey().stylesTransform)==null?void 0:e.styles}function aUe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function uUe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function lUe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function cUe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function pW(e){return aUe(e)?uUe(e):e.startsWith("rgb")?lUe(e):e.startsWith("hsl")?cUe(e):{r:0,g:0,b:0,a:1}}function uN(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=pW(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function fC(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function dj(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function fUe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function dUe(e){if(e.startsWith("oklch("))return(fUe(e)||0)/100;const{r:t,g:n,b:r}=pW(e),i=t/255,s=n/255,o=r/255,a=dj(i),u=dj(s),l=dj(o);return .2126*a+.7152*u+.0722*l}function uT(e,t=.179){return e.startsWith("var(")?!1:dUe(e)>t}function Ph({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:uT(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:uT(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:uT(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][fC(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:uT(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:uT(e,t.luminanceThreshold),shade:s,variable:void 0}}function Dr(e,t){const n=Ph({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function xU(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Dr(n.from,t),i=Dr(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function wd(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=pW(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const p_=wd,hUe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=Ph({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Ie(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Ie(1)} solid transparent`}:{background:e,hover:uN(e,.1),color:a,border:`${Ie(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ie(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:wd(a,.1),hover:wd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ie(1)} solid transparent`}}return{background:wd(e,.1),hover:wd(e,.12),color:e,border:`${Ie(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Ie(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:wd(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ie(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:wd(e,.05),color:e,border:`${Ie(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ie(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:wd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ie(1)} solid transparent`}}return{background:"transparent",hover:wd(e,.12),color:e,border:`${Ie(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Ie(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ie(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Ie(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:uN(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Ie(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:uN(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ie(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:uN(t.white,.01),color:e,border:`${Ie(1)} solid transparent`}:n==="gradient"?{background:xU(r,t),hover:xU(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Ie(1)} solid var(--mantine-color-default-border)`}:{}},pUe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Rse="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",mW={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:pUe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:hUe,autoContrast:!1,luminanceThreshold:.3,fontFamily:Rse,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Rse,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Ie(34),lineHeight:"1.3"},h2:{fontSize:Ie(26),lineHeight:"1.35"},h3:{fontSize:Ie(22),lineHeight:"1.4"},h4:{fontSize:Ie(18),lineHeight:"1.45"},h5:{fontSize:Ie(16),lineHeight:"1.5"},h6:{fontSize:Ie(14),lineHeight:"1.5"}}},fontSizes:{xs:Ie(12),sm:Ie(14),md:Ie(16),lg:Ie(18),xl:Ie(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Ie(2),sm:Ie(4),md:Ie(8),lg:Ie(16),xl:Ie(32)},spacing:{xs:Ie(10),sm:Ie(12),md:Ie(16),lg:Ie(20),xl:Ie(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Ie(1)} ${Ie(3)} rgba(0, 0, 0, 0.05), 0 ${Ie(1)} ${Ie(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Ie(1)} ${Ie(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ie(10)} ${Ie(15)} ${Ie(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ie(7)} ${Ie(7)} ${Ie(-5)}`,md:`0 ${Ie(1)} ${Ie(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ie(20)} ${Ie(25)} ${Ie(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ie(10)} ${Ie(10)} ${Ie(-5)}`,lg:`0 ${Ie(1)} ${Ie(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ie(28)} ${Ie(23)} ${Ie(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ie(12)} ${Ie(12)} ${Ie(-7)}`,xl:`0 ${Ie(1)} ${Ie(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ie(36)} ${Ie(28)} ${Ie(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ie(17)} ${Ie(17)} ${Ie(-7)}`},other:{},components:{}};function Nse(e){return e==="auto"||e==="dark"||e==="light"}function mUe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Nse(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Nse(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const gUe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",Pse="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function hj(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Dse(e){if(!(e.primaryColor in e.colors))throw new Error(gUe);if(typeof e.primaryShade=="object"&&(!hj(e.primaryShade.dark)||!hj(e.primaryShade.light)))throw new Error(Pse);if(typeof e.primaryShade=="number"&&!hj(e.primaryShade))throw new Error(Pse)}function yUe(e,t){var r;if(!t)return Dse(e),e;const n=uW(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Dse(n),n}const gW=I.createContext(null),vUe=()=>I.useContext(gW)||mW;function cs(){const e=I.useContext(gW);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function y1e({theme:e,children:t,inherit:n=!0}){const r=vUe(),i=I.useMemo(()=>yUe(n?r:mW,e),[e,r,n]);return _.jsx(gW.Provider,{value:i,children:t})}y1e.displayName="@mantine/core/MantineThemeProvider";function bUe(){const e=cs(),t=hW(),n=Yr(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=lC(e.breakpoints[i]),a=s?`${o-.1}px`:EO(o-.1),u=s?`${o}px`:EO(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function pj(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function mj(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function _Ue(e,t){const n=pj(e.variables),r=n?mj(t,n):"",i=pj(e.dark),s=i?mj(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=pj(e.light),a=o?mj(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function xy({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Ph({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Ose(e,t){return xy({color:e.colors[e.primaryColor][fC(e,t)],theme:e,autoContrast:null})}function lN({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=fC(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:p_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:p_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:p_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=fC(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:p_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:p_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:p_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function wUe(e){return Array.isArray(e)?e:Array(10).fill(e)}function EUe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function m_(e,t,n){Yr(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const v1e=e=>{const t=fC(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Ie(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Ose(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Ose(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};m_(r.variables,e.breakpoints,"breakpoint"),m_(r.variables,e.spacing,"spacing"),m_(r.variables,e.fontSizes,"font-size"),m_(r.variables,e.lineHeights,"line-height"),m_(r.variables,e.shadows,"shadow"),m_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Yr(e.colors).forEach(s=>{const o=e.colors[s];if(EUe(o)){Object.assign(r.light,lN({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,lN({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,lN({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,lN({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Yr(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function xUe({theme:e,generator:t}){const n=v1e(e),r=t==null?void 0:t(e);return r?uW(n,r):n}const gj=v1e(mW);function SUe(e){const t={variables:{},light:{},dark:{}};return Yr(e.variables).forEach(n=>{gj.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Yr(e.light).forEach(n=>{gj.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Yr(e.dark).forEach(n=>{gj.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function TUe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function b1e({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=cs(),r=hW(),i=tUe(),s=xUe({theme:n,generator:i}),o=e===":root"&&t,a=o?SUe(s):s,u=_Ue(a,e);return u?_.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":TUe(e)}`}}):null}b1e.displayName="@mantine/CssVariables";function AUe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function g_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function CUe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=I.useRef(),[s,o]=I.useState(()=>e.get(t)),a=r||s,u=I.useCallback(c=>{r||(g_(c,n),o(c),e.set(c))},[e.set,a,r]),l=I.useCallback(()=>{o(t),g_(t,n),e.clear()},[e.clear,t]);return I.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),Eb(()=>{g_(e.get(t),n)},[]),I.useEffect(()=>{var f;if(r)return g_(r,n),()=>{};r===void 0&&g_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&g_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function IUe({respectReducedMotion:e,getRootElement:t}){Eb(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}AUe();function _1e({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=mUe(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=CUe({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return IUe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),_.jsx(g1e.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:_.jsxs(y1e,{theme:e,children:[o&&_.jsx(b1e,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&_.jsx(bUe,{}),t]})})}_1e.displayName="@mantine/core/MantineProvider";function $m({classNames:e,styles:t,props:n,stylesCtx:r}){const i=cs();return{resolvedClassNames:rL({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:TO({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const kUe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function RUe({theme:e,options:t,unstyled:n}){return Yi((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||kUe[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function NUe({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return rL({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function $se({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return rL({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function PUe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function DUe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function OUe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function $Ue({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=rL({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function MUe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function LUe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Yi(RUe({theme:e,options:t,unstyled:a||h}),$Ue({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),MUe({options:t,classes:o,selector:r,unstyled:a}),$se({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),$se({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),NUe({selector:r,stylesCtx:f,options:t,props:c,theme:e}),PUe({rootSelector:l,selector:r,className:u}),DUe({selector:r,classes:o,unstyled:a||h}),d&&!h&&OUe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function FUe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return TO({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function SU({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...SU({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function jUe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],..._y(n[r])}}),t),{})}function BUe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=jUe([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function UUe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&FUe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&TO({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&TO({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...BUe({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?SU({style:u,theme:e}):null,...SU({style:r==null?void 0:r.style,theme:e})}}function zUe({props:e,stylesCtx:t,themeName:n}){var o;const r=cs(),i=(o=oUe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function ht({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=cs(),h=nUe(),p=rUe(),m=iUe(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=zUe({props:n,stylesCtx:r,themeName:g});return(b,w)=>({className:LUe({theme:d,options:w,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,l])}),style:UUe({theme:d,themeName:g,selector:b,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function Dx(e,t){return typeof e=="boolean"?e:t.autoContrast}function Ae(e,t,n){var o;const r=cs(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,..._y(n)}}function yj(e){return Yr(e).reduce((t,n)=>e[n]!==void 0?`${t}${gBe(n)}:${e[n]};`:t,"").trim()}function VUe({selector:e,styles:t,media:n,container:r}){const i=t?yj(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${yj(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${yj(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function xb(e){const t=hW();return _.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:VUe(e)}})}function Sb(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:T,ff:S,fz:A,fw:C,lts:k,ta:N,lh:O,fs:P,tt:$,td:F,w:M,miw:B,maw:U,h:H,mih:D,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:re,top:de,left:pe,bottom:ge,right:Ee,inset:Z,display:Q,flex:fe,hiddenFrom:be,visibleFrom:Me,lightHidden:Be,darkHidden:ve,sx:Re,...He}=e;return{styleProps:_y({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:T,ff:S,fz:A,fw:C,lts:k,ta:N,lh:O,fs:P,tt:$,td:F,w:M,miw:B,maw:U,h:H,mih:D,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:re,top:de,left:pe,bottom:ge,right:Ee,inset:Z,display:Q,flex:fe,hiddenFrom:be,visibleFrom:Me,lightHidden:Be,darkHidden:ve,sx:Re}),rest:He}}const HUe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function yW(e,t){const n=Ph({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function qUe(e,t){const n=Ph({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:yW(e,t)}function WUe(e,t){if(typeof e=="number")return Ie(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Ie(n)}`;return r&&(s+=` ${r}`),wUe.length>0&&(s+=` ${yW(i.join(" "),t)}`),s.trim()}return e}const Mse={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function GUe(e){return typeof e=="string"&&e in Mse?Mse[e]:e}const YUe=["h1","h2","h3","h4","h5","h6"];function KUe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&YUe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Ie(e):e}function XUe(e){return e}const QUe=["h1","h2","h3","h4","h5","h6"];function JUe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&QUe.includes(e)?`var(--mantine-${e}-line-height)`:e}function ZUe(e){return typeof e=="number"?Ie(e):e}function e7e(e,t){if(typeof e=="number")return Ie(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Ie(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const vj={color:yW,textColor:qUe,fontSize:KUe,spacing:e7e,identity:XUe,size:ZUe,lineHeight:JUe,fontFamily:GUe,border:WUe};function Lse(e){return e.replace("(min-width: ","").replace("em)","")}function t7e({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Lse(i))-Number(Lse(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function n7e(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function r7e(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function i7e(e){return typeof e=="object"&&e!==null?Yr(e).filter(t=>t!=="base"):[]}function s7e(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function w1e({styleProps:e,data:t,theme:n}){return t7e(Yr(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=r7e(e[i]);if(!n7e(e[i]))return o.forEach(l=>{r.inlineStyles[l]=vj[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=i7e(e[i]);return o.forEach(l=>{a&&(r.styles[l]=vj[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:vj[s.type](s7e(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function VI(){return`__m__-${I.useId().replace(/:/g,"")}`}function vW(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...vW(r,t)}),{}):typeof e=="function"?e(t):e??{}}function E1e(e){return e.startsWith("data-")?e:`data-${e}`}function o7e(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[E1e(n)]=e[n]),t},{})}function x1e(e){return e?typeof e=="string"?{[E1e(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...x1e(n)}),{}):o7e(e):null}function TU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...TU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function a7e({theme:e,style:t,vars:n,styleProps:r}){const i=TU(t,e),s=TU(n,e);return{...i,...s,...r}}const S1e=I.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var A;const m=cs(),g=e||"div",{styleProps:y,rest:v}=Sb(h),b=sUe(),w=(A=b==null?void 0:b())==null?void 0:A(y.sx),E=VI(),T=w1e({styleProps:y,theme:m,data:HUe}),S={ref:p,style:a7e({theme:m,style:t,vars:n,styleProps:T.inlineStyles}),className:Yi(r,w,{[E]:T.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":s1e(o)?void 0:o||void 0,size:d,...x1e(s),...v};return _.jsxs(_.Fragment,{children:[T.hasResponsiveStyles&&_.jsx(xb,{selector:`.${E}`,styles:T.styles,media:T.media}),typeof f=="function"?f(S):_.jsx(g,{...S})]})});S1e.displayName="@mantine/core/Box";const we=S1e;function T1e(e){return e}function je(e){const t=I.forwardRef(e);return t.extend=T1e,t}function js(e){const t=I.forwardRef(e);return t.extend=T1e,t}const u7e=I.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Dh(){return I.useContext(u7e)}function l7e(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function bj(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const lT=typeof window<"u"&&window.requestAnimationFrame;function c7e({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=I.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=I.useState(r?{}:o),l=p=>{UI.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||l7e(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}hh(()=>{typeof lT=="function"&&lT(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),lT(()=>{const p=bj(i);c({...f(p),height:p})})}:()=>{const p=bj(i);c({...f(p),willChange:"height",height:p}),lT(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=bj(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:d1e(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const f7e={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},iL=je((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=Ae("Collapse",f7e,e),c=cs(),f=tL(),h=(c.respectReducedMotion?f:!1)?0:i,p=c7e({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?_.jsx(we,{...l,children:n}):null:_.jsx(we,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...vW(o,c)},ref:t,...l}),children:n})});iL.displayName="@mantine/core/Collapse";const[d7e,Mc]=lo("ScrollArea.Root component was not found in tree");function vE(e,t){const n=Pv(t);Eb(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const h7e=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=Mc(),[s,o]=I.useState(0),[a,u]=I.useState(0),l=!!(s&&a);return vE(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),vE(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?_.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),p7e=I.forwardRef((e,t)=>{const n=Mc(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?_.jsx(h7e,{...e,ref:t}):null}),m7e={scrollHideDelay:1e3,type:"hover"},A1e=I.forwardRef((e,t)=>{const n=Ae("ScrollAreaRoot",m7e,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=I.useState(null),[l,c]=I.useState(null),[f,d]=I.useState(null),[h,p]=I.useState(null),[m,g]=I.useState(null),[y,v]=I.useState(0),[b,w]=I.useState(0),[E,T]=I.useState(!1),[S,A]=I.useState(!1),C=ls(t,k=>u(k));return _.jsx(d7e,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:T,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:S,onScrollbarYEnabledChange:A,onCornerWidthChange:v,onCornerHeightChange:w},children:_.jsx(we,{...o,ref:C,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});A1e.displayName="@mantine/core/ScrollAreaRoot";function C1e(e,t){const n=e/t;return Number.isNaN(n)?0:n}function sL(e){const t=C1e(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function I1e(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function g7e(e,[t,n]){return Math.min(n,Math.max(t,e))}function Fse(e,t,n="ltr"){const r=sL(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=g7e(e,u);return I1e([0,o],[0,a])(l)}function y7e(e,t,n,r="ltr"){const i=sL(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return I1e([u,l],f)(e)}function k1e(e,t){return e>0&&e<t}function AO(e){return e?parseInt(e,10):0}function m1(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[v7e,R1e]=lo("ScrollAreaScrollbar was not found in tree"),N1e=I.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Mc(),[h,p]=I.useState(null),m=ls(t,A=>p(A)),g=I.useRef(null),y=I.useRef(""),{viewport:v}=d,b=n.content-n.viewport,w=Pv(l),E=Pv(a),T=eL(c,10),S=A=>{if(g.current){const C=A.clientX-g.current.left,k=A.clientY-g.current.top;u({x:C,y:k})}};return I.useEffect(()=>{const A=C=>{const k=C.target;(h==null?void 0:h.contains(k))&&w(C,b)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[v,h,b,w]),I.useEffect(E,[n,E]),vE(h,T),vE(d.content,T),_.jsx(v7e,{value:{scrollbar:h,hasThumb:r,onThumbChange:Pv(i),onThumbPointerUp:Pv(s),onThumbPositionChange:E,onThumbPointerDown:Pv(o)},children:_.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:m1(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S(A))}),onPointerMove:m1(e.onPointerMove,S),onPointerUp:m1(e.onPointerUp,A=>{const C=A.target;C.hasPointerCapture(A.pointerId)&&C.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),b7e=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Mc(),[a,u]=I.useState(),l=I.useRef(null),c=ls(t,l,o.onScrollbarXChange);return I.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),_.jsx(N1e,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${sL(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),k1e(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:AO(a.paddingLeft),paddingEnd:AO(a.paddingRight)}})}})}),_7e=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Mc(),[a,u]=I.useState(),l=I.useRef(null),c=ls(t,l,o.onScrollbarYChange);return I.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),_.jsx(N1e,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${sL(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),k1e(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:AO(a.paddingTop),paddingEnd:AO(a.paddingBottom)}})}})}),bW=I.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Dh(),s=Mc(),o=I.useRef(null),a=I.useRef(0),[u,l]=I.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=C1e(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>y7e(h,a.current,u,p);return n==="horizontal"?_.jsx(b7e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=Fse(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?_.jsx(_7e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=Fse(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),P1e=I.forwardRef((e,t)=>{const n=Mc(),{forceMount:r,...i}=e,[s,o]=I.useState(!1),a=e.orientation==="horizontal",u=eL(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return vE(n.viewport,u),vE(n.content,u),r||s?_.jsx(bW,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),w7e=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Mc(),[s,o]=I.useState(!1);return I.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?_.jsx(P1e,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),E7e=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Mc(),s=e.orientation==="horizontal",[o,a]=I.useState("hidden"),u=eL(()=>a("idle"),100);return I.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),I.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?_.jsx(bW,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:m1(e.onPointerEnter,()=>a("interacting")),onPointerLeave:m1(e.onPointerLeave,()=>a("idle"))}):null}),jse=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Mc(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return I.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?_.jsx(w7e,{...r,ref:t,forceMount:n}):i.type==="scroll"?_.jsx(E7e,{...r,ref:t,forceMount:n}):i.type==="auto"?_.jsx(P1e,{...r,ref:t,forceMount:n}):i.type==="always"?_.jsx(bW,{...r,ref:t}):null});function x7e(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const S7e=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=Mc(),s=R1e(),{onThumbPositionChange:o}=s,a=ls(t,c=>s.onThumbChange(c)),u=I.useRef(),l=eL(()=>{u.current&&(u.current(),u.current=void 0)},100);return I.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=x7e(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),_.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:m1(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:m1(e.onPointerUp,s.onThumbPointerUp)})}),Bse=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=R1e();return n||i.hasThumb?_.jsx(S7e,{ref:t,...r}):null}),D1e=I.forwardRef(({children:e,style:t,...n},r)=>{const i=Mc(),s=ls(r,i.onViewportChange);return _.jsx(we,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:_.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});D1e.displayName="@mantine/core/ScrollAreaViewport";var _W={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const O1e={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},T7e=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Ie(t)}}),um=je((e,t)=>{const n=Ae("ScrollArea",O1e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,w]=I.useState(!1),E=ht({name:"ScrollArea",props:n,classes:_W,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:T7e});return _.jsxs(A1e,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...E("root"),...v,children:[_.jsx(D1e,{...d,...E("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:T=>{var S;(S=d==null?void 0:d.onScroll)==null||S.call(d,T),p==null||p({x:T.currentTarget.scrollLeft,y:T.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&_.jsx(jse,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(Bse,{...E("thumb")})}),(y==="xy"||y==="y")&&_.jsx(jse,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(Bse,{...E("thumb")})}),_.jsx(p7e,{...E("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});um.displayName="@mantine/core/ScrollArea";const wW=je((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=Ae("ScrollAreaAutosize",O1e,e);return _.jsx(we,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:_.jsx(we,{style:{display:"flex",flexDirection:"column",flex:1},children:_.jsx(um,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});um.classes=_W;wW.displayName="@mantine/core/ScrollAreaAutosize";wW.classes=_W;um.Autosize=wW;var $1e={root:"m_87cf2631"};const A7e={__staticSelector:"UnstyledButton"},_s=js((e,t)=>{const n=Ae("UnstyledButton",A7e,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=ht({name:s,props:n,classes:$1e,className:r,style:l,classNames:a,styles:u,unstyled:o});return _.jsx(we,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});_s.classes=$1e;_s.displayName="@mantine/core/UnstyledButton";var M1e={root:"m_515a97f8"};const C7e={},EW=je((e,t)=>{const n=Ae("VisuallyHidden",C7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=ht({name:"VisuallyHidden",classes:M1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(we,{component:"span",ref:t,...c("root"),...l})});EW.classes=M1e;EW.displayName="@mantine/core/VisuallyHidden";var L1e={root:"m_1b7284a3"};const I7e={},k7e=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:jr(t),"--paper-shadow":cW(n)}}),Ox=js((e,t)=>{const n=Ae("Paper",I7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=ht({name:"Paper",props:n,classes:L1e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:k7e});return _.jsx(we,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});Ox.classes=L1e;Ox.displayName="@mantine/core/Paper";function $x(e){return F1e(e)?(e.nodeName||"").toLowerCase():"#document"}function Lu(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Mm(e){var t;return(t=(F1e(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function F1e(e){return e instanceof Node||e instanceof Lu(e).Node}function _i(e){return e instanceof Element||e instanceof Lu(e).Element}function Nl(e){return e instanceof HTMLElement||e instanceof Lu(e).HTMLElement}function AU(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Lu(e).ShadowRoot}function HI(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Ac(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function R7e(e){return["table","td","th"].includes($x(e))}function xW(e){const t=SW(),n=Ac(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function N7e(e){let t=lm(e);for(;Nl(t)&&!P0(t);){if(xW(t))return t;t=lm(t)}return null}function SW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function P0(e){return["html","body","#document"].includes($x(e))}function Ac(e){return Lu(e).getComputedStyle(e)}function oL(e){return _i(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function lm(e){if($x(e)==="html")return e;const t=e.assignedSlot||e.parentNode||AU(e)&&e.host||Mm(e);return AU(t)?t.host:t}function j1e(e){const t=lm(e);return P0(t)?e.ownerDocument?e.ownerDocument.body:e.body:Nl(t)&&HI(t)?t:j1e(t)}function Yp(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=j1e(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Lu(i);return s?t.concat(o,o.visualViewport||[],HI(i)?i:[],o.frameElement&&n?Yp(o.frameElement):[]):t.concat(i,Yp(i,[],n))}function Use(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function dC(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&AU(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function B1e(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function U1e(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function P7e(e){return $7e()?!1:!zse()&&e.width===0&&e.height===0||zse()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function D7e(){return/apple/i.test(navigator.vendor)}function zse(){const e=/android/i;return e.test(B1e())||e.test(U1e())}function O7e(){return B1e().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function $7e(){return U1e().includes("jsdom/")}function CU(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function M7e(e){return"nativeEvent"in e}function L7e(e){return e.matches("html,body")}function Kv(e){return(e==null?void 0:e.ownerDocument)||document}function _j(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function j_(e){return"composedPath"in e?e.composedPath()[0]:e.target}const F7e="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function j7e(e){return Nl(e)&&e.matches(F7e)}const vl=Math.min,sa=Math.max,CO=Math.round,cN=Math.floor,D0=e=>({x:e,y:e}),B7e={left:"right",right:"left",bottom:"top",top:"bottom"},U7e={start:"end",end:"start"};function IU(e,t,n){return sa(e,vl(t,n))}function cm(e,t){return typeof e=="function"?e(t):e}function jf(e){return e.split("-")[0]}function Mx(e){return e.split("-")[1]}function TW(e){return e==="x"?"y":"x"}function AW(e){return e==="y"?"height":"width"}function Tb(e){return["top","bottom"].includes(jf(e))?"y":"x"}function CW(e){return TW(Tb(e))}function z7e(e,t,n){n===void 0&&(n=!1);const r=Mx(e),i=CW(e),s=AW(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=IO(o)),[o,IO(o)]}function V7e(e){const t=IO(e);return[kU(e),t,kU(t)]}function kU(e){return e.replace(/start|end/g,t=>U7e[t])}function H7e(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function q7e(e,t,n,r){const i=Mx(e);let s=H7e(jf(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(kU)))),s}function IO(e){return e.replace(/left|right|bottom|top/g,t=>B7e[t])}function W7e(e){return{top:0,right:0,bottom:0,left:0,...e}}function IW(e){return typeof e!="number"?W7e(e):{top:e,right:e,bottom:e,left:e}}function bE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Vse(e,t,n){let{reference:r,floating:i}=e;const s=Tb(t),o=CW(t),a=AW(o),u=jf(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Mx(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const G7e=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=Vse(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:w,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=Vse(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function kW(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=cm(t,e),p=IW(h),g=a[d?f==="floating"?"reference":"floating":f],y=bE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},E=bE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const Y7e=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=cm(e,t)||{};if(l==null)return{};const f=IW(c),d={x:n,y:r},h=CW(i),p=AW(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],E=d[h]-s.reference[h],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let S=T?T[b]:0;(!S||!await(o.isElement==null?void 0:o.isElement(T)))&&(S=a.floating[b]||s.floating[p]);const A=w/2-E/2,C=S/2-m[p]/2-1,k=vl(f[y],C),N=vl(f[v],C),O=k,P=S-m[p]-N,$=S/2-m[p]/2+A,F=IU(O,$,P),M=!u.arrow&&Mx(i)!=null&&$!==F&&s.reference[p]/2-($<O?k:N)-m[p]/2<0,B=M?$<O?$-O:$-P:0;return{[h]:d[h]+B,data:{[h]:F,centerOffset:$-F-B,...M&&{alignmentOffset:B}},reset:M}}}),K7e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=cm(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=jf(i),v=jf(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(v||!m?[IO(a)]:V7e(a));!d&&p!=="none"&&w.push(...q7e(a,m,p,b));const E=[a,...w],T=await kW(t,g),S=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&S.push(T[y]),f){const O=z7e(i,o,b);S.push(T[O[0]],T[O[1]])}if(A=[...A,{placement:i,overflows:S}],!S.every(O=>O<=0)){var C,k;const O=(((C=s.flip)==null?void 0:C.index)||0)+1,P=E[O];if(P)return{data:{index:O,overflows:A},reset:{placement:P}};let $=(k=A.filter(F=>F.overflows[0]<=0).sort((F,M)=>F.overflows[1]-M.overflows[1])[0])==null?void 0:k.placement;if(!$)switch(h){case"bestFit":{var N;const F=(N=A.map(M=>[M.placement,M.overflows.filter(B=>B>0).reduce((B,U)=>B+U,0)]).sort((M,B)=>M[1]-B[1])[0])==null?void 0:N[0];F&&($=F);break}case"initialPlacement":$=a;break}if(i!==$)return{reset:{placement:$}}}return{}}}};function z1e(e){const t=vl(...e.map(s=>s.left)),n=vl(...e.map(s=>s.top)),r=sa(...e.map(s=>s.right)),i=sa(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function X7e(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>bE(z1e(i)))}const Q7e=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=cm(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=X7e(c),d=bE(z1e(c)),h=IW(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(Tb(n)==="y"){const k=f[0],N=f[f.length-1],O=jf(n)==="top",P=k.top,$=N.bottom,F=O?k.left:N.left,M=O?k.right:N.right,B=M-F,U=$-P;return{top:P,bottom:$,left:F,right:M,width:B,height:U,x:F,y:P}}const g=jf(n)==="left",y=sa(...f.map(k=>k.right)),v=vl(...f.map(k=>k.left)),b=f.filter(k=>g?k.left===v:k.right===y),w=b[0].top,E=b[b.length-1].bottom,T=v,S=y,A=S-T,C=E-w;return{top:w,bottom:E,left:T,right:S,width:A,height:C,x:T,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function J7e(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=jf(n),a=Mx(n),u=Tb(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=cm(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const Z7e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await J7e(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},eze=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=cm(e,t),l={x:n,y:r},c=await kW(t,u),f=Tb(jf(i)),d=TW(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=IU(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=IU(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},tze=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=cm(e,t),c={x:n,y:r},f=Tb(i),d=TW(f);let h=c[d],p=c[f];const m=cm(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",w=s.reference[d]-s.floating[b]+g.mainAxis,E=s.reference[d]+s.reference[b]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(l){var y,v;const b=d==="y"?"width":"height",w=["top","left"].includes(jf(i)),E=s.reference[f]-s.floating[b]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),T=s.reference[f]+s.reference[b]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<E?p=E:p>T&&(p=T)}return{[d]:h,[f]:p}}}},nze=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=cm(e,t),u=await kW(t,a),l=jf(n),c=Mx(n),f=Tb(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=vl(h-u[p],g),b=vl(d-u[m],y),w=!t.middlewareData.shift;let E=v,T=b;if(f?T=c||w?vl(b,y):y:E=c||w?vl(v,g):g,w&&!c){const A=sa(u.left,0),C=sa(u.right,0),k=sa(u.top,0),N=sa(u.bottom,0);f?T=d-2*(A!==0||C!==0?A+C:sa(u.left,u.right)):E=h-2*(k!==0||N!==0?k+N:sa(u.top,u.bottom))}await o({...t,availableWidth:T,availableHeight:E});const S=await i.getDimensions(s.floating);return d!==S.width||h!==S.height?{reset:{rects:!0}}:{}}}};function V1e(e){const t=Ac(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Nl(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=CO(n)!==s||CO(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function RW(e){return _i(e)?e:e.contextElement}function Dw(e){const t=RW(e);if(!Nl(t))return D0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=V1e(t);let o=(s?CO(n.width):n.width)/r,a=(s?CO(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const rze=D0(0);function H1e(e){const t=Lu(e);return!SW()||!t.visualViewport?rze:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ize(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Lu(e)?!1:t}function D1(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=RW(e);let o=D0(1);t&&(r?_i(r)&&(o=Dw(r)):o=Dw(e));const a=ize(s,n,r)?H1e(s):D0(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Lu(s),h=r&&_i(r)?Lu(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=Dw(m),y=m.getBoundingClientRect(),v=Ac(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=w,p=Lu(m),m=p.frameElement}}return bE({width:c,height:f,x:u,y:l})}const sze=[":popover-open",":modal"];function NW(e){return sze.some(t=>{try{return e.matches(t)}catch{return!1}})}function oze(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Mm(r),a=t?NW(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=D0(1);const c=D0(0),f=Nl(r);if((f||!f&&!s)&&(($x(r)!=="body"||HI(o))&&(u=oL(r)),Nl(r))){const d=D1(r);l=Dw(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function aze(e){return Array.from(e.getClientRects())}function q1e(e){return D1(Mm(e)).left+oL(e).scrollLeft}function uze(e){const t=Mm(e),n=oL(e),r=e.ownerDocument.body,i=sa(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=sa(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+q1e(e);const a=-n.scrollTop;return Ac(r).direction==="rtl"&&(o+=sa(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function lze(e,t){const n=Lu(e),r=Mm(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=SW();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function cze(e,t){const n=D1(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Nl(e)?Dw(e):D0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function Hse(e,t,n){let r;if(t==="viewport")r=lze(e,n);else if(t==="document")r=uze(Mm(e));else if(_i(t))r=cze(t,n);else{const i=H1e(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return bE(r)}function W1e(e,t){const n=lm(e);return n===t||!_i(n)||P0(n)?!1:Ac(n).position==="fixed"||W1e(n,t)}function fze(e,t){const n=t.get(e);if(n)return n;let r=Yp(e,[],!1).filter(a=>_i(a)&&$x(a)!=="body"),i=null;const s=Ac(e).position==="fixed";let o=s?lm(e):e;for(;_i(o)&&!P0(o);){const a=Ac(o),u=xW(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||HI(o)&&!u&&W1e(e,o))?r=r.filter(c=>c!==o):i=a,o=lm(o)}return t.set(e,r),r}function dze(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?NW(t)?[]:fze(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=Hse(t,c,i);return l.top=sa(f.top,l.top),l.right=vl(f.right,l.right),l.bottom=vl(f.bottom,l.bottom),l.left=sa(f.left,l.left),l},Hse(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function hze(e){const{width:t,height:n}=V1e(e);return{width:t,height:n}}function pze(e,t,n){const r=Nl(t),i=Mm(t),s=n==="fixed",o=D1(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=D0(0);if(r||!r&&!s)if(($x(t)!=="body"||HI(i))&&(a=oL(t)),r){const f=D1(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=q1e(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function wj(e){return Ac(e).position==="static"}function qse(e,t){return!Nl(e)||Ac(e).position==="fixed"?null:t?t(e):e.offsetParent}function G1e(e,t){const n=Lu(e);if(NW(e))return n;if(!Nl(e)){let i=lm(e);for(;i&&!P0(i);){if(_i(i)&&!wj(i))return i;i=lm(i)}return n}let r=qse(e,t);for(;r&&R7e(r)&&wj(r);)r=qse(r,t);return r&&P0(r)&&wj(r)&&!xW(r)?n:r||N7e(e)||n}const mze=async function(e){const t=this.getOffsetParent||G1e,n=this.getDimensions,r=await n(e.floating);return{reference:pze(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function gze(e){return Ac(e).direction==="rtl"}const yze={convertOffsetParentRelativeRectToViewportRelativeRect:oze,getDocumentElement:Mm,getClippingRect:dze,getOffsetParent:G1e,getElementRects:mze,getClientRects:aze,getDimensions:hze,getScale:Dw,isElement:_i,isRTL:gze};function vze(e,t){let n=null,r;const i=Mm(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=cN(c),p=cN(i.clientWidth-(l+f)),m=cN(i.clientHeight-(c+d)),g=cN(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:sa(0,vl(1,u))||1};let b=!0;function w(E){const T=E[0].intersectionRatio;if(T!==u){if(!b)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function bze(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=RW(e),c=i||s?[...l?Yp(l):[],...Yp(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?vze(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?D1(e):null;u&&g();function g(){const y=D1(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const _ze=Z7e,wze=eze,Eze=K7e,xze=nze,Wse=Y7e,Sze=Q7e,Tze=tze,Aze=(e,t,n)=>{const r=new Map,i={platform:yze,...n},s={...i.platform,_c:r};return G7e(e,t,{...i,platform:s})};var WP=typeof document<"u"?I.useLayoutEffect:I.useEffect;function kO(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!kO(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!kO(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Y1e(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Gse(e,t){const n=Y1e(e);return Math.round(t*n)/n}function Yse(e){const t=I.useRef(e);return WP(()=>{t.current=e}),t}function Cze(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=I.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=I.useState(r);kO(d,r)||h(r);const[p,m]=I.useState(null),[g,y]=I.useState(null),v=I.useCallback(B=>{B!==T.current&&(T.current=B,m(B))},[]),b=I.useCallback(B=>{B!==S.current&&(S.current=B,y(B))},[]),w=s||p,E=o||g,T=I.useRef(null),S=I.useRef(null),A=I.useRef(c),C=u!=null,k=Yse(u),N=Yse(i),O=I.useCallback(()=>{if(!T.current||!S.current)return;const B={placement:t,strategy:n,middleware:d};N.current&&(B.platform=N.current),Aze(T.current,S.current,B).then(U=>{const H={...U,isPositioned:!0};P.current&&!kO(A.current,H)&&(A.current=H,UI.flushSync(()=>{f(H)}))})},[d,t,n,N]);WP(()=>{l===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[l]);const P=I.useRef(!1);WP(()=>(P.current=!0,()=>{P.current=!1}),[]),WP(()=>{if(w&&(T.current=w),E&&(S.current=E),w&&E){if(k.current)return k.current(w,E,O);O()}},[w,E,O,k,C]);const $=I.useMemo(()=>({reference:T,floating:S,setReference:v,setFloating:b}),[v,b]),F=I.useMemo(()=>({reference:w,floating:E}),[w,E]),M=I.useMemo(()=>{const B={position:n,left:0,top:0};if(!F.floating)return B;const U=Gse(F.floating,c.x),H=Gse(F.floating,c.y);return a?{...B,transform:"translate("+U+"px, "+H+"px)",...Y1e(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:H}},[n,a,F.floating,c.x,c.y]);return I.useMemo(()=>({...c,update:O,refs:$,elements:F,floatingStyles:M}),[c,O,$,F,M])}const Ize=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Wse({element:r.current,padding:i}).fn(n):{}:r?Wse({element:r,padding:i}).fn(n):{}}}},K1e=(e,t)=>({..._ze(e),options:[e,t]}),PW=(e,t)=>({...wze(e),options:[e,t]}),Kse=(e,t)=>({...Tze(e),options:[e,t]}),RU=(e,t)=>({...Eze(e),options:[e,t]}),kze=(e,t)=>({...xze(e),options:[e,t]}),NU=(e,t)=>({...Sze(e),options:[e,t]}),X1e=(e,t)=>({...Ize(e),options:[e,t]}),Q1e={...QD},Rze=Q1e.useInsertionEffect,Nze=Rze||(e=>e());function Og(e){const t=I.useRef(()=>{});return Nze(()=>{t.current=e}),I.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Jd=typeof document<"u"?I.useLayoutEffect:I.useEffect;let Xse=!1,Pze=0;const Qse=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Pze++;function Dze(){const[e,t]=I.useState(()=>Xse?Qse():void 0);return Jd(()=>{e==null&&t(Qse())},[]),I.useEffect(()=>{Xse=!0},[]),e}const Oze=Q1e.useId,J1e=Oze||Dze;function $ze(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const Mze=I.createContext(null),Lze=I.createContext(null),DW=()=>{var e;return((e=I.useContext(Mze))==null?void 0:e.id)||null},OW=()=>I.useContext(Lze);function $W(e){return"data-floating-ui-"+e}function Jse(e){const t=I.useRef(e);return Jd(()=>{t.current=e}),t}const Zse=$W("safe-polygon");function GP(e,t,n){return n&&!CU(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function Fze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=OW(),m=DW(),g=Jse(c),y=Jse(l),v=I.useRef(),b=I.useRef(-1),w=I.useRef(),E=I.useRef(-1),T=I.useRef(!0),S=I.useRef(!1),A=I.useRef(()=>{}),C=I.useCallback(()=>{var P;const $=(P=i.current.openEvent)==null?void 0:P.type;return($==null?void 0:$.includes("mouse"))&&$!=="mousedown"},[i]);I.useEffect(()=>{if(!u)return;function P($){let{open:F}=$;F||(clearTimeout(b.current),clearTimeout(E.current),T.current=!0)}return s.on("openchange",P),()=>{s.off("openchange",P)}},[u,s]),I.useEffect(()=>{if(!u||!g.current||!n)return;function P(F){C()&&r(!1,F,"hover")}const $=Kv(a).documentElement;return $.addEventListener("mouseleave",P),()=>{$.removeEventListener("mouseleave",P)}},[a,n,r,u,g,C]);const k=I.useCallback(function(P,$,F){$===void 0&&($=!0),F===void 0&&(F="hover");const M=GP(y.current,"close",v.current);M&&!w.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,P,F),M)):$&&(clearTimeout(b.current),r(!1,P,F))},[y,r]),N=Og(()=>{A.current(),w.current=void 0}),O=Og(()=>{if(S.current){const P=Kv(a).body;P.style.pointerEvents="",P.removeAttribute(Zse),S.current=!1}});return I.useEffect(()=>{if(!u)return;function P(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function $(B){if(clearTimeout(b.current),T.current=!1,f&&!CU(v.current)||d>0&&!GP(y.current,"open"))return;const U=GP(y.current,"open",v.current);U?b.current=window.setTimeout(()=>{r(!0,B,"hover")},U):r(!0,B,"hover")}function F(B){if(P())return;A.current();const U=Kv(a);if(clearTimeout(E.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),w.current=g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),N(),k(B,!0,"safe-polygon")}});const D=w.current;U.addEventListener("mousemove",D),A.current=()=>{U.removeEventListener("mousemove",D)};return}(v.current==="touch"?!dC(a,B.relatedTarget):!0)&&k(B)}function M(B){P()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),N(),k(B)}})(B))}if(_i(o)){const B=o;return n&&B.addEventListener("mouseleave",M),a==null||a.addEventListener("mouseleave",M),h&&B.addEventListener("mousemove",$,{once:!0}),B.addEventListener("mouseenter",$),B.addEventListener("mouseleave",F),()=>{n&&B.removeEventListener("mouseleave",M),a==null||a.removeEventListener("mouseleave",M),h&&B.removeEventListener("mousemove",$),B.removeEventListener("mouseenter",$),B.removeEventListener("mouseleave",F)}}},[o,a,u,e,f,d,h,k,N,O,r,n,p,y,g,i]),Jd(()=>{var P;if(u&&n&&(P=g.current)!=null&&P.__options.blockPointerEvents&&C()){const F=Kv(a).body;if(F.setAttribute(Zse,""),F.style.pointerEvents="none",S.current=!0,_i(o)&&a){var $;const M=o,B=p==null||($=p.nodesRef.current.find(U=>U.id===m))==null||($=$.context)==null?void 0:$.elements.floating;return B&&(B.style.pointerEvents=""),M.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{M.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,C]),Jd(()=>{n||(v.current=void 0,N(),O())},[n,N,O]),I.useEffect(()=>()=>{N(),clearTimeout(b.current),clearTimeout(E.current),O()},[u,o,N,O]),I.useMemo(()=>{if(!u)return{};function P($){v.current=$.pointerType}return{reference:{onPointerDown:P,onPointerEnter:P,onMouseMove($){function F(){T.current||r(!0,$.nativeEvent,"hover")}f&&!CU(v.current)||n||d===0||(clearTimeout(E.current),v.current==="touch"?F():E.current=window.setTimeout(F,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave($){k($.nativeEvent,!1)}}}},[u,f,n,d,r,k])}const PU=()=>{},Z1e=I.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:PU,setState:PU,isInstantPhase:!1}),ebe=()=>I.useContext(Z1e);function jze(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=I.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=I.useRef(null),a=I.useCallback(u=>{s({currentId:u})},[]);return Jd(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),I.createElement(Z1e.Provider,{value:I.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function Bze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=ebe(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return Jd(()=>{u&&(f({delay:{open:1,close:GP(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),Jd(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),Jd(()=>{l===PU||!n||l(o)},[n,l,o]),a}function Ej(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const Uze={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},zze={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},eoe=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function Vze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=OW(),v=Og(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,w=I.useRef(!1),E=I.useRef(!1),{escapeKey:T,outsidePress:S}=eoe(m),{escapeKey:A,outsidePress:C}=eoe(g),k=Og($=>{var F;if(!n||!u||!l||$.key!=="Escape")return;const M=(F=a.current.floatingContext)==null?void 0:F.nodeId,B=y?Ej(y.nodesRef.current,M):[];if(!T&&($.stopPropagation(),B.length>0)){let U=!0;if(B.forEach(H=>{var D;if((D=H.context)!=null&&D.open&&!H.context.dataRef.current.__escapeKeyBubbles){U=!1;return}}),!U)return}r(!1,M7e($)?$.nativeEvent:$,"escape-key")}),N=Og($=>{var F;const M=()=>{var B;k($),(B=j_($))==null||B.removeEventListener("keydown",M)};(F=j_($))==null||F.addEventListener("keydown",M)}),O=Og($=>{var F;const M=w.current;w.current=!1;const B=E.current;if(E.current=!1,f==="click"&&B||M||typeof b=="function"&&!b($))return;const U=j_($),H="["+$W("inert")+"]",D=Kv(o).querySelectorAll(H);let z=_i(U)?U:null;for(;z&&!P0(z);){const G=lm(z);if(P0(G)||!_i(G))break;z=G}if(D.length&&_i(U)&&!L7e(U)&&!dC(U,o)&&Array.from(D).every(G=>!dC(z,G)))return;if(Nl(U)&&o){const G=U.clientWidth>0&&U.scrollWidth>U.clientWidth,re=U.clientHeight>0&&U.scrollHeight>U.clientHeight;let de=re&&$.offsetX>U.clientWidth;if(re&&Ac(U).direction==="rtl"&&(de=$.offsetX<=U.offsetWidth-U.clientWidth),de||G&&$.offsetY>U.clientHeight)return}const W=(F=a.current.floatingContext)==null?void 0:F.nodeId,j=y&&Ej(y.nodesRef.current,W).some(G=>{var re;return _j($,(re=G.context)==null?void 0:re.elements.floating)});if(_j($,o)||_j($,s)||j)return;const q=y?Ej(y.nodesRef.current,W):[];if(q.length>0){let G=!0;if(q.forEach(re=>{var de;if((de=re.context)!=null&&de.open&&!re.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,$,"outside-press")}),P=Og($=>{var F;const M=()=>{var B;O($),(B=j_($))==null||B.removeEventListener(f,M)};(F=j_($))==null||F.addEventListener(f,M)});return I.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=T,a.current.__outsidePressBubbles=S;function $(B){r(!1,B,"ancestor-scroll")}const F=Kv(o);l&&F.addEventListener("keydown",A?N:k,A),b&&F.addEventListener(f,C?P:O,C);let M=[];return p&&(_i(s)&&(M=Yp(s)),_i(o)&&(M=M.concat(Yp(o))),!_i(i)&&i&&i.contextElement&&(M=M.concat(Yp(i.contextElement)))),M=M.filter(B=>{var U;return B!==((U=F.defaultView)==null?void 0:U.visualViewport)}),M.forEach(B=>{B.addEventListener("scroll",$,{passive:!0})}),()=>{l&&F.removeEventListener("keydown",A?N:k,A),b&&F.removeEventListener(f,C?P:O,C),M.forEach(B=>{B.removeEventListener("scroll",$)})}},[a,o,s,i,l,b,f,n,r,p,u,T,S,k,A,N,O,C,P]),I.useEffect(()=>{w.current=!1},[b,f]),I.useMemo(()=>u?{reference:{onKeyDown:k,[Uze[h]]:$=>{d&&r(!1,$.nativeEvent,"reference-press")}},floating:{onKeyDown:k,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[zze[f]]:()=>{w.current=!0}}}:{},[u,d,f,h,r,k])}function Hze(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=J1e(),s=I.useRef({}),[o]=I.useState(()=>$ze()),a=DW()!=null,[u,l]=I.useState(r.reference),c=Og((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=I.useMemo(()=>({setPositionReference:l}),[]),d=I.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return I.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function MW(e){e===void 0&&(e={});const{nodeId:t}=e,n=Hze({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=I.useState(null),[a,u]=I.useState(null),c=(i==null?void 0:i.reference)||s,f=I.useRef(null),d=OW();Jd(()=>{c&&(f.current=c)},[c]);const h=Cze({...e,elements:{...i,...a&&{reference:a}}}),p=I.useCallback(b=>{const w=_i(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(w),h.refs.setReference(w)},[h.refs]),m=I.useCallback(b=>{(_i(b)||b===null)&&(f.current=b,o(b)),(_i(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!_i(b))&&h.refs.setReference(b)},[h.refs]),g=I.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=I.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=I.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return Jd(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);b&&(b.context=v)}),I.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function qze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=I.useRef(!1),c=I.useRef(),f=I.useRef(!0);return I.useEffect(()=>{if(!a)return;const d=Lu(o);function h(){!n&&Nl(o)&&o===Use(Kv(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),I.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),I.useEffect(()=>()=>{clearTimeout(c.current)},[]),I.useMemo(()=>a?{reference:{onPointerDown(d){P7e(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=j_(d.nativeEvent);if(u&&_i(h))try{if(D7e()&&O7e())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!j7e(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=_i(h)&&h.hasAttribute($W("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=Use(o?o.ownerDocument:document);!h&&g===o||dC((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||dC(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const toe="active",noe="selected";function xj(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[toe]:o,[noe]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[toe,noe].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function Wze(e){e===void 0&&(e=[]);const t=e,n=I.useCallback(s=>xj(s,e,"reference"),t),r=I.useCallback(s=>xj(s,e,"floating"),t),i=I.useCallback(s=>xj(s,e,"item"),e.map(s=>s==null?void 0:s.item));return I.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const Gze=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Yze(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=Gze.get(o))!=null?n:o,u=J1e(),c=DW()!=null;return I.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function tbe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function roe(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function ioe(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const Kze={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Xze({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Ie(t),height:Ie(t),transform:"rotate(45deg)",position:"absolute",[Kze[u]]:Ie(r)},f=Ie(-t/2);return u==="left"?{...c,...roe(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...roe(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...ioe(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...ioe(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const LW=I.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=Dh();return s?_.jsx("div",{...l,ref:c,style:{...u,...Xze({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});LW.displayName="@mantine/core/FloatingArrow";const[Qze,nbe]=lo("Popover component was not found in the tree");function aL({children:e,active:t=!0,refProp:n="ref"}){const r=MBe(t),i=ls(r,e==null?void 0:e.ref);return wy(e)?I.cloneElement(e,{[n]:i}):e}function rbe(e){return _.jsx(EW,{tabIndex:-1,"data-autofocus":!0,...e})}aL.displayName="@mantine/core/FocusTrap";rbe.displayName="@mantine/core/FocusTrapInitialFocus";aL.InitialFocus=rbe;function Jze(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const Zze={},ibe=I.forwardRef((e,t)=>{const{children:n,target:r,...i}=Ae("Portal",Zze,e),[s,o]=I.useState(!1),a=I.useRef(null);return Eb(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:Jze(i),dW(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:UI.createPortal(_.jsx(_.Fragment,{children:n}),a.current)});ibe.displayName="@mantine/core/Portal";function Lx({withinPortal:e=!0,children:t,...n}){return e?_.jsx(ibe,{...n,children:t}):_.jsx(_.Fragment,{children:t})}Lx.displayName="@mantine/core/OptionalPortal";const cT=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Ie(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),fN={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Ie(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Ie(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Ie(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Ie(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Ie(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Ie(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Ie(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Ie(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...cT("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...cT("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...cT("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...cT("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...cT("top"),common:{transformOrigin:"top right"}}},soe={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function eVe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in fN?{transitionProperty:fN[e].transitionProperty,...i,...fN[e].common,...fN[e][soe[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[soe[t]]}}function tVe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=cs(),l=tL(),c=u.respectReducedMotion?l:!1,[f,d]=I.useState(c?0:e),[h,p]=I.useState(r?"entered":"exited"),m=I.useRef(-1),g=I.useRef(-1),y=v=>{const b=v?i:s,w=v?o:a;window.clearTimeout(m.current);const E=c?0:v?e:t;d(E),E===0?(typeof b=="function"&&b(),typeof w=="function"&&w(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{s2.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof w=="function"&&w(),p(v?"entered":"exited")},E)})})};return hh(()=>{y(r)},[r]),I.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function Lm({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=tVe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?_.jsx(_.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:_.jsx(_.Fragment,{children:s(eVe({transition:t,duration:f,state:d,timingFunction:h}))})}Lm.displayName="@mantine/core/Transition";var sbe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const nVe={},FW=je((e,t)=>{var g,y,v,b;const n=Ae("PopoverDropdown",nVe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=nbe(),h=a1e({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=ls(t,d.floating);return d.disabled?null:_.jsx(Lx,{...d.portalProps,withinPortal:d.withinPortal,children:_.jsx(Lm,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:w=>_.jsx(aL,{active:d.trapFocus,children:_.jsxs(we,{...p,...f,variant:u,ref:m,onKeyDownCapture:xBe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Ie(d.width)},i]}),children:[o,_.jsx(LW,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});FW.classes=sbe;FW.displayName="@mantine/core/PopoverDropdown";const rVe={refProp:"ref",popupType:"dialog"},obe=je((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=Ae("PopoverTarget",rVe,e);if(!wy(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=nbe(),u=ls(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return I.cloneElement(n,{...o,...l,...a.targetProps,className:Yi(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});obe.displayName="@mantine/core/PopoverTarget";function abe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=I.useState(0);I.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return bze(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),hh(()=>{t.update()},r),hh(()=>{s(o=>o+1)},[e])}function iVe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function sVe(e,t){const n=iVe(e.middlewares),r=[K1e(e.offset)];return n.shift&&r.push(PW(typeof n.shift=="boolean"?{limiter:Kse(),padding:5}:{limiter:Kse(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?RU():RU(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?NU():NU(n.inline)),r.push(X1e({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(kze({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function oVe(e){const[t,n]=ws({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=MW({strategy:e.strategy,placement:e.position,middleware:sVe(e,()=>s)});return abe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),hh(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),hh(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const aVe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Gl("popover"),__staticSelector:"Popover",width:"max-content"},uVe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:jr(t),"--popover-shadow":cW(n)}});function ko(e){var ve,Re,He,Ze,bt,Ge;const t=Ae("Popover",aVe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:w,portalProps:E,closeOnEscape:T,clickOutsideEvents:S,trapFocus:A,onClose:C,onOpen:k,onChange:N,zIndex:O,radius:P,shadow:$,id:F,defaultOpened:M,__staticSelector:B,withRoles:U,disabled:H,returnFocus:D,variant:z,keepMounted:W,vars:j,floatingStrategy:q,...G}=t,re=ht({name:B,props:t,classes:sbe,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:j,varsResolver:uVe}),de=I.useRef(null),[pe,ge]=I.useState(null),[Ee,Z]=I.useState(null),{dir:Q}=Dh(),fe=wa(F),be=oVe({middlewares:c,width:l,position:tbe(Q,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:de,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:M,onChange:N,onOpen:k,onClose:C,strategy:q});ABe(()=>b&&be.onClose(),S,[pe,Ee]);const Me=I.useCallback(ye=>{ge(ye),be.floating.refs.setReference(ye)},[be.floating.refs.setReference]),Be=I.useCallback(ye=>{Z(ye),be.floating.refs.setFloating(ye)},[be.floating.refs.setFloating]);return _.jsx(Qze,{value:{returnFocus:D,disabled:H,controlled:be.controlled,reference:Me,floating:Be,x:be.floating.x,y:be.floating.y,arrowX:(He=(Re=(ve=be.floating)==null?void 0:ve.middlewareData)==null?void 0:Re.arrow)==null?void 0:He.x,arrowY:(Ge=(bt=(Ze=be.floating)==null?void 0:Ze.middlewareData)==null?void 0:bt.arrow)==null?void 0:Ge.y,opened:be.opened,arrowRef:de,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:be.floating.placement,trapFocus:A,withinPortal:w,portalProps:E,zIndex:O,radius:P,shadow:$,closeOnEscape:T,onClose:be.onClose,onToggle:be.onToggle,getTargetId:()=>`${fe}-target`,getDropdownId:()=>`${fe}-dropdown`,withRoles:U,targetProps:G,__staticSelector:B,classNames:y,styles:v,unstyled:g,variant:z,keepMounted:W,getStyles:re},children:n})}ko.Target=obe;ko.Dropdown=FW;ko.displayName="@mantine/core/Popover";ko.extend=e=>e;var xf={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const lVe=I.forwardRef(({className:e,...t},n)=>_.jsxs(we,{component:"span",className:Yi(xf.barsLoader,e),...t,ref:n,children:[_.jsx("span",{className:xf.bar}),_.jsx("span",{className:xf.bar}),_.jsx("span",{className:xf.bar})]})),cVe=I.forwardRef(({className:e,...t},n)=>_.jsxs(we,{component:"span",className:Yi(xf.dotsLoader,e),...t,ref:n,children:[_.jsx("span",{className:xf.dot}),_.jsx("span",{className:xf.dot}),_.jsx("span",{className:xf.dot})]})),fVe=I.forwardRef(({className:e,...t},n)=>_.jsx(we,{component:"span",className:Yi(xf.ovalLoader,e),...t,ref:n})),ube={bars:lVe,oval:fVe,dots:cVe},dVe={loaders:ube,type:"oval"},hVe=(e,{size:t,color:n})=>({root:{"--loader-size":en(t,"loader-size"),"--loader-color":n?Dr(n,e):void 0}}),Oh=je((e,t)=>{const n=Ae("Loader",dVe,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=ht({name:"Loader",props:n,classes:xf,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:hVe});return p?_.jsx(we,{...g("root"),ref:t,...m,children:p}):_.jsx(we,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});Oh.defaultLoaders=ube;Oh.classes=xf;Oh.displayName="@mantine/core/Loader";var uL={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const ooe={orientation:"horizontal"},pVe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Ie(t)}}),jW=je((e,t)=>{const n=Ae("ActionIconGroup",ooe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Ae("ActionIconGroup",ooe,e),p=ht({name:"ActionIconGroup",props:n,classes:uL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:pVe,rootSelector:"group"});return _.jsx(we,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});jW.classes=uL;jW.displayName="@mantine/core/ActionIconGroup";const mVe={},gVe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":en(t,"ai-size"),"--ai-radius":n===void 0?void 0:jr(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},Ab=js((e,t)=>{const n=Ae("ActionIcon",mVe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:w,mod:E,...T}=n,S=ht({name:["ActionIcon",p],props:n,className:r,style:u,classes:uL,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:gVe});return _.jsxs(_s,{...S("root",{active:!v&&!l&&!b}),...T,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},E],children:[_.jsx(Lm,{mounted:!!l,transition:"slide-down",duration:150,children:A=>_.jsx(we,{component:"span",...S("loader",{style:A}),"aria-hidden":!0,children:_.jsx(Oh,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(we,{component:"span",mod:{loading:l},...S("icon"),children:y})]})});Ab.classes=uL;Ab.displayName="@mantine/core/ActionIcon";Ab.Group=jW;const lbe=I.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));lbe.displayName="@mantine/core/CloseIcon";var cbe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const yVe={variant:"subtle"},vVe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":en(t,"cb-size"),"--cb-radius":n===void 0?void 0:jr(n),"--cb-icon-size":Ie(r)}}),Fm=js((e,t)=>{const n=Ae("CloseButton",yVe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=ht({name:"CloseButton",props:n,className:a,style:l,classes:cbe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:vVe});return _.jsxs(_s,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||_.jsx(lbe,{}),i]})});Fm.classes=cbe;Fm.displayName="@mantine/core/CloseButton";function bVe(e){return I.Children.toArray(e).filter(Boolean)}var fbe={root:"m_4081bf90"};const _Ve={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},wVe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":is(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Es=je((e,t)=>{const n=Ae("Group",_Ve,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,w=bVe(u),E=w.length,T=is(l??"md"),A={childWidth:`calc(${100/E}% - (${T} - ${T} / ${E}))`},C=ht({name:"Group",props:n,stylesCtx:A,className:i,style:s,classes:fbe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:wVe});return _.jsx(we,{...C("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:w})});Es.classes=fbe;Es.displayName="@mantine/core/Group";var dbe={root:"m_9814e45f"};const EVe={zIndex:Gl("modal")},xVe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&wd(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Ie(i)})`:void 0,"--overlay-radius":s===void 0?void 0:jr(s),"--overlay-z-index":o==null?void 0:o.toString()}}),hC=js((e,t)=>{const n=Ae("Overlay",EVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,w=ht({name:"Overlay",props:n,classes:dbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xVe});return _.jsx(we,{ref:t,...w("root"),mod:[{center:c,fixed:l},v],...b,children:f})});hC.classes=dbe;hC.displayName="@mantine/core/Overlay";const[SVe,jm]=lo("ModalBase component was not found in tree");function TVe({opened:e,transitionDuration:t}){const[n,r]=I.useState(e),i=I.useRef(),o=tL()?0:t;return I.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function AVe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=wa(e),[u,l]=I.useState(!1),[c,f]=I.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=TVe({opened:n,transitionDuration:d});return f1e("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),a1e({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const hbe=I.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},w)=>{const{_id:E,titleMounted:T,bodyMounted:S,shouldLockScroll:A,setTitleMounted:C,setBodyMounted:k}=AVe({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return _.jsx(Lx,{...c,withinPortal:l,children:_.jsx(SVe,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:T,bodyMounted:S,setTitleMounted:C,setBodyMounted:k,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:_.jsx(ZM,{enabled:A&&f,...v,children:_.jsx(we,{ref:w,...b,__vars:{...g,"--mb-z-index":(h||Gl("modal")).toString(),"--mb-shadow":cW(p),"--mb-padding":is(m)},children:d})})})})});function CVe(){const e=jm();return I.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var _E={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const BW=I.forwardRef(({className:e,...t},n)=>{const r=CVe(),i=jm();return _.jsx(we,{ref:n,...t,id:r,className:Yi({[_E.body]:!i.unstyled},e)})});BW.displayName="@mantine/core/ModalBaseBody";const UW=I.forwardRef(({className:e,onClick:t,...n},r)=>{const i=jm();return _.jsx(Fm,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Yi({[_E.close]:!i.unstyled},e),unstyled:i.unstyled})});UW.displayName="@mantine/core/ModalBaseCloseButton";const pbe=I.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=jm();return _.jsx(Lm,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>_.jsx("div",{...n,className:Yi({[_E.inner]:!a.unstyled},n.className),children:_.jsx(aL,{active:a.opened&&a.trapFocus,children:_.jsx(Ox,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Yi({[_E.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),zW=I.forwardRef(({className:e,...t},n)=>{const r=jm();return _.jsx(we,{component:"header",ref:n,className:Yi({[_E.header]:!r.unstyled},e),...t})});zW.displayName="@mantine/core/ModalBaseHeader";const IVe={duration:200,timingFunction:"ease",transition:"fade"};function kVe(e){const t=jm();return{...IVe,...t.transitionProps,...e}}const VW=I.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=jm(),o=kVe(t);return _.jsx(Lm,{mounted:s.opened,...o,transition:"fade",children:a=>_.jsx(hC,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});VW.displayName="@mantine/core/ModalBaseOverlay";function RVe(){const e=jm();return I.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const HW=I.forwardRef(({className:e,...t},n)=>{const r=RVe(),i=jm();return _.jsx(we,{component:"h2",ref:n,className:Yi({[_E.title]:!i.unstyled},e),...t,id:r})});HW.displayName="@mantine/core/ModalBaseTitle";function mbe({children:e}){return _.jsx(_.Fragment,{children:e})}const[NVe,Fx]=Px({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Lc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const aoe={},PVe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${oo(t)} - ${Ie(2)})`}}),lL=je((e,t)=>{const n=Ae("InputDescription",aoe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=Ae("InputDescription",aoe,n),p=Fx(),m=ht({name:["InputWrapper",c],props:n,classes:Lc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:PVe}),g=f&&(p==null?void 0:p.getStyles)||m;return _.jsx(we,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});lL.classes=Lc;lL.displayName="@mantine/core/InputDescription";const DVe={},OVe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${oo(t)} - ${Ie(2)})`}}),cL=je((e,t)=>{const n=Ae("InputError",DVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=ht({name:["InputWrapper",c],props:n,classes:Lc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:OVe}),m=Fx(),g=f&&(m==null?void 0:m.getStyles)||p;return _.jsx(we,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});cL.classes=Lc;cL.displayName="@mantine/core/InputError";const uoe={labelElement:"label"},$Ve=(e,{size:t})=>({label:{"--input-label-size":oo(t),"--input-asterisk-color":void 0}}),fL=je((e,t)=>{const n=Ae("InputLabel",uoe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=Ae("InputLabel",uoe,n),b=ht({name:["InputWrapper",m],props:n,classes:Lc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:$Ve}),w=Fx(),E=(w==null?void 0:w.getStyles)||b;return _.jsxs(we,{...E("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:T=>{h==null||h(T),!T.defaultPrevented&&T.detail>1&&T.preventDefault()},...v,children:[p,f&&_.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});fL.classes=Lc;fL.displayName="@mantine/core/InputLabel";const loe={},qW=je((e,t)=>{const n=Ae("InputPlaceholder",loe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=Ae("InputPlaceholder",loe,n),p=ht({name:["InputPlaceholder",l],props:n,classes:Lc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return _.jsx(we,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});qW.classes=Lc;qW.displayName="@mantine/core/InputPlaceholder";function MVe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const LVe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},FVe=(e,{size:t})=>({label:{"--input-label-size":oo(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${oo(t)} - ${Ie(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${oo(t)} - ${Ie(2)})`}}),WW=je((e,t)=>{const n=Ae("InputWrapper",LVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:w,children:E,withAsterisk:T,id:S,required:A,__stylesApiProps:C,mod:k,...N}=n,O=ht({name:["InputWrapper",f],props:C||n,classes:Lc,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:FVe}),P={size:l,variant:c,__staticSelector:f},$=wa(S),F=typeof T=="boolean"?T:A,M=(b==null?void 0:b.id)||`${$}-error`,B=(v==null?void 0:v.id)||`${$}-description`,U=$,H=!!m&&typeof m!="boolean",D=!!g,z=`${H?M:""} ${D?B:""}`,W=z.trim().length>0?z.trim():void 0,j=(y==null?void 0:y.id)||`${$}-label`,q=p&&_.jsx(fL,{labelElement:w,id:j,htmlFor:U,required:F,...P,...y,children:p},"label"),G=D&&_.jsx(lL,{...v,...P,size:(v==null?void 0:v.size)||P.size,id:(v==null?void 0:v.id)||B,children:g},"description"),re=_.jsx(I.Fragment,{children:d(E)},"input"),de=H&&I.createElement(cL,{...b,...P,size:(b==null?void 0:b.size)||P.size,key:"error",id:(b==null?void 0:b.id)||M},m),pe=h.map(ge=>{switch(ge){case"label":return q;case"input":return re;case"description":return G;case"error":return de;default:return null}});return _.jsx(NVe,{value:{getStyles:O,describedBy:W,inputId:U,labelId:j,...MVe(h,{hasDescription:D,hasError:H})},children:_.jsx(we,{ref:t,variant:c,size:l,mod:[{error:!!m},k],...O("root"),...N,children:pe})})});WW.classes=Lc;WW.displayName="@mantine/core/InputWrapper";const jVe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},BVe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":en(t.size,"input-height"),"--input-fz":oo(t.size),"--input-radius":t.radius===void 0?void 0:jr(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Ie(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Ie(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?en(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),fi=js((e,t)=>{const n=Ae("Input",jVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:w,rightSectionPointerEvents:E,leftSectionPointerEvents:T,variant:S,vars:A,pointer:C,multiline:k,radius:N,id:O,withAria:P,withErrorStyles:$,mod:F,inputSize:M,...B}=n,{styleProps:U,rest:H}=Sb(B),D=Fx(),z={offsetBottom:D==null?void 0:D.offsetBottom,offsetTop:D==null?void 0:D.offsetTop},W=ht({name:["Input",l],props:c||n,classes:Lc,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:z,rootSelector:"wrapper",vars:A,varsResolver:BVe}),j=P?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":D==null?void 0:D.describedBy,id:(D==null?void 0:D.inputId)||O}:{};return _.jsxs(we,{...W("wrapper"),...U,...d,mod:[{error:!!h&&$,pointer:C,disabled:p,multiline:k,"data-with-right-section":!!v,"data-with-left-section":!!m},F],variant:S,size:f,children:[m&&_.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),_.jsx(we,{component:"input",...H,...j,ref:t,required:u,mod:{disabled:p,error:!!h&&$},variant:S,__size:M,...W("input")}),v&&_.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});fi.classes=Lc;fi.Wrapper=WW;fi.Label=fL;fi.Error=cL;fi.Description=lL;fi.Placeholder=qW;fi.displayName="@mantine/core/Input";function gbe(e,t,n){const r=Ae(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:w,inputContainer:E,inputWrapperOrder:T,withAsterisk:S,variant:A,vars:C,mod:k,...N}=r,{styleProps:O,rest:P}=Sb(N),$={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:w,inputContainer:E,inputWrapperOrder:T,withAsterisk:S,variant:A,id:v,mod:k,...y};return{...P,classNames:u,styles:l,unstyled:f,wrapperProps:{...$,...O},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:A,id:v}}}const UVe={__staticSelector:"InputBase",withAria:!0},Fc=js((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=gbe("InputBase",UVe,e);return _.jsx(fi.Wrapper,{...r,children:_.jsx(fi,{...n,...i,ref:t})})});Fc.classes={...fi.classes,...fi.Wrapper.classes};Fc.displayName="@mantine/core/InputBase";const zVe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var ybe={root:"m_8bffd616"};const VVe={},Pt=js((e,t)=>{const n=Ae("Flex",VVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=ht({name:"Flex",classes:ybe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=cs(),b=VI(),w=w1e({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:zVe});return _.jsxs(_.Fragment,{children:[w.hasResponsiveStyles&&_.jsx(xb,{selector:`.${b}`,styles:w.styles,media:w.media}),_.jsx(we,{ref:t,...y("root",{className:b,style:_y(w.inlineStyles)}),...g})]})});Pt.classes=ybe;Pt.displayName="@mantine/core/Flex";function HVe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function qVe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=I.useRef(),[s,o]=I.useState(!1),[a,u]=I.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=I.useRef(),d=I.useRef();return I.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),I.useEffect(()=>{if(t){const h=p=>{HVe(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),GBe(()=>{p1e()!=="test"&&o(!0)},20,{autoInvoke:!0}),YBe(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var vbe={root:"m_96b553a6"};const WVe={},GVe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),GW=je((e,t)=>{const n=Ae("FloatingIndicator",WVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=ht({name:"FloatingIndicator",classes:vbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:GVe}),g=I.useRef(null),{initialized:y,hidden:v}=qVe({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=ls(t,g);return!l||!c?null:_.jsx(we,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});GW.displayName="@mantine/core/FloatingIndicator";GW.classes=vbe;const[YVe,YW]=lo("Accordion component was not found in the tree");function wE({style:e,size:t=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Ie(t),height:Ie(t),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}wE.displayName="@mantine/core/AccordionChevron";const[KVe,bbe]=lo("Accordion.Item component was not found in the tree");var qI={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const XVe={},KW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=Ae("AccordionControl",XVe,e),{value:m}=bbe(),g=YW(),y=g.isItemActive(m),v=typeof g.order=="number",b=`h${g.order}`,w=_.jsxs(_s,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:E=>{l==null||l(E),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:lW({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[_.jsx(we,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),_.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&_.jsx(we,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?_.jsx(b,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});KW.displayName="@mantine/core/AccordionControl";KW.classes=qI;const QVe={},XW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=Ae("AccordionItem",QVe,e),c=YW();return _.jsx(KVe,{value:{value:a},children:_.jsx(we,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});XW.displayName="@mantine/core/AccordionItem";XW.classes=qI;const JVe={},QW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=Ae("AccordionPanel",JVe,e),{value:l}=bbe(),c=YW();return _.jsx(iL,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:_.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});QW.displayName="@mantine/core/AccordionPanel";QW.classes=qI;const ZVe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:_.jsx(wE,{})},eHe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Ie(n),"--accordion-radius":r===void 0?void 0:jr(r)}});function gu(e){const t=Ae("Accordion",ZVe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:b,chevron:w,variant:E,radius:T,...S}=t,A=wa(h),[C,k]=ws({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),N=$=>Array.isArray(C)?C.includes($):$===C,O=$=>{const F=Array.isArray(C)?C.includes($)?C.filter(M=>M!==$):[...C,$]:$===C?null:$;k(F)},P=ht({name:"Accordion",classes:qI,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:eHe});return _.jsx(YVe,{value:{isItemActive:N,onChange:O,getControlId:xO(`${A}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:xO(`${A}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:b,chevron:w,loop:p,getStyles:P,variant:E,unstyled:o},children:_.jsx(we,{...P("root"),id:A,...S,variant:E,"data-accordion":!0,children:u})})}const tHe=e=>e;gu.extend=tHe;gu.classes=qI;gu.displayName="@mantine/core/Accordion";gu.Item=XW;gu.Panel=QW;gu.Control=KW;gu.Chevron=wE;var _be={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const nHe={},rHe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:jr(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},jx=je((e,t)=>{const n=Ae("Alert",nHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,...w}=n,E=ht({name:"Alert",classes:_be,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:rHe}),T=wa(h),S=f&&`${T}-title`||void 0,A=`${T}-body`;return _.jsx(we,{id:T,...E("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":A,"aria-labelledby":S,children:_.jsxs("div",{...E("wrapper"),children:[p&&_.jsx("div",{...E("icon"),children:p}),_.jsxs("div",{...E("body"),children:[f&&_.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:_.jsx("span",{id:S,...E("label"),children:f})}),d&&_.jsx("div",{id:A,...E("message"),"data-variant":v,children:d})]}),m&&_.jsx(Fm,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});jx.classes=_be;jx.displayName="@mantine/core/Alert";var wbe={root:"m_b6d8b162"};function iHe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const sHe={inherit:!1},oHe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":oo(i),"--text-lh":o1e(i),"--text-gradient":t==="gradient"?xU(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Dr(s,e):void 0}}),it=js((e,t)=>{const n=Ae("Text",sHe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,w=ht({name:["Text",l],props:n,classes:wbe,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:oHe});return _.jsx(we,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":iHe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});it.classes=wbe;it.displayName="@mantine/core/Text";var Ebe={root:"m_849cf0da"};const aHe={underline:"hover"},Bx=js((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=Ae("Anchor",aHe,e);return _.jsx(it,{component:"a",ref:t,className:Yi({[Ebe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Bx.classes=Ebe;Bx.displayName="@mantine/core/Anchor";const[uHe,Ux]=lo("AppShell was not found in tree");var Sy={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const lHe={},JW=je((e,t)=>{const n=Ae("AppShellAside",lHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Ux();return h.disabled?null:_.jsx(we,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});JW.classes=Sy;JW.displayName="@mantine/core/AppShellAside";const cHe={},ZW=je((e,t)=>{var p;const n=Ae("AppShellFooter",cHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Ux();return h.disabled?null:_.jsx(we,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Yi({[ZM.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});ZW.classes=Sy;ZW.displayName="@mantine/core/AppShellFooter";const fHe={},eG=je((e,t)=>{var p;const n=Ae("AppShellHeader",fHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Ux();return h.disabled?null:_.jsx(we,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Yi({[ZM.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});eG.classes=Sy;eG.displayName="@mantine/core/AppShellHeader";const dHe={},tG=je((e,t)=>{const n=Ae("AppShellMain",dHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ux();return _.jsx(we,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});tG.classes=Sy;tG.displayName="@mantine/core/AppShellMain";function WI(e){return typeof e=="object"?e.base:e}function GI(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function YI(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function hHe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),GI(s)){const f=Ie(WI(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(YI(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Ie(s.base),e["--app-shell-aside-offset"]=Ie(s.base)),Yr(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Ie(s[f]),t[f]["--app-shell-aside-offset"]=Ie(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=fW(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function pHe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(GI(r)){const o=Ie(WI(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}YI(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Ie(r.base),s&&(e["--app-shell-footer-offset"]=Ie(r.base))),Yr(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Ie(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Ie(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function mHe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(GI(r)){const o=Ie(WI(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}YI(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Ie(r.base),s&&(e["--app-shell-header-offset"]=Ie(r.base))),Yr(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Ie(r[o]),s&&(t[o]["--app-shell-header-offset"]=Ie(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function gHe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),GI(s)){const f=Ie(WI(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(YI(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Ie(s.base),e["--app-shell-navbar-offset"]=Ie(s.base)),Yr(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Ie(s[f]),t[f]["--app-shell-navbar-offset"]=Ie(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=fW(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function Sj(e){return Number(e)===0?"0px":is(e)}function yHe({padding:e,baseStyles:t,minMediaStyles:n}){GI(e)&&(t["--app-shell-padding"]=Sj(WI(e))),YI(e)&&(e.base&&(t["--app-shell-padding"]=Sj(e.base)),Yr(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=Sj(e[r]))}))}function vHe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};gHe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),hHe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),mHe({baseStyles:u,minMediaStyles:o,header:t}),pHe({baseStyles:u,minMediaStyles:o,footer:n}),yHe({baseStyles:u,minMediaStyles:o,padding:i});const l=cC(Yr(o),s).map(d=>({query:`(min-width: ${EO(d.px)})`,styles:o[d.value]})),c=cC(Yr(a),s).map(d=>({query:`(max-width: ${EO(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function bHe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=cs(),o=Ey(),{media:a,baseStyles:u}=vHe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return _.jsx(xb,{media:a,styles:u,selector:o.cssVariablesSelector})}const _He={},nG=je((e,t)=>{const n=Ae("AppShellNavbar",_He,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Ux();return h.disabled?null:_.jsx(we,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});nG.classes=Sy;nG.displayName="@mantine/core/AppShellNavbar";const wHe={},rG=js((e,t)=>{const n=Ae("AppShellSection",wHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=Ux();return _.jsx(we,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});rG.classes=Sy;rG.displayName="@mantine/core/AppShellSection";function EHe({transitionDuration:e,disabled:t}){const[n,r]=I.useState(!0),i=I.useRef(),s=I.useRef();return f1e("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),Eb(()=>{I.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const xHe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Gl("app")},SHe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),ci=je((e,t)=>{const n=Ae("AppShell",xHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:w,mod:E,...T}=n,S=ht({name:"AppShell",classes:Sy,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:SHe}),A=EHe({disabled:y,transitionDuration:d});return _.jsxs(uHe,{value:{getStyles:S,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[_.jsx(bHe,{navbar:l,header:p,aside:v,footer:b,padding:f}),_.jsx(we,{ref:t,...S("root"),mod:[{resizing:A,layout:g,disabled:y},E],...T})]})});ci.classes=Sy;ci.displayName="@mantine/core/AppShell";ci.Navbar=nG;ci.Header=eG;ci.Main=tG;ci.Aside=JW;ci.Footer=ZW;ci.Section=rG;function xbe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>xbe(t))}:e}function Sbe(e){return e?e.map(t=>xbe(t)):[]}function iG(e){return e.reduce((t,n)=>"group"in n?{...t,...iG(n.items)}:(t[n.value]=n,t),{})}var qu={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const THe={error:null},AHe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":en(t,"combobox-chevron-size")}}),sG=je((e,t)=>{const n=Ae("ComboboxChevron",THe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=ht({name:"ComboboxChevron",classes:qu,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:AHe,rootSelector:"chevron"});return _.jsx(we,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:_.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});sG.classes=qu;sG.displayName="@mantine/core/ComboboxChevron";const[CHe,jc]=lo("Combobox component was not found in tree"),Tbe=I.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>_.jsx(Fm,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));Tbe.displayName="@mantine/core/ComboboxClearButton";const IHe={},oG=je((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=Ae("ComboboxDropdown",IHe,e),u=jc();return _.jsx(ko.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});oG.classes=qu;oG.displayName="@mantine/core/ComboboxDropdown";const kHe={refProp:"ref"},Abe=je((e,t)=>{const{children:n,refProp:r}=Ae("ComboboxDropdownTarget",kHe,e);if(jc(),!wy(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return _.jsx(ko.Target,{ref:t,refProp:r,children:n})});Abe.displayName="@mantine/core/ComboboxDropdownTarget";const RHe={},aG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("ComboboxEmpty",RHe,e),u=jc();return _.jsx(we,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});aG.classes=qu;aG.displayName="@mantine/core/ComboboxEmpty";function uG({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=jc(),[a,u]=I.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const NHe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Cbe=je((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Ae("ComboboxEventsTarget",NHe,e);if(!wy(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=jc(),f=uG({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return I.cloneElement(n,{...f,...l,[r]:ls(t,c.store.targetRef,n==null?void 0:n.ref)})});Cbe.displayName="@mantine/core/ComboboxEventsTarget";const PHe={},lG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("ComboboxFooter",PHe,e),u=jc();return _.jsx(we,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});lG.classes=qu;lG.displayName="@mantine/core/ComboboxFooter";const DHe={},cG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=Ae("ComboboxGroup",DHe,e),c=jc();return _.jsxs(we,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&_.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});cG.classes=qu;cG.displayName="@mantine/core/ComboboxGroup";const OHe={},fG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("ComboboxHeader",OHe,e),u=jc();return _.jsx(we,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});fG.classes=qu;fG.displayName="@mantine/core/ComboboxHeader";function Ibe({value:e,valuesDivider:t=",",...n}){return _.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}Ibe.displayName="@mantine/core/ComboboxHiddenInput";const $He={},dG=je((e,t)=>{const n=Ae("ComboboxOption",$He,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=jc(),v=I.useId(),b=l||v;return _.jsx(we,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var E;h?w.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});dG.classes=qu;dG.displayName="@mantine/core/ComboboxOption";const MHe={},hG=je((e,t)=>{const n=Ae("ComboboxOptions",MHe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=jc(),d=wa(a);return I.useEffect(()=>{f.store.setListId(d)},[d]),_.jsx(we,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});hG.classes=qu;hG.displayName="@mantine/core/ComboboxOptions";const LHe={withAriaAttributes:!0,withKeyboardNavigation:!0},pG=je((e,t)=>{const n=Ae("ComboboxSearch",LHe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=jc(),h=d.getStyles("search"),p=uG({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return _.jsx(fi,{ref:ls(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});pG.classes=qu;pG.displayName="@mantine/core/ComboboxSearch";const FHe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},kbe=je((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Ae("ComboboxTarget",FHe,e);if(!wy(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=jc(),f=uG({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=I.cloneElement(n,{...f,...l});return _.jsx(ko.Target,{ref:ls(t,c.store.targetRef),children:d})});kbe.displayName="@mantine/core/ComboboxTarget";function jHe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function BHe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function UHe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function mG({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=ws({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=I.useRef(null),c=I.useRef(-1),f=I.useRef(null),d=I.useRef(null),h=I.useRef(-1),p=I.useRef(-1),m=I.useRef(-1),g=I.useCallback((M="unknown")=>{a||(u(!0),i==null||i(M))},[u,i,a]),y=I.useCallback((M="unknown")=>{a&&(u(!1),r==null||r(M))},[u,r,a]),v=I.useCallback((M="unknown")=>{a?y(M):g(M)},[y,g,a]),b=I.useCallback(()=>{const M=document.querySelector(`#${l.current} [data-combobox-selected]`);M==null||M.removeAttribute("data-combobox-selected"),M==null||M.removeAttribute("aria-selected")},[]),w=I.useCallback(M=>{const B=document.getElementById(l.current),U=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!U)return null;const H=M>=U.length?0:M<0?U.length-1:M;return c.current=H,U!=null&&U[H]&&!U[H].hasAttribute("data-combobox-disabled")?(b(),U[H].setAttribute("data-combobox-selected","true"),U[H].setAttribute("aria-selected","true"),U[H].scrollIntoView({block:"nearest",behavior:o}),U[H].id):null},[o,b]),E=I.useCallback(()=>{const M=document.querySelector(`#${l.current} [data-combobox-active]`);if(M){const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),U=Array.from(B).findIndex(H=>H===M);return w(U)}return w(0)},[w]),T=I.useCallback(()=>w(BHe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),S=I.useCallback(()=>w(jHe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),A=I.useCallback(()=>w(UHe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),C=I.useCallback((M="selected",B)=>{m.current=window.setTimeout(()=>{var D;const U=document.querySelectorAll(`#${l.current} [data-combobox-option]`),H=Array.from(U).findIndex(z=>z.hasAttribute(`data-combobox-${M}`));c.current=H,B!=null&&B.scrollIntoView&&((D=U[H])==null||D.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),k=I.useCallback(()=>{c.current=-1,b()},[b]),N=I.useCallback(()=>{const M=document.querySelectorAll(`#${l.current} [data-combobox-option]`),B=M==null?void 0:M[c.current];B==null||B.click()},[]),O=I.useCallback(M=>{l.current=M},[]),P=I.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),$=I.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),F=I.useCallback(()=>c.current,[]);return I.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:F,selectOption:w,selectFirstOption:A,selectActiveOption:E,selectNextOption:T,selectPreviousOption:S,resetSelectedOption:k,updateSelectedOptionIndex:C,listId:l.current,setListId:O,clickSelectedOption:N,searchRef:f,focusSearchInput:P,targetRef:d,focusTarget:$}}const zHe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},VHe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":oo(t),"--combobox-option-padding":en(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Ie(n),"--combobox-option-fz":oo(t),"--combobox-option-padding":en(t,"combobox-option-padding")}});function Gn(e){const t=Ae("Combobox",zHe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=mG(),y=o||g,v=ht({name:h||"Combobox",classes:qu,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:VHe}),b=()=>{l==null||l(),y.closeDropdown()};return _.jsx(CHe,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:_.jsx(ko,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const HHe=e=>e;Gn.extend=HHe;Gn.classes=qu;Gn.displayName="@mantine/core/Combobox";Gn.Target=kbe;Gn.Dropdown=oG;Gn.Options=hG;Gn.Option=dG;Gn.Search=pG;Gn.Empty=aG;Gn.Chevron=sG;Gn.Footer=lG;Gn.Header=fG;Gn.EventsTarget=Cbe;Gn.DropdownTarget=Abe;Gn.Group=cG;Gn.ClearButton=Tbe;Gn.HiddenInput=Ibe;var Rbe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Nbe=Rbe,dL=I.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,...w},E)=>{const T=ht({name:e,props:t,className:n,style:y,classes:Rbe,classNames:r,styles:i,unstyled:s});return _.jsx(we,{...T("root"),ref:E,__vars:{"--label-fz":oo(d),"--label-lh":en(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,...w,children:_.jsxs(we,{component:p,htmlFor:p==="label"?l:void 0,...T("body"),children:[o,_.jsxs("div",{...T("labelWrapper"),"data-disabled":c||void 0,children:[a&&_.jsx(we,{component:m,htmlFor:m==="label"?l:void 0,...T("label"),"data-disabled":c||void 0,children:a}),u&&_.jsx(fi.Description,{size:d,__inheritStyles:!1,...T("description"),children:u}),f&&typeof f!="boolean"&&_.jsx(fi.Error,{size:d,__inheritStyles:!1,...T("error"),children:f})]})]})})});dL.displayName="@mantine/core/InlineInput";const Pbe=I.createContext(null),qHe=Pbe.Provider,Dbe=()=>I.useContext(Pbe),[WHe,GHe]=Px();var Obe={card:"m_26775b0a"};const YHe={withBorder:!0},KHe=(e,{radius:t})=>({card:{"--card-radius":jr(t)}}),gG=je((e,t)=>{const n=Ae("CheckboxCard",YHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=ht({name:"CheckboxCard",classes:Obe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:KHe,rootSelector:"card"}),g=Dbe(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return _.jsx(WHe,{value:{checked:y},children:_.jsx(_s,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});gG.displayName="@mantine/core/CheckboxCard";gG.classes=Obe;function yG({children:e,role:t}){const n=Fx();return n?_.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):_.jsx(_.Fragment,{children:e})}const XHe={},vG=je((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Ae("CheckboxGroup",XHe,e),[c,f]=ws({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(qHe,{value:{value:c,onChange:d,size:s},children:_.jsx(fi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:_.jsx(yG,{role:"group",children:a})})})});vG.classes=fi.Wrapper.classes;vG.displayName="@mantine/core/CheckboxGroup";function $be({size:e,style:t,...n}){const r=e!==void 0?{width:Ie(e),height:Ie(e),...t}:t;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Mbe({indeterminate:e,...t}){return e?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:_.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):_.jsx($be,{...t})}var Lbe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const QHe={icon:Mbe},JHe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Ph({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":en(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:jr(t),"--checkbox-color":s==="outline"?u:Dr(n,e),"--checkbox-icon-color":i?Dr(i,e):Dx(o,e)?xy({color:n,theme:e,autoContrast:o}):void 0}}},bG=je((e,t)=>{const n=Ae("CheckboxIndicator",QHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,w=l,E=ht({name:"CheckboxIndicator",classes:Lbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:JHe,rootSelector:"indicator"}),T=GHe(),S=typeof m=="boolean"||typeof c=="boolean"?m||c:(T==null?void 0:T.checked)||!1;return _.jsx(we,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:S,disabled:v},g],...b,children:_.jsx(w,{indeterminate:c,...E("icon")})})});bG.displayName="@mantine/core/CheckboxIndicator";bG.classes=Lbe;var Fbe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const ZHe={labelPosition:"right",icon:Mbe},eqe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Ph({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":en(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:jr(t),"--checkbox-color":s==="outline"?u:Dr(n,e),"--checkbox-icon-color":i?Dr(i,e):Dx(o,e)?xy({color:n,theme:e,autoContrast:o}):void 0}}},bl=je((e,t)=>{const n=Ae("Checkbox",ZHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:w,variant:E,indeterminate:T,icon:S,rootRef:A,iconColor:C,onChange:k,autoContrast:N,mod:O,...P}=n,$=Dbe(),F=d||($==null?void 0:$.size),M=S,B=ht({name:"Checkbox",props:n,classes:Fbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eqe}),{styleProps:U,rest:H}=Sb(P),D=wa(f),z=$?{checked:$.value.includes(H.value),onChange:W=>{$.onChange(W),k==null||k(W)}}:{};return _.jsx(dL,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:D,size:F,labelPosition:y,label:c,description:v,error:b,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":z.checked||g||void 0,variant:E,ref:A,mod:O,...U,...p,children:_.jsxs(we,{...B("inner"),mod:{"data-label-position":y},children:[_.jsx(we,{component:"input",id:D,ref:t,checked:g,disabled:w,mod:{error:!!b,indeterminate:T},...B("input",{focusable:!0,variant:E}),onChange:k,...H,...z,type:"checkbox"}),_.jsx(M,{indeterminate:T,...B("icon")})]})})});bl.classes={...Fbe,...Nbe};bl.displayName="@mantine/core/Checkbox";bl.Group=vG;bl.Indicator=bG;bl.Card=gG;function EE(e){return"group"in e}function jbe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;EE(o)&&i.push({group:o.group,items:jbe({options:o.items,search:t,limit:n-i.length})}),EE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function tqe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function Bbe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(EE(n))Bbe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function nqe(e,t){return Array.isArray(e)?e.includes(t):e===t}function Ube({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!EE(e)){const a=nqe(n,e.value),u=t&&a&&_.jsx($be,{className:qu.optionsDropdownCheckIcon}),l=_.jsxs(_.Fragment,{children:[r==="left"&&u,_.jsx("span",{children:e.label}),r==="right"&&u]});return _.jsx(Gn.Option,{value:e.value,disabled:e.disabled,className:Yi({[qu.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>_.jsx(Ube,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return _.jsx(Gn.Group,{label:e.group,children:o})}function zbe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){Bbe(e);const b=typeof i=="string"?(r||jbe)({options:e,search:u?i:"",limit:s??1/0}):e,w=tqe(b),E=b.map(T=>_.jsx(Ube,{data:T,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},EE(T)?T.group:T.value));return _.jsx(Gn.Dropdown,{hidden:t||n&&w,children:_.jsxs(Gn.Options,{labelledBy:p,"aria-label":y,children:[a?_.jsx(um.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,w&&d&&_.jsx(Gn.Empty,{children:d})]})})}var Vbe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const rqe={},iqe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":en(s,"badge-height"),"--badge-padding-x":en(s,"badge-padding-x"),"--badge-fz":en(s,"badge-fz"),"--badge-radius":t===void 0?void 0:jr(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Dr(n,e):void 0}}},d0=js((e,t)=>{const n=Ae("Badge",rqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,...w}=n,E=ht({name:"Badge",props:n,classes:Vbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:iqe});return _.jsxs(we,{variant:m,mod:[{block:g,circle:v},b],...E("root",{variant:m}),ref:t,...w,children:[d&&_.jsx("span",{...E("section"),"data-position":"left",children:d}),_.jsx("span",{...E("label"),children:p}),h&&_.jsx("span",{...E("section"),"data-position":"right",children:h})]})});d0.classes=Vbe;d0.displayName="@mantine/core/Badge";var Hbe={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const sqe={},oqe=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?Dr(t,e):void 0,"--burger-size":en(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),_G=je((e,t)=>{const n=Ae("Burger",sqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=ht({name:"Burger",classes:Hbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oqe});return _.jsxs(_s,{...p("root"),ref:t,...h,children:[_.jsx(we,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});_G.classes=Hbe;_G.displayName="@mantine/core/Burger";var hL={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const coe={orientation:"horizontal"},aqe=(e,{borderWidth:t})=>({group:{"--button-border-width":Ie(t)}}),wG=je((e,t)=>{const n=Ae("ButtonGroup",coe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Ae("ButtonGroup",coe,e),p=ht({name:"ButtonGroup",props:n,classes:hL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:aqe,rootSelector:"group"});return _.jsx(we,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});wG.classes=hL;wG.displayName="@mantine/core/ButtonGroup";const uqe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Ie(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},lqe={},cqe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":en(s,"button-height"),"--button-padding-x":en(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?oo(s.replace("compact-","")):oo(s),"--button-radius":t===void 0?void 0:jr(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},ln=js((e,t)=>{const n=Ae("Button",lqe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":w,autoContrast:E,mod:T,...S}=n,A=ht({name:"Button",props:n,classes:hL,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:cqe}),C=!!l,k=!!c;return _.jsxs(_s,{ref:t,...A("root",{active:!a&&!p&&!w}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":C,"with-right-section":k},T],...S,children:[_.jsx(Lm,{mounted:!!p,transition:uqe,duration:150,children:N=>_.jsx(we,{component:"span",...A("loader",{style:N}),"aria-hidden":!0,children:_.jsx(Oh,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),_.jsxs("span",{...A("inner"),children:[l&&_.jsx(we,{component:"span",...A("section"),mod:{position:"left"},children:l}),_.jsx(we,{component:"span",mod:{loading:p},...A("label"),children:u}),c&&_.jsx(we,{component:"span",...A("section"),mod:{position:"right"},children:c})]})]})});ln.classes=hL;ln.displayName="@mantine/core/Button";ln.Group=wG;const[fqe,dqe]=lo("Card component was not found in tree");var EG={root:"m_e615b15f",section:"m_599a2148"};const hqe={},pL=js((e,t)=>{const n=Ae("CardSection",hqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=dqe();return _.jsx(we,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});pL.classes=EG;pL.displayName="@mantine/core/CardSection";const pqe={},mqe=(e,{padding:t})=>({root:{"--card-padding":is(t)}}),Cb=js((e,t)=>{const n=Ae("Card",pqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=ht({name:"Card",props:n,classes:EG,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mqe}),h=I.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===pL?I.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return _.jsx(fqe,{value:{getStyles:d},children:_.jsx(Ox,{ref:t,unstyled:a,...d("root"),...f,children:p})})});Cb.classes=EG;Cb.displayName="@mantine/core/Card";Cb.Section=pL;var qbe={root:"m_4451eb3a"};const gqe={},fm=js((e,t)=>{const n=Ae("Center",gqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=ht({name:"Center",props:n,classes:qbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return _.jsx(we,{ref:t,mod:[{inline:l},c],...d("root"),...f})});fm.classes=qbe;fm.displayName="@mantine/core/Center";var Wbe={root:"m_b183c0a2"};const yqe={},vqe=(e,{color:t})=>({root:{"--code-bg":t?Dr(t,e):void 0}}),rA=je((e,t)=>{const n=Ae("Code",yqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=ht({name:"Code",props:n,classes:Wbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vqe});return _.jsx(we,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});rA.classes=Wbe;rA.displayName="@mantine/core/Code";var Gbe={root:"m_7485cace"};const bqe={},_qe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:en(t,"container-size")}}),Cc=je((e,t)=>{const n=Ae("Container",bqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=ht({name:"Container",classes:Gbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_qe});return _.jsx(we,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Cc.classes=Gbe;Cc.displayName="@mantine/core/Container";var Ybe={root:"m_3eebeb36",label:"m_9e365f20"};const wqe={orientation:"horizontal"},Eqe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Dr(t,e):void 0,"--divider-border-style":n,"--divider-size":en(r,"divider-size")}}),xE=je((e,t)=>{const n=Ae("Divider",wqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=ht({name:"Divider",classes:Ybe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Eqe});return _.jsx(we,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&_.jsx(we,{component:"span",mod:{position:d},...m("label"),children:f})})});xE.classes=Ybe;xE.displayName="@mantine/core/Divider";const[xqe,zx]=lo("Drawer component was not found in tree");var Bm={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const Sqe={},mL=je((e,t)=>{const n=Ae("DrawerBody",Sqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=zx();return _.jsx(BW,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});mL.classes=Bm;mL.displayName="@mantine/core/DrawerBody";const Tqe={},gL=je((e,t)=>{const n=Ae("DrawerCloseButton",Tqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=zx();return _.jsx(UW,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});gL.classes=Bm;gL.displayName="@mantine/core/DrawerCloseButton";const Aqe={},yL=je((e,t)=>{const n=Ae("DrawerContent",Aqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=zx(),d=f.scrollAreaComponent||mbe;return _.jsx(pbe,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:_.jsx(d,{style:{height:"100vh"},children:u})})});yL.classes=Bm;yL.displayName="@mantine/core/DrawerContent";const Cqe={},vL=je((e,t)=>{const n=Ae("DrawerHeader",Cqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=zx();return _.jsx(zW,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});vL.classes=Bm;vL.displayName="@mantine/core/DrawerHeader";const Iqe={},bL=je((e,t)=>{const n=Ae("DrawerOverlay",Iqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=zx();return _.jsx(VW,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});bL.classes=Bm;bL.displayName="@mantine/core/DrawerOverlay";function kqe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function Rqe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const Nqe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},Pqe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},Dqe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Gl("modal"),position:"left"},Oqe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":en(n,"drawer-size"),"--drawer-flex":Rqe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":kqe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Ie(r)}}),_L=je((e,t)=>{const n=Ae("DrawerRoot",Dqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=Dh(),m=ht({name:"Drawer",classes:Bm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Oqe}),g=(p==="rtl"?Pqe:Nqe)[c];return _.jsx(xqe,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:_.jsx(hbe,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});_L.classes=Bm;_L.displayName="@mantine/core/DrawerRoot";const $qe={},wL=je((e,t)=>{const n=Ae("DrawerTitle",$qe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=zx();return _.jsx(HW,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});wL.classes=Bm;wL.displayName="@mantine/core/DrawerTitle";const Mqe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Gl("modal"),withOverlay:!0,withCloseButton:!0},$h=je((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=Ae("Drawer",Mqe,e),l=!!n||s;return _.jsxs(_L,{ref:t,...u,children:[r&&_.jsx(bL,{...i}),_.jsxs(yL,{children:[l&&_.jsxs(vL,{children:[n&&_.jsx(wL,{children:n}),s&&_.jsx(gL,{...o})]}),_.jsx(mL,{children:a})]})]})});$h.classes=Bm;$h.displayName="@mantine/core/Drawer";$h.Root=_L;$h.Overlay=bL;$h.Content=yL;$h.Body=mL;$h.Header=vL;$h.Title=wL;$h.CloseButton=gL;function Lqe({open:e,close:t,openDelay:n,closeDelay:r}){const i=I.useRef(-1),s=I.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return I.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[Fqe,Kbe]=lo("Grid component was not found in tree"),DU=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,foe=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":DU(e,t),doe=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},hoe=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function jqe({span:e,order:t,offset:n,selector:r}){var d;const i=cs(),s=Kbe(),a=Ef(e)===void 0?12:Ef(e),u=_y({"--col-order":(d=Ef(t))==null?void 0:d.toString(),"--col-flex-grow":doe(a,s.grow),"--col-flex-basis":DU(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":foe(a,s.columns,s.grow),"--col-offset":hoe(Ef(n),s.columns)}),l=Yr(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=doe(e[p],s.grow),h[p]["--col-flex-basis"]=DU(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=foe(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=hoe(n[p],s.columns)),h},{}),f=cC(Yr(l),i).filter(h=>Yr(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return _.jsx(xb,{styles:u,media:f,selector:r})}var xG={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const Bqe={span:12},SG=je((e,t)=>{const n=Ae("GridCol",Bqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=Kbe(),h=VI();return _.jsxs(_.Fragment,{children:[_.jsx(jqe,{selector:`.${h}`,span:u,order:l,offset:c}),_.jsx(we,{ref:t,...d.getStyles("col",{className:Yi(i,h),style:s,classNames:r,styles:o}),...f})]})});SG.classes=xG;SG.displayName="@mantine/core/GridCol";function Uqe({gutter:e,selector:t}){const n=cs(),r=_y({"--grid-gutter":is(Ef(e))}),i=Yr(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=is(e[u])),a),{}),o=cC(Yr(i),n).filter(a=>Yr(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return _.jsx(xb,{styles:r,media:o,selector:t})}const zqe={gutter:"md",grow:!1,columns:12},Vqe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),ja=je((e,t)=>{const n=Ae("Grid",zqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=ht({name:"Grid",classes:xG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Vqe}),y=VI();return _.jsxs(Fqe,{value:{getStyles:g,grow:l,columns:f},children:[_.jsx(Uqe,{selector:`.${y}`,...n}),_.jsx(we,{ref:t,...g("root",{className:y}),...m,children:_.jsx("div",{...g("inner"),children:p})})]})});ja.classes=xG;ja.displayName="@mantine/core/Grid";ja.Col=SG;var Xbe={root:"m_9e117634"};const Hqe={},qqe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:jr(t),"--image-object-fit":n}}),Ty=js((e,t)=>{const n=Ae("Image",Hqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=I.useState(!c);I.useEffect(()=>y(!c),[c]);const v=ht({name:"Image",classes:Xbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qqe});return g&&h?_.jsx(we,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):_.jsx(we,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});Ty.classes=Xbe;Ty.displayName="@mantine/core/Image";function OU(){return OU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OU.apply(null,arguments)}function Wqe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Gqe=I.useLayoutEffect,Yqe=function(t){var n=I.useRef(t);return Gqe(function(){n.current=t}),n},poe=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Kqe=function(t,n){var r=I.useRef();return I.useCallback(function(i){t.current=i,r.current&&poe(r.current,null),r.current=n,n&&poe(n,i)},[n])},moe={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Xqe=function(t){Object.keys(moe).forEach(function(n){t.style.setProperty(n,moe[n],"important")})},goe=Xqe,Ca=null,yoe=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Qqe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Ca||(Ca=document.createElement("textarea"),Ca.setAttribute("tabindex","-1"),Ca.setAttribute("aria-hidden","true"),goe(Ca)),Ca.parentNode===null&&document.body.appendChild(Ca);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Ca.style[h]=o[h]}),goe(Ca),Ca.value=t;var u=yoe(Ca,e);Ca.value=t,u=yoe(Ca,e),Ca.value="x";var l=Ca.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var voe=function(){},Jqe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},Zqe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],eWe=!!document.documentElement.currentStyle,tWe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=Jqe(Zqe,n),i=r.boxSizing;if(i==="")return null;eWe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},nWe=tWe;function Qbe(e,t,n){var r=Yqe(n);I.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var rWe=function(t){Qbe(window,"resize",t)},iWe=function(t){Qbe(document.fonts,"loadingdone",t)},sWe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],oWe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?voe:o,u=t.onHeightChange,l=u===void 0?voe:u,c=Wqe(t,sWe),f=c.value!==void 0,d=I.useRef(null),h=Kqe(d,n),p=I.useRef(0),m=I.useRef(),g=function(){var b=d.current,w=r&&m.current?m.current:nWe(b);if(w){m.current=w;var E=Qqe(w,b.value||b.placeholder||"x",s,i),T=E[0],S=E[1];p.current!==T&&(p.current=T,b.style.setProperty("height",T+"px","important"),l(T,{rowHeight:S}))}},y=function(b){f||g(),a(b)};return I.useLayoutEffect(g),rWe(g),iWe(g),I.createElement("textarea",OU({},c,{onChange:y,ref:h}))},aWe=I.forwardRef(oWe);const uWe={},TG=je((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=Ae("Textarea",uWe,e),u=n&&p1e()!=="test",l=u?{maxRows:r,minRows:i}:{};return _.jsx(Fc,{component:u?aWe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});TG.classes=Fc.classes;TG.displayName="@mantine/core/Textarea";const[lWe,cWe]=lo("List component was not found in tree");var AG={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const fWe={},CG=je((e,t)=>{const n=Ae("ListItem",fWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=cWe(),h=u||d.icon,p={classNames:r,styles:o};return _.jsx(we,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:_.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&_.jsx("span",{...d.getStyles("itemIcon",p),children:h}),_.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});CG.classes=AG;CG.displayName="@mantine/core/ListItem";const dWe={type:"unordered"},hWe=(e,{size:t,spacing:n})=>({root:{"--list-fz":oo(t),"--list-lh":o1e(t),"--list-spacing":is(n)}}),Pf=je((e,t)=>{const n=Ae("List",dWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=ht({name:"List",classes:AG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:hWe});return _.jsx(lWe,{value:{center:p,icon:d,getStyles:v},children:_.jsx(we,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});Pf.classes=AG;Pf.displayName="@mantine/core/List";Pf.Item=CG;var Jbe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const boe={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Gl("overlay")},pWe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),Pl=je((e,t)=>{const n=Ae("LoadingOverlay",boe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=cs(),g=ht({name:"LoadingOverlay",classes:Jbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:pWe}),y={...boe.overlayProps,...f};return _.jsx(Lm,{transition:"fade",...l,mounted:!!d,children:v=>_.jsxs(we,{...g("root",{style:v}),ref:t,...p,children:[_.jsx(Oh,{...g("loader"),unstyled:a,...c}),_.jsx(hC,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),_.jsx(hC,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});Pl.classes=Jbe;Pl.displayName="@mantine/core/LoadingOverlay";const[mWe,KI]=lo("Menu component was not found in the tree");var Vx={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const gWe={},IG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("MenuDivider",gWe,e),u=KI();return _.jsx(we,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});IG.classes=Vx;IG.displayName="@mantine/core/MenuDivider";const yWe={},kG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=Ae("MenuDropdown",yWe,e),f=I.useRef(null),d=KI(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=Lp(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=Lp(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return _.jsxs(ko.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:ls(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});kG.classes=Vx;kG.displayName="@mantine/core/MenuDropdown";const vWe={},RG=js((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=Ae("MenuItem",vWe,e),p=KI(),m=cs(),{dir:g}=Dh(),y=I.useRef(),v=p.getItemIndex(y.current),b=h,w=Lp(b.onMouseLeave,()=>p.setHovered(-1)),E=Lp(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),T=Lp(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),S=Lp(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),A=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,C=a?Ph({color:a,theme:m}):null;return _.jsxs(_s,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:S,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:ls(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:w,onClick:T,onKeyDown:lW({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":C!=null&&C.isThemeColor&&(C==null?void 0:C.shade)===void 0?`var(--mantine-color-${C.color}-6)`:A==null?void 0:A.color,"--menu-item-hover":A==null?void 0:A.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&_.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});RG.classes=Vx;RG.displayName="@mantine/core/MenuItem";const bWe={},NG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("MenuLabel",bWe,e),u=KI();return _.jsx(we,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});NG.classes=Vx;NG.displayName="@mantine/core/MenuLabel";const _We={refProp:"ref"},Zbe=I.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=Ae("MenuTarget",_We,e);if(!wy(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=KI(),o=Lp(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=Lp(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=Lp(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return _.jsx(ko.Target,{refProp:r,popupType:"menu",ref:t,...i,children:I.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});Zbe.displayName="@mantine/core/MenuTarget";const wWe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function wu(e){const t=Ae("Menu",wWe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:w,keepMounted:E,...T}=t,S=ht({name:"Menu",classes:Vx,props:t,classNames:m,styles:g,unstyled:y}),[A,{setHovered:C,resetHovered:k}]=TBe(),[N,O]=ws({value:s,defaultValue:o,finalValue:!1,onChange:u}),[P,$]=I.useState(!1),F=()=>{O(!1),$(!1),N&&(i==null||i())},M=()=>{O(!0),!N&&(r==null||r())},B=()=>{N?F():M()},{openDropdown:U,closeDropdown:H}=Lqe({open:M,close:F,closeDelay:p,openDelay:h}),D=j=>SBe("[data-menu-item]","[data-menu-dropdown]",j),{resolvedClassNames:z,resolvedStyles:W}=$m({classNames:m,styles:g,props:t});return hh(()=>{k()},[N]),_.jsx(mWe,{value:{getStyles:S,opened:N,toggleDropdown:B,getItemIndex:D,hovered:A,setHovered:C,openedViaClick:P,setOpenedViaClick:$,closeOnItemClick:l,closeDropdown:d==="click"?F:H,openDropdown:d==="click"?M:U,closeDropdownImmediately:F,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:_.jsx(ko,{...T,opened:N,onChange:B,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:z,styles:W,unstyled:y,variant:v,keepMounted:E,children:n})})}wu.extend=e=>e;wu.classes=Vx;wu.displayName="@mantine/core/Menu";wu.Item=RG;wu.Label=NG;wu.Dropdown=kG;wu.Target=Zbe;wu.Divider=IG;const[EWe,Hx]=lo("Modal component was not found in tree");var Um={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const xWe={},EL=je((e,t)=>{const n=Ae("ModalBody",xWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Hx();return _.jsx(BW,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});EL.classes=Um;EL.displayName="@mantine/core/ModalBody";const SWe={},xL=je((e,t)=>{const n=Ae("ModalCloseButton",SWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Hx();return _.jsx(UW,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});xL.classes=Um;xL.displayName="@mantine/core/ModalCloseButton";const TWe={},SL=je((e,t)=>{const n=Ae("ModalContent",TWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=Hx(),f=c.scrollAreaComponent||mbe;return _.jsx(pbe,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:_.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Ie(c.yOffset)} * 2))`},children:u})})});SL.classes=Um;SL.displayName="@mantine/core/ModalContent";const AWe={},TL=je((e,t)=>{const n=Ae("ModalHeader",AWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Hx();return _.jsx(zW,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});TL.classes=Um;TL.displayName="@mantine/core/ModalHeader";const CWe={},AL=je((e,t)=>{const n=Ae("ModalOverlay",CWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Hx();return _.jsx(VW,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});AL.classes=Um;AL.displayName="@mantine/core/ModalOverlay";const IWe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Gl("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},kWe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:jr(t),"--modal-size":en(n,"modal-size"),"--modal-y-offset":Ie(r),"--modal-x-offset":Ie(i)}}),CL=je((e,t)=>{const n=Ae("ModalRoot",IWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=ht({name:m,classes:Um,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kWe});return _.jsx(EWe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:_.jsx(hbe,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});CL.classes=Um;CL.displayName="@mantine/core/ModalRoot";const RWe={},IL=je((e,t)=>{const n=Ae("ModalTitle",RWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Hx();return _.jsx(HW,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});IL.classes=Um;IL.displayName="@mantine/core/ModalTitle";const NWe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Gl("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Wi=je((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=Ae("Modal",NWe,e),c=!!n||s;return _.jsxs(CL,{ref:t,radius:u,...l,children:[r&&_.jsx(AL,{...i}),_.jsxs(SL,{radius:u,children:[c&&_.jsxs(TL,{children:[n&&_.jsx(IL,{children:n}),s&&_.jsx(xL,{...o})]}),_.jsx(EL,{children:a})]})]})});Wi.classes=Um;Wi.displayName="@mantine/core/Modal";Wi.Root=CL;Wi.Overlay=AL;Wi.Content=SL;Wi.Body=EL;Wi.Header=TL;Wi.Title=IL;Wi.CloseButton=xL;const[PWe,PG]=Px(),[DWe,OWe]=Px();var kL={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const $We={},MWe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?en(t):en(n,"pg-gap")}}),DG=je((e,t)=>{const n=Ae("PillGroup",$We,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=PG(),h=(d==null?void 0:d.size)||l||void 0,p=ht({name:"PillGroup",classes:kL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:MWe,stylesCtx:{size:h},rootSelector:"group"});return _.jsx(DWe,{value:{size:h,disabled:c},children:_.jsx(we,{ref:t,size:h,...p("group"),...f})})});DG.classes=kL;DG.displayName="@mantine/core/PillGroup";const LWe={variant:"default"},FWe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":en(n,"pill-fz"),"--pill-height":en(n,"pill-height"),"--pill-radius":t===void 0?void 0:jr(t)}}),pC=je((e,t)=>{const n=Ae("Pill",LWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=OWe(),w=PG(),E=m||(b==null?void 0:b.size)||void 0,T=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",S=ht({name:"Pill",classes:kL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:FWe,stylesCtx:{size:E}});return _.jsxs(we,{component:"span",ref:t,variant:T,size:E,...S("root",{variant:T}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[_.jsx("span",{...S("label"),children:c}),f&&_.jsx(Fm,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...S("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:A=>{var C;A.preventDefault(),A.stopPropagation(),(C=h==null?void 0:h.onMouseDown)==null||C.call(h,A)},onClick:A=>{var C;A.stopPropagation(),d==null||d(),(C=h==null?void 0:h.onClick)==null||C.call(h,A)}})]})});pC.classes=kL;pC.displayName="@mantine/core/Pill";pC.Group=DG;var e_e={field:"m_45c4369d"};const jWe={type:"visible"},OG=je((e,t)=>{const n=Ae("PillsInputField",jWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=PG(),g=Fx(),y=ht({name:"PillsInputField",classes:e_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return _.jsx(we,{component:"input",ref:ls(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});OG.classes=e_e;OG.displayName="@mantine/core/PillsInputField";const BWe={},RO=je((e,t)=>{const n=Ae("PillsInput",BWe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=I.useRef();return _.jsx(PWe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:_.jsx(Fc,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});RO.displayName="@mantine/core/PillsInput";RO.Field=OG;function UWe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(EE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const zWe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},$G=je((e,t)=>{const n=Ae("MultiSelect",zWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:w,onOptionSubmit:E,comboboxProps:T,filter:S,limit:A,withScrollArea:C,maxDropdownHeight:k,searchValue:N,defaultSearchValue:O,onSearchChange:P,readOnly:$,disabled:F,onFocus:M,onBlur:B,onPaste:U,radius:H,rightSection:D,rightSectionWidth:z,rightSectionPointerEvents:W,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:re,leftSectionProps:de,inputContainer:pe,inputWrapperOrder:ge,withAsterisk:Ee,labelProps:Z,descriptionProps:Q,errorProps:fe,wrapperProps:be,description:Me,label:Be,error:ve,maxValues:Re,searchable:He,nothingFoundMessage:Ze,withCheckIcon:bt,checkIconPosition:Ge,hidePickedOptions:ye,withErrorStyles:pt,name:vt,form:_e,id:Ne,clearable:Ye,clearButtonProps:ct,hiddenInputProps:wt,placeholder:$n,hiddenInputValuesDivider:Sr,required:Mn,mod:ur,renderOption:pn,onRemove:Tn,onClear:er,scrollAreaProps:tr,...jo}=n,Di=wa(Ne),An=Sbe(m),Oi=iG(An),Tr=mG({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),Tr.resetSelectedOption()}}),{styleProps:ds,rest:{type:np,autoComplete:sl,...ld}}=Sb(jo),[wr,Ai]=ws({value:c,defaultValue:f,finalValue:[],onChange:d}),[Kr,su]=ws({value:N,defaultValue:O,finalValue:"",onChange:P}),Sa=ht({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Ta,resolvedStyles:ue}=$m({props:n,styles:o,classNames:r}),ne=ut=>{h==null||h(ut),ut.key===" "&&!He&&(ut.preventDefault(),Tr.toggleDropdown()),ut.key==="Backspace"&&Kr.length===0&&wr.length>0&&(Tn==null||Tn(wr[wr.length-1]),Ai(wr.slice(0,wr.length-1)))},le=wr.map((ut,Tt)=>{var Vt,Pn;return _.jsx(pC,{withRemoveButton:!$&&!((Vt=Oi[ut])!=null&&Vt.disabled),onRemove:()=>{Ai(wr.filter(Ln=>ut!==Ln)),Tn==null||Tn(ut)},unstyled:a,disabled:F,...Sa("pill"),children:((Pn=Oi[ut])==null?void 0:Pn.label)||ut},`${ut}-${Tt}`)});I.useEffect(()=>{w&&Tr.selectFirstOption()},[w,wr]);const ke=Ye&&wr.length>0&&!F&&!$&&_.jsx(Gn.ClearButton,{size:l,...ct,onClear:()=>{er==null||er(),Ai([]),su("")}}),Ce=UWe({data:An,value:wr});return _.jsxs(_.Fragment,{children:[_.jsxs(Gn,{store:Tr,classNames:Ta,styles:ue,unstyled:a,size:l,readOnly:$,__staticSelector:"MultiSelect",onOptionSubmit:ut=>{E==null||E(ut),su(""),Tr.updateSelectedOptionIndex("selected"),wr.includes(Oi[ut].value)?(Ai(wr.filter(Tt=>Tt!==Oi[ut].value)),Tn==null||Tn(Oi[ut].value)):wr.length<Re&&Ai([...wr,Oi[ut].value])},...T,children:[_.jsx(Gn.DropdownTarget,{children:_.jsx(RO,{...ds,__staticSelector:"MultiSelect",classNames:Ta,styles:ue,unstyled:a,size:l,className:i,style:s,variant:p,disabled:F,radius:H,rightSection:D||ke||_.jsx(Gn.Chevron,{size:l,error:ve,unstyled:a}),rightSectionPointerEvents:W||(ke?"all":"none"),rightSectionWidth:z,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:re,leftSectionProps:de,inputContainer:pe,inputWrapperOrder:ge,withAsterisk:Ee,labelProps:Z,descriptionProps:Q,errorProps:fe,wrapperProps:be,description:Me,label:Be,error:ve,multiline:!0,withErrorStyles:pt,__stylesApiProps:{...n,rightSectionPointerEvents:W||(ke?"all":"none"),multiline:!0},pointer:!He,onClick:()=>He?Tr.openDropdown():Tr.toggleDropdown(),"data-expanded":Tr.dropdownOpened||void 0,id:Di,required:Mn,mod:ur,children:_.jsxs(pC.Group,{disabled:F,unstyled:a,...Sa("pillsList"),children:[le,_.jsx(Gn.EventsTarget,{autoComplete:sl,children:_.jsx(RO.Field,{...ld,ref:t,id:Di,placeholder:$n,type:!He&&!$n?"hidden":"visible",...Sa("inputField"),unstyled:a,onFocus:ut=>{M==null||M(ut),He&&Tr.openDropdown()},onBlur:ut=>{B==null||B(ut),Tr.closeDropdown(),su("")},onKeyDown:ne,value:Kr,onChange:ut=>{su(ut.currentTarget.value),He&&Tr.openDropdown(),w&&Tr.selectFirstOption()},disabled:F,readOnly:$||!He,pointer:!He})})]})})}),_.jsx(zbe,{data:ye?Ce:An,hidden:$||F,filter:S,search:Kr,limit:A,hiddenWhenEmpty:!He||!Ze||ye&&Ce.length===0&&Kr.trim().length===0,withScrollArea:C,maxDropdownHeight:k,filterOptions:He,value:wr,checkIconPosition:Ge,withCheckIcon:bt,nothingFoundMessage:Ze,unstyled:a,labelId:Be?`${Di}-label`:void 0,"aria-label":Be?void 0:jo["aria-label"],renderOption:pn,scrollAreaProps:tr})]}),_.jsx(Gn.HiddenInput,{name:vt,valuesDivider:Sr,value:wr,form:_e,disabled:F,...wt})]})});$G.classes={...Fc.classes,...Gn.classes};$G.displayName="@mantine/core/MultiSelect";var t_e={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const VWe={},HWe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":is(r)}}},RL=js((e,t)=>{const n=Ae("NavLink",VWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:w,noWrap:E,childrenOffset:T,onKeyDown:S,autoContrast:A,mod:C,...k}=n,N=ht({name:"NavLink",props:n,classes:t_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:HWe}),[O,P]=ws({value:l,defaultValue:c,finalValue:!1,onChange:f}),$=!!d,F=M=>{h==null||h(M),$&&(M.preventDefault(),P(!O))};return _.jsxs(_.Fragment,{children:[_.jsxs(_s,{...N("root"),component:"a",ref:t,onClick:F,onKeyDown:M=>{S==null||S(M),M.nativeEvent.code==="Space"&&$&&(M.preventDefault(),P(!O))},unstyled:a,mod:[{disabled:m,active:p,expanded:O},C],...k,children:[g&&_.jsx(we,{component:"span",...N("section"),mod:{position:"left"},children:g}),_.jsxs(we,{...N("body"),mod:{"no-wrap":E},children:[_.jsx(we,{component:"span",...N("label"),children:v}),_.jsx(we,{component:"span",mod:{active:p},...N("description"),children:b})]}),($||y)&&_.jsx(we,{...N("section"),component:"span",mod:{rotate:O&&!w,position:"right"},children:$?y||_.jsx(wE,{...N("chevron")}):y})]}),_.jsx(iL,{in:O,...N("collapse"),children:_.jsx("div",{...N("children"),children:d})})]})});RL.classes=t_e;RL.displayName="@mantine/core/NavLink";var n_e={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const qWe={withCloseButton:!0},WWe=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:jr(t),"--notification-color":n?Dr(n,e):void 0}}),MG=je((e,t)=>{const n=Ae("Notification",qWe,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:y,variant:v,vars:b,mod:w,...E}=n,T=ht({name:"Notification",classes:n_e,props:n,className:r,style:m,classNames:p,styles:g,unstyled:y,vars:b,varsResolver:WWe});return _.jsxs(we,{...T("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},w],ref:t,variant:v,...E,role:"alert",children:[c&&!o&&_.jsx("div",{...T("icon"),children:c}),o&&_.jsx(Oh,{size:28,color:i,...T("loader")}),_.jsxs("div",{...T("body"),children:[l&&_.jsx("div",{...T("title"),children:l}),_.jsx(we,{...T("description"),mod:{"data-with-title":!!l},children:f})]}),a&&_.jsx(Fm,{iconSize:16,color:"gray",...h,unstyled:y,onClick:d,...T("closeButton")})]})});MG.classes=n_e;MG.displayName="@mantine/core/Notification";function r_e(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var mC;(function(e){e.event="event",e.props="prop"})(mC||(mC={}));function $g(){}function GWe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function gC(e){return!!(e||"").match(/\d/)}function Ow(e){return e==null}function YWe(e){return typeof e=="number"&&isNaN(e)}function i_e(e){return Ow(e)||YWe(e)||typeof e=="number"&&!isFinite(e)}function s_e(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function KWe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function XWe(e,t,n){var r=KWe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function QWe(e){var t=I.useRef(e);t.current=e;var n=I.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function LG(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function JWe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function o_e(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function _oe(e,t){return Array(t+1).join(e)}function a_e(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+_oe("0",Math.abs(o))+i:o>=a?i=i+_oe("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function woe(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=LG(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=o_e(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function Dv(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var u_e=GWe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),ZWe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function eGe(e,t,n){return Math.min(Math.max(e,t),n)}function Tj(e){return Math.max(e.selectionStart,e.selectionEnd)}function tGe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function nGe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function rGe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function iGe(e,t,n,r,i,s,o){o===void 0&&(o=rGe);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function Eoe(e,t,n,r){var i=e.length;if(t=eGe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function sGe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(gC(e[n])||gC(e[n-1]));return t}function l_e(e,t,n,r,i,s){s===void 0&&(s=$g);var o=QWe(function(p,m){var g,y;return i_e(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?a_e(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=I.useState(function(){return o(Ow(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;Ow(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return I.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function oGe(e){return e.replace(/[^0-9]/g,"")}function aGe(e){return e}function uGe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=aGe);var a=e.removeFormatting;a===void 0&&(a=oGe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=$g);var h=e.onKeyDown;h===void 0&&(h=$g);var p=e.onMouseUp;p===void 0&&(p=$g);var m=e.onFocus;m===void 0&&(m=$g);var g=e.onBlur;g===void 0&&(g=$g);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=sGe);var b=e.isValidInputCharacter;b===void 0&&(b=gC);var w=e.isCharacterSame,E=r_e(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),T=l_e(y,u,!!l,o,a,c),S=T[0],A=S.formattedValue,C=S.numAsString,k=T[1],N=I.useRef(),O=I.useRef({formattedValue:A,numAsString:C}),P=function(ve,Re){O.current={formattedValue:ve.formattedValue,numAsString:ve.value},k(ve,Re)},$=I.useState(!1),F=$[0],M=$[1],B=I.useRef(null),U=I.useRef({setCaretTimeout:null,focusTimeout:null});I.useEffect(function(){return M(!0),function(){clearTimeout(U.current.setCaretTimeout),clearTimeout(U.current.focusTimeout)}},[]);var H=o,D=function(ve,Re){var He=parseFloat(Re);return{formattedValue:ve,value:Re,floatValue:isNaN(He)?void 0:He}},z=function(ve,Re,He){ve.selectionStart===0&&ve.selectionEnd===ve.value.length||(Dv(ve,Re),U.current.setCaretTimeout=setTimeout(function(){ve.value===He&&ve.selectionStart!==Re&&Dv(ve,Re)},0))},W=function(ve,Re,He){return Eoe(ve,Re,v(ve),He)},j=function(ve,Re,He){var Ze=v(Re),bt=iGe(Re,A,ve,He,Ze,b,w);return bt=Eoe(Re,bt,Ze),bt},q=function(ve){var Re=ve.formattedValue;Re===void 0&&(Re="");var He=ve.input,Ze=ve.source,bt=ve.event,Ge=ve.numAsString,ye;if(He){var pt=ve.inputValue||He.value,vt=Tj(He);He.value=Re,ye=j(pt,Re,vt),ye!==void 0&&z(He,ye,Re)}Re!==A&&P(D(Re,Ge),{event:bt,source:Ze})};I.useEffect(function(){var ve=O.current,Re=ve.formattedValue,He=ve.numAsString;(A!==Re||C!==He)&&P(D(A,C),{event:void 0,source:mC.props})},[A,C]);var G=B.current?Tj(B.current):void 0,re=typeof window<"u"?I.useLayoutEffect:I.useEffect;re(function(){var ve=B.current;if(A!==O.current.formattedValue&&ve){var Re=j(O.current.formattedValue,A,G);ve.value=A,z(ve,Re,A)}},[A]);var de=function(ve,Re,He){var Ze=Re.target,bt=N.current?ZWe(N.current,Ze.selectionEnd):u_e(A,ve),Ge=Object.assign(Object.assign({},bt),{lastValue:A}),ye=a(ve,Ge),pt=H(ye);if(ye=a(pt,void 0),f&&!f(D(pt,ye))){var vt=Re.target,_e=Tj(vt),Ne=j(ve,A,_e);return vt.value=A,z(vt,Ne,A),!1}return q({formattedValue:pt,numAsString:ye,inputValue:ve,event:Re,source:He,input:Re.target}),!0},pe=function(ve,Re){Re===void 0&&(Re=0);var He=ve.selectionStart,Ze=ve.selectionEnd;N.current={selectionStart:He,selectionEnd:Ze+Re}},ge=function(ve){var Re=ve.target,He=Re.value,Ze=de(He,ve,mC.event);Ze&&d(ve),N.current=void 0},Ee=function(ve){var Re=ve.target,He=ve.key,Ze=Re.selectionStart,bt=Re.selectionEnd,Ge=Re.value;Ge===void 0&&(Ge="");var ye;He==="ArrowLeft"||He==="Backspace"?ye=Math.max(Ze-1,0):He==="ArrowRight"?ye=Math.min(Ze+1,Ge.length):He==="Delete"&&(ye=Ze);var pt=0;He==="Delete"&&Ze===bt&&(pt=1);var vt=He==="ArrowLeft"||He==="ArrowRight";if(ye===void 0||Ze!==bt&&!vt){h(ve),pe(Re,pt);return}var _e=ye;if(vt){var Ne=He==="ArrowLeft"?"left":"right";_e=W(Ge,ye,Ne),_e!==ye&&ve.preventDefault()}else He==="Delete"&&!b(Ge[ye])?_e=W(Ge,ye,"right"):He==="Backspace"&&!b(Ge[ye])&&(_e=W(Ge,ye,"left"));_e!==ye&&z(Re,_e,Ge),h(ve),pe(Re,pt)},Z=function(ve){var Re=ve.target,He=function(){var Ze=Re.selectionStart,bt=Re.selectionEnd,Ge=Re.value;if(Ge===void 0&&(Ge=""),Ze===bt){var ye=W(Ge,Ze);ye!==Ze&&z(Re,ye,Ge)}};He(),requestAnimationFrame(function(){He()}),p(ve),pe(Re)},Q=function(ve){ve.persist&&ve.persist();var Re=ve.target,He=ve.currentTarget;B.current=Re,U.current.focusTimeout=setTimeout(function(){var Ze=Re.selectionStart,bt=Re.selectionEnd,Ge=Re.value;Ge===void 0&&(Ge="");var ye=W(Ge,Ze);ye!==Ze&&!(Ze===0&&bt===Ge.length)&&z(Re,ye,Ge),m(Object.assign(Object.assign({},ve),{currentTarget:He}))},0)},fe=function(ve){B.current=null,clearTimeout(U.current.focusTimeout),clearTimeout(U.current.setCaretTimeout),g(ve)},be=F&&tGe()?"numeric":void 0,Me=Object.assign({inputMode:be},E,{type:t,value:A,onChange:ge,onKeyDown:Ee,onMouseUp:Z,onFocus:Q,onBlur:fe});if(n==="text")return i?vr.createElement(vr.Fragment,null,i(A,E)||null):vr.createElement("span",Object.assign({},E,{ref:s}),A);if(r){var Be=r;return vr.createElement(Be,Object.assign({},Me,{ref:s}))}return vr.createElement("input",Object.assign({},Me,{ref:s}))}function xoe(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=NL(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=LG(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=o_e(p,n,!!r)),l&&(h=XWe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function NL(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function lGe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function cGe(e,t){return new RegExp("(^-)|[0-9]|"+s_e(e),"g")}function fGe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function dGe(e,t,n){var r;t===void 0&&(t=nGe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=NL(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(gC(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(B,U,H){var D=!1,z=!1;s.startsWith("-")?D=!1:B.startsWith("--")?(D=!1,z=!0):o.startsWith("-")&&B.length===o.length?D=!1:B[0]==="-"&&(D=!0);var W=D?1:0;return z&&(W=2),W&&(B=B.substring(W),U-=W,H-=W),{value:B,start:U,end:H,hasNegation:D}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),E=w.start,T=w.end,S=w.value,A=e.substring(c,f);e.length&&S.length&&(E>S.length-o.length||T<s.length)&&!(A&&o.startsWith(A))&&(e=S);var C=0;e.startsWith(s)?C+=s.length:c<s.length&&(C=c),e=e.substring(C),f-=C;var k=e.length,N=e.length-o.length;e.endsWith(o)?k=N:(f>N||f>e.length-o.length)&&(k=f),e=e.substring(0,k),e=lGe(b?"-"+e:e,i),e=(e.match(cGe(p))||[]).join("");var O=e.indexOf(p);e=e.replace(new RegExp(s_e(p),"g"),function(B,U){return U===O?".":""});var P=LG(e,i),$=P.beforeDecimal,F=P.afterDecimal,M=P.addNegation;return l.end-l.start<u.end-u.start&&$===""&&m&&!parseFloat(F)&&(e=M?"-":""),e}function hGe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function pGe(e){var t=NL(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function mGe(e){e=pGe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=$g);var s=e.onBlur;s===void 0&&(s=$g);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=r_e(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=NL(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(M){return xoe(M,e)},b=function(M,B){return dGe(M,B,e)},w=Ow(f)?c:f,E=d??fGe(w,l,t);Ow(f)?Ow(c)||(E=E||typeof c=="number"):E=E||typeof f=="number";var T=function(M){return i_e(M)?M:(typeof M=="number"&&(M=a_e(M)),E&&typeof a=="number"?woe(M,a,!!u):M)},S=l_e(T(f),T(c),!!E,v,b,h),A=S[0],C=A.numAsString,k=A.formattedValue,N=S[1],O=function(M){var B=M.target,U=M.key,H=B.selectionStart,D=B.selectionEnd,z=B.value;if(z===void 0&&(z=""),(U==="Backspace"||U==="Delete")&&D<l.length){M.preventDefault();return}if(H!==D){i(M);return}U==="Backspace"&&z[0]==="-"&&H===l.length+1&&n&&Dv(B,1),a&&u&&(U==="Backspace"&&z[H-1]===g?(Dv(B,H-1),M.preventDefault()):U==="Delete"&&z[H]===g&&M.preventDefault()),y!=null&&y.includes(U)&&z[H]===g&&Dv(B,H+1);var W=o===!0?",":o;U==="Backspace"&&z[H-1]===W&&Dv(B,H-1),U==="Delete"&&z[H]===W&&Dv(B,H+1),i(M)},P=function(M){var B=C;if(B.match(/\d/g)||(B=""),r||(B=JWe(B)),u&&a&&(B=woe(B,a,u)),B!==C){var U=xoe(B,e);N({formattedValue:U,value:B,floatValue:parseFloat(B)},{event:M,source:mC.event})}s(M)},$=function(M){return M===g?!0:gC(M)},F=function(M){var B=M.currentValue,U=M.lastValue,H=M.formattedValue,D=M.currentValueIndex,z=M.formattedValueIndex,W=B[D],j=H[z],q=u_e(U,B),G=q.to;return D>=G.start&&D<G.end&&y&&y.includes(W)&&j===g?!0:W===j};return Object.assign(Object.assign({},p),{value:k,valueIsNumericString:!1,isValidInputCharacter:$,isCharacterSame:F,onValueChange:N,format:v,removeFormatting:b,getCaretBoundary:function(M){return hGe(M,e)},onKeyDown:O,onBlur:P})}function gGe(e){var t=mGe(e);return vr.createElement(uGe,Object.assign({},t))}function Soe({direction:e,style:t,...n}){return _.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var $U={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const yGe=/^(0\.0*|-0(\.0*)?)$/,vGe=/^-?0\d+(\.\d+)?\.?$/;function bGe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function Toe(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const _Ge={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},wGe=(e,{size:t})=>({controls:{"--ni-chevron-size":en(t,"ni-chevron-size")}}),FG=je((e,t)=>{const n=Ae("NumberInput",_Ge,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:w,decimalScale:E,onKeyDown:T,onKeyDownCapture:S,handlersRef:A,startValue:C,disabled:k,rightSectionPointerEvents:N,allowNegative:O,readOnly:P,size:$,rightSectionWidth:F,stepHoldInterval:M,stepHoldDelay:B,allowLeadingZeros:U,withKeyboardEvents:H,trimLeadingZeroesOnBlur:D,...z}=n,W=ht({name:"NumberInput",classes:$U,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:wGe}),{resolvedClassNames:j,resolvedStyles:q}=$m({classNames:i,styles:s,props:n}),[G,re]=ws({value:c,defaultValue:f,onChange:u}),de=B!==void 0&&M!==void 0,pe=I.useRef(null),ge=I.useRef(null),Ee=I.useRef(0),Z=(ye,pt)=>{pt.source==="event"&&re(bGe(ye.floatValue)&&!yGe.test(ye.value)&&!(U&&vGe.test(ye.value))?ye.floatValue:ye.value),l==null||l(ye,pt)},Q=ye=>{const pt=String(ye).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return pt?Math.max(0,(pt[1]?pt[1].length:0)-(pt[2]?+pt[2]:0)):0},fe=ye=>{pe.current&&typeof ye<"u"&&pe.current.setSelectionRange(ye,ye)},be=I.useRef();be.current=()=>{let ye;const pt=Q(G),vt=Q(p),_e=Math.max(pt,vt),Ne=10**_e;if(typeof G!="number"||Number.isNaN(G))ye=Vd(C,h,d);else if(d!==void 0){const ct=(Math.round(G*Ne)+Math.round(p*Ne))/Ne;ye=ct<=d?ct:d}else ye=(Math.round(G*Ne)+Math.round(p*Ne))/Ne;const Ye=ye.toFixed(_e);re(parseFloat(Ye)),l==null||l({floatValue:parseFloat(Ye),formattedValue:Ye,value:Ye},{source:"increment"}),setTimeout(()=>{var ct;return fe((ct=pe.current)==null?void 0:ct.value.length)},0)};const Me=I.useRef();Me.current=()=>{let ye;const pt=h!==void 0?h:O?Number.MIN_SAFE_INTEGER:0,vt=Q(G),_e=Q(p),Ne=Math.max(vt,_e),Ye=10**Ne;if(typeof G!="number"||Number.isNaN(G))ye=Vd(C,pt,d);else{const wt=(Math.round(G*Ye)-Math.round(p*Ye))/Ye;ye=pt!==void 0&&wt<pt?pt:wt}const ct=ye.toFixed(Ne);re(parseFloat(ct)),l==null||l({floatValue:parseFloat(ct),formattedValue:ct,value:ct},{source:"decrement"}),setTimeout(()=>{var wt;return fe((wt=pe.current)==null?void 0:wt.value.length)},0)};const Be=ye=>{T==null||T(ye),!(P||!H)&&(ye.key==="ArrowUp"&&(ye.preventDefault(),be.current()),ye.key==="ArrowDown"&&(ye.preventDefault(),Me.current()))},ve=ye=>{if(S==null||S(ye),ye.key==="Backspace"){const pt=pe.current;pt.selectionStart===0&&pt.selectionStart===pt.selectionEnd&&(ye.preventDefault(),window.setTimeout(()=>fe(0),0))}};dW(A,{increment:be.current,decrement:Me.current});const Re=ye=>{ye?be.current():Me.current(),Ee.current+=1},He=ye=>{if(Re(ye),de){const pt=typeof M=="number"?M:M(Ee.current);ge.current=window.setTimeout(()=>He(ye),pt)}},Ze=(ye,pt)=>{var vt;ye.preventDefault(),(vt=pe.current)==null||vt.focus(),Re(pt),de&&(ge.current=window.setTimeout(()=>He(pt),B))},bt=()=>{ge.current&&window.clearTimeout(ge.current),ge.current=null,Ee.current=0},Ge=_.jsxs("div",{...W("controls"),children:[_.jsx(_s,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&d!==void 0&&G>=d,mod:{direction:"up"},onMouseDown:ye=>ye.preventDefault(),onPointerDown:ye=>{Ze(ye,!0)},onPointerUp:bt,onPointerLeave:bt,children:_.jsx(Soe,{direction:"up"})}),_.jsx(_s,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:ye=>ye.preventDefault(),onPointerDown:ye=>{Ze(ye,!1)},onPointerUp:bt,onPointerLeave:bt,children:_.jsx(Soe,{direction:"down"})})]});return _.jsx(Fc,{component:gGe,allowNegative:O,className:Yi($U.root,r),size:$,...z,readOnly:P,disabled:k,value:G,getInputRef:ls(t,pe),onValueChange:Z,rightSection:m||P?g:g||Ge,classNames:j,styles:q,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?E:0,onKeyDown:Be,onKeyDownCapture:ve,rightSectionPointerEvents:N??(k?"none":void 0),rightSectionWidth:F??`var(--ni-right-section-width-${$||"sm"})`,allowLeadingZeros:U,onBlur:ye=>{if(b==null||b(ye),v==="blur"&&typeof G=="number"&&Vd(G,h,d)!==G&&re(Vd(G,h,d)),D&&typeof G=="string"){const pt=G.replace(/^0+/,""),vt=parseFloat(pt);re(Number.isNaN(vt)?pt:vt)}},isAllowed:ye=>v==="strict"?y?y(ye)&&Toe(ye.floatValue,h,d):Toe(ye.floatValue,h,d):y?y(ye):!0})});FG.classes={...Fc.classes,...$U};FG.displayName="@mantine/core/NumberInput";const[EGe,c_e]=lo("Progress.Root component was not found in tree");var XI={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const xGe={},jG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("ProgressLabel",xGe,e),u=c_e();return _.jsx(we,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});jG.classes=XI;jG.displayName="@mantine/core/ProgressLabel";const SGe={},TGe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":en(t,"progress-size"),"--progress-radius":n===void 0?void 0:jr(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),PL=je((e,t)=>{const n=Ae("ProgressRoot",SGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=ht({name:"Progress",classes:XI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:TGe});return _.jsx(EGe,{value:{getStyles:d,autoContrast:l},children:_.jsx(we,{ref:t,...d("root"),...f})})});PL.classes=XI;PL.displayName="@mantine/core/ProgressRoot";const AGe={withAria:!0},DL=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=Ae("ProgressSection",AGe,e),p=c_e(),m=cs(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return _.jsx(we,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Dr(l,m),"--progress-label-color":Dx(p.autoContrast,m)?xy({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});DL.classes=XI;DL.displayName="@mantine/core/ProgressSection";const CGe={},qx=je((e,t)=>{const n=Ae("Progress",CGe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=$m({classNames:i,styles:s,props:n});return _.jsx(PL,{ref:t,classNames:d,styles:h,vars:o,...f,children:_.jsx(DL,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});qx.classes=XI;qx.displayName="@mantine/core/Progress";qx.Section=DL;qx.Root=PL;qx.Label=jG;const[IGe,f_e]=Px(),[kGe,RGe]=Px();var d_e={card:"m_9dc8ae12"};const NGe={withBorder:!0},PGe=(e,{radius:t})=>({card:{"--card-radius":jr(t)}}),BG=je((e,t)=>{const n=Ae("RadioCard",NGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=ht({name:"RadioCard",classes:d_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:PGe,rootSelector:"card"}),{dir:v}=Dh(),b=f_e(),w=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,E=p||(b==null?void 0:b.name),T=S=>{if(m==null||m(S),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(S.nativeEvent.code)){S.preventDefault();const A=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),C=A.findIndex(O=>O===S.target),k=C+1>=A.length?0:C+1,N=C-1<0?A.length-1:C-1;S.nativeEvent.code==="ArrowDown"&&(A[k].focus(),A[k].click()),S.nativeEvent.code==="ArrowUp"&&(A[N].focus(),A[N].click()),S.nativeEvent.code==="ArrowLeft"&&(A[v==="ltr"?N:k].focus(),A[v==="ltr"?N:k].click()),S.nativeEvent.code==="ArrowRight"&&(A[v==="ltr"?k:N].focus(),A[v==="ltr"?k:N].click())}};return _.jsx(kGe,{value:{checked:w},children:_.jsx(_s,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:E,onClick:S=>{h==null||h(S),b==null||b.onChange(d||"")},onKeyDown:T})})});BG.displayName="@mantine/core/RadioCard";BG.classes=d_e;const DGe={},UG=je((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=Ae("RadioGroup",DGe,e),f=wa(u),[d,h]=ws({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return _.jsx(IGe,{value:{value:d,onChange:p,size:s,name:f},children:_.jsx(fi.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:_.jsx(yG,{role:"radiogroup",children:a})})})});UG.classes=fi.Wrapper.classes;UG.displayName="@mantine/core/RadioGroup";function h_e({size:e,style:t,...n}){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Ie(e),height:Ie(e),...t},"aria-hidden":!0,...n,children:_.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var p_e={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const OGe={icon:h_e},$Ge=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Ph({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":en(r,"radio-size"),"--radio-radius":t===void 0?void 0:jr(t),"--radio-color":s==="outline"?u:Dr(n,e),"--radio-icon-size":en(r,"radio-icon-size"),"--radio-icon-color":i?Dr(i,e):Dx(o,e)?xy({color:n,theme:e,autoContrast:o}):void 0}}},zG=je((e,t)=>{const n=Ae("RadioIndicator",OGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,w=ht({name:"RadioIndicator",classes:p_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$Ge,rootSelector:"indicator"}),E=RGe(),T=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return _.jsx(we,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:T,disabled:y},m],...v,children:_.jsx(b,{...w("icon")})})});zG.displayName="@mantine/core/RadioIndicator";zG.classes=p_e;var m_e={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const MGe={labelPosition:"right"},LGe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Ph({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":en(t,"radio-size"),"--radio-radius":n===void 0?void 0:jr(n),"--radio-color":s==="outline"?u:Dr(r,e),"--radio-icon-color":i?Dr(i,e):Dx(o,e)?xy({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":en(t,"radio-icon-size")}}},O1=je((e,t)=>{const n=Ae("Radio",MGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:w=h_e,rootRef:E,iconColor:T,onChange:S,mod:A,...C}=n,k=ht({name:"Radio",classes:m_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:LGe}),N=f_e(),O=(N==null?void 0:N.size)??c,P=n.size?c:O,{styleProps:$,rest:F}=Sb(C),M=wa(l),B=N?{checked:N.value===F.value,name:F.name??N.name,onChange:U=>{N.onChange(U),S==null||S(U)}}:{};return _.jsx(dL,{...k("root"),__staticSelector:"Radio",__stylesApiProps:n,id:M,size:P,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":B.checked||void 0,variant:y,ref:E,mod:A,...$,...b,children:_.jsxs(we,{...k("inner"),mod:{"label-position":d},children:[_.jsx(we,{...k("radio",{focusable:!0,variant:y}),onChange:S,...F,...B,component:"input",mod:{error:!!p},ref:t,id:M,disabled:v,type:"radio"}),_.jsx(w,{...k("icon"),"aria-hidden":!0})]})})});O1.classes=m_e;O1.displayName="@mantine/core/Radio";O1.Group=UG;O1.Card=BG;O1.Indicator=zG;const FGe={duration:100,transition:"fade"};function jGe(e,t){return{...FGe,...t,...e}}function BGe({offset:e,position:t}){const[n,r]=I.useState(!1),i=I.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=MW({placement:t,middleware:[PW({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=I.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return I.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=Yp(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var OL={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const UGe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Gl("popover")},zGe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:jr(t),"--tooltip-bg":n?Dr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),VG=je((e,t)=>{const n=Ae("TooltipFloating",UGe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:w,portalProps:E,...T}=n,S=cs(),A=ht({name:"TooltipFloating",props:n,classes:OL,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:w,varsResolver:zGe}),{handleMouseMove:C,x:k,y:N,opened:O,boundaryRef:P,floating:$,setOpened:F}=BGe({offset:p,position:m});if(!wy(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const M=ls(P,r.ref,t),B=H=>{var D,z;(z=(D=r.props).onMouseEnter)==null||z.call(D,H),C(H),F(!0)},U=H=>{var D,z;(z=(D=r.props).onMouseLeave)==null||z.call(D,H),F(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(Lx,{...E,withinPortal:s,children:_.jsx(we,{...T,...A("tooltip",{style:{...vW(o,S),zIndex:y,display:!v&&O?"block":"none",top:(N&&Math.round(N))??"",left:(k&&Math.round(k))??""}}),variant:b,ref:$,mod:{multiline:g},children:h})}),I.cloneElement(r,{...r.props,[i]:M,onMouseEnter:B,onMouseLeave:U})]})});VG.classes=OL;VG.displayName="@mantine/core/TooltipFloating";const g_e=I.createContext(!1),VGe=g_e.Provider,HGe=()=>I.useContext(g_e),qGe={openDelay:0,closeDelay:0};function y_e(e){const{openDelay:t,closeDelay:n,children:r}=Ae("TooltipGroup",qGe,e);return _.jsx(VGe,{value:!0,children:_.jsx(jze,{delay:{open:t,close:n},children:r})})}y_e.displayName="@mantine/core/TooltipGroup";function WGe(e){var T,S,A;const[t,n]=I.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=HGe(),o=wa(),{delay:a,currentId:u,setCurrentId:l}=ebe(),c=I.useCallback(C=>{n(C),C&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=MW({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[K1e(e.offset),PW({padding:8}),RU(),X1e({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[NU()]:[]]}),{getReferenceProps:b,getFloatingProps:w}=Wze([Fze(h,{enabled:(T=e.events)==null?void 0:T.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((S=e.events)!=null&&S.touch)}),qze(h,{enabled:(A=e.events)==null?void 0:A.focus,visibleOnly:!0}),Yze(h,{role:"tooltip"}),Vze(h,{enabled:typeof e.opened>"u"}),Bze(h,{id:o})]);abe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),hh(()=>{var C;(C=e.onPositionChange)==null||C.call(e,g)},[g]);const E=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:b,isGroupPhase:E,opened:i,placement:g}}const Aoe={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Gl("popover"),positionDependencies:[]},GGe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:jr(t),"--tooltip-bg":n?Dr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),wi=je((e,t)=>{const n=Ae("Tooltip",Aoe,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:w,arrowOffset:E,arrowRadius:T,arrowPosition:S,offset:A,transitionProps:C,multiline:k,events:N,zIndex:O,disabled:P,positionDependencies:$,onClick:F,onMouseEnter:M,onMouseLeave:B,inline:U,variant:H,keepMounted:D,vars:z,portalProps:W,mod:j,floatingStrategy:q,...G}=Ae("Tooltip",Aoe,n),{dir:re}=Dh(),de=I.useRef(null),pe=WGe({position:tbe(re,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:N,arrowRef:de,arrowOffset:E,offset:typeof A=="number"?A+(b?w/2:0):A,positionDependencies:[...$,r],inline:U,strategy:q}),ge=ht({name:"Tooltip",props:n,classes:OL,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:z,varsResolver:GGe});if(!wy(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Ee=ls(pe.reference,r.ref,t),Z=jGe(C,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx(Lx,{...W,withinPortal:f,children:_.jsx(Lm,{...Z,keepMounted:D,mounted:!P&&!!pe.opened,duration:pe.isGroupPhase?10:Z.duration,children:Q=>_.jsxs(we,{...G,variant:H,mod:[{multiline:k},j],...pe.getFloatingProps({ref:pe.floating,className:ge("tooltip").className,style:{...ge("tooltip").style,...Q,zIndex:O,top:pe.y??0,left:pe.x??0}}),children:[o,_.jsx(LW,{ref:de,arrowX:pe.arrowX,arrowY:pe.arrowY,visible:b,position:pe.placement,arrowSize:w,arrowOffset:E,arrowRadius:T,arrowPosition:S,...ge("arrow")})]})})}),I.cloneElement(r,pe.getReferenceProps({onClick:F,onMouseEnter:M,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:Ee,className:Yi(v,r.props.className),...r.props}))]})});wi.classes=OL;wi.displayName="@mantine/core/Tooltip";wi.Floating=VG;wi.Group=y_e;var v_e={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const YGe={withItemsBorders:!0},KGe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:jr(t),"--sc-color":n?Dr(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":en(i,"sc-padding"),"--sc-font-size":oo(i)}}),HG=je((e,t)=>{var re,de;const n=Ae("SegmentedControl",YGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:w,transitionDuration:E,transitionTimingFunction:T,variant:S,autoContrast:A,withItemsBorders:C,mod:k,...N}=n,O=ht({name:"SegmentedControl",props:n,classes:v_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:KGe}),P=cs(),$=l.map(pe=>typeof pe=="string"?{label:pe,value:pe}:pe),F=KBe(),[M,B]=I.useState(null),[U,H]=I.useState({}),D=(pe,ge)=>{U[ge]=pe,H(U)},[z,W]=ws({value:c,defaultValue:f,finalValue:Array.isArray(l)?((re=$.find(pe=>!pe.disabled))==null?void 0:re.value)??((de=l[0])==null?void 0:de.value)??null:null,onChange:d}),j=wa(p),q=$.map(pe=>I.createElement(we,{...O("control"),mod:{active:z===pe.value,orientation:v},key:pe.value},I.createElement("input",{...O("input"),disabled:m||pe.disabled,type:"radio",name:j,value:pe.value,id:`${j}-${pe.value}`,checked:z===pe.value,onChange:()=>!g&&W(pe.value),"data-focus-ring":P.focusRing,key:`${pe.value}-input`}),I.createElement(we,{component:"label",...O("label"),mod:{active:z===pe.value&&!(m||pe.disabled),disabled:m||pe.disabled,"read-only":g},htmlFor:`${j}-${pe.value}`,ref:ge=>D(ge,pe.value),__vars:{"--sc-label-color":w!==void 0?xy({color:w,theme:P,autoContrast:A}):void 0},key:`${pe.value}-label`},_.jsx("span",{...O("innerLabel"),children:pe.label})))),G=ls(t,pe=>B(pe));return l.length===0?null:_.jsxs(we,{...O("root"),variant:S,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:F,"with-items-borders":C},k],...N,role:"radiogroup",children:[typeof z=="string"&&_.jsx(GW,{target:U[z],parent:M,component:"span",transitionDuration:"var(--sc-transition-duration)",...O("indicator")}),q]})});HG.classes=v_e;HG.displayName="@mantine/core/SegmentedControl";const XGe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},QI=je((e,t)=>{const n=Ae("Select",XGe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:w,readOnly:E,disabled:T,filter:S,limit:A,withScrollArea:C,maxDropdownHeight:k,size:N,searchable:O,rightSection:P,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:M,name:B,form:U,searchValue:H,defaultSearchValue:D,onSearchChange:z,allowDeselect:W,error:j,rightSectionPointerEvents:q,id:G,clearable:re,clearButtonProps:de,hiddenInputProps:pe,renderOption:ge,onClear:Ee,autoComplete:Z,scrollAreaProps:Q,...fe}=n,be=I.useMemo(()=>Sbe(m),[m]),Me=I.useMemo(()=>iG(be),[be]),Be=wa(G),[ve,Re,He]=ws({value:g,defaultValue:y,finalValue:null,onChange:p}),Ze=typeof ve=="string"?Me[ve]:void 0,[bt,Ge]=ws({value:H,defaultValue:D,finalValue:Ze?Ze.label:"",onChange:z}),ye=mG({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),ye.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),ye.resetSelectedOption()}}),{resolvedClassNames:pt,resolvedStyles:vt}=$m({props:n,styles:i,classNames:r});I.useEffect(()=>{v&&ye.selectFirstOption()},[v,ve]),I.useEffect(()=>{g===null&&Ge(""),typeof g=="string"&&Ze&&Ge(Ze.label)},[g,Ze]);const _e=re&&!!ve&&!T&&!E&&_.jsx(Gn.ClearButton,{size:N,...de,onClear:()=>{Re(null,null),Ge(""),Ee==null||Ee()}});return _.jsxs(_.Fragment,{children:[_.jsxs(Gn,{store:ye,__staticSelector:"Select",classNames:pt,styles:vt,unstyled:s,readOnly:E,onOptionSubmit:Ne=>{b==null||b(Ne);const Ye=W&&Me[Ne].value===ve?null:Me[Ne],ct=Ye?Ye.value:null;Re(ct,Ye),!He&&Ge(typeof ct=="string"&&(Ye==null?void 0:Ye.label)||""),ye.closeDropdown()},size:N,...w,children:[_.jsx(Gn.Target,{targetType:O?"input":"button",autoComplete:Z,children:_.jsx(Fc,{id:Be,ref:t,rightSection:P||_e||_.jsx(Gn.Chevron,{size:N,error:j,unstyled:s}),rightSectionPointerEvents:q||(_e?"all":"none"),...fe,size:N,__staticSelector:"Select",disabled:T,readOnly:E||!O,value:bt,onChange:Ne=>{Ge(Ne.currentTarget.value),ye.openDropdown(),v&&ye.selectFirstOption()},onFocus:Ne=>{O&&ye.openDropdown(),f==null||f(Ne)},onBlur:Ne=>{var Ye;O&&ye.closeDropdown(),Ge(ve!=null&&((Ye=Me[ve])==null?void 0:Ye.label)||""),d==null||d(Ne)},onClick:Ne=>{O?ye.openDropdown():ye.toggleDropdown(),h==null||h(Ne)},classNames:pt,styles:vt,unstyled:s,pointer:!O,error:j})}),_.jsx(zbe,{data:be,hidden:E||T,filter:S,search:bt,limit:A,hiddenWhenEmpty:!O||!M,withScrollArea:C,maxDropdownHeight:k,filterOptions:O&&(Ze==null?void 0:Ze.label)!==bt,value:ve,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:M,unstyled:s,labelId:fe.label?`${Be}-label`:void 0,"aria-label":fe.label?void 0:fe["aria-label"],renderOption:ge,scrollAreaProps:Q})]}),_.jsx(Gn.HiddenInput,{value:ve,name:B,form:U,disabled:T,...pe})]})});QI.classes={...Fc.classes,...Gn.classes};QI.displayName="@mantine/core/Select";function QGe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=cs(),s=t===void 0?e:t,o=_y({"--sg-spacing-x":is(Ef(e)),"--sg-spacing-y":is(Ef(s)),"--sg-cols":(c=Ef(n))==null?void 0:c.toString()}),a=Yr(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=is(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=is(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=cC(Yr(a),i).filter(f=>Yr(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return _.jsx(xb,{styles:o,media:l,selector:r})}function Aj(e){return typeof e=="object"&&e!==null?Yr(e):[]}function JGe(e){return e.sort((t,n)=>lC(t)-lC(n))}function ZGe({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...Aj(e),...Aj(t),...Aj(n)]));return JGe(r)}function eYe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=_y({"--sg-spacing-x":is(Ef(e)),"--sg-spacing-y":is(Ef(i)),"--sg-cols":(l=Ef(n))==null?void 0:l.toString()}),o=ZGe({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=is(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=is(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return _.jsx(xb,{styles:s,container:u,selector:r})}var b_e={container:"m_925c2d2c",root:"m_2415a157"};const tYe={cols:1,spacing:"md",type:"media"},qG=je((e,t)=>{const n=Ae("SimpleGrid",tYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=ht({name:"SimpleGrid",classes:b_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=VI();return d==="container"?_.jsxs(_.Fragment,{children:[_.jsx(eYe,{...n,selector:`.${m}`}),_.jsx("div",{...p("container"),children:_.jsx(we,{ref:t,...p("root",{className:m}),...h})})]}):_.jsxs(_.Fragment,{children:[_.jsx(QGe,{...n,selector:`.${m}`}),_.jsx(we,{ref:t,...p("root",{className:m}),...h})]})});qG.classes=b_e;qG.displayName="@mantine/core/SimpleGrid";const[__e,$L]=lo("SliderProvider was not found in tree"),WG=I.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=$L();return _.jsx(we,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});WG.displayName="@mantine/core/SliderRoot";const NO=I.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=$L(),[b,w]=I.useState(!1),E=l||s||b||h&&p;return _.jsxs(we,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:T=>T.stopPropagation(),children:[m,_.jsx(Lm,{mounted:i!=null&&!!E,transition:"fade",duration:0,...u,children:T=>_.jsx("div",{...v("label",{style:T}),children:i})})]})});NO.displayName="@mantine/core/SliderThumb";function PO({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function nYe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function w_e({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=$L();if(!e)return null;const u=e.map((l,c)=>I.createElement(we,{...a("markWrapper"),__vars:{"--mark-offset":`${PO({value:l.value,min:t,max:n})}%`},key:c},_.jsx(we,{...a("mark"),mod:{filled:nYe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&_.jsx("div",{...a("markLabel"),children:l.label})));return _.jsx("div",{children:u})}w_e.displayName="@mantine/core/SliderMarks";function GG({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=$L();return _.jsx(_.Fragment,{children:_.jsx(we,{...u("trackContainer"),mod:{disabled:r},...o,children:_.jsxs(we,{...u("track"),mod:{inverted:s,disabled:r},children:[_.jsx(we,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,_.jsx(w_e,{...a,offset:i,disabled:r,inverted:s})]})})})}GG.displayName="@mantine/core/SliderTrack";function MU({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function oc(e,t){return parseFloat(e.toFixed(t))}function E_e(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var ML={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const rYe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},iYe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":en(t,"slider-size"),"--slider-color":n?Dr(n,e):void 0,"--slider-radius":i===void 0?void 0:jr(i),"--slider-thumb-size":r!==void 0?Ie(r):"calc(var(--slider-size) * 2)"}}),LL=je((e,t)=>{const n=Ae("Slider",rYe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,thumbChildren:E,disabled:T,unstyled:S,scale:A,inverted:C,className:k,style:N,vars:O,hiddenInputProps:P,...$}=n,F=ht({name:"Slider",props:n,classes:ML,classNames:r,className:k,styles:i,style:N,vars:O,varsResolver:iYe,unstyled:S}),{dir:M}=Dh(),[B,U]=I.useState(!1),[H,D]=ws({value:typeof s=="number"?Vd(s,l,c):s,defaultValue:typeof h=="number"?Vd(h,l,c):h,finalValue:Vd(0,l,c),onChange:o}),z=I.useRef(H),W=I.useRef(),j=I.useRef(),q=PO({value:H,min:l,max:c}),G=A(H),re=typeof g=="function"?g(G):g,de=d??E_e(f),pe=I.useCallback(({x:Q})=>{if(!T){const fe=MU({value:Q,min:l,max:c,step:f,precision:de});D(fe),z.current=fe}},[T,l,c,f,de,D]),{ref:ge,active:Ee}=h1e(pe,{onScrubEnd:()=>a==null?void 0:a(z.current)},M),Z=Q=>{var fe,be,Me,Be,ve,Re;if(!T)switch(Q.key){case"ArrowUp":{Q.preventDefault(),(fe=j.current)==null||fe.focus();const He=oc(Math.min(Math.max(H+f,l),c),de);D(He),a==null||a(He);break}case"ArrowRight":{Q.preventDefault(),(be=j.current)==null||be.focus();const He=oc(Math.min(Math.max(M==="rtl"?H-f:H+f,l),c),de);D(He),a==null||a(He);break}case"ArrowDown":{Q.preventDefault(),(Me=j.current)==null||Me.focus();const He=oc(Math.min(Math.max(H-f,l),c),de);D(He),a==null||a(He);break}case"ArrowLeft":{Q.preventDefault(),(Be=j.current)==null||Be.focus();const He=oc(Math.min(Math.max(M==="rtl"?H+f:H-f,l),c),de);D(He),a==null||a(He);break}case"Home":{Q.preventDefault(),(ve=j.current)==null||ve.focus(),D(l),a==null||a(l);break}case"End":{Q.preventDefault(),(Re=j.current)==null||Re.focus(),D(c),a==null||a(c);break}}};return _.jsx(__e,{value:{getStyles:F},children:_.jsxs(WG,{...$,ref:ls(t,W),onKeyDownCapture:Z,onMouseDownCapture:()=>{var Q;return(Q=W.current)==null?void 0:Q.focus()},size:u,disabled:T,children:[_.jsx(GG,{inverted:C,offset:0,filled:q,marks:m,min:l,max:c,value:G,disabled:T,containerProps:{ref:ge,onMouseEnter:w?()=>U(!0):void 0,onMouseLeave:w?()=>U(!1):void 0},children:_.jsx(NO,{max:c,min:l,value:G,position:q,dragging:Ee,label:re,ref:j,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,isHovered:B,disabled:T,children:E})}),_.jsx("input",{type:"hidden",name:p,value:G,...P})]})})});LL.classes=ML;LL.displayName="@mantine/core/Slider";function sYe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const oYe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":en(t,"slider-size"),"--slider-color":n?Dr(n,e):void 0,"--slider-radius":i===void 0?void 0:jr(i),"--slider-thumb-size":r!==void 0?Ie(r):"calc(var(--slider-size) * 2)"}}),aYe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},DO=je((e,t)=>{const n=Ae("RangeSlider",aYe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:w,thumbFromLabel:E,thumbToLabel:T,showLabelOnHover:S,thumbChildren:A,disabled:C,unstyled:k,scale:N,inverted:O,className:P,style:$,vars:F,hiddenInputProps:M,...B}=n,U=ht({name:"Slider",props:n,classes:ML,classNames:r,className:P,styles:i,style:$,vars:F,varsResolver:oYe,unstyled:k}),{dir:H}=Dh(),[D,z]=I.useState(-1),[W,j]=I.useState(!1),[q,G]=ws({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),re=I.useRef(q),de=I.useRef([]),pe=I.useRef(void 0),ge=[PO({value:q[0],min:l,max:c}),PO({value:q[1],min:l,max:c})],Ee=p??E_e(h),Z=Ge=>{G(Ge),re.current=Ge};I.useEffect(()=>{Array.isArray(s)&&(re.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const Q=(Ge,ye,pt)=>{const vt=[...re.current];vt[ye]=Ge,ye===0&&(Ge>vt[1]-(f-1e-9)&&(vt[1]=Math.min(Ge+f,c)),Ge>(c-(f-1e-9)||l)&&(vt[ye]=re.current[ye]),vt[1]-Ge>d&&(vt[1]=Ge+d)),ye===1&&(Ge<vt[0]+f&&(vt[0]=Math.max(Ge-f,l)),Ge<vt[0]+f&&(vt[ye]=re.current[ye]),Ge-vt[0]>d&&(vt[0]=Ge-d)),vt[0]=oc(vt[0],Ee),vt[1]=oc(vt[1],Ee),Z(vt),pt&&(a==null||a(re.current))},fe=Ge=>{if(!C){const ye=MU({value:Ge,min:l,max:c,step:h,precision:Ee});Q(ye,pe.current,!1)}},{ref:be,active:Me}=h1e(({x:Ge})=>fe(Ge),{onScrubEnd:()=>a==null?void 0:a(re.current)},H);function Be(Ge){pe.current=Ge}const ve=Ge=>{be.current.focus();const ye=be.current.getBoundingClientRect(),pt=sYe(Ge.nativeEvent),vt=MU({value:pt-ye.left,max:c,min:l,step:h,containerWidth:ye.width}),_e=Math.abs(q[0]-vt)>Math.abs(q[1]-vt)?1:0,Ne=H==="ltr"?_e:_e===1?0:1;pe.current=Ne},Re=()=>D!==1&&D!==0?(z(0),0):D,He=Ge=>{if(!C)switch(Ge.key){case"ArrowUp":{Ge.preventDefault();const ye=Re();de.current[ye].focus(),Q(oc(Math.min(Math.max(re.current[ye]+h,l),c),Ee),ye,!0);break}case"ArrowRight":{Ge.preventDefault();const ye=Re();de.current[ye].focus(),Q(oc(Math.min(Math.max(H==="rtl"?re.current[ye]-h:re.current[ye]+h,l),c),Ee),ye,!0);break}case"ArrowDown":{Ge.preventDefault();const ye=Re();de.current[ye].focus(),Q(oc(Math.min(Math.max(re.current[ye]-h,l),c),Ee),ye,!0);break}case"ArrowLeft":{Ge.preventDefault();const ye=Re();de.current[ye].focus(),Q(oc(Math.min(Math.max(H==="rtl"?re.current[ye]+h:re.current[ye]-h,l),c),Ee),ye,!0);break}}},Ze={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:w,onBlur:()=>z(-1)},bt=Array.isArray(A);return _.jsx(__e,{value:{getStyles:U},children:_.jsxs(WG,{...B,size:u,ref:t,disabled:C,children:[_.jsxs(GG,{offset:ge[0],marksOffset:q[0],filled:ge[1]-ge[0],marks:y,inverted:O,min:l,max:c,value:q[1],disabled:C,containerProps:{ref:be,onMouseEnter:S?()=>j(!0):void 0,onMouseLeave:S?()=>j(!1):void 0,onTouchStartCapture:ve,onTouchEndCapture:()=>{pe.current=-1},onMouseDownCapture:ve,onMouseUpCapture:()=>{pe.current=-1},onKeyDownCapture:He},children:[_.jsx(NO,{...Ze,value:N(q[0]),position:ge[0],dragging:Me,label:typeof v=="function"?v(oc(N(q[0]),Ee)):v,ref:Ge=>{de.current[0]=Ge},thumbLabel:E,onMouseDown:()=>Be(0),onFocus:()=>z(0),showLabelOnHover:S,isHovered:W,disabled:C,children:bt?A[0]:A}),_.jsx(NO,{...Ze,thumbLabel:T,value:N(q[1]),position:ge[1],dragging:Me,label:typeof v=="function"?v(oc(N(q[1]),Ee)):v,ref:Ge=>{de.current[1]=Ge},onMouseDown:()=>Be(1),onFocus:()=>z(1),showLabelOnHover:S,isHovered:W,disabled:C,children:bt?A[1]:A})]}),_.jsx("input",{type:"hidden",name:`${g}_from`,value:q[0],...M}),_.jsx("input",{type:"hidden",name:`${g}_to`,value:q[1],...M})]})})});DO.classes=ML;DO.displayName="@mantine/core/RangeSlider";const uYe={},Al=je((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=Ae("Space",uYe,e);return _.jsx(we,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Al.displayName="@mantine/core/Space";var x_e={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const lYe={maxHeight:100,initialState:!1},cYe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),YG=je((e,t)=>{const n=Ae("Spoiler",lYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=ht({name:"Spoiler",classes:x_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:cYe}),b=wa(g),w=`${b}-region`,[E,T]=I.useState(l),{ref:S,height:A}=zBe(),C=E?f:d,k=C!==null&&c<A;return _.jsxs(we,{...v("root"),id:b,ref:t,"data-has-spoiler":k||void 0,...y,children:[k&&_.jsx(Bx,{component:"button",type:"button",ref:p,onClick:()=>T(N=>!N),"aria-expanded":E,"aria-controls":w,...v("control"),children:C}),_.jsx("div",{...v("content",{style:{maxHeight:E?A?Ie(A):void 0:Ie(c)}}),"data-reduce-motion":!0,role:"region",id:w,children:_.jsx("div",{ref:S,children:h})})]})});YG.classes=x_e;YG.displayName="@mantine/core/Spoiler";var S_e={root:"m_6d731127"};const fYe={gap:"md",align:"stretch",justify:"flex-start"},dYe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":is(t),"--stack-align":n,"--stack-justify":r}}),Hd=je((e,t)=>{const n=Ae("Stack",fYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=ht({name:"Stack",props:n,classes:S_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dYe});return _.jsx(we,{ref:t,...p("root"),variant:d,...h})});Hd.classes=S_e;Hd.displayName="@mantine/core/Stack";const T_e=I.createContext(null),hYe=T_e.Provider,pYe=()=>I.useContext(T_e),mYe={},KG=je((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Ae("SwitchGroup",mYe,e),[c,f]=ws({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(hYe,{value:{value:c,onChange:d,size:s},children:_.jsx(fi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:_.jsx(yG,{role:"group",children:a})})})});KG.classes=fi.Wrapper.classes;KG.displayName="@mantine/core/SwitchGroup";var A_e={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const gYe={labelPosition:"right"},yYe=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:jr(t),"--switch-height":en(r,"switch-height"),"--switch-width":en(r,"switch-width"),"--switch-thumb-size":en(r,"switch-thumb-size"),"--switch-label-font-size":en(r,"switch-label-font-size"),"--switch-track-label-padding":en(r,"switch-track-label-padding"),"--switch-color":n?Dr(n,e):void 0}}),$w=je((e,t)=>{const n=Ae("Switch",gYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:b,defaultChecked:w,onChange:E,labelPosition:T,description:S,error:A,disabled:C,variant:k,rootRef:N,mod:O,...P}=n,$=pYe(),F=p||($==null?void 0:$.size),M=ht({name:"Switch",props:n,classes:A_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yYe}),{styleProps:B,rest:U}=Sb(P),H=wa(h),D=$?{checked:$.value.includes(U.value),onChange:$.onChange}:{},[z,W]=ws({value:D.checked??b,defaultValue:w,finalValue:!1});return _.jsxs(dL,{...M("root"),__staticSelector:"Switch",__stylesApiProps:n,id:H,size:F,labelPosition:T,label:c,description:S,error:A,disabled:C,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":D.checked||void 0,variant:k,ref:N,mod:O,...B,...g,children:[_.jsx("input",{...U,disabled:C,checked:z,onChange:j=>{var q;$?(q=D.onChange)==null||q.call(D,j):E==null||E(j),W(j.currentTarget.checked)},id:H,ref:t,type:"checkbox",role:"switch",...M("input")}),_.jsxs(we,{"aria-hidden":"true",mod:{error:A,"label-position":T},...M("track"),children:[_.jsx(we,{component:"span",mod:"reduce-motion",...M("thumb"),children:v}),_.jsx("span",{...M("trackLabel"),children:z?d:f})]})]})});$w.classes={...A_e,...Nbe};$w.displayName="@mantine/core/Switch";$w.Group=KG;const[vYe,bYe]=lo("Table component was not found in the tree");var JI={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function _Ye(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Ib(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=je((i,s)=>{const o=Ae(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=bYe();return _.jsx(we,{component:e,ref:s,..._Ye(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=JI,r}const LU=Ib("th",{columnBorder:!0}),C_e=Ib("td",{columnBorder:!0}),YP=Ib("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),I_e=Ib("thead",{stickyHeader:!0}),k_e=Ib("tbody"),R_e=Ib("tfoot"),N_e=Ib("caption",{captionSide:!0});function XG({data:e}){return _.jsxs(_.Fragment,{children:[e.caption&&_.jsx(N_e,{children:e.caption}),e.head&&_.jsx(I_e,{children:_.jsx(YP,{children:e.head.map((t,n)=>_.jsx(LU,{children:t},n))})}),e.body&&_.jsx(k_e,{children:e.body.map((t,n)=>_.jsx(YP,{children:t.map((r,i)=>_.jsx(C_e,{children:r},i))},n))}),e.foot&&_.jsx(R_e,{children:_.jsx(YP,{children:e.foot.map((t,n)=>_.jsx(LU,{children:t},n))})})]})}XG.displayName="@mantine/core/TableDataRenderer";const wYe={type:"scrollarea"},EYe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Ie(t),"--table-overflow":n==="native"?"auto":void 0}}),QG=je((e,t)=>{const n=Ae("TableScrollContainer",wYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=ht({name:"TableScrollContainer",classes:JI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EYe,rootSelector:"scrollContainer"});return _.jsx(we,{component:f==="scrollarea"?um:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:_.jsx("div",{...h("scrollContainerInner"),children:l})})});QG.classes=JI;QG.displayName="@mantine/core/TableScrollContainer";const xYe={withRowBorders:!0,verticalSpacing:7},SYe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":is(r),"--table-vertical-spacing":is(i),"--table-border-color":s?Dr(s,e):void 0,"--table-striped-color":u&&o?Dr(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Dr(a,e):void 0,"--table-sticky-header-offset":f?Ie(c):void 0}}),Ht=je((e,t)=>{const n=Ae("Table",xYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:w,variant:E,data:T,children:S,stickyHeader:A,stickyHeaderOffset:C,mod:k,...N}=n,O=ht({name:"Table",props:n,className:i,style:s,classes:JI,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:SYe});return _.jsx(vYe,{value:{getStyles:O,stickyHeader:A,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:_.jsx(we,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":v},k],...O("table"),...N,children:S||!!T&&_.jsx(XG,{data:T})})})});Ht.classes=JI;Ht.displayName="@mantine/core/Table";Ht.Td=C_e;Ht.Th=LU;Ht.Tr=YP;Ht.Thead=I_e;Ht.Tbody=k_e;Ht.Tfoot=R_e;Ht.Caption=N_e;Ht.ScrollContainer=QG;Ht.DataRenderer=XG;const[TYe,JG]=lo("Tabs component was not found in the tree");var ZI={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const AYe={},ZG=je((e,t)=>{const n=Ae("TabsList",AYe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=JG();return _.jsx(we,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});ZG.classes=ZI;ZG.displayName="@mantine/core/TabsList";const CYe={},eY=je((e,t)=>{const n=Ae("TabsPanel",CYe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=JG(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return _.jsx(we,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});eY.classes=ZI;eY.displayName="@mantine/core/TabsPanel";const IYe={},tY=je((e,t)=>{const n=Ae("TabsTab",IYe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=cs(),{dir:b}=Dh(),w=JG(),E=a===w.value,T=A=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(A)},S={classNames:h,styles:p,props:n};return _.jsxs(_s,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...S}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:E,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":E,tabIndex:E||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:T,__vars:{"--tabs-color":f?Dr(f,v):void 0},onKeyDown:lW({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&_.jsx("span",{...w.getStyles("tabSection",S),"data-position":"left",children:o}),i&&_.jsx("span",{...w.getStyles("tabLabel",S),children:i}),s&&_.jsx("span",{...w.getStyles("tabSection",S),"data-position":"right",children:s})]})});tY.classes=ZI;tY.displayName="@mantine/core/TabsTab";const Coe="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",kYe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},RYe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":jr(t),"--tabs-color":Dr(n,e),"--tabs-text-color":Dx(r,e)?xy({color:n,theme:e,autoContrast:r}):void 0}}),es=je((e,t)=>{const n=Ae("Tabs",kYe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:w,className:E,style:T,vars:S,autoContrast:A,mod:C,...k}=n,N=wa(l),[O,P]=ws({value:i,defaultValue:r,finalValue:null,onChange:s}),$=ht({name:"Tabs",props:n,classes:ZI,className:E,style:T,classNames:v,styles:b,unstyled:w,vars:S,varsResolver:RYe});return _.jsx(TYe,{value:{placement:g,value:O,orientation:o,id:N,loop:u,activateTabWithKeyboard:c,getTabId:xO(`${N}-tab`,Coe),getPanelId:xO(`${N}-panel`,Coe),onChange:P,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:$},children:_.jsx(we,{ref:t,id:N,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},C],...$("root"),...k,children:a})})});es.classes=ZI;es.displayName="@mantine/core/Tabs";es.Tab=tY;es.Panel=eY;es.List=ZG;const NYe={},Hg=je((e,t)=>{const n=Ae("TextInput",NYe,e);return _.jsx(Fc,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});Hg.classes=Fc.classes;Hg.displayName="@mantine/core/TextInput";const PYe=["h1","h2","h3","h4","h5","h6"];function DYe(e,t){const n=t!==void 0?t:`h${e}`;return PYe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Ie(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var P_e={root:"m_8a5d1357"};const OYe={order:1},$Ye=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=DYe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},Ei=je((e,t)=>{const n=Ae("Title",OYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=ht({name:"Title",props:n,classes:P_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:$Ye});return[1,2,3,4,5,6].includes(u)?_.jsx(we,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});Ei.classes=P_e;Ei.displayName="@mantine/core/Title";function MYe(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function LYe(e){return I.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function FYe(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const jYe=()=>MYe({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),kb=jYe(),BYe=(e=kb)=>LYe(e);function Wx(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=FYe(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function UYe(e,t=kb){const n=e.id||Pw();return Wx(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function D_e(e,t=kb){return Wx(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function zYe(e,t=kb){return Wx(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function VYe(e=kb){Wx(e,()=>[])}function HYe(e=kb){Wx(e,t=>t.slice(0,e.getState().limit))}const Rb={show:UYe,hide:D_e,update:zYe,clean:VYe,cleanQueue:HYe,updateState:Wx};function FU(){return FU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FU.apply(null,arguments)}function O_e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function jU(e,t){return jU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},jU(e,t)}function $_e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,jU(e,t)}var M_e={exports:{}},qYe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",WYe=qYe,GYe=WYe;function L_e(){}function F_e(){}F_e.resetWarningCache=L_e;var YYe=function(){function e(r,i,s,o,a,u){if(u!==GYe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:F_e,resetWarningCache:L_e};return n.PropTypes=n,n};M_e.exports=YYe();var KYe=M_e.exports;const Ioe=Hl(KYe),koe={disabled:!1},OO=vr.createContext(null);var XYe=function(t){return t.scrollTop},o2="unmounted",vv="exited",bv="entering",B_="entered",BU="exiting",zm=function(e){$_e(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=vv,s.appearStatus=bv):u=B_:r.unmountOnExit||r.mountOnEnter?u=o2:u=vv,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===o2?{status:vv}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==bv&&o!==B_&&(s=bv):(o===bv||o===B_)&&(s=BU)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===bv){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:s2.findDOMNode(this);o&&XYe(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===vv&&this.setState({status:o2})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[s2.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||koe.disabled){this.safeSetState({status:B_},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:bv},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:B_},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:s2.findDOMNode(this);if(!s||koe.disabled){this.safeSetState({status:vv},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:BU},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:vv},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:s2.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===o2)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=O_e(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return vr.createElement(OO.Provider,{value:null},typeof o=="function"?o(i,a):vr.cloneElement(vr.Children.only(o),a))},t}(vr.Component);zm.contextType=OO;zm.propTypes={};function y_(){}zm.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:y_,onEntering:y_,onEntered:y_,onExit:y_,onExiting:y_,onExited:y_};zm.UNMOUNTED=o2;zm.EXITED=vv;zm.ENTERING=bv;zm.ENTERED=B_;zm.EXITING=BU;function QYe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nY(e,t){var n=function(s){return t&&I.isValidElement(s)?t(s):s},r=Object.create(null);return e&&I.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function JYe(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function Xv(e,t,n){return n[t]!=null?n[t]:e.props[t]}function ZYe(e,t){return nY(e.children,function(n){return I.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Xv(n,"appear",e),enter:Xv(n,"enter",e),exit:Xv(n,"exit",e)})})}function eKe(e,t,n){var r=nY(e.children),i=JYe(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(I.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=I.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=I.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Xv(o,"exit",e),enter:Xv(o,"enter",e)}):!u&&a&&!c?i[s]=I.cloneElement(o,{in:!1}):u&&a&&I.isValidElement(l)&&(i[s]=I.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:Xv(o,"exit",e),enter:Xv(o,"enter",e)}))}}),i}var tKe=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},nKe={component:"div",childFactory:function(t){return t}},Sg=function(e){$_e(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(QYe(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?ZYe(i,a):eKe(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=nY(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=FU({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=O_e(i,["component","childFactory"]),u=this.state.contextValue,l=tKe(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?vr.createElement(OO.Provider,{value:u},l):vr.createElement(OO.Provider,{value:u},vr.createElement(s,a,l))},t}(vr.Component);Sg.propTypes={};Sg.defaultProps=nKe;const j_e=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function rKe(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),j_e.reduce((n,r)=>(n[r]=[],n),{}))}const Roe={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},iKe={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function sKe({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:Roe[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:iKe[o]},l={opacity:0,maxHeight:0,transform:Roe[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function oKe(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const B_e=I.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=oKe(n,e.autoClose),l=I.useRef(),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return I.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),I.useEffect(()=>(d(),c),[u]),_.jsx(MG,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});B_e.displayName="@mantine/notifications/NotificationContainer";var U_e={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const aKe=zm,uKe={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:Gl("overlay"),store:kb,withinPortal:!0},lKe=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":Ie(n)}}),Vm=je((e,t)=>{const n=Ae("Notifications",uKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:y,withinPortal:v,...b}=n,w=cs(),E=BYe(g),T=FBe(),S=tL(),A=I.useRef({}),C=I.useRef(0),N=(w.respectReducedMotion?S:!1)?1:f,O=ht({name:"Notifications",classes:U_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:lKe});I.useEffect(()=>{g==null||g.updateState(F=>({...F,limit:p||5,defaultPosition:l}))},[p,l]),hh(()=>{E.notifications.length>C.current&&setTimeout(()=>T(),0),C.current=E.notifications.length},[E.notifications]);const P=rKe(E.notifications,l),$=j_e.reduce((F,M)=>(F[M]=P[M].map(({style:B,...U})=>_.jsx(aKe,{timeout:N,onEnter:()=>A.current[U.id].offsetHeight,nodeRef:{current:A.current[U.id]},children:H=>_.jsx(B_e,{ref:D=>{A.current[U.id]=D},data:U,onHide:D=>D_e(D,g),autoClose:c,...O("notification",{style:{...sKe({state:H,position:M,transitionDuration:N,maxHeight:h}),...B}})})},U.id)),F),{});return _.jsxs(Lx,{withinPortal:v,...y,children:[_.jsx(we,{...O("root"),"data-position":"top-center",ref:t,...b,children:_.jsx(Sg,{children:$["top-center"]})}),_.jsx(we,{...O("root"),"data-position":"top-left",...b,children:_.jsx(Sg,{children:$["top-left"]})}),_.jsx(we,{...O("root"),"data-position":"top-right",...b,children:_.jsx(Sg,{children:$["top-right"]})}),_.jsx(we,{...O("root"),"data-position":"bottom-right",...b,children:_.jsx(Sg,{children:$["bottom-right"]})}),_.jsx(we,{...O("root"),"data-position":"bottom-left",...b,children:_.jsx(Sg,{children:$["bottom-left"]})}),_.jsx(we,{...O("root"),"data-position":"bottom-center",...b,children:_.jsx(Sg,{children:$["bottom-center"]})})]})});Vm.classes=U_e;Vm.displayName="@mantine/notifications/Notifications";Vm.show=Rb.show;Vm.hide=Rb.hide;Vm.update=Rb.update;Vm.clean=Rb.clean;Vm.cleanQueue=Rb.cleanQueue;Vm.updateState=Rb.updateState;const z_e=I.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Ss=()=>I.useContext(z_e);function cKe({children:e}){const[t,n]=vr.useState(void 0),r=vr.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return _.jsx(z_e.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yC(){return yC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yC.apply(this,arguments)}var qg;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(qg||(qg={}));const Noe="popstate";function fKe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return UU("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:H_e(i)}return hKe(t,n,null,e)}function ss(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function V_e(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function dKe(){return Math.random().toString(36).substr(2,8)}function Poe(e,t){return{usr:e.state,key:e.key,idx:t}}function UU(e,t,n,r){return n===void 0&&(n=null),yC({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Gx(t):t,{state:n,key:t&&t.key||r||dKe()})}function H_e(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Gx(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function hKe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=qg.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(yC({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=qg.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=qg.Push;let v=UU(m.location,g,y);l=c()+1;let b=Poe(v,l),w=m.createHref(v);try{o.pushState(b,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=qg.Replace;let v=UU(m.location,g,y);l=c();let b=Poe(v,l),w=m.createHref(v);o.replaceState(b,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:H_e(g);return v=v.replace(/ $/,"%20"),ss(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Noe,f),u=g,()=>{i.removeEventListener(Noe,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var Doe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Doe||(Doe={}));function pKe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Gx(t):t,i=G_e(r.pathname||"/",n);if(i==null)return null;let s=q_e(e);mKe(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=CKe(i);o=SKe(s[a],u)}return o}function q_e(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(ss(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=h0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(ss(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),q_e(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:EKe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of W_e(s.path))i(s,o,u)}),t}function W_e(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=W_e(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function mKe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:xKe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const gKe=/^:[\w-]+$/,yKe=3,vKe=2,bKe=1,_Ke=10,wKe=-2,Ooe=e=>e==="*";function EKe(e,t){let n=e.split("/"),r=n.length;return n.some(Ooe)&&(r+=wKe),t&&(r+=vKe),n.filter(i=>!Ooe(i)).reduce((i,s)=>i+(gKe.test(s)?yKe:s===""?bKe:_Ke),r)}function xKe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function SKe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=TKe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:h0([i,c.pathname]),pathnameBase:NKe(h0([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=h0([i,c.pathnameBase]))}return s}function TKe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=AKe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function AKe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),V_e(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function CKe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return V_e(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function G_e(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function IKe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Gx(e):e;return{pathname:n?n.startsWith("/")?n:kKe(n,t):t,search:PKe(r),hash:DKe(i)}}function kKe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Cj(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function RKe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function rY(e,t){let n=RKe(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function iY(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Gx(e):(i=yC({},e),ss(!i.pathname||!i.pathname.includes("?"),Cj("?","pathname","search",i)),ss(!i.pathname||!i.pathname.includes("#"),Cj("#","pathname","hash",i)),ss(!i.search||!i.search.includes("#"),Cj("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=IKe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const h0=e=>e.join("/").replace(/\/\/+/g,"/"),NKe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),PKe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,DKe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function OKe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Y_e=["post","put","patch","delete"];new Set(Y_e);const $Ke=["get",...Y_e];new Set($Ke);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vC(){return vC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vC.apply(this,arguments)}const sY=I.createContext(null),MKe=I.createContext(null),Nb=I.createContext(null),FL=I.createContext(null),Mh=I.createContext({outlet:null,matches:[],isDataRoute:!1}),K_e=I.createContext(null);function X_e(e,t){let{relative:n}={};Yx()||ss(!1);let{basename:r,navigator:i}=I.useContext(Nb),{hash:s,pathname:o,search:a}=BKe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:h0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function Yx(){return I.useContext(FL)!=null}function Ay(){return Yx()||ss(!1),I.useContext(FL).location}function Q_e(e){I.useContext(Nb).static||I.useLayoutEffect(e)}function Hm(){let{isDataRoute:e}=I.useContext(Mh);return e?QKe():LKe()}function LKe(){Yx()||ss(!1);let e=I.useContext(sY),{basename:t,future:n,navigator:r}=I.useContext(Nb),{matches:i}=I.useContext(Mh),{pathname:s}=Ay(),o=JSON.stringify(rY(i,n.v7_relativeSplatPath)),a=I.useRef(!1);return Q_e(()=>{a.current=!0}),I.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=iY(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:h0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const FKe=I.createContext(null);function jKe(e){let t=I.useContext(Mh).outlet;return t&&I.createElement(FKe.Provider,{value:e},t)}function dm(){let{matches:e}=I.useContext(Mh),t=e[e.length-1];return t?t.params:{}}function BKe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=I.useContext(Nb),{matches:i}=I.useContext(Mh),{pathname:s}=Ay(),o=JSON.stringify(rY(i,r.v7_relativeSplatPath));return I.useMemo(()=>iY(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function J_e(e,t){return UKe(e,t)}function UKe(e,t,n,r){Yx()||ss(!1);let{navigator:i}=I.useContext(Nb),{matches:s}=I.useContext(Mh),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Ay(),c;if(t){var f;let g=typeof t=="string"?Gx(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||ss(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=pKe(e,{pathname:h}),m=WKe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:h0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:h0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?I.createElement(FL.Provider,{value:{location:vC({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:qg.Pop}},m):m}function zKe(){let e=XKe(),t=OKe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),n?I.createElement("pre",{style:i},n):null,null)}const VKe=I.createElement(zKe,null);class HKe extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?I.createElement(Mh.Provider,{value:this.props.routeContext},I.createElement(K_e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qKe(e){let{routeContext:t,match:n,children:r}=e,i=I.useContext(sY);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(Mh.Provider,{value:t},r)}function WKe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||ss(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||VKe,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=I.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,I.createElement(qKe,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?I.createElement(HKe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var Z_e=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Z_e||{}),$O=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}($O||{});function GKe(e){let t=I.useContext(sY);return t||ss(!1),t}function YKe(e){let t=I.useContext(MKe);return t||ss(!1),t}function KKe(e){let t=I.useContext(Mh);return t||ss(!1),t}function ewe(e){let t=KKe(),n=t.matches[t.matches.length-1];return n.route.id||ss(!1),n.route.id}function XKe(){var e;let t=I.useContext(K_e),n=YKe($O.UseRouteError),r=ewe($O.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function QKe(){let{router:e}=GKe(Z_e.UseNavigateStable),t=ewe($O.UseNavigateStable),n=I.useRef(!1);return Q_e(()=>{n.current=!0}),I.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,vC({fromRouteId:t},s)))},[e,t])}function oY(e){let{to:t,replace:n,state:r,relative:i}=e;Yx()||ss(!1);let{future:s,static:o}=I.useContext(Nb),{matches:a}=I.useContext(Mh),{pathname:u}=Ay(),l=Hm(),c=iY(t,rY(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return I.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function JKe(e){return jKe(e.context)}function gp(e){ss(!1)}function ZKe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=qg.Pop,navigator:s,static:o=!1,future:a}=e;Yx()&&ss(!1);let u=t.replace(/^\/*/,"/"),l=I.useMemo(()=>({basename:u,navigator:s,static:o,future:vC({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=Gx(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=I.useMemo(()=>{let g=G_e(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:I.createElement(Nb.Provider,{value:l},I.createElement(FL.Provider,{children:n,value:m}))}function eXe(e){let{children:t,location:n}=e;return J_e(zU(t),n)}new Promise(()=>{});function zU(e,t){t===void 0&&(t=[]);let n=[];return I.Children.forEach(e,(r,i)=>{if(!I.isValidElement(r))return;let s=[...t,i];if(r.type===I.Fragment){n.push.apply(n,zU(r.props.children,s));return}r.type!==gp&&ss(!1),!r.props.index||!r.props.children||ss(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=zU(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function VU(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function tXe(e,t){let n=VU(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const nXe="6";try{window.__reactRouterVersion=nXe}catch{}const rXe="startTransition",$oe=QD[rXe];function iXe(e){let{basename:t,children:n,future:r,window:i}=e,s=I.useRef();s.current==null&&(s.current=fKe({window:i,v5Compat:!0}));let o=s.current,[a,u]=I.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=I.useCallback(f=>{l&&$oe?$oe(()=>u(f)):u(f)},[u,l]);return I.useLayoutEffect(()=>o.listen(c),[o,c]),I.createElement(ZKe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var Moe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Moe||(Moe={}));var Loe;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Loe||(Loe={}));function aY(e){let t=I.useRef(VU(e)),n=I.useRef(!1),r=Ay(),i=I.useMemo(()=>tXe(r.search,n.current?null:t.current),[r.search]),s=Hm(),o=I.useCallback((a,u)=>{const l=VU(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const uY=I.createContext(null);uY.displayName="@mantine/modals/ModalsContext";function sXe(){const e=I.useContext(uY);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function oXe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=sXe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return _.jsxs(_.Fragment,{children:[l&&_.jsx(we,{mb:"md",children:l}),_.jsxs(Es,{justify:"flex-end",...o,children:[_.jsx(ln,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),_.jsx(ln,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[aXe,jL]=QBe("mantine-modals");jL("openModal");jL("closeModal");jL("closeAllModals");const HU=jL("openConfirmModal");function Foe(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function uXe(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;Foe(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{Foe(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function lXe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function cXe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=I.useReducer(uXe,{modals:[],current:null}),o=I.useRef(i);o.current=i;const a=I.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=I.useCallback(({modalId:g,...y})=>{const v=g||Pw();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=I.useCallback(({modalId:g,...y})=>{const v=g||Pw();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=I.useCallback((g,{modalId:y,...v})=>{const b=y||Pw();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=I.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);aXe({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:_.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=lXe(g.props);return{modalProps:y,content:_.jsx(oXe,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:_.jsx(_.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return _.jsxs(uY.Provider,{value:d,children:[_.jsx(Wi,{zIndex:Gl("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fXe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=(e,t,n,r)=>{const i=I.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>I.createElement("svg",{ref:f,...fXe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>I.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dXe=xn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hXe=xn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var joe=xn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pXe=xn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mXe=xn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gXe=xn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yXe=xn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vXe=xn("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bXe=xn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _Xe=xn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var twe=xn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wXe=xn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Boe=xn("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var EXe=xn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xXe=xn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var SXe=xn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var TXe=xn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var AXe=xn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var CXe=xn("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IXe=xn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nwe=xn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kXe=xn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var RXe=xn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var NXe=xn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var PXe=xn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var DXe=xn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rwe=xn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var OXe=xn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $Xe=xn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var MXe=xn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var LXe=xn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var FXe=xn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var iwe=xn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jXe=xn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var swe=xn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var BXe=xn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var owe=xn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lY=xn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cY=xn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var UXe=xn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function awe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Fu="/study/";function Uoe(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function uwe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const zXe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,VXe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,HXe={};function zoe(e,t){return(HXe.jsx?VXe:zXe).test(e)}const qXe=/[ \t\n\f\r]/g;function WXe(e){return typeof e=="object"?e.type==="text"?Voe(e.value):!1:Voe(e)}function Voe(e){return e.replace(qXe,"")===""}let ek=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};ek.prototype.property={};ek.prototype.normal={};ek.prototype.space=null;function lwe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new ek(n,r,t)}function bC(e){return e.toLowerCase()}let Bc=class{constructor(t,n){this.property=t,this.attribute=n}};Bc.prototype.space=null;Bc.prototype.boolean=!1;Bc.prototype.booleanish=!1;Bc.prototype.overloadedBoolean=!1;Bc.prototype.number=!1;Bc.prototype.commaSeparated=!1;Bc.prototype.spaceSeparated=!1;Bc.prototype.commaOrSpaceSeparated=!1;Bc.prototype.mustUseProperty=!1;Bc.prototype.defined=!1;let GXe=0;const mn=Pb(),ms=Pb(),cwe=Pb(),st=Pb(),Jr=Pb(),Mw=Pb(),al=Pb();function Pb(){return 2**++GXe}const qU=Object.freeze(Object.defineProperty({__proto__:null,boolean:mn,booleanish:ms,commaOrSpaceSeparated:al,commaSeparated:Mw,number:st,overloadedBoolean:cwe,spaceSeparated:Jr},Symbol.toStringTag,{value:"Module"})),Ij=Object.keys(qU);class fY extends Bc{constructor(t,n,r,i){let s=-1;if(super(t,n),Hoe(this,"space",i),typeof r=="number")for(;++s<Ij.length;){const o=Ij[s];Hoe(this,Ij[s],(r&qU[o])===qU[o])}}}fY.prototype.defined=!0;function Hoe(e,t,n){n&&(e[t]=n)}const YXe={}.hasOwnProperty;function Kx(e){const t={},n={};let r;for(r in e.properties)if(YXe.call(e.properties,r)){const i=e.properties[r],s=new fY(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[bC(r)]=r,n[bC(s.attribute)]=r}return new ek(t,n,e.space)}const fwe=Kx({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),dwe=Kx({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function hwe(e,t){return t in e?e[t]:t}function pwe(e,t){return hwe(e,t.toLowerCase())}const mwe=Kx({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:pwe,properties:{xmlns:null,xmlnsXLink:null}}),gwe=Kx({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ms,ariaAutoComplete:null,ariaBusy:ms,ariaChecked:ms,ariaColCount:st,ariaColIndex:st,ariaColSpan:st,ariaControls:Jr,ariaCurrent:null,ariaDescribedBy:Jr,ariaDetails:null,ariaDisabled:ms,ariaDropEffect:Jr,ariaErrorMessage:null,ariaExpanded:ms,ariaFlowTo:Jr,ariaGrabbed:ms,ariaHasPopup:null,ariaHidden:ms,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Jr,ariaLevel:st,ariaLive:null,ariaModal:ms,ariaMultiLine:ms,ariaMultiSelectable:ms,ariaOrientation:null,ariaOwns:Jr,ariaPlaceholder:null,ariaPosInSet:st,ariaPressed:ms,ariaReadOnly:ms,ariaRelevant:null,ariaRequired:ms,ariaRoleDescription:Jr,ariaRowCount:st,ariaRowIndex:st,ariaRowSpan:st,ariaSelected:ms,ariaSetSize:st,ariaSort:null,ariaValueMax:st,ariaValueMin:st,ariaValueNow:st,ariaValueText:null,role:null}}),KXe=Kx({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:pwe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Mw,acceptCharset:Jr,accessKey:Jr,action:null,allow:null,allowFullScreen:mn,allowPaymentRequest:mn,allowUserMedia:mn,alt:null,as:null,async:mn,autoCapitalize:null,autoComplete:Jr,autoFocus:mn,autoPlay:mn,blocking:Jr,capture:null,charSet:null,checked:mn,cite:null,className:Jr,cols:st,colSpan:null,content:null,contentEditable:ms,controls:mn,controlsList:Jr,coords:st|Mw,crossOrigin:null,data:null,dateTime:null,decoding:null,default:mn,defer:mn,dir:null,dirName:null,disabled:mn,download:cwe,draggable:ms,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:mn,formTarget:null,headers:Jr,height:st,hidden:mn,high:st,href:null,hrefLang:null,htmlFor:Jr,httpEquiv:Jr,id:null,imageSizes:null,imageSrcSet:null,inert:mn,inputMode:null,integrity:null,is:null,isMap:mn,itemId:null,itemProp:Jr,itemRef:Jr,itemScope:mn,itemType:Jr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:mn,low:st,manifest:null,max:null,maxLength:st,media:null,method:null,min:null,minLength:st,multiple:mn,muted:mn,name:null,nonce:null,noModule:mn,noValidate:mn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:mn,optimum:st,pattern:null,ping:Jr,placeholder:null,playsInline:mn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:mn,referrerPolicy:null,rel:Jr,required:mn,reversed:mn,rows:st,rowSpan:st,sandbox:Jr,scope:null,scoped:mn,seamless:mn,selected:mn,shadowRootClonable:mn,shadowRootDelegatesFocus:mn,shadowRootMode:null,shape:null,size:st,sizes:null,slot:null,span:st,spellCheck:ms,src:null,srcDoc:null,srcLang:null,srcSet:null,start:st,step:null,style:null,tabIndex:st,target:null,title:null,translate:null,type:null,typeMustMatch:mn,useMap:null,value:ms,width:st,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Jr,axis:null,background:null,bgColor:null,border:st,borderColor:null,bottomMargin:st,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:mn,declare:mn,event:null,face:null,frame:null,frameBorder:null,hSpace:st,leftMargin:st,link:null,longDesc:null,lowSrc:null,marginHeight:st,marginWidth:st,noResize:mn,noHref:mn,noShade:mn,noWrap:mn,object:null,profile:null,prompt:null,rev:null,rightMargin:st,rules:null,scheme:null,scrolling:ms,standby:null,summary:null,text:null,topMargin:st,valueType:null,version:null,vAlign:null,vLink:null,vSpace:st,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:mn,disableRemotePlayback:mn,prefix:null,property:null,results:st,security:null,unselectable:null}}),XXe=Kx({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:hwe,properties:{about:al,accentHeight:st,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:st,amplitude:st,arabicForm:null,ascent:st,attributeName:null,attributeType:null,azimuth:st,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:st,by:null,calcMode:null,capHeight:st,className:Jr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:st,diffuseConstant:st,direction:null,display:null,dur:null,divisor:st,dominantBaseline:null,download:mn,dx:null,dy:null,edgeMode:null,editable:null,elevation:st,enableBackground:null,end:null,event:null,exponent:st,externalResourcesRequired:null,fill:null,fillOpacity:st,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Mw,g2:Mw,glyphName:Mw,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:st,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:st,horizOriginX:st,horizOriginY:st,id:null,ideographic:st,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:st,k:st,k1:st,k2:st,k3:st,k4:st,kernelMatrix:al,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:st,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:st,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:st,overlineThickness:st,paintOrder:null,panose1:null,path:null,pathLength:st,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Jr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:st,pointsAtY:st,pointsAtZ:st,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:al,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:al,rev:al,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:al,requiredFeatures:al,requiredFonts:al,requiredFormats:al,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:st,specularExponent:st,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:st,strikethroughThickness:st,string:null,stroke:null,strokeDashArray:al,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:st,strokeOpacity:st,strokeWidth:null,style:null,surfaceScale:st,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:al,tabIndex:st,tableValues:null,target:null,targetX:st,targetY:st,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:al,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:st,underlineThickness:st,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:st,values:null,vAlphabetic:st,vMathematical:st,vectorEffect:null,vHanging:st,vIdeographic:st,version:null,vertAdvY:st,vertOriginX:st,vertOriginY:st,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:st,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),QXe=/^data[-\w.:]+$/i,qoe=/-[a-z]/g,JXe=/[A-Z]/g;function BL(e,t){const n=bC(t);let r=t,i=Bc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&QXe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(qoe,eQe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!qoe.test(s)){let o=s.replace(JXe,ZXe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=fY}return new i(r,t)}function ZXe(e){return"-"+e.toLowerCase()}function eQe(e){return e.charAt(1).toUpperCase()}const tQe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},tk=lwe([dwe,fwe,mwe,gwe,KXe],"html"),Cy=lwe([dwe,fwe,mwe,gwe,XXe],"svg");function Woe(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function ywe(e){return e.join(" ").trim()}var vwe={},Goe=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,nQe=/\n/g,rQe=/^\s*/,iQe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,sQe=/^:\s*/,oQe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,aQe=/^[;\s]*/,uQe=/^\s+|\s+$/g,lQe=`
`,Yoe="/",Koe="*",Ov="",cQe="comment",fQe="declaration",dQe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(nQe);m&&(n+=m.length);var g=p.lastIndexOf(lQe);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(rQe)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(Yoe!=e.charAt(0)||Koe!=e.charAt(1))){for(var m=2;Ov!=e.charAt(m)&&(Koe!=e.charAt(m)||Yoe!=e.charAt(m+1));)++m;if(m+=2,Ov===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:cQe,comment:g})}}function d(){var p=s(),m=u(iQe);if(m){if(f(),!u(sQe))return a("property missing ':'");var g=u(oQe),y=p({type:fQe,property:Xoe(m[0].replace(Goe,Ov)),value:g?Xoe(g[0].replace(Goe,Ov)):Ov});return u(aQe),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function Xoe(e){return e?e.replace(uQe,Ov):Ov}var hQe=Zs&&Zs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vwe,"__esModule",{value:!0});var pQe=hQe(dQe);function mQe(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,pQe.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var Qoe=vwe.default=mQe;const gQe=Qoe.default||Qoe,UL=bwe("end"),Lh=bwe("start");function bwe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function yQe(e){const t=Lh(e),n=UL(e);if(t&&n)return{start:t,end:n}}function iA(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Joe(e.position):"start"in e||"end"in e?Joe(e):"line"in e||"column"in e?WU(e):""}function WU(e){return Zoe(e&&e.line)+":"+Zoe(e&&e.column)}function Joe(e){return WU(e&&e.start)+"-"+WU(e&&e.end)}function Zoe(e){return e&&typeof e=="number"?e:1}class Ea extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=iA(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ea.prototype.file="";Ea.prototype.name="";Ea.prototype.reason="";Ea.prototype.message="";Ea.prototype.stack="";Ea.prototype.column=void 0;Ea.prototype.line=void 0;Ea.prototype.ancestors=void 0;Ea.prototype.cause=void 0;Ea.prototype.fatal=void 0;Ea.prototype.place=void 0;Ea.prototype.ruleId=void 0;Ea.prototype.source=void 0;const dY={}.hasOwnProperty,vQe=new Map,bQe=/[A-Z]/g,_Qe=/-([a-z])/g,wQe=new Set(["table","tbody","thead","tfoot","tr"]),EQe=new Set(["td","th"]),_we="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function xQe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=NQe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=RQe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Cy:tk,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=wwe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function wwe(e,t,n){if(t.type==="element")return SQe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return TQe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return CQe(e,t,n);if(t.type==="mdxjsEsm")return AQe(e,t);if(t.type==="root")return IQe(e,t,n);if(t.type==="text")return kQe(e,t)}function SQe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Cy,e.schema=i),e.ancestors.push(t);const s=xwe(e,t.tagName,!1),o=PQe(e,t);let a=pY(e,t);return wQe.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!WXe(u):!0})),Ewe(e,o,s,t),hY(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function TQe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}_C(e,t.position)}function AQe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);_C(e,t.position)}function CQe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Cy,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:xwe(e,t.name,!0),o=DQe(e,t),a=pY(e,t);return Ewe(e,o,s,t),hY(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function IQe(e,t,n){const r={};return hY(r,pY(e,t)),e.create(t,e.Fragment,r,n)}function kQe(e,t){return t.value}function Ewe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function hY(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function RQe(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function NQe(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Lh(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function PQe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&dY.call(t.properties,i)){const s=OQe(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&EQe.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function DQe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else _C(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else _C(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function pY(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:vQe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=wwe(e,s,o);a!==void 0&&n.push(a)}return n}function OQe(e,t,n){const r=BL(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?uwe(n):ywe(n)),r.property==="style"){let i=typeof n=="object"?n:$Qe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=MQe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?tQe[r.property]||r.property:r.attribute,n]}}function $Qe(e,t){const n={};try{gQe(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Ea("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=_we+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(_Qe,FQe)),n[o]=s}}function xwe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=zoe(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=zoe(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return dY.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);_C(e)}function _C(e,t){const n=new Ea("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=_we+"#cannot-handle-mdx-estrees-without-createevaluater",n}function MQe(e){const t={};let n;for(n in e)dY.call(e,n)&&(t[LQe(n)]=e[n]);return t}function LQe(e){let t=e.replace(bQe,jQe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function FQe(e,t){return t.toUpperCase()}function jQe(e){return"-"+e.toLowerCase()}const kj={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},BQe={};function UQe(e,t){const n=BQe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Swe(e,r,i)}function Swe(e,t,n){if(zQe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return eae(e.children,t,n)}return Array.isArray(e)?eae(e,t,n):""}function eae(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Swe(e[i],t,n);return r.join("")}function zQe(e){return!!(e&&typeof e=="object")}const tae=document.createElement("i");function mY(e){const t="&"+e+";";tae.innerHTML=t;const n=tae.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function hm(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function cc(e,t){return e.length>0?(hm(e,e.length,0,t),e):t}const nae={}.hasOwnProperty;function VQe(e){const t={};let n=-1;for(;++n<e.length;)HQe(t,e[n]);return t}function HQe(e,t){let n;for(n in t){const i=(nae.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){nae.call(i,o)||(i[o]=[]);const a=s[o];qQe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function qQe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);hm(e,0,0,r)}function Twe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Lw(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Pd=Iy(/[A-Za-z]/),_l=Iy(/[\dA-Za-z]/),WQe=Iy(/[#-'*+\--9=?A-Z^-~]/);function GU(e){return e!==null&&(e<32||e===127)}const YU=Iy(/\d/),GQe=Iy(/[\dA-Fa-f]/),YQe=Iy(/[!-/:-@[-`{-~]/);function Zt(e){return e!==null&&e<-2}function ju(e){return e!==null&&(e<0||e===32)}function yr(e){return e===-2||e===-1||e===32}const KQe=Iy(new RegExp("\\p{P}|\\p{S}","u")),XQe=Iy(/\s/);function Iy(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Xx(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&_l(e.charCodeAt(n+1))&&_l(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ei(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return yr(u)?(e.enter(n),a(u)):t(u)}function a(u){return yr(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const QQe={tokenize:JQe};function JQe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ei(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Zt(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const ZQe={tokenize:eJe},rae={tokenize:tJe};function eJe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let E=w,T;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){T=t.events[E][1].end;break}y(r);let S=w;for(;S<t.events.length;)t.events[S][1].end=Object.assign({},T),S++;return hm(t.events,E+1,0,t.events.slice(w)),t.events.length=S,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(rae,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(rae,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return Zt(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,w){const E=t.sliceStream(b);if(w&&E.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(E),t.parser.lazy[b.start.line]){let T=i.events.length;for(;T--;)if(i.events[T][1].start.offset<o&&(!i.events[T][1].end||i.events[T][1].end.offset>o))return;const S=t.events.length;let A=S,C,k;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(C){k=t.events[A][1].end;break}C=!0}for(y(r),T=S;T<t.events.length;)t.events[T][1].end=Object.assign({},k),T++;hm(t.events,A+1,0,t.events.slice(S)),t.events.length=T}}function y(b){let w=n.length;for(;w-- >b;){const E=n[w];t.containerState=E[1],E[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function tJe(e,t,n){return ei(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function iae(e){if(e===null||ju(e)||XQe(e))return 1;if(KQe(e))return 2}function gY(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const KU={name:"attention",tokenize:rJe,resolveAll:nJe};function nJe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);sae(f,-u),sae(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=cc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=cc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=cc(l,gY(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=cc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=cc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,hm(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function rJe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=iae(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=iae(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function sae(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const iJe={name:"autolink",tokenize:sJe};function sJe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Pd(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||_l(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||_l(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||GU(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):WQe(h)?(e.consume(h),l):n(h)}function c(h){return _l(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||_l(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const zL={tokenize:oJe,partial:!0};function oJe(e,t,n){return r;function r(s){return yr(s)?ei(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Zt(s)?t(s):n(s)}}const Awe={name:"blockQuote",tokenize:aJe,continuation:{tokenize:uJe},exit:lJe};function aJe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return yr(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function uJe(e,t,n){const r=this;return i;function i(o){return yr(o)?ei(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(Awe,t,n)(o)}}function lJe(e){e.exit("blockQuote")}const Cwe={name:"characterEscape",tokenize:cJe};function cJe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return YQe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Iwe={name:"characterReference",tokenize:fJe};function fJe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=_l,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=GQe,c):(e.enter("characterReferenceValue"),s=7,o=YU,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===_l&&!mY(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const oae={tokenize:hJe,partial:!0},aae={name:"codeFenced",tokenize:dJe,concrete:!0};function dJe(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return u;function u(T){return l(T)}function l(T){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,a=T,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(T)}function c(T){return T===a?(o++,e.consume(T),c):o<3?n(T):(e.exit("codeFencedFenceSequence"),yr(T)?ei(e,f,"whitespace")(T):f(T))}function f(T){return T===null||Zt(T)?(e.exit("codeFencedFence"),r.interrupt?t(T):e.check(oae,m,w)(T)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(T))}function d(T){return T===null||Zt(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(T)):yr(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ei(e,h,"whitespace")(T)):T===96&&T===a?n(T):(e.consume(T),d)}function h(T){return T===null||Zt(T)?f(T):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(T))}function p(T){return T===null||Zt(T)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(T)):T===96&&T===a?n(T):(e.consume(T),p)}function m(T){return e.attempt(i,w,g)(T)}function g(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),y}function y(T){return s>0&&yr(T)?ei(e,v,"linePrefix",s+1)(T):v(T)}function v(T){return T===null||Zt(T)?e.check(oae,m,w)(T):(e.enter("codeFlowValue"),b(T))}function b(T){return T===null||Zt(T)?(e.exit("codeFlowValue"),v(T)):(e.consume(T),b)}function w(T){return e.exit("codeFenced"),t(T)}function E(T,S,A){let C=0;return k;function k(F){return T.enter("lineEnding"),T.consume(F),T.exit("lineEnding"),N}function N(F){return T.enter("codeFencedFence"),yr(F)?ei(T,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):O(F)}function O(F){return F===a?(T.enter("codeFencedFenceSequence"),P(F)):A(F)}function P(F){return F===a?(C++,T.consume(F),P):C>=o?(T.exit("codeFencedFenceSequence"),yr(F)?ei(T,$,"whitespace")(F):$(F)):A(F)}function $(F){return F===null||Zt(F)?(T.exit("codeFencedFence"),S(F)):A(F)}}}function hJe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Rj={name:"codeIndented",tokenize:mJe},pJe={tokenize:gJe,partial:!0};function mJe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ei(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Zt(l)?e.attempt(pJe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Zt(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function gJe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Zt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ei(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Zt(o)?i(o):n(o)}}const yJe={name:"codeText",tokenize:_Je,resolve:vJe,previous:bJe};function vJe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function bJe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function _Je(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):Zt(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Zt(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class wJe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&fT(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),fT(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),fT(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);fT(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);fT(this.left,n.reverse())}}}function fT(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function kwe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new wJe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,EJe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return hm(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function EJe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const xJe={tokenize:AJe,resolve:TJe},SJe={tokenize:CJe,partial:!0};function TJe(e){return kwe(e),e}function AJe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Zt(a)?e.check(SJe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function CJe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ei(e,s,"linePrefix")}function s(o){if(o===null||Zt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function Rwe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||GU(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||Zt(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||ju(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||GU(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function Nwe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Zt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Zt(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!yr(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function Pwe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Zt(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ei(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Zt(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function sA(e,t){let n;return r;function r(i){return Zt(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):yr(i)?ei(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const IJe={name:"definition",tokenize:RJe},kJe={tokenize:NJe,partial:!0};function RJe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return Nwe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=Lw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return ju(h)?sA(e,l)(h):l(h)}function l(h){return Rwe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(kJe,f,f)(h)}function f(h){return yr(h)?ei(e,d,"whitespace")(h):d(h)}function d(h){return h===null||Zt(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function NJe(e,t,n){return r;function r(a){return ju(a)?sA(e,i)(a):n(a)}function i(a){return Pwe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return yr(a)?ei(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Zt(a)?t(a):n(a)}}const PJe={name:"hardBreakEscape",tokenize:DJe};function DJe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Zt(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const OJe={name:"headingAtx",tokenize:MJe,resolve:$Je};function $Je(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},hm(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function MJe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||ju(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Zt(c)?(e.exit("atxHeading"),t(c)):yr(c)?ei(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||ju(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const LJe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],uae=["pre","script","style","textarea"],FJe={name:"htmlFlow",tokenize:zJe,resolveTo:UJe,concrete:!0},jJe={tokenize:HJe,partial:!0},BJe={tokenize:VJe,partial:!0};function UJe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function zJe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(j){return c(j)}function c(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),f}function f(j){return j===33?(e.consume(j),d):j===47?(e.consume(j),s=!0,m):j===63?(e.consume(j),i=3,r.interrupt?t:D):Pd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function d(j){return j===45?(e.consume(j),i=2,h):j===91?(e.consume(j),i=5,a=0,p):Pd(j)?(e.consume(j),i=4,r.interrupt?t:D):n(j)}function h(j){return j===45?(e.consume(j),r.interrupt?t:D):n(j)}function p(j){const q="CDATA[";return j===q.charCodeAt(a++)?(e.consume(j),a===q.length?r.interrupt?t:O:p):n(j)}function m(j){return Pd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function g(j){if(j===null||j===47||j===62||ju(j)){const q=j===47,G=o.toLowerCase();return!q&&!s&&uae.includes(G)?(i=1,r.interrupt?t(j):O(j)):LJe.includes(o.toLowerCase())?(i=6,q?(e.consume(j),y):r.interrupt?t(j):O(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?v(j):b(j))}return j===45||_l(j)?(e.consume(j),o+=String.fromCharCode(j),g):n(j)}function y(j){return j===62?(e.consume(j),r.interrupt?t:O):n(j)}function v(j){return yr(j)?(e.consume(j),v):k(j)}function b(j){return j===47?(e.consume(j),k):j===58||j===95||Pd(j)?(e.consume(j),w):yr(j)?(e.consume(j),b):k(j)}function w(j){return j===45||j===46||j===58||j===95||_l(j)?(e.consume(j),w):E(j)}function E(j){return j===61?(e.consume(j),T):yr(j)?(e.consume(j),E):b(j)}function T(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),u=j,S):yr(j)?(e.consume(j),T):A(j)}function S(j){return j===u?(e.consume(j),u=null,C):j===null||Zt(j)?n(j):(e.consume(j),S)}function A(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||ju(j)?E(j):(e.consume(j),A)}function C(j){return j===47||j===62||yr(j)?b(j):n(j)}function k(j){return j===62?(e.consume(j),N):n(j)}function N(j){return j===null||Zt(j)?O(j):yr(j)?(e.consume(j),N):n(j)}function O(j){return j===45&&i===2?(e.consume(j),M):j===60&&i===1?(e.consume(j),B):j===62&&i===4?(e.consume(j),z):j===63&&i===3?(e.consume(j),D):j===93&&i===5?(e.consume(j),H):Zt(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(jJe,W,P)(j)):j===null||Zt(j)?(e.exit("htmlFlowData"),P(j)):(e.consume(j),O)}function P(j){return e.check(BJe,$,W)(j)}function $(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),F}function F(j){return j===null||Zt(j)?P(j):(e.enter("htmlFlowData"),O(j))}function M(j){return j===45?(e.consume(j),D):O(j)}function B(j){return j===47?(e.consume(j),o="",U):O(j)}function U(j){if(j===62){const q=o.toLowerCase();return uae.includes(q)?(e.consume(j),z):O(j)}return Pd(j)&&o.length<8?(e.consume(j),o+=String.fromCharCode(j),U):O(j)}function H(j){return j===93?(e.consume(j),D):O(j)}function D(j){return j===62?(e.consume(j),z):j===45&&i===2?(e.consume(j),D):O(j)}function z(j){return j===null||Zt(j)?(e.exit("htmlFlowData"),W(j)):(e.consume(j),z)}function W(j){return e.exit("htmlFlow"),t(j)}}function VJe(e,t,n){const r=this;return i;function i(o){return Zt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function HJe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(zL,t,n)}}const qJe={name:"htmlText",tokenize:WJe};function WJe(e,t,n){const r=this;let i,s,o;return a;function a(D){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(D),u}function u(D){return D===33?(e.consume(D),l):D===47?(e.consume(D),E):D===63?(e.consume(D),b):Pd(D)?(e.consume(D),A):n(D)}function l(D){return D===45?(e.consume(D),c):D===91?(e.consume(D),s=0,p):Pd(D)?(e.consume(D),v):n(D)}function c(D){return D===45?(e.consume(D),h):n(D)}function f(D){return D===null?n(D):D===45?(e.consume(D),d):Zt(D)?(o=f,B(D)):(e.consume(D),f)}function d(D){return D===45?(e.consume(D),h):f(D)}function h(D){return D===62?M(D):D===45?d(D):f(D)}function p(D){const z="CDATA[";return D===z.charCodeAt(s++)?(e.consume(D),s===z.length?m:p):n(D)}function m(D){return D===null?n(D):D===93?(e.consume(D),g):Zt(D)?(o=m,B(D)):(e.consume(D),m)}function g(D){return D===93?(e.consume(D),y):m(D)}function y(D){return D===62?M(D):D===93?(e.consume(D),y):m(D)}function v(D){return D===null||D===62?M(D):Zt(D)?(o=v,B(D)):(e.consume(D),v)}function b(D){return D===null?n(D):D===63?(e.consume(D),w):Zt(D)?(o=b,B(D)):(e.consume(D),b)}function w(D){return D===62?M(D):b(D)}function E(D){return Pd(D)?(e.consume(D),T):n(D)}function T(D){return D===45||_l(D)?(e.consume(D),T):S(D)}function S(D){return Zt(D)?(o=S,B(D)):yr(D)?(e.consume(D),S):M(D)}function A(D){return D===45||_l(D)?(e.consume(D),A):D===47||D===62||ju(D)?C(D):n(D)}function C(D){return D===47?(e.consume(D),M):D===58||D===95||Pd(D)?(e.consume(D),k):Zt(D)?(o=C,B(D)):yr(D)?(e.consume(D),C):M(D)}function k(D){return D===45||D===46||D===58||D===95||_l(D)?(e.consume(D),k):N(D)}function N(D){return D===61?(e.consume(D),O):Zt(D)?(o=N,B(D)):yr(D)?(e.consume(D),N):C(D)}function O(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(e.consume(D),i=D,P):Zt(D)?(o=O,B(D)):yr(D)?(e.consume(D),O):(e.consume(D),$)}function P(D){return D===i?(e.consume(D),i=void 0,F):D===null?n(D):Zt(D)?(o=P,B(D)):(e.consume(D),P)}function $(D){return D===null||D===34||D===39||D===60||D===61||D===96?n(D):D===47||D===62||ju(D)?C(D):(e.consume(D),$)}function F(D){return D===47||D===62||ju(D)?C(D):n(D)}function M(D){return D===62?(e.consume(D),e.exit("htmlTextData"),e.exit("htmlText"),t):n(D)}function B(D){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),U}function U(D){return yr(D)?ei(e,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):H(D)}function H(D){return e.enter("htmlTextData"),o(D)}}const yY={name:"labelEnd",tokenize:JJe,resolveTo:QJe,resolveAll:XJe},GJe={tokenize:ZJe},YJe={tokenize:eZe},KJe={tokenize:tZe};function XJe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function QJe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=cc(a,e.slice(s+1,s+r+3)),a=cc(a,[["enter",c,t]]),a=cc(a,gY(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=cc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=cc(a,e.slice(o+1)),a=cc(a,[["exit",u,t]]),hm(e,s,e.length,a),e}function JJe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(Lw(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(GJe,c,o?c:f)(d):d===91?e.attempt(YJe,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(KJe,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function ZJe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return ju(f)?sA(e,s)(f):s(f)}function s(f){return f===41?c(f):Rwe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return ju(f)?sA(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?Pwe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return ju(f)?sA(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function eZe(e,t,n){const r=this;return i;function i(a){return Nwe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Lw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function tZe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const nZe={name:"labelStartImage",tokenize:rZe,resolveAll:yY.resolveAll};function rZe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const iZe={name:"labelStartLink",tokenize:sZe,resolveAll:yY.resolveAll};function sZe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Nj={name:"lineEnding",tokenize:oZe};function oZe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ei(e,t,"linePrefix")}}const KP={name:"thematicBreak",tokenize:aZe};function aZe(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||Zt(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),yr(l)?ei(e,a,"whitespace")(l):a(l))}}const du={name:"list",tokenize:cZe,continuation:{tokenize:fZe},exit:hZe},uZe={tokenize:pZe,partial:!0},lZe={tokenize:dZe,partial:!0};function cZe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:YU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(KP,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return YU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(zL,r.interrupt?n:c,e.attempt(uZe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return yr(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function fZe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(zL,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ei(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!yr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(lZe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ei(e,e.attempt(du,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function dZe(e,t,n){const r=this;return ei(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function hZe(e){e.exit(this.containerState.type)}function pZe(e,t,n){const r=this;return ei(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!yr(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const lae={name:"setextUnderline",tokenize:gZe,resolveTo:mZe};function mZe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function gZe(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),yr(l)?ei(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||Zt(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const yZe={tokenize:vZe};function vZe(e){const t=this,n=e.attempt(zL,r,e.attempt(this.parser.constructs.flowInitial,i,ei(e,e.attempt(this.parser.constructs.flow,i,e.attempt(xJe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const bZe={resolveAll:Owe()},_Ze=Dwe("string"),wZe=Dwe("text");function Dwe(e){return{tokenize:t,resolveAll:Owe(e==="text"?EZe:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function Owe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function EZe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function xZe(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:w,attempt:S(E),check:S(T),interrupt:S(T,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(N){return o=cc(o,N),g(),o[o.length-1]!==null?[]:(A(t,0),l.events=gY(s,l.events,l),l.events)}function d(N,O){return TZe(h(N),O)}function h(N){return SZe(o,N)}function p(){const{line:N,column:O,offset:P,_index:$,_bufferIndex:F}=r;return{line:N,column:O,offset:P,_index:$,_bufferIndex:F}}function m(N){i[N.line]=N.column,k()}function g(){let N;for(;r._index<o.length;){const O=o[r._index];if(typeof O=="string")for(N=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===N&&r._bufferIndex<O.length;)y(O.charCodeAt(r._bufferIndex));else y(O)}}function y(N){c=c(N)}function v(N){Zt(N)?(r.line++,r.column=1,r.offset+=N===-3?2:1,k()):N!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=N}function b(N,O){const P=O||{};return P.type=N,P.start=p(),l.events.push(["enter",P,l]),a.push(P),P}function w(N){const O=a.pop();return O.end=p(),l.events.push(["exit",O,l]),O}function E(N,O){A(N,O.from)}function T(N,O){O.restore()}function S(N,O){return P;function P($,F,M){let B,U,H,D;return Array.isArray($)?W($):"tokenize"in $?W([$]):z($);function z(re){return de;function de(pe){const ge=pe!==null&&re[pe],Ee=pe!==null&&re.null,Z=[...Array.isArray(ge)?ge:ge?[ge]:[],...Array.isArray(Ee)?Ee:Ee?[Ee]:[]];return W(Z)(pe)}}function W(re){return B=re,U=0,re.length===0?M:j(re[U])}function j(re){return de;function de(pe){return D=C(),H=re,re.partial||(l.currentConstruct=re),re.name&&l.parser.constructs.disable.null.includes(re.name)?G():re.tokenize.call(O?Object.assign(Object.create(l),O):l,u,q,G)(pe)}}function q(re){return N(H,D),F}function G(re){return D.restore(),++U<B.length?j(B[U]):M}}}function A(N,O){N.resolveAll&&!s.includes(N)&&s.push(N),N.resolve&&hm(l.events,O,l.events.length-O,N.resolve(l.events.slice(O),l)),N.resolveTo&&(l.events=N.resolveTo(l.events,l))}function C(){const N=p(),O=l.previous,P=l.currentConstruct,$=l.events.length,F=Array.from(a);return{restore:M,from:$};function M(){r=N,l.previous=O,l.currentConstruct=P,l.events.length=$,a=F,k()}}function k(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function SZe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function TZe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const AZe={42:du,43:du,45:du,48:du,49:du,50:du,51:du,52:du,53:du,54:du,55:du,56:du,57:du,62:Awe},CZe={91:IJe},IZe={[-2]:Rj,[-1]:Rj,32:Rj},kZe={35:OJe,42:KP,45:[lae,KP],60:FJe,61:lae,95:KP,96:aae,126:aae},RZe={38:Iwe,92:Cwe},NZe={[-5]:Nj,[-4]:Nj,[-3]:Nj,33:nZe,38:Iwe,42:KU,60:[iJe,qJe],91:iZe,92:[PJe,Cwe],93:yY,95:KU,96:yJe},PZe={null:[KU,bZe]},DZe={null:[42,95]},OZe={null:[]},$Ze=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:DZe,contentInitial:CZe,disable:OZe,document:AZe,flow:kZe,flowInitial:IZe,insideSpan:PZe,string:RZe,text:NZe},Symbol.toStringTag,{value:"Module"}));function MZe(e){const n=VQe([$Ze,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(QQe),document:i(ZQe),flow:i(yZe),string:i(_Ze),text:i(wZe)};return r;function i(s){return o;function o(a){return xZe(r,s,a)}}}function LZe(e){for(;!kwe(e););return e}const cae=/[\0\t\n\r]/g;function FZe(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(cae.lastIndex=f,l=cae.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const jZe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function BZe(e){return e.replace(jZe,UZe)}function UZe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Twe(n.slice(s?2:1),s?16:10)}return mY(n)||e}const $we={}.hasOwnProperty;function zZe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),VZe(n)(LZe(MZe(n).document().write(FZe()(e,t,!0))))}function VZe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(He),autolinkProtocol:C,autolinkEmail:C,atxHeading:s(Me),blockQuote:s(Ee),characterEscape:C,characterReference:C,codeFenced:s(Z),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Z,o),codeText:s(Q,o),codeTextData:C,data:C,codeFlowValue:C,definition:s(fe),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(be),hardBreakEscape:s(Be),hardBreakTrailing:s(Be),htmlFlow:s(ve,o),htmlFlowData:C,htmlText:s(ve,o),htmlTextData:C,image:s(Re),label:o,link:s(He),listItem:s(bt),listItemValue:d,listOrdered:s(Ze,f),listUnordered:s(Ze),paragraph:s(Ge),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Me),strong:s(ye),thematicBreak:s(vt)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:ge,autolinkProtocol:pe,blockQuote:u(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:re,characterReference:de,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:k,codeIndented:u(y),codeText:u(F),codeTextData:k,data:k,definition:u(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(O),hardBreakTrailing:u(O),htmlFlow:u(P),htmlFlowData:k,htmlText:u($),htmlTextData:k,image:u(B),label:H,labelText:U,lineEnding:N,link:u(M),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:q,resourceDestinationString:D,resourceTitleString:z,resource:W,setextHeading:u(A),setextHeadingLineSequence:S,setextHeadingText:T,strong:u(),thematicBreak:u()}};Mwe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(_e){let Ne={type:"root",children:[]};const Ye={stack:[Ne],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},ct=[];let wt=-1;for(;++wt<_e.length;)if(_e[wt][1].type==="listOrdered"||_e[wt][1].type==="listUnordered")if(_e[wt][0]==="enter")ct.push(wt);else{const $n=ct.pop();wt=i(_e,$n,wt)}for(wt=-1;++wt<_e.length;){const $n=t[_e[wt][0]];$we.call($n,_e[wt][1].type)&&$n[_e[wt][1].type].call(Object.assign({sliceSerialize:_e[wt][2].sliceSerialize},Ye),_e[wt][1])}if(Ye.tokenStack.length>0){const $n=Ye.tokenStack[Ye.tokenStack.length-1];($n[1]||fae).call(Ye,void 0,$n[0])}for(Ne.position={start:cg(_e.length>0?_e[0][1].start:{line:1,column:1,offset:0}),end:cg(_e.length>0?_e[_e.length-2][1].end:{line:1,column:1,offset:0})},wt=-1;++wt<t.transforms.length;)Ne=t.transforms[wt](Ne)||Ne;return Ne}function i(_e,Ne,Ye){let ct=Ne-1,wt=-1,$n=!1,Sr,Mn,ur,pn;for(;++ct<=Ye;){const Tn=_e[ct];switch(Tn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Tn[0]==="enter"?wt++:wt--,pn=void 0;break}case"lineEndingBlank":{Tn[0]==="enter"&&(Sr&&!pn&&!wt&&!ur&&(ur=ct),pn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:pn=void 0}if(!wt&&Tn[0]==="enter"&&Tn[1].type==="listItemPrefix"||wt===-1&&Tn[0]==="exit"&&(Tn[1].type==="listUnordered"||Tn[1].type==="listOrdered")){if(Sr){let er=ct;for(Mn=void 0;er--;){const tr=_e[er];if(tr[1].type==="lineEnding"||tr[1].type==="lineEndingBlank"){if(tr[0]==="exit")continue;Mn&&(_e[Mn][1].type="lineEndingBlank",$n=!0),tr[1].type="lineEnding",Mn=er}else if(!(tr[1].type==="linePrefix"||tr[1].type==="blockQuotePrefix"||tr[1].type==="blockQuotePrefixWhitespace"||tr[1].type==="blockQuoteMarker"||tr[1].type==="listItemIndent"))break}ur&&(!Mn||ur<Mn)&&(Sr._spread=!0),Sr.end=Object.assign({},Mn?_e[Mn][1].start:Tn[1].end),_e.splice(Mn||ct,0,["exit",Sr,Tn[2]]),ct++,Ye++}if(Tn[1].type==="listItemPrefix"){const er={type:"listItem",_spread:!1,start:Object.assign({},Tn[1].start),end:void 0};Sr=er,_e.splice(ct,0,["enter",er,Tn[2]]),ct++,Ye++,ur=void 0,pn=!0}}}return _e[Ne][1]._spread=$n,Ye}function s(_e,Ne){return Ye;function Ye(ct){a.call(this,_e(ct),ct),Ne&&Ne.call(this,ct)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(_e,Ne,Ye){this.stack[this.stack.length-1].children.push(_e),this.stack.push(_e),this.tokenStack.push([Ne,Ye]),_e.position={start:cg(Ne.start),end:void 0}}function u(_e){return Ne;function Ne(Ye){_e&&_e.call(this,Ye),l.call(this,Ye)}}function l(_e,Ne){const Ye=this.stack.pop(),ct=this.tokenStack.pop();if(ct)ct[0].type!==_e.type&&(Ne?Ne.call(this,_e,ct[0]):(ct[1]||fae).call(this,_e,ct[0]));else throw new Error("Cannot close `"+_e.type+"` ("+iA({start:_e.start,end:_e.end})+"): its not open");Ye.position.end=cg(_e.end)}function c(){return UQe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(_e){if(this.data.expectingFirstListItemValue){const Ne=this.stack[this.stack.length-2];Ne.start=Number.parseInt(this.sliceSerialize(_e),10),this.data.expectingFirstListItemValue=void 0}}function h(){const _e=this.resume(),Ne=this.stack[this.stack.length-1];Ne.lang=_e}function p(){const _e=this.resume(),Ne=this.stack[this.stack.length-1];Ne.meta=_e}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const _e=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=_e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const _e=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=_e.replace(/(\r?\n|\r)$/g,"")}function v(_e){const Ne=this.resume(),Ye=this.stack[this.stack.length-1];Ye.label=Ne,Ye.identifier=Lw(this.sliceSerialize(_e)).toLowerCase()}function b(){const _e=this.resume(),Ne=this.stack[this.stack.length-1];Ne.title=_e}function w(){const _e=this.resume(),Ne=this.stack[this.stack.length-1];Ne.url=_e}function E(_e){const Ne=this.stack[this.stack.length-1];if(!Ne.depth){const Ye=this.sliceSerialize(_e).length;Ne.depth=Ye}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function S(_e){const Ne=this.stack[this.stack.length-1];Ne.depth=this.sliceSerialize(_e).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function C(_e){const Ye=this.stack[this.stack.length-1].children;let ct=Ye[Ye.length-1];(!ct||ct.type!=="text")&&(ct=pt(),ct.position={start:cg(_e.start),end:void 0},Ye.push(ct)),this.stack.push(ct)}function k(_e){const Ne=this.stack.pop();Ne.value+=this.sliceSerialize(_e),Ne.position.end=cg(_e.end)}function N(_e){const Ne=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ye=Ne.children[Ne.children.length-1];Ye.position.end=cg(_e.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ne.type)&&(C.call(this,_e),k.call(this,_e))}function O(){this.data.atHardBreak=!0}function P(){const _e=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=_e}function $(){const _e=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=_e}function F(){const _e=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=_e}function M(){const _e=this.stack[this.stack.length-1];if(this.data.inReference){const Ne=this.data.referenceType||"shortcut";_e.type+="Reference",_e.referenceType=Ne,delete _e.url,delete _e.title}else delete _e.identifier,delete _e.label;this.data.referenceType=void 0}function B(){const _e=this.stack[this.stack.length-1];if(this.data.inReference){const Ne=this.data.referenceType||"shortcut";_e.type+="Reference",_e.referenceType=Ne,delete _e.url,delete _e.title}else delete _e.identifier,delete _e.label;this.data.referenceType=void 0}function U(_e){const Ne=this.sliceSerialize(_e),Ye=this.stack[this.stack.length-2];Ye.label=BZe(Ne),Ye.identifier=Lw(Ne).toLowerCase()}function H(){const _e=this.stack[this.stack.length-1],Ne=this.resume(),Ye=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ye.type==="link"){const ct=_e.children;Ye.children=ct}else Ye.alt=Ne}function D(){const _e=this.resume(),Ne=this.stack[this.stack.length-1];Ne.url=_e}function z(){const _e=this.resume(),Ne=this.stack[this.stack.length-1];Ne.title=_e}function W(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function q(_e){const Ne=this.resume(),Ye=this.stack[this.stack.length-1];Ye.label=Ne,Ye.identifier=Lw(this.sliceSerialize(_e)).toLowerCase(),this.data.referenceType="full"}function G(_e){this.data.characterReferenceType=_e.type}function re(_e){const Ne=this.sliceSerialize(_e),Ye=this.data.characterReferenceType;let ct;Ye?(ct=Twe(Ne,Ye==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ct=mY(Ne);const wt=this.stack[this.stack.length-1];wt.value+=ct}function de(_e){const Ne=this.stack.pop();Ne.position.end=cg(_e.end)}function pe(_e){k.call(this,_e);const Ne=this.stack[this.stack.length-1];Ne.url=this.sliceSerialize(_e)}function ge(_e){k.call(this,_e);const Ne=this.stack[this.stack.length-1];Ne.url="mailto:"+this.sliceSerialize(_e)}function Ee(){return{type:"blockquote",children:[]}}function Z(){return{type:"code",lang:null,meta:null,value:""}}function Q(){return{type:"inlineCode",value:""}}function fe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function be(){return{type:"emphasis",children:[]}}function Me(){return{type:"heading",depth:0,children:[]}}function Be(){return{type:"break"}}function ve(){return{type:"html",value:""}}function Re(){return{type:"image",title:null,url:"",alt:null}}function He(){return{type:"link",title:null,url:"",children:[]}}function Ze(_e){return{type:"list",ordered:_e.type==="listOrdered",start:null,spread:_e._spread,children:[]}}function bt(_e){return{type:"listItem",spread:_e._spread,checked:null,children:[]}}function Ge(){return{type:"paragraph",children:[]}}function ye(){return{type:"strong",children:[]}}function pt(){return{type:"text",value:""}}function vt(){return{type:"thematicBreak"}}}function cg(e){return{line:e.line,column:e.column,offset:e.offset}}function Mwe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Mwe(e,r):HZe(e,r)}}function HZe(e,t){let n;for(n in t)if($we.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function fae(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+iA({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+iA({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+iA({start:t.start,end:t.end})+") is still open")}function qZe(e){const t=this;t.parser=n;function n(r){return zZe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function WZe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function GZe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function YZe(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function KZe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function XZe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function QZe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Xx(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function JZe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ZZe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Lwe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function eet(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Lwe(e,t);const i={src:Xx(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function tet(e,t){const n={src:Xx(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function net(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function ret(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Lwe(e,t);const i={href:Xx(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function iet(e,t){const n={href:Xx(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function set(e,t,n){const r=e.all(t),i=n?oet(n):Fwe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function oet(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Fwe(n[r])}return t}function Fwe(e){const t=e.spread;return t??e.children.length>1}function aet(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function uet(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function cet(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function fet(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function det(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Lh(t.children[1]),u=UL(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function het(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function pet(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const dae=9,hae=32;function met(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(pae(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(pae(t.slice(i),i>0,!1)),s.join("")}function pae(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===dae||s===hae;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===dae||s===hae;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function get(e,t){const n={type:"text",value:met(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function yet(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const vet={blockquote:WZe,break:GZe,code:YZe,delete:KZe,emphasis:XZe,footnoteReference:QZe,heading:JZe,html:ZZe,imageReference:eet,image:tet,inlineCode:net,linkReference:ret,link:iet,listItem:set,list:aet,paragraph:uet,root:cet,strong:fet,table:det,tableCell:pet,tableRow:het,text:get,thematicBreak:yet,toml:dN,yaml:dN,definition:dN,footnoteDefinition:dN};function dN(){}const jwe=-1,VL=0,MO=1,LO=2,vY=3,bY=4,_Y=5,wY=6,Bwe=7,Uwe=8,mae=typeof self=="object"?self:globalThis,bet=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case VL:case jwe:return n(o,i);case MO:{const a=n([],i);for(const u of o)a.push(r(u));return a}case LO:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case vY:return n(new Date(o),i);case bY:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case _Y:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case wY:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case Bwe:{const{name:a,message:u}=o;return n(new mae[a](u),i)}case Uwe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new mae[s](o),i)};return r},gae=e=>bet(new Map,e)(0),v_="",{toString:_et}={},{keys:wet}=Object,dT=e=>{const t=typeof e;if(t!=="object"||!e)return[VL,t];const n=_et.call(e).slice(8,-1);switch(n){case"Array":return[MO,v_];case"Object":return[LO,v_];case"Date":return[vY,v_];case"RegExp":return[bY,v_];case"Map":return[_Y,v_];case"Set":return[wY,v_]}return n.includes("Array")?[MO,n]:n.includes("Error")?[Bwe,n]:[LO,n]},hN=([e,t])=>e===VL&&(t==="function"||t==="symbol"),Eet=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=dT(o);switch(a){case VL:{let c=o;switch(u){case"bigint":a=Uwe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([jwe],o)}return i([a,c],o)}case MO:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case LO:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of wet(o))(e||!hN(dT(o[d])))&&c.push([s(d),s(o[d])]);return f}case vY:return i([a,o.toISOString()],o);case bY:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case _Y:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(hN(dT(d))||hN(dT(h))))&&c.push([s(d),s(h)]);return f}case wY:{const c=[],f=i([a,c],o);for(const d of o)(e||!hN(dT(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},yae=(e,{json:t,lossy:n}={})=>{const r=[];return Eet(!(t||n),!!t,new Map,r)(e),r},SE=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?gae(yae(e,t)):structuredClone(e):(e,t)=>gae(yae(e,t));function xet(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Tet(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Aet(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||xet,r=e.options.footnoteBackLabel||Tet,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=Xx(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...SE(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const zwe=function(e){if(e==null)return Ret;if(typeof e=="function")return HL(e);if(typeof e=="object")return Array.isArray(e)?Cet(e):Iet(e);if(typeof e=="string")return ket(e);throw new Error("Expected function, string, or object as test")};function Cet(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=zwe(e[n]);return HL(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Iet(e){const t=e;return HL(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function ket(e){return HL(t);function t(n){return n&&n.type===e}}function HL(e){return t;function t(n,r,i){return!!(Net(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Ret(){return!0}function Net(e){return e!==null&&typeof e=="object"&&"type"in e}const Vwe=[],Pet=!0,vae=!1,Det="skip";function Oet(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=zwe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=Vwe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=$et(n(u,c)),h[0]===vae))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==Det)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===vae)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function $et(e){return Array.isArray(e)?e:typeof e=="number"?[Pet,e]:e==null?Vwe:[e]}function EY(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),Oet(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const XU={}.hasOwnProperty,Met={};function Let(e,t){const n=t||Met,r=new Map,i=new Map,s=new Map,o={...vet,...n.handlers},a={all:l,applyData:jet,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:Fet,wrap:Uet};return EY(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(XU.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=SE(g);return y.children=a.all(c),y}return SE(c)}return(a.options.unknownHandler||Bet)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=bae(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=bae(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function Fet(e,t){e.position&&(t.position=yQe(e))}function jet(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,SE(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Bet(e,t){const n=t.data||{},r="value"in t&&!(XU.call(n,"hProperties")||XU.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Uet(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function bae(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function _ae(e,t){const n=Let(e,t),r=n.one(e,void 0),i=Aet(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function zet(e,t){return e&&"run"in e?async function(n,r){const i=_ae(n,{file:r,...t});await e.run(i,r)}:function(n,r){return _ae(n,{file:r,...t||e})}}function wae(e){if(e)throw e}var XP=Object.prototype.hasOwnProperty,Hwe=Object.prototype.toString,Eae=Object.defineProperty,xae=Object.getOwnPropertyDescriptor,Sae=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Hwe.call(t)==="[object Array]"},Tae=function(t){if(!t||Hwe.call(t)!=="[object Object]")return!1;var n=XP.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&XP.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||XP.call(t,i)},Aae=function(t,n){Eae&&n.name==="__proto__"?Eae(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Cae=function(t,n){if(n==="__proto__")if(XP.call(t,n)){if(xae)return xae(t,n).value}else return;return t[n]},Vet=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=Cae(a,n),i=Cae(t,n),a!==i&&(c&&i&&(Tae(i)||(s=Sae(i)))?(s?(s=!1,o=r&&Sae(r)?r:[]):o=r&&Tae(r)?r:{},Aae(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&Aae(a,{name:n,newValue:i}));return a};const Pj=Hl(Vet);function QU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Het(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?qet(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function qet(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Ed={basename:Wet,dirname:Get,extname:Yet,join:Ket,sep:"/"};function Wet(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');nk(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Get(e){if(nk(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Yet(e){nk(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Ket(...e){let t=-1,n;for(;++t<e.length;)nk(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Xet(n)}function Xet(e){nk(e);const t=e.codePointAt(0)===47;let n=Qet(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Qet(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function nk(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Jet={cwd:Zet};function Zet(){return"/"}function JU(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function ett(e){if(typeof e=="string")e=new URL(e);else if(!JU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return ttt(e)}function ttt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Dj=["history","path","basename","stem","extname","dirname"];class qwe{constructor(t){let n;t?JU(t)?n={path:t}:typeof t=="string"||ntt(t)?n={value:t}:n=t:n={},this.cwd=Jet.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Dj.length;){const s=Dj[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Dj.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Ed.basename(this.path):void 0}set basename(t){$j(t,"basename"),Oj(t,"basename"),this.path=Ed.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Ed.dirname(this.path):void 0}set dirname(t){Iae(this.basename,"dirname"),this.path=Ed.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Ed.extname(this.path):void 0}set extname(t){if(Oj(t,"extname"),Iae(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ed.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){JU(t)&&(t=ett(t)),$j(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Ed.basename(this.path,this.extname):void 0}set stem(t){$j(t,"stem"),Oj(t,"stem"),this.path=Ed.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Ea(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Oj(e,t){if(e&&e.includes(Ed.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Ed.sep+"`")}function $j(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Iae(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function ntt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const rtt=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},itt={}.hasOwnProperty;class xY extends rtt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Het()}copy(){const t=new xY;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Pj(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Fj("data",this.frozen),this.namespace[t]=n,this):itt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Fj("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=pN(t),r=this.parser||this.Parser;return Mj("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Mj("process",this.parser||this.Parser),Lj("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=pN(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);att(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),Mj("processSync",this.parser||this.Parser),Lj("processSync",this.compiler||this.Compiler),this.process(t,i),Rae("processSync","process",n),r;function i(s,o){n=!0,wae(s),r=o}}run(t,n,r){kae(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=pN(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),Rae("runSync","run",r),i;function s(o,a){wae(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=pN(n),i=this.compiler||this.Compiler;return Lj("stringify",i),kae(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(Fj("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=Pj(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];QU(m)&&QU(h)&&(h=Pj(!0,m,h)),r[d]=[l,h,...p]}}}}const stt=new xY().freeze();function Mj(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Lj(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Fj(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function kae(e){if(!QU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Rae(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function pN(e){return ott(e)?e:new qwe(e)}function ott(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function att(e){return typeof e=="string"||utt(e)}function utt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const ltt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Nae=[],Pae={allowDangerousHtml:!0},ctt=/^(https?|ircs?|mailto|xmpp)$/i,ftt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function dtt(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||Nae,u=e.remarkPlugins||Nae,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Pae}:Pae,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||htt,h=stt().use(qZe).use(u).use(zet,l).use(a),p=new qwe;typeof r=="string"&&(p.value=r);for(const v of ftt)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+ltt+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),EY(g,y),xQe(g,{Fragment:_.Fragment,components:s,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function y(v,b,w){if(v.type==="raw"&&w&&typeof b=="number")return c?w.children.splice(b,1):w.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let E;for(E in kj)if(Object.hasOwn(kj,E)&&Object.hasOwn(v.properties,E)){const T=v.properties[E],S=kj[E];(S===null||S.includes(v.tagName))&&(v.properties[E]=d(String(T||""),E,v))}}if(v.type==="element"){let E=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!E&&n&&typeof b=="number"&&(E=!n(v,b,w)),E&&w&&typeof b=="number")return f&&v.children?w.children.splice(b,1,...v.children):w.children.splice(b,1),b}}}function htt(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||ctt.test(e.slice(0,t))?e:""}const Dae=/[#.]/g;function ptt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Dae.lastIndex=i;const a=Dae.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const mtt=new Set(["button","menu","reset","submit"]),ZU={}.hasOwnProperty;function Wwe(e,t,n){const r=n&&btt(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=ptt(s,t),l.tagName=l.tagName.toLowerCase(),r&&ZU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),gtt(o,l.tagName)){let c;for(c in o)ZU.call(o,c)&&ytt(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)e7(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function gtt(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?mtt.has(e.type.toLowerCase()):!("value"in e)}function ytt(e,t,n,r){const i=BL(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Woe(r):i.commaSeparated?o=Uoe(r):i.commaOrSpaceSeparated?o=Woe(Uoe(r).join(" ")):o=Oae(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?vtt(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=Oae(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function e7(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)e7(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?e7(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Oae(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||bC(n)===bC(t)))return!0}return n}function vtt(e){const t=[];let n;for(n in e)ZU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function btt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const _tt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],wtt=Wwe(tk,"div"),Ett=Wwe(Cy,"g",_tt),jj=/\r?\n|\r/g;function xtt(e){const t=String(e),n=[];for(jj.lastIndex=0;jj.test(t);)n.push(jj.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const Qv={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Gwe={}.hasOwnProperty,Stt=Object.prototype;function Ttt(e,t){const n=t||{};return SY({file:n.file||void 0,location:!1,schema:n.space==="svg"?Cy:tk,verbose:n.verbose||!1},e)}function SY(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},QP(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:Ywe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=xtt(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},QP(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},QP(e,r,n),n}default:return n=Att(e,t),n}}function Ywe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=SY(e,t[n]);r.push(i)}return r}function Att(e,t){const n=e.schema;e.schema=t.namespaceURI===Qv.svg?Cy:tk;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;Gwe.call(Stt,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?Ett:wtt)(t.tagName,i,Ywe(e,t.childNodes));if(QP(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&fw(u.startTag),c=u&&u.endTag&&fw(u.endTag),f=SY(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function QP(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Ctt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Ctt(e,t,n){const r=fw(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)Gwe.call(n.attrs,o)&&(s[BL(e.schema,o).property]=fw(n.attrs[o]));n.startTag;const a=fw(n.startTag),u=n.endTag?fw(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function fw(e){const t=$ae({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=$ae({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function $ae(e){return e.line&&e.column?e:void 0}const Mae={}.hasOwnProperty;function Kwe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Mae.call(i,e)){const u=String(i[e]);o=Mae.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Itt={},ktt={}.hasOwnProperty,Xwe=Kwe("type",{handlers:{root:Ntt,element:Mtt,text:Ott,comment:$tt,doctype:Dtt}});function Rtt(e,t){const r=(t||Itt).space;return Xwe(e,r==="svg"?Cy:tk)}function Ntt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=TY(e.children,n,t),Qx(e,n),n}function Ptt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=TY(e.children,n,t),Qx(e,n),n}function Dtt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Qx(e,t),t}function Ott(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Qx(e,t),t}function $tt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Qx(e,t),t}function Mtt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Cy);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&ktt.call(e.properties,s)){const u=Ltt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:Qv[o],childNodes:[],parentNode:null};return a.childNodes=TY(e.children,a,r),Qx(e,a),e.tagName==="template"&&e.content&&(a.content=Ptt(e.content,r)),a}function Ltt(e,t,n){const r=BL(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?uwe(n):ywe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=Qv[r.space]}return i}function TY(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=Xwe(e[r],n);s.parentNode=t,i.push(s)}return i}function Qx(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Ftt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],jtt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),pi="";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const lu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function Qwe(e){return e>=55296&&e<=57343}function Btt(e){return e>=56320&&e<=57343}function Utt(e,t){return(e-55296)*1024+9216+t}function Jwe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function Zwe(e){return e>=64976&&e<=65007||jtt.has(e)}var De;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(De=De||(De={}));const ztt=65536;class Vtt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=ztt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Btt(n))return this.pos++,this._addGap(),Utt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(De.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,Qwe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){Jwe(t)?this._err(De.controlCharacterInInputStream):Zwe(t)&&this._err(De.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Cn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Cn=Cn||(Cn={}));function eEe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const gg=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Htt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Bj;const qtt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Wtt=(Bj=String.fromCodePoint)!==null&&Bj!==void 0?Bj:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Gtt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=qtt.get(e))!==null&&t!==void 0?t:e}var Qs;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Qs||(Qs={}));const Ytt=32;var qd;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(qd||(qd={}));function t7(e){return e>=Qs.ZERO&&e<=Qs.NINE}function Ktt(e){return e>=Qs.UPPER_A&&e<=Qs.UPPER_F||e>=Qs.LOWER_A&&e<=Qs.LOWER_F}function Xtt(e){return e>=Qs.UPPER_A&&e<=Qs.UPPER_Z||e>=Qs.LOWER_A&&e<=Qs.LOWER_Z||t7(e)}function Qtt(e){return e===Qs.EQUALS||Xtt(e)}var Hs;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Hs||(Hs={}));var $v;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})($v||($v={}));class Jtt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Hs.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=$v.Strict}startEntity(t){this.decodeMode=t,this.state=Hs.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Hs.EntityStart:return t.charCodeAt(n)===Qs.NUM?(this.state=Hs.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Hs.NamedEntity,this.stateNamedEntity(t,n));case Hs.NumericStart:return this.stateNumericStart(t,n);case Hs.NumericDecimal:return this.stateNumericDecimal(t,n);case Hs.NumericHex:return this.stateNumericHex(t,n);case Hs.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Ytt)===Qs.LOWER_X?(this.state=Hs.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Hs.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(t7(i)||Ktt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(t7(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Qs.SEMI)this.consumed+=1;else if(this.decodeMode===$v.Strict)return 0;return this.emitCodePoint(Gtt(this.result),this.consumed),this.errors&&(t!==Qs.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&qd.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=nEe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===$v.Attribute&&(s===0||Qtt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&qd.VALUE_LENGTH)>>14,s!==0){if(o===Qs.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==$v.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&qd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~qd.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Hs.NamedEntity:return this.result!==0&&(this.decodeMode!==$v.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Hs.NumericDecimal:return this.emitNumericEntity(0,2);case Hs.NumericHex:return this.emitNumericEntity(0,3);case Hs.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Hs.EntityStart:return 0}}}function tEe(e){let t="";const n=new Jtt(e,r=>t+=Wtt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function nEe(e,t,n,r){const i=(t&qd.BRANCH_LENGTH)>>7,s=t&qd.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}tEe(gg);tEe(Htt);var ze;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(ze=ze||(ze={}));var p0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(p0=p0||(p0={}));var dl;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(dl=dl||(dl={}));var Te;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Te=Te||(Te={}));var R;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(R=R||(R={}));const Ztt=new Map([[Te.A,R.A],[Te.ADDRESS,R.ADDRESS],[Te.ANNOTATION_XML,R.ANNOTATION_XML],[Te.APPLET,R.APPLET],[Te.AREA,R.AREA],[Te.ARTICLE,R.ARTICLE],[Te.ASIDE,R.ASIDE],[Te.B,R.B],[Te.BASE,R.BASE],[Te.BASEFONT,R.BASEFONT],[Te.BGSOUND,R.BGSOUND],[Te.BIG,R.BIG],[Te.BLOCKQUOTE,R.BLOCKQUOTE],[Te.BODY,R.BODY],[Te.BR,R.BR],[Te.BUTTON,R.BUTTON],[Te.CAPTION,R.CAPTION],[Te.CENTER,R.CENTER],[Te.CODE,R.CODE],[Te.COL,R.COL],[Te.COLGROUP,R.COLGROUP],[Te.DD,R.DD],[Te.DESC,R.DESC],[Te.DETAILS,R.DETAILS],[Te.DIALOG,R.DIALOG],[Te.DIR,R.DIR],[Te.DIV,R.DIV],[Te.DL,R.DL],[Te.DT,R.DT],[Te.EM,R.EM],[Te.EMBED,R.EMBED],[Te.FIELDSET,R.FIELDSET],[Te.FIGCAPTION,R.FIGCAPTION],[Te.FIGURE,R.FIGURE],[Te.FONT,R.FONT],[Te.FOOTER,R.FOOTER],[Te.FOREIGN_OBJECT,R.FOREIGN_OBJECT],[Te.FORM,R.FORM],[Te.FRAME,R.FRAME],[Te.FRAMESET,R.FRAMESET],[Te.H1,R.H1],[Te.H2,R.H2],[Te.H3,R.H3],[Te.H4,R.H4],[Te.H5,R.H5],[Te.H6,R.H6],[Te.HEAD,R.HEAD],[Te.HEADER,R.HEADER],[Te.HGROUP,R.HGROUP],[Te.HR,R.HR],[Te.HTML,R.HTML],[Te.I,R.I],[Te.IMG,R.IMG],[Te.IMAGE,R.IMAGE],[Te.INPUT,R.INPUT],[Te.IFRAME,R.IFRAME],[Te.KEYGEN,R.KEYGEN],[Te.LABEL,R.LABEL],[Te.LI,R.LI],[Te.LINK,R.LINK],[Te.LISTING,R.LISTING],[Te.MAIN,R.MAIN],[Te.MALIGNMARK,R.MALIGNMARK],[Te.MARQUEE,R.MARQUEE],[Te.MATH,R.MATH],[Te.MENU,R.MENU],[Te.META,R.META],[Te.MGLYPH,R.MGLYPH],[Te.MI,R.MI],[Te.MO,R.MO],[Te.MN,R.MN],[Te.MS,R.MS],[Te.MTEXT,R.MTEXT],[Te.NAV,R.NAV],[Te.NOBR,R.NOBR],[Te.NOFRAMES,R.NOFRAMES],[Te.NOEMBED,R.NOEMBED],[Te.NOSCRIPT,R.NOSCRIPT],[Te.OBJECT,R.OBJECT],[Te.OL,R.OL],[Te.OPTGROUP,R.OPTGROUP],[Te.OPTION,R.OPTION],[Te.P,R.P],[Te.PARAM,R.PARAM],[Te.PLAINTEXT,R.PLAINTEXT],[Te.PRE,R.PRE],[Te.RB,R.RB],[Te.RP,R.RP],[Te.RT,R.RT],[Te.RTC,R.RTC],[Te.RUBY,R.RUBY],[Te.S,R.S],[Te.SCRIPT,R.SCRIPT],[Te.SECTION,R.SECTION],[Te.SELECT,R.SELECT],[Te.SOURCE,R.SOURCE],[Te.SMALL,R.SMALL],[Te.SPAN,R.SPAN],[Te.STRIKE,R.STRIKE],[Te.STRONG,R.STRONG],[Te.STYLE,R.STYLE],[Te.SUB,R.SUB],[Te.SUMMARY,R.SUMMARY],[Te.SUP,R.SUP],[Te.TABLE,R.TABLE],[Te.TBODY,R.TBODY],[Te.TEMPLATE,R.TEMPLATE],[Te.TEXTAREA,R.TEXTAREA],[Te.TFOOT,R.TFOOT],[Te.TD,R.TD],[Te.TH,R.TH],[Te.THEAD,R.THEAD],[Te.TITLE,R.TITLE],[Te.TR,R.TR],[Te.TRACK,R.TRACK],[Te.TT,R.TT],[Te.U,R.U],[Te.UL,R.UL],[Te.SVG,R.SVG],[Te.VAR,R.VAR],[Te.WBR,R.WBR],[Te.XMP,R.XMP]]);function Jx(e){var t;return(t=Ztt.get(e))!==null&&t!==void 0?t:R.UNKNOWN}const et=R,ent={[ze.HTML]:new Set([et.ADDRESS,et.APPLET,et.AREA,et.ARTICLE,et.ASIDE,et.BASE,et.BASEFONT,et.BGSOUND,et.BLOCKQUOTE,et.BODY,et.BR,et.BUTTON,et.CAPTION,et.CENTER,et.COL,et.COLGROUP,et.DD,et.DETAILS,et.DIR,et.DIV,et.DL,et.DT,et.EMBED,et.FIELDSET,et.FIGCAPTION,et.FIGURE,et.FOOTER,et.FORM,et.FRAME,et.FRAMESET,et.H1,et.H2,et.H3,et.H4,et.H5,et.H6,et.HEAD,et.HEADER,et.HGROUP,et.HR,et.HTML,et.IFRAME,et.IMG,et.INPUT,et.LI,et.LINK,et.LISTING,et.MAIN,et.MARQUEE,et.MENU,et.META,et.NAV,et.NOEMBED,et.NOFRAMES,et.NOSCRIPT,et.OBJECT,et.OL,et.P,et.PARAM,et.PLAINTEXT,et.PRE,et.SCRIPT,et.SECTION,et.SELECT,et.SOURCE,et.STYLE,et.SUMMARY,et.TABLE,et.TBODY,et.TD,et.TEMPLATE,et.TEXTAREA,et.TFOOT,et.TH,et.THEAD,et.TITLE,et.TR,et.TRACK,et.UL,et.WBR,et.XMP]),[ze.MATHML]:new Set([et.MI,et.MO,et.MN,et.MS,et.MTEXT,et.ANNOTATION_XML]),[ze.SVG]:new Set([et.TITLE,et.FOREIGN_OBJECT,et.DESC]),[ze.XLINK]:new Set,[ze.XML]:new Set,[ze.XMLNS]:new Set};function rEe(e){return e===et.H1||e===et.H2||e===et.H3||e===et.H4||e===et.H5||e===et.H6}Te.STYLE,Te.SCRIPT,Te.XMP,Te.IFRAME,Te.NOEMBED,Te.NOFRAMES,Te.PLAINTEXT;const tnt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var ee;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(ee||(ee={}));const rs={DATA:ee.DATA,RCDATA:ee.RCDATA,RAWTEXT:ee.RAWTEXT,SCRIPT_DATA:ee.SCRIPT_DATA,PLAINTEXT:ee.PLAINTEXT,CDATA_SECTION:ee.CDATA_SECTION};function oA(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function a2(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function nnt(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function yg(e){return nnt(e)||a2(e)}function n7(e){return yg(e)||oA(e)}function iEe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function sEe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function rnt(e){return oA(e)||iEe(e)||sEe(e)}function mN(e){return e+32}function oEe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function int(e){return e===X.EQUALS_SIGN||n7(e)}function Lae(e){return oEe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class snt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=ee.DATA,this.returnState=ee.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Vtt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Cn.START_TAG,tagName:"",tagID:R.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Cn.END_TAG,tagName:"",tagID:R.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Cn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Cn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(eEe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(De.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=Jx(t.tagName),t.type===Cn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(De.endTagWithAttributes),t.selfClosing&&this._err(De.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Cn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Cn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Cn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Cn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=oEe(t)?Cn.WHITESPACE_CHARACTER:t===X.NULL?Cn.NULL_CHARACTER:Cn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Cn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=gg[0];s>=0&&(s=nEe(gg,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=gg[s];const a=o&qd.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&int(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[gg[s]&~qd.VALUE_LENGTH]:u===1?[gg[++s]]:[gg[++s],gg[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(De.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===ee.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===ee.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===ee.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case ee.DATA:{this._stateData(t);break}case ee.RCDATA:{this._stateRcdata(t);break}case ee.RAWTEXT:{this._stateRawtext(t);break}case ee.SCRIPT_DATA:{this._stateScriptData(t);break}case ee.PLAINTEXT:{this._statePlaintext(t);break}case ee.TAG_OPEN:{this._stateTagOpen(t);break}case ee.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case ee.TAG_NAME:{this._stateTagName(t);break}case ee.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case ee.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case ee.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case ee.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case ee.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case ee.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case ee.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case ee.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case ee.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case ee.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case ee.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case ee.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case ee.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case ee.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case ee.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case ee.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case ee.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case ee.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case ee.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case ee.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case ee.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case ee.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case ee.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case ee.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case ee.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case ee.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case ee.BOGUS_COMMENT:{this._stateBogusComment(t);break}case ee.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case ee.COMMENT_START:{this._stateCommentStart(t);break}case ee.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case ee.COMMENT:{this._stateComment(t);break}case ee.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case ee.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case ee.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case ee.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case ee.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case ee.COMMENT_END:{this._stateCommentEnd(t);break}case ee.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case ee.DOCTYPE:{this._stateDoctype(t);break}case ee.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case ee.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case ee.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case ee.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case ee.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case ee.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case ee.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case ee.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case ee.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case ee.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case ee.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case ee.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case ee.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case ee.CDATA_SECTION:{this._stateCdataSection(t);break}case ee.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case ee.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case ee.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case ee.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case ee.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case ee.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case ee.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case ee.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case ee.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case ee.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=ee.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=ee.DATA,this.state=ee.CHARACTER_REFERENCE;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=ee.RCDATA,this.state=ee.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=ee.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitChars(pi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=ee.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitChars(pi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitChars(pi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitChars(pi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(yg(t))this._createStartTagToken(),this.state=ee.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=ee.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=ee.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(De.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=ee.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(De.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(De.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=ee.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(yg(t))this._createEndTagToken(),this.state=ee.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(De.missingEndTagName),this.state=ee.DATA;break}case X.EOF:{this._err(De.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(De.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=ee.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=ee.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=ee.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.tagName+=pi;break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(a2(t)?mN(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=ee.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=ee.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){yg(t)?(this.state=ee.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=ee.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=ee.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=ee.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=ee.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ee.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=ee.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=ee.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){yg(t)?(this.state=ee.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=ee.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ee.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=ee.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=ee.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=ee.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){yg(t)?(this.state=ee.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=ee.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ee.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=ee.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=ee.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=ee.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=ee.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=ee.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitChars(pi);break}case X.EOF:{this._err(De.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=ee.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.state=ee.SCRIPT_DATA_ESCAPED,this._emitChars(pi);break}case X.EOF:{this._err(De.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ee.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=ee.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.state=ee.SCRIPT_DATA_ESCAPED,this._emitChars(pi);break}case X.EOF:{this._err(De.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ee.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=ee.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:yg(t)?(this._emitChars("<"),this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=ee.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){yg(t)?(this.state=ee.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=ee.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ee.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(lu.SCRIPT,!1)&&Lae(this.preprocessor.peek(lu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<lu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=ee.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitChars(pi);break}case X.EOF:{this._err(De.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(pi);break}case X.EOF:{this._err(De.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=ee.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(pi);break}case X.EOF:{this._err(De.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(lu.SCRIPT,!1)&&Lae(this.preprocessor.peek(lu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<lu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=ee.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=ee.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(De.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=ee.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=ee.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=ee.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=ee.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(De.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.currentAttr.name+=pi;break}default:this.currentAttr.name+=String.fromCodePoint(a2(t)?mN(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=ee.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=ee.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=ee.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=ee.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=ee.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(De.missingAttributeValue),this.state=ee.DATA,this.emitCurrentTagToken();break}default:this.state=ee.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=ee.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=ee.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=ee.CHARACTER_REFERENCE;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.currentAttr.value+=pi;break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=ee.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=ee.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=ee.CHARACTER_REFERENCE;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.currentAttr.value+=pi;break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=ee.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=ee.ATTRIBUTE_VALUE_UNQUOTED,this.state=ee.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=ee.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.currentAttr.value+=pi;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(De.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=ee.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=ee.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=ee.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:this._err(De.missingWhitespaceBetweenAttributes),this.state=ee.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=ee.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:this._err(De.unexpectedSolidusInTag),this.state=ee.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.data+=pi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(lu.DASH_DASH,!0)?(this._createCommentToken(lu.DASH_DASH.length+1),this.state=ee.COMMENT_START):this._consumeSequenceIfMatch(lu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(lu.DOCTYPE.length+1),this.state=ee.DOCTYPE):this._consumeSequenceIfMatch(lu.CDATA_START,!0)?this.inForeignNode?this.state=ee.CDATA_SECTION:(this._err(De.cdataInHtmlContent),this._createCommentToken(lu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=ee.BOGUS_COMMENT):this._ensureHibernation()||(this._err(De.incorrectlyOpenedComment),this._createCommentToken(2),this.state=ee.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=ee.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(De.abruptClosingOfEmptyComment),this.state=ee.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=ee.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=ee.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(De.abruptClosingOfEmptyComment),this.state=ee.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(De.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=ee.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=ee.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=ee.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.data+=pi;break}case X.EOF:{this._err(De.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=ee.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=ee.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=ee.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=ee.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=ee.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=ee.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(De.nestedComment),this.state=ee.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=ee.COMMENT_END;break}case X.EOF:{this._err(De.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=ee.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=ee.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(De.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=ee.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=ee.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(De.incorrectlyClosedComment),this.state=ee.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(De.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=ee.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=ee.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=ee.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(De.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingWhitespaceBeforeDoctypeName),this.state=ee.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(a2(t))this._createDoctypeToken(String.fromCharCode(mN(t))),this.state=ee.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(De.unexpectedNullCharacter),this._createDoctypeToken(pi),this.state=ee.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(De.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ee.DATA;break}case X.EOF:{this._err(De.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=ee.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=ee.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.name+=pi;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(a2(t)?mN(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(lu.PUBLIC,!1)?this.state=ee.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(lu.SYSTEM,!1)?this.state=ee.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(De.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=ee.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(De.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=ee.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(De.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=ee.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(De.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ee.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=ee.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=ee.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(De.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ee.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=ee.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.publicId+=pi;break}case X.GREATER_THAN_SIGN:{this._err(De.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ee.DATA;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=ee.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.publicId+=pi;break}case X.GREATER_THAN_SIGN:{this._err(De.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ee.DATA;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=ee.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(De.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(De.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ee.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=ee.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(De.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(De.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(De.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ee.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(De.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ee.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=ee.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.systemId+=pi;break}case X.GREATER_THAN_SIGN:{this._err(De.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ee.DATA;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=ee.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.systemId+=pi;break}case X.GREATER_THAN_SIGN:{this._err(De.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ee.DATA;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ee.DATA;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ee.DATA;break}case X.NULL:{this._err(De.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=ee.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(De.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=ee.CDATA_SECTION_END:(this._emitChars("]"),this.state=ee.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=ee.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=ee.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=ee.NUMERIC_CHARACTER_REFERENCE:n7(t)?(this.state=ee.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=ee.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){n7(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(De.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=ee.HEXADEMICAL_CHARACTER_REFERENCE_START:oA(t)?(this.state=ee.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(De.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){rnt(t)?(this.state=ee.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(De.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){iEe(t)?this.charRefCode=this.charRefCode*16+t-55:sEe(t)?this.charRefCode=this.charRefCode*16+t-87:oA(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=ee.NUMERIC_CHARACTER_REFERENCE_END:(this._err(De.missingSemicolonAfterCharacterReference),this.state=ee.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){oA(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=ee.NUMERIC_CHARACTER_REFERENCE_END:(this._err(De.missingSemicolonAfterCharacterReference),this.state=ee.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(De.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(De.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(Qwe(this.charRefCode))this._err(De.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(Zwe(this.charRefCode))this._err(De.noncharacterCharacterReference);else if(Jwe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(De.controlCharacterReference);const n=tnt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const aEe=new Set([R.DD,R.DT,R.LI,R.OPTGROUP,R.OPTION,R.P,R.RB,R.RP,R.RT,R.RTC]),Fae=new Set([...aEe,R.CAPTION,R.COLGROUP,R.TBODY,R.TD,R.TFOOT,R.TH,R.THEAD,R.TR]),gN=new Map([[R.APPLET,ze.HTML],[R.CAPTION,ze.HTML],[R.HTML,ze.HTML],[R.MARQUEE,ze.HTML],[R.OBJECT,ze.HTML],[R.TABLE,ze.HTML],[R.TD,ze.HTML],[R.TEMPLATE,ze.HTML],[R.TH,ze.HTML],[R.ANNOTATION_XML,ze.MATHML],[R.MI,ze.MATHML],[R.MN,ze.MATHML],[R.MO,ze.MATHML],[R.MS,ze.MATHML],[R.MTEXT,ze.MATHML],[R.DESC,ze.SVG],[R.FOREIGN_OBJECT,ze.SVG],[R.TITLE,ze.SVG]]),ont=[R.H1,R.H2,R.H3,R.H4,R.H5,R.H6],ant=[R.TR,R.TEMPLATE,R.HTML],unt=[R.TBODY,R.TFOOT,R.THEAD,R.TEMPLATE,R.HTML],lnt=[R.TABLE,R.TEMPLATE,R.HTML],cnt=[R.TD,R.TH];class fnt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=R.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===R.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===ze.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==ze.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(ont,ze.HTML)}popUntilTableCellPopped(){this.popUntilPopped(cnt,ze.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(lnt,ze.HTML)}clearBackToTableBodyContext(){this.clearBackTo(unt,ze.HTML)}clearBackToTableRowContext(){this.clearBackTo(ant,ze.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===R.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===R.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ze.HTML)return!0;if(gN.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(rEe(n)&&r===ze.HTML)return!0;if(gN.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ze.HTML)return!0;if((r===R.UL||r===R.OL)&&i===ze.HTML||gN.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ze.HTML)return!0;if(r===R.BUTTON&&i===ze.HTML||gN.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===ze.HTML){if(r===t)return!0;if(r===R.TABLE||r===R.TEMPLATE||r===R.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===ze.HTML){if(n===R.TBODY||n===R.THEAD||n===R.TFOOT)return!0;if(n===R.TABLE||n===R.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===ze.HTML){if(r===t)return!0;if(r!==R.OPTION&&r!==R.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;aEe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Fae.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Fae.has(this.currentTagId);)this.pop()}}const Uj=3;var hf;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(hf=hf||(hf={}));const jae={type:hf.Marker};class dnt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===hf.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<Uj)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<Uj)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=Uj&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(jae)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:hf.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:hf.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(jae);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===hf.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===hf.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===hf.Element&&n.element===t)}}function Bae(e){return{nodeName:"#text",value:e,parentNode:null}}const U_={createDocument(){return{nodeName:"#document",mode:dl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};U_.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(U_.isTextNode(n)){n.value+=t;return}}U_.appendChild(e,Bae(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&U_.isTextNode(r)?r.value+=t:U_.insertBefore(e,Bae(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},uEe="html",hnt="about:legacy-compat",pnt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",lEe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],mnt=[...lEe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],gnt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),cEe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],ynt=[...cEe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Uae(e,t){return t.some(n=>e.startsWith(n))}function vnt(e){return e.name===uEe&&e.publicId===null&&(e.systemId===null||e.systemId===hnt)}function bnt(e){if(e.name!==uEe)return dl.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===pnt)return dl.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),gnt.has(n))return dl.QUIRKS;let r=t===null?mnt:lEe;if(Uae(n,r))return dl.QUIRKS;if(r=t===null?cEe:ynt,Uae(n,r))return dl.LIMITED_QUIRKS}return dl.NO_QUIRKS}const zae={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},_nt="definitionurl",wnt="definitionURL",Ent=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),xnt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:ze.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:ze.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:ze.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:ze.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:ze.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:ze.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:ze.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:ze.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:ze.XML}],["xml:space",{prefix:"xml",name:"space",namespace:ze.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:ze.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:ze.XMLNS}]]),Snt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Tnt=new Set([R.B,R.BIG,R.BLOCKQUOTE,R.BODY,R.BR,R.CENTER,R.CODE,R.DD,R.DIV,R.DL,R.DT,R.EM,R.EMBED,R.H1,R.H2,R.H3,R.H4,R.H5,R.H6,R.HEAD,R.HR,R.I,R.IMG,R.LI,R.LISTING,R.MENU,R.META,R.NOBR,R.OL,R.P,R.PRE,R.RUBY,R.S,R.SMALL,R.SPAN,R.STRONG,R.STRIKE,R.SUB,R.SUP,R.TABLE,R.TT,R.U,R.UL,R.VAR]);function Ant(e){const t=e.tagID;return t===R.FONT&&e.attrs.some(({name:r})=>r===p0.COLOR||r===p0.SIZE||r===p0.FACE)||Tnt.has(t)}function fEe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===_nt){e.attrs[t].name=wnt;break}}function dEe(e){for(let t=0;t<e.attrs.length;t++){const n=Ent.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function AY(e){for(let t=0;t<e.attrs.length;t++){const n=xnt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Cnt(e){const t=Snt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=Jx(e.tagName))}function Int(e,t){return t===ze.MATHML&&(e===R.MI||e===R.MO||e===R.MN||e===R.MS||e===R.MTEXT)}function knt(e,t,n){if(t===ze.MATHML&&e===R.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===p0.ENCODING){const i=n[r].value.toLowerCase();return i===zae.TEXT_HTML||i===zae.APPLICATION_XML}}return t===ze.SVG&&(e===R.FOREIGN_OBJECT||e===R.DESC||e===R.TITLE)}function Rnt(e,t,n,r){return(!r||r===ze.HTML)&&knt(e,t,n)||(!r||r===ze.MATHML)&&Int(e,t)}const Nnt="hidden",Pnt=8,Dnt=3;var oe;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(oe||(oe={}));const Ont={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},hEe=new Set([R.TABLE,R.TBODY,R.TFOOT,R.THEAD,R.TR]),Vae={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:U_,onParseError:null};let Hae=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=oe.INITIAL,this.originalInsertionMode=oe.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Vae,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new snt(this.options,this),this.activeFormattingElements=new dnt(this.treeAdapter),this.fragmentContextID=r?Jx(this.treeAdapter.getTagName(r)):R.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new fnt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Vae,...n};t??(t=r.treeAdapter.createElement(Te.TEMPLATE,ze.HTML,[]));const i=r.treeAdapter.createElement("documentmock",ze.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===R.TEMPLATE&&s.tmplInsertionModeStack.unshift(oe.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Ont,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===ze.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,ze.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=oe.TEXT}switchToPlaintextParsing(){this.insertionMode=oe.TEXT,this.originalInsertionMode=oe.IN_BODY,this.tokenizer.state=rs.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Te.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==ze.HTML))switch(this.fragmentContextID){case R.TITLE:case R.TEXTAREA:{this.tokenizer.state=rs.RCDATA;break}case R.STYLE:case R.XMP:case R.IFRAME:case R.NOEMBED:case R.NOFRAMES:case R.NOSCRIPT:{this.tokenizer.state=rs.RAWTEXT;break}case R.SCRIPT:{this.tokenizer.state=rs.SCRIPT_DATA;break}case R.PLAINTEXT:{this.tokenizer.state=rs.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,ze.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,ze.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Te.HTML,ze.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,R.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===Cn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===R.SVG&&this.treeAdapter.getTagName(n)===Te.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===ze.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===R.MGLYPH||t.tagID===R.MALIGNMARK)&&!this._isIntegrationPoint(r,n,ze.HTML)}_processToken(t){switch(t.type){case Cn.CHARACTER:{this.onCharacter(t);break}case Cn.NULL_CHARACTER:{this.onNullCharacter(t);break}case Cn.COMMENT:{this.onComment(t);break}case Cn.DOCTYPE:{this.onDoctype(t);break}case Cn.START_TAG:{this._processStartTag(t);break}case Cn.END_TAG:{this.onEndTag(t);break}case Cn.EOF:{this.onEof(t);break}case Cn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Rnt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===hf.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=oe.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(R.P),this.openElements.popUntilTagNamePopped(R.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case R.TR:{this.insertionMode=oe.IN_ROW;return}case R.TBODY:case R.THEAD:case R.TFOOT:{this.insertionMode=oe.IN_TABLE_BODY;return}case R.CAPTION:{this.insertionMode=oe.IN_CAPTION;return}case R.COLGROUP:{this.insertionMode=oe.IN_COLUMN_GROUP;return}case R.TABLE:{this.insertionMode=oe.IN_TABLE;return}case R.BODY:{this.insertionMode=oe.IN_BODY;return}case R.FRAMESET:{this.insertionMode=oe.IN_FRAMESET;return}case R.SELECT:{this._resetInsertionModeForSelect(t);return}case R.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case R.HTML:{this.insertionMode=this.headElement?oe.AFTER_HEAD:oe.BEFORE_HEAD;return}case R.TD:case R.TH:{if(t>0){this.insertionMode=oe.IN_CELL;return}break}case R.HEAD:{if(t>0){this.insertionMode=oe.IN_HEAD;return}break}}this.insertionMode=oe.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===R.TEMPLATE)break;if(r===R.TABLE){this.insertionMode=oe.IN_SELECT_IN_TABLE;return}}this.insertionMode=oe.IN_SELECT}_isElementCausesFosterParenting(t){return hEe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case R.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===ze.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case R.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return ent[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){cit(this,t);return}switch(this.insertionMode){case oe.INITIAL:{hT(this,t);break}case oe.BEFORE_HTML:{aA(this,t);break}case oe.BEFORE_HEAD:{uA(this,t);break}case oe.IN_HEAD:{lA(this,t);break}case oe.IN_HEAD_NO_SCRIPT:{cA(this,t);break}case oe.AFTER_HEAD:{fA(this,t);break}case oe.IN_BODY:case oe.IN_CAPTION:case oe.IN_CELL:case oe.IN_TEMPLATE:{mEe(this,t);break}case oe.TEXT:case oe.IN_SELECT:case oe.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case oe.IN_TABLE:case oe.IN_TABLE_BODY:case oe.IN_ROW:{zj(this,t);break}case oe.IN_TABLE_TEXT:{wEe(this,t);break}case oe.IN_COLUMN_GROUP:{FO(this,t);break}case oe.AFTER_BODY:{jO(this,t);break}case oe.AFTER_AFTER_BODY:{JP(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){lit(this,t);return}switch(this.insertionMode){case oe.INITIAL:{hT(this,t);break}case oe.BEFORE_HTML:{aA(this,t);break}case oe.BEFORE_HEAD:{uA(this,t);break}case oe.IN_HEAD:{lA(this,t);break}case oe.IN_HEAD_NO_SCRIPT:{cA(this,t);break}case oe.AFTER_HEAD:{fA(this,t);break}case oe.TEXT:{this._insertCharacters(t);break}case oe.IN_TABLE:case oe.IN_TABLE_BODY:case oe.IN_ROW:{zj(this,t);break}case oe.IN_COLUMN_GROUP:{FO(this,t);break}case oe.AFTER_BODY:{jO(this,t);break}case oe.AFTER_AFTER_BODY:{JP(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){r7(this,t);return}switch(this.insertionMode){case oe.INITIAL:case oe.BEFORE_HTML:case oe.BEFORE_HEAD:case oe.IN_HEAD:case oe.IN_HEAD_NO_SCRIPT:case oe.AFTER_HEAD:case oe.IN_BODY:case oe.IN_TABLE:case oe.IN_CAPTION:case oe.IN_COLUMN_GROUP:case oe.IN_TABLE_BODY:case oe.IN_ROW:case oe.IN_CELL:case oe.IN_SELECT:case oe.IN_SELECT_IN_TABLE:case oe.IN_TEMPLATE:case oe.IN_FRAMESET:case oe.AFTER_FRAMESET:{r7(this,t);break}case oe.IN_TABLE_TEXT:{pT(this,t);break}case oe.AFTER_BODY:{Unt(this,t);break}case oe.AFTER_AFTER_BODY:case oe.AFTER_AFTER_FRAMESET:{znt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case oe.INITIAL:{Vnt(this,t);break}case oe.BEFORE_HEAD:case oe.IN_HEAD:case oe.IN_HEAD_NO_SCRIPT:case oe.AFTER_HEAD:{this._err(t,De.misplacedDoctype);break}case oe.IN_TABLE_TEXT:{pT(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,De.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?fit(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case oe.INITIAL:{hT(this,t);break}case oe.BEFORE_HTML:{Hnt(this,t);break}case oe.BEFORE_HEAD:{Wnt(this,t);break}case oe.IN_HEAD:{Xf(this,t);break}case oe.IN_HEAD_NO_SCRIPT:{Knt(this,t);break}case oe.AFTER_HEAD:{Qnt(this,t);break}case oe.IN_BODY:{xa(this,t);break}case oe.IN_TABLE:{TE(this,t);break}case oe.IN_TABLE_TEXT:{pT(this,t);break}case oe.IN_CAPTION:{Grt(this,t);break}case oe.IN_COLUMN_GROUP:{kY(this,t);break}case oe.IN_TABLE_BODY:{GL(this,t);break}case oe.IN_ROW:{YL(this,t);break}case oe.IN_CELL:{Xrt(this,t);break}case oe.IN_SELECT:{SEe(this,t);break}case oe.IN_SELECT_IN_TABLE:{Jrt(this,t);break}case oe.IN_TEMPLATE:{eit(this,t);break}case oe.AFTER_BODY:{nit(this,t);break}case oe.IN_FRAMESET:{rit(this,t);break}case oe.AFTER_FRAMESET:{sit(this,t);break}case oe.AFTER_AFTER_BODY:{ait(this,t);break}case oe.AFTER_AFTER_FRAMESET:{uit(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?dit(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case oe.INITIAL:{hT(this,t);break}case oe.BEFORE_HTML:{qnt(this,t);break}case oe.BEFORE_HEAD:{Gnt(this,t);break}case oe.IN_HEAD:{Ynt(this,t);break}case oe.IN_HEAD_NO_SCRIPT:{Xnt(this,t);break}case oe.AFTER_HEAD:{Jnt(this,t);break}case oe.IN_BODY:{WL(this,t);break}case oe.TEXT:{Lrt(this,t);break}case oe.IN_TABLE:{wC(this,t);break}case oe.IN_TABLE_TEXT:{pT(this,t);break}case oe.IN_CAPTION:{Yrt(this,t);break}case oe.IN_COLUMN_GROUP:{Krt(this,t);break}case oe.IN_TABLE_BODY:{i7(this,t);break}case oe.IN_ROW:{xEe(this,t);break}case oe.IN_CELL:{Qrt(this,t);break}case oe.IN_SELECT:{TEe(this,t);break}case oe.IN_SELECT_IN_TABLE:{Zrt(this,t);break}case oe.IN_TEMPLATE:{tit(this,t);break}case oe.AFTER_BODY:{CEe(this,t);break}case oe.IN_FRAMESET:{iit(this,t);break}case oe.AFTER_FRAMESET:{oit(this,t);break}case oe.AFTER_AFTER_BODY:{JP(this,t);break}}}onEof(t){switch(this.insertionMode){case oe.INITIAL:{hT(this,t);break}case oe.BEFORE_HTML:{aA(this,t);break}case oe.BEFORE_HEAD:{uA(this,t);break}case oe.IN_HEAD:{lA(this,t);break}case oe.IN_HEAD_NO_SCRIPT:{cA(this,t);break}case oe.AFTER_HEAD:{fA(this,t);break}case oe.IN_BODY:case oe.IN_TABLE:case oe.IN_CAPTION:case oe.IN_COLUMN_GROUP:case oe.IN_TABLE_BODY:case oe.IN_ROW:case oe.IN_CELL:case oe.IN_SELECT:case oe.IN_SELECT_IN_TABLE:{bEe(this,t);break}case oe.TEXT:{Frt(this,t);break}case oe.IN_TABLE_TEXT:{pT(this,t);break}case oe.IN_TEMPLATE:{AEe(this,t);break}case oe.AFTER_BODY:case oe.IN_FRAMESET:case oe.AFTER_FRAMESET:case oe.AFTER_AFTER_BODY:case oe.AFTER_AFTER_FRAMESET:{IY(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case oe.IN_HEAD:case oe.IN_HEAD_NO_SCRIPT:case oe.AFTER_HEAD:case oe.TEXT:case oe.IN_COLUMN_GROUP:case oe.IN_SELECT:case oe.IN_SELECT_IN_TABLE:case oe.IN_FRAMESET:case oe.AFTER_FRAMESET:{this._insertCharacters(t);break}case oe.IN_BODY:case oe.IN_CAPTION:case oe.IN_CELL:case oe.IN_TEMPLATE:case oe.AFTER_BODY:case oe.AFTER_AFTER_BODY:case oe.AFTER_AFTER_FRAMESET:{pEe(this,t);break}case oe.IN_TABLE:case oe.IN_TABLE_BODY:case oe.IN_ROW:{zj(this,t);break}case oe.IN_TABLE_TEXT:{_Ee(this,t);break}}}};function $nt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):vEe(e,t),n}function Mnt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Lnt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=Dnt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=Fnt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function Fnt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function jnt(e,t,n){const r=e.treeAdapter.getTagName(t),i=Jx(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===R.TEMPLATE&&s===ze.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Bnt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function CY(e,t){for(let n=0;n<Pnt;n++){const r=$nt(e,t);if(!r)break;const i=Mnt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Lnt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&jnt(e,o,s),Bnt(e,i,r)}}function r7(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Unt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function znt(e,t){e._appendCommentNode(t,e.document)}function IY(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Vnt(e,t){e._setDocumentType(t);const n=t.forceQuirks?dl.QUIRKS:bnt(t);vnt(t)||e._err(t,De.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=oe.BEFORE_HTML}function hT(e,t){e._err(t,De.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,dl.QUIRKS),e.insertionMode=oe.BEFORE_HTML,e._processToken(t)}function Hnt(e,t){t.tagID===R.HTML?(e._insertElement(t,ze.HTML),e.insertionMode=oe.BEFORE_HEAD):aA(e,t)}function qnt(e,t){const n=t.tagID;(n===R.HTML||n===R.HEAD||n===R.BODY||n===R.BR)&&aA(e,t)}function aA(e,t){e._insertFakeRootElement(),e.insertionMode=oe.BEFORE_HEAD,e._processToken(t)}function Wnt(e,t){switch(t.tagID){case R.HTML:{xa(e,t);break}case R.HEAD:{e._insertElement(t,ze.HTML),e.headElement=e.openElements.current,e.insertionMode=oe.IN_HEAD;break}default:uA(e,t)}}function Gnt(e,t){const n=t.tagID;n===R.HEAD||n===R.BODY||n===R.HTML||n===R.BR?uA(e,t):e._err(t,De.endTagWithoutMatchingOpenElement)}function uA(e,t){e._insertFakeElement(Te.HEAD,R.HEAD),e.headElement=e.openElements.current,e.insertionMode=oe.IN_HEAD,e._processToken(t)}function Xf(e,t){switch(t.tagID){case R.HTML:{xa(e,t);break}case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:{e._appendElement(t,ze.HTML),t.ackSelfClosing=!0;break}case R.TITLE:{e._switchToTextParsing(t,rs.RCDATA);break}case R.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,rs.RAWTEXT):(e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_HEAD_NO_SCRIPT);break}case R.NOFRAMES:case R.STYLE:{e._switchToTextParsing(t,rs.RAWTEXT);break}case R.SCRIPT:{e._switchToTextParsing(t,rs.SCRIPT_DATA);break}case R.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=oe.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(oe.IN_TEMPLATE);break}case R.HEAD:{e._err(t,De.misplacedStartTagForHeadElement);break}default:lA(e,t)}}function Ynt(e,t){switch(t.tagID){case R.HEAD:{e.openElements.pop(),e.insertionMode=oe.AFTER_HEAD;break}case R.BODY:case R.BR:case R.HTML:{lA(e,t);break}case R.TEMPLATE:{Db(e,t);break}default:e._err(t,De.endTagWithoutMatchingOpenElement)}}function Db(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==R.TEMPLATE&&e._err(t,De.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(R.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,De.endTagWithoutMatchingOpenElement)}function lA(e,t){e.openElements.pop(),e.insertionMode=oe.AFTER_HEAD,e._processToken(t)}function Knt(e,t){switch(t.tagID){case R.HTML:{xa(e,t);break}case R.BASEFONT:case R.BGSOUND:case R.HEAD:case R.LINK:case R.META:case R.NOFRAMES:case R.STYLE:{Xf(e,t);break}case R.NOSCRIPT:{e._err(t,De.nestedNoscriptInHead);break}default:cA(e,t)}}function Xnt(e,t){switch(t.tagID){case R.NOSCRIPT:{e.openElements.pop(),e.insertionMode=oe.IN_HEAD;break}case R.BR:{cA(e,t);break}default:e._err(t,De.endTagWithoutMatchingOpenElement)}}function cA(e,t){const n=t.type===Cn.EOF?De.openElementsLeftAfterEof:De.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=oe.IN_HEAD,e._processToken(t)}function Qnt(e,t){switch(t.tagID){case R.HTML:{xa(e,t);break}case R.BODY:{e._insertElement(t,ze.HTML),e.framesetOk=!1,e.insertionMode=oe.IN_BODY;break}case R.FRAMESET:{e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_FRAMESET;break}case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:case R.NOFRAMES:case R.SCRIPT:case R.STYLE:case R.TEMPLATE:case R.TITLE:{e._err(t,De.abandonedHeadElementChild),e.openElements.push(e.headElement,R.HEAD),Xf(e,t),e.openElements.remove(e.headElement);break}case R.HEAD:{e._err(t,De.misplacedStartTagForHeadElement);break}default:fA(e,t)}}function Jnt(e,t){switch(t.tagID){case R.BODY:case R.HTML:case R.BR:{fA(e,t);break}case R.TEMPLATE:{Db(e,t);break}default:e._err(t,De.endTagWithoutMatchingOpenElement)}}function fA(e,t){e._insertFakeElement(Te.BODY,R.BODY),e.insertionMode=oe.IN_BODY,qL(e,t)}function qL(e,t){switch(t.type){case Cn.CHARACTER:{mEe(e,t);break}case Cn.WHITESPACE_CHARACTER:{pEe(e,t);break}case Cn.COMMENT:{r7(e,t);break}case Cn.START_TAG:{xa(e,t);break}case Cn.END_TAG:{WL(e,t);break}case Cn.EOF:{bEe(e,t);break}}}function pEe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function mEe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Znt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function ert(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function trt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_FRAMESET)}function nrt(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,ze.HTML)}function rrt(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),rEe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,ze.HTML)}function irt(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,ze.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function srt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,ze.HTML),n||(e.formElement=e.openElements.current))}function ort(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===R.LI&&i===R.LI||(n===R.DD||n===R.DT)&&(i===R.DD||i===R.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==R.ADDRESS&&i!==R.DIV&&i!==R.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,ze.HTML)}function art(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,ze.HTML),e.tokenizer.state=rs.PLAINTEXT}function urt(e,t){e.openElements.hasInScope(R.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML),e.framesetOk=!1}function lrt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Te.A);n&&(CY(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function crt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function frt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(R.NOBR)&&(CY(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,ze.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function drt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function hrt(e,t){e.treeAdapter.getDocumentMode(e.document)!==dl.QUIRKS&&e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,ze.HTML),e.framesetOk=!1,e.insertionMode=oe.IN_TABLE}function gEe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ze.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function yEe(e){const t=eEe(e,p0.TYPE);return t!=null&&t.toLowerCase()===Nnt}function prt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ze.HTML),yEe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function mrt(e,t){e._appendElement(t,ze.HTML),t.ackSelfClosing=!0}function grt(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._appendElement(t,ze.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function yrt(e,t){t.tagName=Te.IMG,t.tagID=R.IMG,gEe(e,t)}function vrt(e,t){e._insertElement(t,ze.HTML),e.skipNextNewLine=!0,e.tokenizer.state=rs.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=oe.TEXT}function brt(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,rs.RAWTEXT)}function _rt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,rs.RAWTEXT)}function qae(e,t){e._switchToTextParsing(t,rs.RAWTEXT)}function wrt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===oe.IN_TABLE||e.insertionMode===oe.IN_CAPTION||e.insertionMode===oe.IN_TABLE_BODY||e.insertionMode===oe.IN_ROW||e.insertionMode===oe.IN_CELL?oe.IN_SELECT_IN_TABLE:oe.IN_SELECT}function Ert(e,t){e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML)}function xrt(e,t){e.openElements.hasInScope(R.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,ze.HTML)}function Srt(e,t){e.openElements.hasInScope(R.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(R.RTC),e._insertElement(t,ze.HTML)}function Trt(e,t){e._reconstructActiveFormattingElements(),fEe(t),AY(t),t.selfClosing?e._appendElement(t,ze.MATHML):e._insertElement(t,ze.MATHML),t.ackSelfClosing=!0}function Art(e,t){e._reconstructActiveFormattingElements(),dEe(t),AY(t),t.selfClosing?e._appendElement(t,ze.SVG):e._insertElement(t,ze.SVG),t.ackSelfClosing=!0}function Wae(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ze.HTML)}function xa(e,t){switch(t.tagID){case R.I:case R.S:case R.B:case R.U:case R.EM:case R.TT:case R.BIG:case R.CODE:case R.FONT:case R.SMALL:case R.STRIKE:case R.STRONG:{crt(e,t);break}case R.A:{lrt(e,t);break}case R.H1:case R.H2:case R.H3:case R.H4:case R.H5:case R.H6:{rrt(e,t);break}case R.P:case R.DL:case R.OL:case R.UL:case R.DIV:case R.DIR:case R.NAV:case R.MAIN:case R.MENU:case R.ASIDE:case R.CENTER:case R.FIGURE:case R.FOOTER:case R.HEADER:case R.HGROUP:case R.DIALOG:case R.DETAILS:case R.ADDRESS:case R.ARTICLE:case R.SECTION:case R.SUMMARY:case R.FIELDSET:case R.BLOCKQUOTE:case R.FIGCAPTION:{nrt(e,t);break}case R.LI:case R.DD:case R.DT:{ort(e,t);break}case R.BR:case R.IMG:case R.WBR:case R.AREA:case R.EMBED:case R.KEYGEN:{gEe(e,t);break}case R.HR:{grt(e,t);break}case R.RB:case R.RTC:{xrt(e,t);break}case R.RT:case R.RP:{Srt(e,t);break}case R.PRE:case R.LISTING:{irt(e,t);break}case R.XMP:{brt(e,t);break}case R.SVG:{Art(e,t);break}case R.HTML:{Znt(e,t);break}case R.BASE:case R.LINK:case R.META:case R.STYLE:case R.TITLE:case R.SCRIPT:case R.BGSOUND:case R.BASEFONT:case R.TEMPLATE:{Xf(e,t);break}case R.BODY:{ert(e,t);break}case R.FORM:{srt(e,t);break}case R.NOBR:{frt(e,t);break}case R.MATH:{Trt(e,t);break}case R.TABLE:{hrt(e,t);break}case R.INPUT:{prt(e,t);break}case R.PARAM:case R.TRACK:case R.SOURCE:{mrt(e,t);break}case R.IMAGE:{yrt(e,t);break}case R.BUTTON:{urt(e,t);break}case R.APPLET:case R.OBJECT:case R.MARQUEE:{drt(e,t);break}case R.IFRAME:{_rt(e,t);break}case R.SELECT:{wrt(e,t);break}case R.OPTION:case R.OPTGROUP:{Ert(e,t);break}case R.NOEMBED:{qae(e,t);break}case R.FRAMESET:{trt(e,t);break}case R.TEXTAREA:{vrt(e,t);break}case R.NOSCRIPT:{e.options.scriptingEnabled?qae(e,t):Wae(e,t);break}case R.PLAINTEXT:{art(e,t);break}case R.COL:case R.TH:case R.TD:case R.TR:case R.HEAD:case R.FRAME:case R.TBODY:case R.TFOOT:case R.THEAD:case R.CAPTION:case R.COLGROUP:break;default:Wae(e,t)}}function Crt(e,t){if(e.openElements.hasInScope(R.BODY)&&(e.insertionMode=oe.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Irt(e,t){e.openElements.hasInScope(R.BODY)&&(e.insertionMode=oe.AFTER_BODY,CEe(e,t))}function krt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Rrt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(R.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(R.FORM):n&&e.openElements.remove(n))}function Nrt(e){e.openElements.hasInButtonScope(R.P)||e._insertFakeElement(Te.P,R.P),e._closePElement()}function Prt(e){e.openElements.hasInListItemScope(R.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(R.LI),e.openElements.popUntilTagNamePopped(R.LI))}function Drt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Ort(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function $rt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Mrt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Te.BR,R.BR),e.openElements.pop(),e.framesetOk=!1}function vEe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==R.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function WL(e,t){switch(t.tagID){case R.A:case R.B:case R.I:case R.S:case R.U:case R.EM:case R.TT:case R.BIG:case R.CODE:case R.FONT:case R.NOBR:case R.SMALL:case R.STRIKE:case R.STRONG:{CY(e,t);break}case R.P:{Nrt(e);break}case R.DL:case R.UL:case R.OL:case R.DIR:case R.DIV:case R.NAV:case R.PRE:case R.MAIN:case R.MENU:case R.ASIDE:case R.BUTTON:case R.CENTER:case R.FIGURE:case R.FOOTER:case R.HEADER:case R.HGROUP:case R.DIALOG:case R.ADDRESS:case R.ARTICLE:case R.DETAILS:case R.SECTION:case R.SUMMARY:case R.LISTING:case R.FIELDSET:case R.BLOCKQUOTE:case R.FIGCAPTION:{krt(e,t);break}case R.LI:{Prt(e);break}case R.DD:case R.DT:{Drt(e,t);break}case R.H1:case R.H2:case R.H3:case R.H4:case R.H5:case R.H6:{Ort(e);break}case R.BR:{Mrt(e);break}case R.BODY:{Crt(e,t);break}case R.HTML:{Irt(e,t);break}case R.FORM:{Rrt(e);break}case R.APPLET:case R.OBJECT:case R.MARQUEE:{$rt(e,t);break}case R.TEMPLATE:{Db(e,t);break}default:vEe(e,t)}}function bEe(e,t){e.tmplInsertionModeStack.length>0?AEe(e,t):IY(e,t)}function Lrt(e,t){var n;t.tagID===R.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Frt(e,t){e._err(t,De.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function zj(e,t){if(hEe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=oe.IN_TABLE_TEXT,t.type){case Cn.CHARACTER:{wEe(e,t);break}case Cn.WHITESPACE_CHARACTER:{_Ee(e,t);break}}else rk(e,t)}function jrt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_CAPTION}function Brt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_COLUMN_GROUP}function Urt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Te.COLGROUP,R.COLGROUP),e.insertionMode=oe.IN_COLUMN_GROUP,kY(e,t)}function zrt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_TABLE_BODY}function Vrt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Te.TBODY,R.TBODY),e.insertionMode=oe.IN_TABLE_BODY,GL(e,t)}function Hrt(e,t){e.openElements.hasInTableScope(R.TABLE)&&(e.openElements.popUntilTagNamePopped(R.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function qrt(e,t){yEe(t)?e._appendElement(t,ze.HTML):rk(e,t),t.ackSelfClosing=!0}function Wrt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,ze.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function TE(e,t){switch(t.tagID){case R.TD:case R.TH:case R.TR:{Vrt(e,t);break}case R.STYLE:case R.SCRIPT:case R.TEMPLATE:{Xf(e,t);break}case R.COL:{Urt(e,t);break}case R.FORM:{Wrt(e,t);break}case R.TABLE:{Hrt(e,t);break}case R.TBODY:case R.TFOOT:case R.THEAD:{zrt(e,t);break}case R.INPUT:{qrt(e,t);break}case R.CAPTION:{jrt(e,t);break}case R.COLGROUP:{Brt(e,t);break}default:rk(e,t)}}function wC(e,t){switch(t.tagID){case R.TABLE:{e.openElements.hasInTableScope(R.TABLE)&&(e.openElements.popUntilTagNamePopped(R.TABLE),e._resetInsertionMode());break}case R.TEMPLATE:{Db(e,t);break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TBODY:case R.TD:case R.TFOOT:case R.TH:case R.THEAD:case R.TR:break;default:rk(e,t)}}function rk(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,qL(e,t),e.fosterParentingEnabled=n}function _Ee(e,t){e.pendingCharacterTokens.push(t)}function wEe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function pT(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)rk(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const EEe=new Set([R.CAPTION,R.COL,R.COLGROUP,R.TBODY,R.TD,R.TFOOT,R.TH,R.THEAD,R.TR]);function Grt(e,t){const n=t.tagID;EEe.has(n)?e.openElements.hasInTableScope(R.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=oe.IN_TABLE,TE(e,t)):xa(e,t)}function Yrt(e,t){const n=t.tagID;switch(n){case R.CAPTION:case R.TABLE:{e.openElements.hasInTableScope(R.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=oe.IN_TABLE,n===R.TABLE&&wC(e,t));break}case R.BODY:case R.COL:case R.COLGROUP:case R.HTML:case R.TBODY:case R.TD:case R.TFOOT:case R.TH:case R.THEAD:case R.TR:break;default:WL(e,t)}}function kY(e,t){switch(t.tagID){case R.HTML:{xa(e,t);break}case R.COL:{e._appendElement(t,ze.HTML),t.ackSelfClosing=!0;break}case R.TEMPLATE:{Xf(e,t);break}default:FO(e,t)}}function Krt(e,t){switch(t.tagID){case R.COLGROUP:{e.openElements.currentTagId===R.COLGROUP&&(e.openElements.pop(),e.insertionMode=oe.IN_TABLE);break}case R.TEMPLATE:{Db(e,t);break}case R.COL:break;default:FO(e,t)}}function FO(e,t){e.openElements.currentTagId===R.COLGROUP&&(e.openElements.pop(),e.insertionMode=oe.IN_TABLE,e._processToken(t))}function GL(e,t){switch(t.tagID){case R.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_ROW;break}case R.TH:case R.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Te.TR,R.TR),e.insertionMode=oe.IN_ROW,YL(e,t);break}case R.CAPTION:case R.COL:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE,TE(e,t));break}default:TE(e,t)}}function i7(e,t){const n=t.tagID;switch(t.tagID){case R.TBODY:case R.TFOOT:case R.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE);break}case R.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE,wC(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TD:case R.TH:case R.TR:break;default:wC(e,t)}}function YL(e,t){switch(t.tagID){case R.TH:case R.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,ze.HTML),e.insertionMode=oe.IN_CELL,e.activeFormattingElements.insertMarker();break}case R.CAPTION:case R.COL:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:case R.TR:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE_BODY,GL(e,t));break}default:TE(e,t)}}function xEe(e,t){switch(t.tagID){case R.TR:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE_BODY);break}case R.TABLE:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE_BODY,i7(e,t));break}case R.TBODY:case R.TFOOT:case R.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(R.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE_BODY,i7(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TD:case R.TH:break;default:wC(e,t)}}function Xrt(e,t){const n=t.tagID;EEe.has(n)?(e.openElements.hasInTableScope(R.TD)||e.openElements.hasInTableScope(R.TH))&&(e._closeTableCell(),YL(e,t)):xa(e,t)}function Qrt(e,t){const n=t.tagID;switch(n){case R.TD:case R.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=oe.IN_ROW);break}case R.TABLE:case R.TBODY:case R.TFOOT:case R.THEAD:case R.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),xEe(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:break;default:WL(e,t)}}function SEe(e,t){switch(t.tagID){case R.HTML:{xa(e,t);break}case R.OPTION:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e._insertElement(t,ze.HTML);break}case R.OPTGROUP:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e.openElements.currentTagId===R.OPTGROUP&&e.openElements.pop(),e._insertElement(t,ze.HTML);break}case R.INPUT:case R.KEYGEN:case R.TEXTAREA:case R.SELECT:{e.openElements.hasInSelectScope(R.SELECT)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),t.tagID!==R.SELECT&&e._processStartTag(t));break}case R.SCRIPT:case R.TEMPLATE:{Xf(e,t);break}}}function TEe(e,t){switch(t.tagID){case R.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===R.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===R.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===R.OPTGROUP&&e.openElements.pop();break}case R.OPTION:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop();break}case R.SELECT:{e.openElements.hasInSelectScope(R.SELECT)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode());break}case R.TEMPLATE:{Db(e,t);break}}}function Jrt(e,t){const n=t.tagID;n===R.CAPTION||n===R.TABLE||n===R.TBODY||n===R.TFOOT||n===R.THEAD||n===R.TR||n===R.TD||n===R.TH?(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),e._processStartTag(t)):SEe(e,t)}function Zrt(e,t){const n=t.tagID;n===R.CAPTION||n===R.TABLE||n===R.TBODY||n===R.TFOOT||n===R.THEAD||n===R.TR||n===R.TD||n===R.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),e.onEndTag(t)):TEe(e,t)}function eit(e,t){switch(t.tagID){case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:case R.NOFRAMES:case R.SCRIPT:case R.STYLE:case R.TEMPLATE:case R.TITLE:{Xf(e,t);break}case R.CAPTION:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:{e.tmplInsertionModeStack[0]=oe.IN_TABLE,e.insertionMode=oe.IN_TABLE,TE(e,t);break}case R.COL:{e.tmplInsertionModeStack[0]=oe.IN_COLUMN_GROUP,e.insertionMode=oe.IN_COLUMN_GROUP,kY(e,t);break}case R.TR:{e.tmplInsertionModeStack[0]=oe.IN_TABLE_BODY,e.insertionMode=oe.IN_TABLE_BODY,GL(e,t);break}case R.TD:case R.TH:{e.tmplInsertionModeStack[0]=oe.IN_ROW,e.insertionMode=oe.IN_ROW,YL(e,t);break}default:e.tmplInsertionModeStack[0]=oe.IN_BODY,e.insertionMode=oe.IN_BODY,xa(e,t)}}function tit(e,t){t.tagID===R.TEMPLATE&&Db(e,t)}function AEe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(R.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):IY(e,t)}function nit(e,t){t.tagID===R.HTML?xa(e,t):jO(e,t)}function CEe(e,t){var n;if(t.tagID===R.HTML){if(e.fragmentContext||(e.insertionMode=oe.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===R.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else jO(e,t)}function jO(e,t){e.insertionMode=oe.IN_BODY,qL(e,t)}function rit(e,t){switch(t.tagID){case R.HTML:{xa(e,t);break}case R.FRAMESET:{e._insertElement(t,ze.HTML);break}case R.FRAME:{e._appendElement(t,ze.HTML),t.ackSelfClosing=!0;break}case R.NOFRAMES:{Xf(e,t);break}}}function iit(e,t){t.tagID===R.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==R.FRAMESET&&(e.insertionMode=oe.AFTER_FRAMESET))}function sit(e,t){switch(t.tagID){case R.HTML:{xa(e,t);break}case R.NOFRAMES:{Xf(e,t);break}}}function oit(e,t){t.tagID===R.HTML&&(e.insertionMode=oe.AFTER_AFTER_FRAMESET)}function ait(e,t){t.tagID===R.HTML?xa(e,t):JP(e,t)}function JP(e,t){e.insertionMode=oe.IN_BODY,qL(e,t)}function uit(e,t){switch(t.tagID){case R.HTML:{xa(e,t);break}case R.NOFRAMES:{Xf(e,t);break}}}function lit(e,t){t.chars=pi,e._insertCharacters(t)}function cit(e,t){e._insertCharacters(t),e.framesetOk=!1}function IEe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==ze.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function fit(e,t){if(Ant(t))IEe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===ze.MATHML?fEe(t):r===ze.SVG&&(Cnt(t),dEe(t)),AY(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function dit(e,t){if(t.tagID===R.P||t.tagID===R.BR){IEe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===ze.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Te.AREA,Te.BASE,Te.BASEFONT,Te.BGSOUND,Te.BR,Te.COL,Te.EMBED,Te.FRAME,Te.HR,Te.IMG,Te.INPUT,Te.KEYGEN,Te.LINK,Te.META,Te.PARAM,Te.SOURCE,Te.TRACK,Te.WBR;const hit=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Gae={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function kEe(e,t){const n=xit(e),r=Kwe("type",{handlers:{root:pit,element:mit,text:git,comment:NEe,doctype:yit,raw:bit},unknown:_it}),i={parser:n?new Hae(Gae):Hae.getFragmentParser(void 0,Gae),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),Zx(i,Lh());const s=n?i.parser.document:i.parser.getFragment(),o=Ttt(s,{file:i.options.file});return i.stitches&&EY(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function REe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function pit(e,t){REe(e.children,t)}function mit(e,t){wit(e,t),REe(e.children,t),Eit(e,t)}function git(e,t){const n={type:Cn.CHARACTER,chars:e.value,location:ik(e)};Zx(t,Lh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function yit(e,t){const n={type:Cn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:ik(e)};Zx(t,Lh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function vit(e,t){t.stitches=!0;const n=Sit(e);if("children"in e&&"children"in n){const r=kEe({type:"root",children:e.children},t.options);n.children=r.children}NEe({type:"comment",value:{stitch:n}},t)}function NEe(e,t){const n=e.value,r={type:Cn.COMMENT,data:n,location:ik(e)};Zx(t,Lh(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function bit(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,PEe(t,Lh(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function _it(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))vit(n,t);else{let r="";throw hit.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Zx(e,t){PEe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=rs.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function PEe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function wit(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===rs.PLAINTEXT)return;Zx(t,Lh(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:Qv.html;i===Qv.html&&n==="svg"&&(i=Qv.svg);const s=Rtt({...e,children:[]},{space:i===Qv.svg?"svg":"html"}),o={type:Cn.START_TAG,tagName:n,tagID:Jx(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:ik(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function Eit(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Ftt.includes(n)||t.parser.tokenizer.state===rs.PLAINTEXT)return;Zx(t,UL(e));const r={type:Cn.END_TAG,tagName:n,tagID:Jx(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:ik(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===rs.RCDATA||t.parser.tokenizer.state===rs.RAWTEXT||t.parser.tokenizer.state===rs.SCRIPT_DATA)&&(t.parser.tokenizer.state=rs.DATA)}function xit(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function ik(e){const t=Lh(e)||{line:void 0,column:void 0,offset:void 0},n=UL(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Sit(e){return"children"in e?SE({...e,children:[]}):SE(e)}function Tit(e){return function(t,n){return kEe(t,{...e,file:n})}}function Wa({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return _.jsx(Ty,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return _.jsx(it,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return _.jsx(Ei,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return _.jsx(Ei,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return _.jsx(Ei,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return _.jsx(Ei,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return _.jsx(Ei,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return _.jsx(Ei,{...s,order:6,...s,pb:12})},a({node:i,...s}){return _.jsx(Bx,{...s,ref:void 0})},ul({node:i,...s}){return _.jsx(Pf,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return _.jsx(Pf,{type:"ordered",withPadding:!0,...o,pb:8})}};return _.jsx(dtt,{components:n,rehypePlugins:[Tit],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function s7({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return _.jsx(Wa,{text:n})}const Ait="https://github.com/revisit-studies/study/tree/main/public/";function Cit({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Hm();return _.jsx(ci.Main,{children:_.jsxs(Cc,{size:"xs",px:"xs",children:[_.jsx(Ty,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Fu}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),_.jsx(it,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=awe(i);return _.jsx(_s,{onClick:a=>{a.preventDefault(),r(`/${o}`)},my:"sm",style:{width:"100%"},children:_.jsxs(Cb,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(it,{fw:"bold",children:i}),_.jsxs(Pt,{align:"center",direction:"row",children:[_.jsx(joe,{color:"red"}),_.jsx(it,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),_.jsx(s7,{issues:s.errors,type:"error"})]}):_.jsxs(_.Fragment,{children:[_.jsxs(Pt,{direction:"row",justify:"space-between",children:[_.jsx(it,{fw:"bold",children:s.studyMetadata.title}),_.jsx(Ab,{onClick:a=>{a.stopPropagation()},variant:"transparent",size:20,style:{float:"right"},component:"a",href:`${Fu}${o}`,children:_.jsx(AXe,{style:{paddingTop:4}})})]}),_.jsxs(it,{c:"dimmed",children:[_.jsx(it,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),_.jsx(it,{c:"dimmed",children:s.studyMetadata.description}),_.jsx(it,{c:"dimmed",ta:"right",style:{paddingRight:5},children:_.jsxs(Bx,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${Ait}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(Pt,{align:"center",direction:"row",children:[_.jsx(joe,{color:"orange"}),_.jsx(it,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(s7,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var DEe={exports:{}},OEe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sk=I;function Iit(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kit=typeof Object.is=="function"?Object.is:Iit,Rit=sk.useSyncExternalStore,Nit=sk.useRef,Pit=sk.useEffect,Dit=sk.useMemo,Oit=sk.useDebugValue;OEe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Nit(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Dit(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,kit(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=Rit(e,s[0],s[1]);return Pit(function(){o.hasValue=!0,o.value=a},[a]),Oit(a),a};DEe.exports=OEe;var $it=DEe.exports,wl="default"in QD?vr:QD,Yae=Symbol.for("react-redux-context"),Kae=typeof globalThis<"u"?globalThis:{};function Mit(){if(!wl.createContext)return{};const e=Kae[Yae]??(Kae[Yae]=new Map);let t=e.get(wl.createContext);return t||(t=wl.createContext(null),e.set(wl.createContext,t)),t}var O0=Mit(),Lit=()=>{throw new Error("uSES not initialized!")};function RY(e=O0){return function(){return wl.useContext(e)}}var $Ee=RY(),MEe=Lit,Fit=e=>{MEe=e},jit=(e,t)=>e===t;function Bit(e=O0){const t=e===O0?$Ee:RY(e),n=(r,i={})=>{const{equalityFn:s=jit,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();wl.useRef(!0);const d=wl.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=MEe(u.addNestedSub,a.getState,l||a.getState,d,s);return wl.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var Uit=Bit();function zit(e){e()}function Vit(){let e=null,t=null;return{clear(){e=null,t=null},notify(){zit(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Xae={notify(){},get:()=>[]};function Hit(e,t){let n,r=Xae,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Vit())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Xae)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var qit=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Wit=typeof navigator<"u"&&navigator.product==="ReactNative",Git=qit||Wit?wl.useLayoutEffect:wl.useEffect;function Yit({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=wl.useMemo(()=>{const l=Hit(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=wl.useMemo(()=>e.getState(),[e]);Git(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||O0;return wl.createElement(u.Provider,{value:o},n)}var Kit=Yit;function LEe(e=O0){const t=e===O0?$Ee:RY(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Xit=LEe();function Qit(e=O0){const t=e===O0?Xit:LEe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var FEe=Qit();Fit($it.useSyncExternalStoreWithSelector);function bo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Jit=typeof Symbol=="function"&&Symbol.observable||"@@observable",Qae=Jit,Vj=()=>Math.random().toString(36).substring(7).split("").join("."),Zit={INIT:`@@redux/INIT${Vj()}`,REPLACE:`@@redux/REPLACE${Vj()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Vj()}`},BO=Zit;function NY(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function jEe(e,t,n){if(typeof e!="function")throw new Error(bo(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(bo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(bo(1));return n(jEe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(bo(3));return i}function f(g){if(typeof g!="function")throw new Error(bo(4));if(u)throw new Error(bo(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(bo(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!NY(g))throw new Error(bo(7));if(typeof g.type>"u")throw new Error(bo(8));if(typeof g.type!="string")throw new Error(bo(17));if(u)throw new Error(bo(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(bo(10));r=g,d({type:BO.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(bo(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[Qae](){return this}}}return d({type:BO.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[Qae]:p}}function est(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:BO.INIT})>"u")throw new Error(bo(12));if(typeof n(void 0,{type:BO.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(bo(13))})}function tst(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{est(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(bo(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function UO(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function nst(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(bo(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=UO(...a)(i.dispatch),{...i,dispatch:s}}}function rst(e){return NY(e)&&"type"in e&&typeof e.type=="string"}var BEe=Symbol.for("immer-nothing"),Jae=Symbol.for("immer-draftable"),Dl=Symbol.for("immer-state");function gf(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var AE=Object.getPrototypeOf;function $0(e){return!!e&&!!e[Dl]}function pm(e){var t;return e?UEe(e)||Array.isArray(e)||!!e[Jae]||!!((t=e.constructor)!=null&&t[Jae])||XL(e)||QL(e):!1}var ist=Object.prototype.constructor.toString();function UEe(e){if(!e||typeof e!="object")return!1;const t=AE(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===ist}function zO(e,t){KL(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function KL(e){const t=e[Dl];return t?t.type_:Array.isArray(e)?1:XL(e)?2:QL(e)?3:0}function o7(e,t){return KL(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function zEe(e,t,n){const r=KL(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function sst(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function XL(e){return e instanceof Map}function QL(e){return e instanceof Set}function _v(e){return e.copy_||e.base_}function a7(e,t){if(XL(e))return new Map(e);if(QL(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=UEe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Dl];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(AE(e),r)}else{const r=AE(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function PY(e,t=!1){return JL(e)||$0(e)||!pm(e)||(KL(e)>1&&(e.set=e.add=e.clear=e.delete=ost),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>PY(r,!0))),e}function ost(){gf(2)}function JL(e){return Object.isFrozen(e)}var ast={};function $1(e){const t=ast[e];return t||gf(0,e),t}var EC;function VEe(){return EC}function ust(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Zae(e,t){t&&($1("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function u7(e){l7(e),e.drafts_.forEach(lst),e.drafts_=null}function l7(e){e===EC&&(EC=e.parent_)}function eue(e){return EC=ust(EC,e)}function lst(e){const t=e[Dl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function tue(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Dl].modified_&&(u7(t),gf(4)),pm(e)&&(e=VO(t,e),t.parent_||HO(t,e)),t.patches_&&$1("Patches").generateReplacementPatches_(n[Dl].base_,e,t.patches_,t.inversePatches_)):e=VO(t,n,[]),u7(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==BEe?e:void 0}function VO(e,t,n){if(JL(t))return t;const r=t[Dl];if(!r)return zO(t,(i,s)=>nue(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return HO(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),zO(s,(a,u)=>nue(e,r,i,a,u,n,o)),HO(e,i,!1),n&&e.patches_&&$1("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function nue(e,t,n,r,i,s,o){if($0(i)){const a=s&&t&&t.type_!==3&&!o7(t.assigned_,r)?s.concat(r):void 0,u=VO(e,i,a);if(zEe(n,r,u),$0(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(pm(i)&&!JL(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;VO(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&HO(e,i)}}function HO(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&PY(t,n)}function cst(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:VEe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=DY;n&&(i=[r],s=xC);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var DY={get(e,t){if(t===Dl)return e;const n=_v(e);if(!o7(n,t))return fst(e,n,t);const r=n[t];return e.finalized_||!pm(r)?r:r===Hj(e.base_,t)?(qj(e),e.copy_[t]=f7(r,e)):r},has(e,t){return t in _v(e)},ownKeys(e){return Reflect.ownKeys(_v(e))},set(e,t,n){const r=HEe(_v(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Hj(_v(e),t),s=i==null?void 0:i[Dl];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(sst(n,i)&&(n!==void 0||o7(e.base_,t)))return!0;qj(e),c7(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Hj(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,qj(e),c7(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=_v(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){gf(11)},getPrototypeOf(e){return AE(e.base_)},setPrototypeOf(){gf(12)}},xC={};zO(DY,(e,t)=>{xC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});xC.deleteProperty=function(e,t){return xC.set.call(this,e,t,void 0)};xC.set=function(e,t,n){return DY.set.call(this,e[0],t,n,e[0])};function Hj(e,t){const n=e[Dl];return(n?_v(n):e)[t]}function fst(e,t,n){var i;const r=HEe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function HEe(e,t){if(!(t in e))return;let n=AE(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=AE(n)}}function c7(e){e.modified_||(e.modified_=!0,e.parent_&&c7(e.parent_))}function qj(e){e.copy_||(e.copy_=a7(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var dst=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&gf(6),r!==void 0&&typeof r!="function"&&gf(7);let i;if(pm(t)){const s=eue(this),o=f7(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?u7(s):l7(s)}return Zae(s,r),tue(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===BEe&&(i=void 0),this.autoFreeze_&&PY(i,!0),r){const s=[],o=[];$1("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else gf(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){pm(e)||gf(8),$0(e)&&(e=qEe(e));const t=eue(this),n=f7(e,void 0);return n[Dl].isManual_=!0,l7(t),n}finishDraft(e,t){const n=e&&e[Dl];(!n||!n.isManual_)&&gf(9);const{scope_:r}=n;return Zae(r,t),tue(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=$1("Patches").applyPatches_;return $0(e)?r(e,t):this.produce(e,i=>r(i,t))}};function f7(e,t){const n=XL(e)?$1("MapSet").proxyMap_(e,t):QL(e)?$1("MapSet").proxySet_(e,t):cst(e,t);return(t?t.scope_:VEe()).drafts_.push(n),n}function qEe(e){return $0(e)||gf(10,e),WEe(e)}function WEe(e){if(!pm(e)||JL(e))return e;const t=e[Dl];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=a7(e,t.scope_.immer_.useStrictShallowCopy_)}else n=a7(e,!0);return zO(n,(r,i)=>{zEe(n,r,WEe(i))}),t&&(t.finalized_=!1),n}var Ol=new dst,GEe=Ol.produce;Ol.produceWithPatches.bind(Ol);Ol.setAutoFreeze.bind(Ol);Ol.setUseStrictShallowCopy.bind(Ol);Ol.applyPatches.bind(Ol);Ol.createDraft.bind(Ol);Ol.finishDraft.bind(Ol);function hst(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function pst(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function mst(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var rue=e=>Array.isArray(e)?e:[e];function gst(e){const t=Array.isArray(e[0])?e[0]:e;return mst(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function yst(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var vst=class{constructor(e){this.value=e}deref(){return this.value}},bst=typeof WeakRef<"u"?WeakRef:vst,_st=0,iue=1;function yN(){return{s:_st,v:void 0,o:null,p:null}}function OY(e,t={}){let n=yN();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=yN(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=yN(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===iue)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new bst(c):c}return l.s=iue,l.v=c,c}return o.clearCache=()=>{n=yN(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function YEe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),hst(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=OY,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=rue(d),y=rue(p),v=gst(i),b=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const T=yst(v,arguments);return a=b.apply(null,T),a},...y);return Object.assign(w,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var wst=YEe(OY),Est=Object.assign((e,t=wst)=>{pst(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>Est});function KEe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var xst=KEe(),Sst=KEe,Tst=(...e)=>{const t=YEe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i($0(o)?qEe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};Tst(OY);var Ast=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?UO:UO.apply(null,arguments)};function CE(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Bu(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>rst(r)&&r.type===e,n}var XEe=class u2 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,u2.prototype)}static get[Symbol.species](){return u2}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new u2(...t[0].concat(this)):new u2(...t.concat(this))}};function sue(e){return pm(e)?GEe(e,()=>{}):e}function oue(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Bu(10));const r=n.insert(t,e);return e.set(t,r),r}function Cst(e){return typeof e=="boolean"}var Ist=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new XEe;return n&&(Cst(n)?o.push(xst):o.push(Sst(n.extraArgument))),o},kst="RTK_autoBatch",QEe=e=>t=>{setTimeout(t,e)},Rst=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:QEe(10),Nst=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?Rst:e.type==="callback"?e.queueNotification:QEe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[kst]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Pst=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new XEe(e);return r&&i.push(Nst(typeof r=="object"?r:void 0)),i},Dst=!0;function Ost(e){const t=Ist(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(NY(n))a=tst(n);else throw new Error(Bu(1));let u;typeof r=="function"?u=r(t):u=t();let l=UO;i&&(l=Ast({trace:!Dst,...typeof i=="object"&&i}));const c=nst(...u),f=Pst(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return jEe(a,s,h)}function JEe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Bu(28));if(a in t)throw new Error(Bu(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function $st(e){return typeof e=="function"}function Mst(e,t){let[n,r,i]=JEe(t),s;if($st(e))s=()=>sue(e());else{const a=sue(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if($0(c)){const h=f(c,u);return h===void 0?c:h}else{if(pm(c))return GEe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(Bu(9))}return d}}return c},a)}return o.getInitialState=s,o}var Lst="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Fst=(e=21)=>{let t="",n=e;for(;n--;)t+=Lst[Math.random()*64|0];return t},jst=Symbol.for("rtk-slice-createasyncthunk");function Bst(e,t){return`${e}/${t}`}function Ust({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[jst];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Bu(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(Hst()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,w){const E=typeof b=="string"?b:b.type;if(!E)throw new Error(Bu(12));if(E in l.sliceCaseReducersByType)throw new Error(Bu(13));return l.sliceCaseReducersByType[E]=w,c},addMatcher(b,w){return l.sliceMatchers.push({matcher:b,reducer:w}),c},exposeAction(b,w){return l.actionCreators[b]=w,c},exposeCaseReducer(b,w){return l.sliceCaseReducersByName[b]=w,c}};u.forEach(b=>{const w=a[b],E={reducerName:b,type:Bst(s,b),createNotation:typeof i.reducers=="function"};Wst(w)?Yst(E,w,c,t):qst(E,w,c)});function f(){const[b={},w=[],E=void 0]=typeof i.extraReducers=="function"?JEe(i.extraReducers):[i.extraReducers],T={...b,...l.sliceCaseReducersByType};return Mst(i.initialState,S=>{for(let A in T)S.addCase(A,T[A]);for(let A of l.sliceMatchers)S.addMatcher(A.matcher,A.reducer);for(let A of w)S.addMatcher(A.matcher,A.reducer);E&&S.addDefaultCase(E)})}const d=b=>b,h=new Map;let p;function m(b,w){return p||(p=f()),p(b,w)}function g(){return p||(p=f()),p.getInitialState()}function y(b,w=!1){function E(S){let A=S[b];return typeof A>"u"&&w&&(A=g()),A}function T(S=d){const A=oue(h,w,{insert:()=>new WeakMap});return oue(A,S,{insert:()=>{const C={};for(const[k,N]of Object.entries(i.selectors??{}))C[k]=zst(N,S,g,w);return C}})}return{reducerPath:b,getSelectors:T,get selectors(){return T(E)},selectSlice:E}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:w,...E}={}){const T=w??o;return b.inject({reducerPath:T,reducer:m},E),{...v,...y(T,!0)}}};return v}}function zst(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Vst=Ust();function Hst(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function qst({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Gst(r))throw new Error(Bu(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?CE(e,o):CE(e))}function Wst(e){return e._reducerDefinitionType==="asyncThunk"}function Gst(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Yst({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Bu(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||vN,pending:a||vN,rejected:u||vN,settled:l||vN})}function vN(){}var Kst=(e,t)=>{if(typeof e!="function")throw new Error(Bu(32))},$Y="listenerMiddleware",Xst=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=CE(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Bu(21));return Kst(s),{predicate:i,type:t,effect:s}},Qst=Object.assign(e=>{const{type:t,predicate:n,effect:r}=Xst(e);return{id:Fst(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Bu(22))}}},{withTypes:()=>Qst}),Jst=Object.assign(CE(`${$Y}/add`),{withTypes:()=>Jst});CE(`${$Y}/removeAll`);var Zst=Object.assign(CE(`${$Y}/remove`),{withTypes:()=>Zst});function Bu(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function mm(e){return e.components.flatMap(t=>typeof t=="string"?t:mm(t))}function ZEe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:ZEe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function exe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+mm(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+mm(e).length-1}];r+=1}else{const o=exe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function txe(e,t){const n=exe(e,t,0);return typeof n=="number"?null:n}function nxe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=nxe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function eot(e,t){const n=nxe(e,t,0);return n.found?n.distance:-1}function rxe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...rxe(i,`${t}-${s}`))}),n}function MY(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>MY(n,`${t}-${r}`))}}async function tot(e,t,n,r,i){const s=mm(n),o=Object.fromEntries(s.filter(d=>d!=="end").map((d,h)=>[`${d}_${h}`,{answer:{}}])),a=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),u=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),l={studyId:e,answers:Object.keys(i).length>0?i:o,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?u:a,iframeAnswers:{},iframeProvenance:null,metadata:r},c=Vst({name:"storeSlice",initialState:l,reducers:{setConfig(d,h){d.config=h.payload},toggleStudyBrowser:d=>{d.showStudyBrowser=!d.showStudyBrowser},toggleShowHelpText:d=>{d.showHelpText=!d.showHelpText},setAlertModal:(d,h)=>{d.alertModal=h.payload},setIframeAnswers:(d,h)=>{d.iframeAnswers=h.payload},setIframeProvenance:(d,h)=>{d.iframeProvenance=h.payload},updateResponseBlockValidation:(d,{payload:h})=>{d.trialValidation[h.identifier]||(d.trialValidation[h.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),d.trialValidation[h.identifier][h.location]={valid:h.status,values:h.values},h.provenanceGraph&&(d.trialValidation[h.identifier].provenanceGraph=h.provenanceGraph)},saveTrialAnswer(d,{payload:h}){const{identifier:p,answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:b}=h;d.answers[p]={answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:b}}}});return{store:Ost({reducer:c.reducer,preloadedState:l}),actions:c.actions}}const ixe=I.createContext(null);function Fh(){return I.useContext(ixe).actions}const jh=FEe,Uc=Uit;function not(e){return Uc(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function LY(){return Uc(e=>mm(e.sequence))}function Ob(){const{studyId:e}=dm();return`${e}`}function qm(){const{index:e}=dm(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function ky(){const e=qm(),t=LY();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var qO={exports:{}};qO.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",w="[object RegExp]",E="[object Set]",T="[object String]",S="[object Undefined]",A="[object WeakMap]",C="[object ArrayBuffer]",k="[object DataView]",N="[object Float32Array]",O="[object Float64Array]",P="[object Int8Array]",$="[object Int16Array]",F="[object Int32Array]",M="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",H="[object Uint32Array]",D=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,j={};j[N]=j[O]=j[P]=j[$]=j[F]=j[M]=j[B]=j[U]=j[H]=!0,j[a]=j[u]=j[C]=j[c]=j[k]=j[f]=j[d]=j[h]=j[m]=j[g]=j[v]=j[w]=j[E]=j[T]=j[A]=!1;var q=typeof Zs=="object"&&Zs&&Zs.Object===Object&&Zs,G=typeof self=="object"&&self&&self.Object===Object&&self,re=q||G||Function("return this")(),de=t&&!t.nodeType&&t,pe=de&&!0&&e&&!e.nodeType&&e,ge=pe&&pe.exports===de,Ee=ge&&q.process,Z=function(){try{var ie=pe&&pe.require&&pe.require("util").types;return ie||Ee&&Ee.binding&&Ee.binding("util")}catch{}}(),Q=Z&&Z.isTypedArray;function fe(ie,ce,Pe){switch(Pe.length){case 0:return ie.call(ce);case 1:return ie.call(ce,Pe[0]);case 2:return ie.call(ce,Pe[0],Pe[1]);case 3:return ie.call(ce,Pe[0],Pe[1],Pe[2])}return ie.apply(ce,Pe)}function be(ie,ce){for(var Pe=-1,It=Array(ie);++Pe<ie;)It[Pe]=ce(Pe);return It}function Me(ie){return function(ce){return ie(ce)}}function Be(ie,ce){return ie==null?void 0:ie[ce]}function ve(ie,ce){return function(Pe){return ie(ce(Pe))}}var Re=Array.prototype,He=Function.prototype,Ze=Object.prototype,bt=re["__core-js_shared__"],Ge=He.toString,ye=Ze.hasOwnProperty,pt=function(){var ie=/[^.]+$/.exec(bt&&bt.keys&&bt.keys.IE_PROTO||"");return ie?"Symbol(src)_1."+ie:""}(),vt=Ze.toString,_e=Ge.call(Object),Ne=RegExp("^"+Ge.call(ye).replace(D,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ye=ge?re.Buffer:void 0,ct=re.Symbol,wt=re.Uint8Array;Ye&&Ye.allocUnsafe;var $n=ve(Object.getPrototypeOf,Object),Sr=Object.create,Mn=Ze.propertyIsEnumerable,ur=Re.splice,pn=ct?ct.toStringTag:void 0,Tn=function(){try{var ie=Ke(Object,"defineProperty");return ie({},"",{}),ie}catch{}}(),er=Ye?Ye.isBuffer:void 0,tr=Math.max,jo=Date.now,Di=Ke(re,"Map"),An=Ke(Object,"create"),Oi=function(){function ie(){}return function(ce){if(!op(ce))return{};if(Sr)return Sr(ce);ie.prototype=ce;var Pe=new ie;return ie.prototype=void 0,Pe}}();function Tr(ie){var ce=-1,Pe=ie==null?0:ie.length;for(this.clear();++ce<Pe;){var It=ie[ce];this.set(It[0],It[1])}}function ds(){this.__data__=An?An(null):{},this.size=0}function np(ie){var ce=this.has(ie)&&delete this.__data__[ie];return this.size-=ce?1:0,ce}function sl(ie){var ce=this.__data__;if(An){var Pe=ce[ie];return Pe===r?void 0:Pe}return ye.call(ce,ie)?ce[ie]:void 0}function ld(ie){var ce=this.__data__;return An?ce[ie]!==void 0:ye.call(ce,ie)}function wr(ie,ce){var Pe=this.__data__;return this.size+=this.has(ie)?0:1,Pe[ie]=An&&ce===void 0?r:ce,this}Tr.prototype.clear=ds,Tr.prototype.delete=np,Tr.prototype.get=sl,Tr.prototype.has=ld,Tr.prototype.set=wr;function Ai(ie){var ce=-1,Pe=ie==null?0:ie.length;for(this.clear();++ce<Pe;){var It=ie[ce];this.set(It[0],It[1])}}function Kr(){this.__data__=[],this.size=0}function su(ie){var ce=this.__data__,Pe=Xn(ce,ie);if(Pe<0)return!1;var It=ce.length-1;return Pe==It?ce.pop():ur.call(ce,Pe,1),--this.size,!0}function Sa(ie){var ce=this.__data__,Pe=Xn(ce,ie);return Pe<0?void 0:ce[Pe][1]}function Ta(ie){return Xn(this.__data__,ie)>-1}function ue(ie,ce){var Pe=this.__data__,It=Xn(Pe,ie);return It<0?(++this.size,Pe.push([ie,ce])):Pe[It][1]=ce,this}Ai.prototype.clear=Kr,Ai.prototype.delete=su,Ai.prototype.get=Sa,Ai.prototype.has=Ta,Ai.prototype.set=ue;function ne(ie){var ce=-1,Pe=ie==null?0:ie.length;for(this.clear();++ce<Pe;){var It=ie[ce];this.set(It[0],It[1])}}function le(){this.size=0,this.__data__={hash:new Tr,map:new(Di||Ai),string:new Tr}}function ke(ie){var ce=We(this,ie).delete(ie);return this.size-=ce?1:0,ce}function Ce(ie){return We(this,ie).get(ie)}function ut(ie){return We(this,ie).has(ie)}function Tt(ie,ce){var Pe=We(this,ie),It=Pe.size;return Pe.set(ie,ce),this.size+=Pe.size==It?0:1,this}ne.prototype.clear=le,ne.prototype.delete=ke,ne.prototype.get=Ce,ne.prototype.has=ut,ne.prototype.set=Tt;function Vt(ie){var ce=this.__data__=new Ai(ie);this.size=ce.size}function Pn(){this.__data__=new Ai,this.size=0}function Ln(ie){var ce=this.__data__,Pe=ce.delete(ie);return this.size=ce.size,Pe}function dn(ie){return this.__data__.get(ie)}function nr(ie){return this.__data__.has(ie)}function Ar(ie,ce){var Pe=this.__data__;if(Pe instanceof Ai){var It=Pe.__data__;if(!Di||It.length<n-1)return It.push([ie,ce]),this.size=++Pe.size,this;Pe=this.__data__=new ne(It)}return Pe.set(ie,ce),this.size=Pe.size,this}Vt.prototype.clear=Pn,Vt.prototype.delete=Ln,Vt.prototype.get=dn,Vt.prototype.has=nr,Vt.prototype.set=Ar;function zt(ie,ce){var Pe=ip(ie),It=!Pe&&ou(ie),Dn=!Pe&&!It&&sp(ie),Er=!Pe&&!It&&!Dn&&$R(ie),Vr=Pe||It||Dn||Er,jn=Vr?be(ie.length,String):[],Hr=jn.length;for(var Qi in ie)Vr&&(Qi=="length"||Dn&&(Qi=="offset"||Qi=="parent")||Er&&(Qi=="buffer"||Qi=="byteLength"||Qi=="byteOffset")||xt(Qi,Hr))||jn.push(Qi);return jn}function rr(ie,ce,Pe){(Pe!==void 0&&!Ql(ie[ce],Pe)||Pe===void 0&&!(ce in ie))&&Ci(ie,ce,Pe)}function zr(ie,ce,Pe){var It=ie[ce];(!(ye.call(ie,ce)&&Ql(It,Pe))||Pe===void 0&&!(ce in ie))&&Ci(ie,ce,Pe)}function Xn(ie,ce){for(var Pe=ie.length;Pe--;)if(Ql(ie[Pe][0],ce))return Pe;return-1}function Ci(ie,ce,Pe){ce=="__proto__"&&Tn?Tn(ie,ce,{configurable:!0,enumerable:!0,value:Pe,writable:!0}):ie[ce]=Pe}var zs=Le();function Xr(ie){return ie==null?ie===void 0?S:y:pn&&pn in Object(ie)?Xe(ie):Uo(ie)}function ho(ie){return au(ie)&&Xr(ie)==a}function $i(ie){if(!op(ie)||Fn(ie))return!1;var ce=JS(ie)?Ne:z;return ce.test(PR(ie))}function Mi(ie){return au(ie)&&OR(ie.length)&&!!j[Xr(ie)]}function Bo(ie){if(!op(ie))return Ir(ie);var ce=Cr(ie),Pe=[];for(var It in ie)It=="constructor"&&(ce||!ye.call(ie,It))||Pe.push(It);return Pe}function Aa(ie,ce,Pe,It,Dn){ie!==ce&&zs(ce,function(Er,Vr){if(Dn||(Dn=new Vt),op(Er))Vs(ie,ce,Vr,Pe,Aa,It,Dn);else{var jn=It?It(rp(ie,Vr),Er,Vr+"",ie,ce,Dn):void 0;jn===void 0&&(jn=Er),rr(ie,Vr,jn)}},Zy)}function Vs(ie,ce,Pe,It,Dn,Er,Vr){var jn=rp(ie,Pe),Hr=rp(ce,Pe),Qi=Vr.get(Hr);if(Qi){rr(ie,Pe,Qi);return}var zo=Er?Er(jn,Hr,Pe+"",ie,ce,Vr):void 0,tv=zo===void 0;if(tv){var ap=ip(Hr),a_=!ap&&sp(Hr),u_=!ap&&!a_&&$R(Hr);zo=Hr,ap||a_||u_?ip(jn)?zo=jn:DR(jn)?zo=me(jn):a_?(tv=!1,zo=Y(Hr)):u_?(tv=!1,zo=te(Hr)):zo=[]:R5(Hr)||ou(Hr)?(zo=jn,ou(jn)?zo=Jy(jn):(!op(jn)||JS(jn))&&(zo=at(Hr))):tv=!1}tv&&(Vr.set(Hr,zo),Dn(zo,Hr,It,Er,Vr),Vr.delete(Hr)),rr(ie,Pe,zo)}function Xl(ie,ce){return QS(fd(ie,ce,ug),ie+"")}var cd=Tn?function(ie,ce){return Tn(ie,"toString",{configurable:!0,enumerable:!1,value:ev(ce),writable:!0})}:ug;function Y(ie,ce){return ie.slice()}function ae(ie){var ce=new ie.constructor(ie.byteLength);return new wt(ce).set(new wt(ie)),ce}function te(ie,ce){var Pe=ae(ie.buffer);return new ie.constructor(Pe,ie.byteOffset,ie.length)}function me(ie,ce){var Pe=-1,It=ie.length;for(ce||(ce=Array(It));++Pe<It;)ce[Pe]=ie[Pe];return ce}function xe(ie,ce,Pe,It){var Dn=!Pe;Pe||(Pe={});for(var Er=-1,Vr=ce.length;++Er<Vr;){var jn=ce[Er],Hr=void 0;Hr===void 0&&(Hr=ie[jn]),Dn?Ci(Pe,jn,Hr):zr(Pe,jn,Hr)}return Pe}function he(ie){return Xl(function(ce,Pe){var It=-1,Dn=Pe.length,Er=Dn>1?Pe[Dn-1]:void 0,Vr=Dn>2?Pe[2]:void 0;for(Er=ie.length>3&&typeof Er=="function"?(Dn--,Er):void 0,Vr&&hn(Pe[0],Pe[1],Vr)&&(Er=Dn<3?void 0:Er,Dn=1),ce=Object(ce);++It<Dn;){var jn=Pe[It];jn&&ie(ce,jn,It,Er)}return ce})}function Le(ie){return function(ce,Pe,It){for(var Dn=-1,Er=Object(ce),Vr=It(ce),jn=Vr.length;jn--;){var Hr=Vr[++Dn];if(Pe(Er[Hr],Hr,Er)===!1)break}return ce}}function We(ie,ce){var Pe=ie.__data__;return Dt(ce)?Pe[typeof ce=="string"?"string":"hash"]:Pe.map}function Ke(ie,ce){var Pe=Be(ie,ce);return $i(Pe)?Pe:void 0}function Xe(ie){var ce=ye.call(ie,pn),Pe=ie[pn];try{ie[pn]=void 0;var It=!0}catch{}var Dn=vt.call(ie);return It&&(ce?ie[pn]=Pe:delete ie[pn]),Dn}function at(ie){return typeof ie.constructor=="function"&&!Cr(ie)?Oi($n(ie)):{}}function xt(ie,ce){var Pe=typeof ie;return ce=ce??o,!!ce&&(Pe=="number"||Pe!="symbol"&&W.test(ie))&&ie>-1&&ie%1==0&&ie<ce}function hn(ie,ce,Pe){if(!op(Pe))return!1;var It=typeof ce;return(It=="number"?o_(Pe)&&xt(ce,Pe.length):It=="string"&&ce in Pe)?Ql(Pe[ce],ie):!1}function Dt(ie){var ce=typeof ie;return ce=="string"||ce=="number"||ce=="symbol"||ce=="boolean"?ie!=="__proto__":ie===null}function Fn(ie){return!!pt&&pt in ie}function Cr(ie){var ce=ie&&ie.constructor,Pe=typeof ce=="function"&&ce.prototype||Ze;return ie===Pe}function Ir(ie){var ce=[];if(ie!=null)for(var Pe in Object(ie))ce.push(Pe);return ce}function Uo(ie){return vt.call(ie)}function fd(ie,ce,Pe){return ce=tr(ce===void 0?ie.length-1:ce,0),function(){for(var It=arguments,Dn=-1,Er=tr(It.length-ce,0),Vr=Array(Er);++Dn<Er;)Vr[Dn]=It[ce+Dn];Dn=-1;for(var jn=Array(ce+1);++Dn<ce;)jn[Dn]=It[Dn];return jn[ce]=Pe(Vr),fe(ie,this,jn)}}function rp(ie,ce){if(!(ce==="constructor"&&typeof ie[ce]=="function")&&ce!="__proto__")return ie[ce]}var QS=Qy(cd);function Qy(ie){var ce=0,Pe=0;return function(){var It=jo(),Dn=s-(It-Pe);if(Pe=It,Dn>0){if(++ce>=i)return arguments[0]}else ce=0;return ie.apply(void 0,arguments)}}function PR(ie){if(ie!=null){try{return Ge.call(ie)}catch{}try{return ie+""}catch{}}return""}function Ql(ie,ce){return ie===ce||ie!==ie&&ce!==ce}var ou=ho(function(){return arguments}())?ho:function(ie){return au(ie)&&ye.call(ie,"callee")&&!Mn.call(ie,"callee")},ip=Array.isArray;function o_(ie){return ie!=null&&OR(ie.length)&&!JS(ie)}function DR(ie){return au(ie)&&o_(ie)}var sp=er||LR;function JS(ie){if(!op(ie))return!1;var ce=Xr(ie);return ce==h||ce==p||ce==l||ce==b}function OR(ie){return typeof ie=="number"&&ie>-1&&ie%1==0&&ie<=o}function op(ie){var ce=typeof ie;return ie!=null&&(ce=="object"||ce=="function")}function au(ie){return ie!=null&&typeof ie=="object"}function R5(ie){if(!au(ie)||Xr(ie)!=v)return!1;var ce=$n(ie);if(ce===null)return!0;var Pe=ye.call(ce,"constructor")&&ce.constructor;return typeof Pe=="function"&&Pe instanceof Pe&&Ge.call(Pe)==_e}var $R=Q?Me(Q):Mi;function Jy(ie){return xe(ie,Zy(ie))}function Zy(ie){return o_(ie)?zt(ie):Bo(ie)}var MR=he(function(ie,ce,Pe){Aa(ie,ce,Pe)});function ev(ie){return function(){return ie}}function ug(ie){return ie}function LR(){return!1}e.exports=MR})(qO,qO.exports);var rot=qO.exports;const FY=Hl(rot);function m0(e){return structuredClone(e)}function jY(){const{answers:e}=Uc(i=>i),t=qm(),r=`${ky()}_${t}`;return e[r]}const sxe=I.createContext(null);function iot(){const e=I.useContext(sxe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function M0(){return Uc(e=>e.config)}function aue(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function oxe(){const e=qm(),t=LY(),r=`${ky()}_${e}`,{trialValidation:i,sequence:s,answers:o}=Uc(T=>T),a=jh(),{saveTrialAnswer:u,setIframeAnswers:l}=Fh(),{storageEngine:c}=Ss(),f=Ob(),[d,h]=I.useState(!0);I.useEffect(()=>{(async()=>{if(c){const S=await c.getModes(f);h(S.dataCollectionEnabled)}})()},[c,f]);const p=not(r),m=typeof e!="number"||!p,g=jY(),y=Hm(),v=M0(),b=I.useMemo(()=>Date.now(),[]),w=iot(),E=I.useCallback(()=>{if(typeof e!="number")return;const T=m0(i[r]),S=Object.values(T).reduce((F,M)=>Object.hasOwn(M,"values")?{...F,...M.values}:F,{}),{provenanceGraph:A}=T,C=Date.now(),k=w&&"current"in w&&w.current?w.current.splice(0,w.current.length):[];d&&!g.endTime&&(a(u({identifier:r,answer:S,startTime:b,endTime:C,provenanceGraph:A,windowEvents:k})),c&&c.saveAnswers({...o,[r]:{answer:S,startTime:b,endTime:C,provenanceGraph:A,windowEvents:k}}),a(l({})));let N=e+1;const O=txe(s,e),P=O!==null&&O.some(F=>Object.hasOwn(F.currentBlock,"skip")&&F.currentBlock.skip!==void 0),$={...o,[r]:{answer:S,startTime:b,endTime:C,provenanceGraph:A,windowEvents:k}};P&&[...O.flatMap(M=>M.currentBlock.skip?M.currentBlock.skip.map(B=>({...B,firstIndex:M.firstIndex,lastIndex:M.lastIndex})):[])].some(M=>{let B=!1;const U=Object.fromEntries(Object.entries($).filter(([D])=>{const z=parseInt(D.slice(D.lastIndexOf("_")+1),10);return z>=M.firstIndex&&z<=e})),H=M.check!=="block"?Object.entries(U).filter(([D])=>D.slice(0,D.lastIndexOf("_"))===M.name):Object.entries(U);if(H.length===0)return!1;if(H.some(([D,z])=>!z))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(M,null,2)}`);if(M.check==="response"||M.check==="responses"){const[D,z]=H[0];M.check==="response"?B=M.comparison==="equal"?M.value===z.answer[M.responseId]:M.value!==z.answer[M.responseId]:B=!aue(z.answer,D,v.components[D.slice(0,D.lastIndexOf("_"))],v)}else if(M.check==="block"||M.check==="repeatedComponent"){if(H.length<M.value)return!1;const D=H.map(([j,q])=>aue(q.answer,j,v.components[j.slice(0,j.lastIndexOf("_"))],v)),z=D.filter(j=>j).length,W=D.length-z;B=M.condition==="numCorrect"&&z===M.value||M.condition==="numIncorrect"&&W===M.value}if(B){const D=t.indexOf(M.to),z=D===-1?eot(s,M.to):-1;return N=D===-1?z:D,!0}return!1}),y(`/${f}/${N}${window.location.search}`)},[e,i,r,w,d,g.endTime,s,o,b,y,f,a,u,c,l,v,t]);return{isNextDisabled:m,goToNextStep:E}}function sot({label:e="Next",disabled:t=!1,onClick:n}){const{isNextDisabled:r,goToNextStep:i}=oxe(),s=I.useCallback(()=>{n&&n(),i()},[i,n]);return _.jsx(ln,{type:"submit",disabled:t||r,onClick:s,children:e})}function oot(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const aot=typeof window<"u"?I.useLayoutEffect:I.useEffect;function mo(e,t){aot(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function uot(e,t){e&&oot(e),mo(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),mo(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),mo(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),mo(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),mo(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),mo(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),mo(`mantine-form:${e}:clear-errors`,t.clearErrors),mo(`mantine-form:${e}:reset`,t.reset),mo(`mantine-form:${e}:validate`,t.validate),mo(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),mo(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),mo(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),mo(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),mo(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),mo(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),mo(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),mo(`mantine-form:${e}:reset-touched`,t.resetTouched)}function lot(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function d7(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function cot(e){const[t,n]=I.useState(d7(e)),r=I.useRef(t),i=I.useCallback(u=>{n(l=>{const c=d7(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=I.useCallback(()=>i({}),[]),o=I.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=I.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function axe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function uue(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function lue(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=axe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=uue(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=uue(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function fot(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function cue(e,t,n){typeof n.value=="object"&&(n.value=dw(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function dw(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(dw(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(dw(a),dw(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(dw(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)cue(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||cue(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function uxe(e){return typeof e!="string"?[]:e.split(".")}function ku(e,t){const n=uxe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function ZL(e,t,n){const r=uxe(e);if(r.length===0)return n;const i=dw(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function dot(e,{from:t,to:n},r){const i=ku(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),ZL(e,s,r)}function hot(e,t,n,r){const i=ku(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),ZL(e,s,r)}function pot(e,t,n){const r=ku(e,n);return Array.isArray(r)?ZL(e,r.filter((i,s)=>s!==t),n):n}function mot({$values:e,$errors:t,$status:n}){const r=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>fot(o,a,u)),e.setValues({values:dot(o,a,e.refValues.current),updateState:!0})},[]),i=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>lue(o,a,u,-1)),e.setValues({values:pot(o,a,e.refValues.current),updateState:!0})},[]),s=I.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>lue(o,u,l,1)),e.setValues({values:hot(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var BY=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const ZP=Hl(BY);function bN(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function got({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=I.useState(t),[o,a]=I.useState(e),u=I.useRef(t),l=I.useRef(e),c=I.useCallback(E=>{const T=typeof E=="function"?E(u.current):E;u.current=T,n==="controlled"&&s(T)},[]),f=I.useCallback(E=>{const T=typeof E=="function"?E(l.current):E;l.current=T,n==="controlled"&&a(T)},[]),d=I.useCallback(()=>c({}),[]),h=E=>{const T=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(T),f({})},p=I.useCallback((E,T)=>{c(S=>bN(S,E)===T?S:{...S,[E]:T})},[]),m=I.useCallback((E,T)=>{f(S=>bN(S,E)===T?S:{...S,[E]:T})},[]),g=I.useCallback(E=>bN(u.current,E),[]),y=I.useCallback(E=>f(T=>{if(typeof E!="string")return T;const S=axe(E,T);return delete S[E],ZP(S,T)?T:S}),[]),v=I.useCallback(E=>{if(E){const S=ku(E,l.current);if(typeof S=="boolean")return S;const A=ku(E,r.refValues.current),C=ku(E,r.valuesSnapshot.current);return!ZP(A,C)}return Object.keys(l.current).length>0?bN(l.current):!ZP(r.refValues.current,r.valuesSnapshot.current)},[]),b=I.useCallback(()=>l.current,[]),w=I.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:w}}function yot({initialValues:e,onValuesChange:t,mode:n}){const r=I.useRef(!1),[i,s]=I.useState(e||{}),o=I.useRef(i),a=I.useRef(i),u=I.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,w=y?{...v,...b}:b;o.current=w,g&&s(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:w,previousValues:v}))},[t]),l=I.useCallback(p=>{var y;const m=ku(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=ZL(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=I.useCallback(p=>{a.current=p},[]),f=I.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=I.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=I.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function vot({$status:e}){const t=I.useRef({}),n=I.useCallback((i,s)=>{I.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=I.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:ku(i,o.previousValues),value:ku(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function fue(e,t){return e?`${e}-${t.toString()}`:t.toString()}function due(e){const t=d7(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function h7(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=ku(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>h7(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||h7(o,t,a,i)),i},r)}function p7(e,t){return due(typeof e=="function"?e(t):h7(e,t))}function _N(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=p7(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const bot="__MANTINE_FORM_INDEX__";function hue(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${bot}`)):!1:!1}function lxe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=cot(r),p=yot({initialValues:n,onValuesChange:l,mode:t}),m=got({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=mot({$values:p,$errors:h,$status:m}),y=vot({$status:m}),[v,b]=I.useState(0),[w,E]=I.useState({}),T=I.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b(D=>D+1)},[]),S=I.useCallback(D=>{p.initialize(D,()=>t==="uncontrolled"&&b(z=>z+1))},[]),A=I.useCallback((D,z,W)=>{const j=hue(D,a);m.clearFieldDirty(D),m.setFieldTouched(D,!0),!j&&o&&h.clearFieldError(D),p.setFieldValue({path:D,value:z,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(D),j?q=>{const G=_N(D,d,q.updatedValues);G.hasError?h.setFieldError(D,G.error):h.clearFieldError(D)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>E(q=>({...q,[D]:(q[D]||0)+1})):null]})},[l,d]),C=I.useCallback(D=>{const z=p.refValues.current;p.setValues({values:D,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const j=ku(W,p.refValues.current),q=ku(W,z);j!==q&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:z,updatedValues:p.refValues.current}))})},[l,o]),k=I.useCallback(()=>{const D=p7(d,p.refValues.current);return h.setErrors(D.errors),D},[d]),N=I.useCallback(D=>{const z=_N(D,d,p.refValues.current);return z.hasError?h.setFieldError(D,z.error):h.clearFieldError(D),z},[d]),O=(D,{type:z="input",withError:W=!0,withFocus:j=!0,...q}={})=>{const re={onChange:lot(de=>A(D,de,{forceUpdate:!1})),"data-path":fue(e,D)};return W&&(re.error=h.errorsState[D]),z==="checkbox"?re[t==="controlled"?"checked":"defaultChecked"]=ku(D,p.refValues.current):re[t==="controlled"?"value":"defaultValue"]=ku(D,p.refValues.current),j&&(re.onFocus=()=>m.setFieldTouched(D,!0),re.onBlur=()=>{if(hue(D,u)){const de=_N(D,d,p.refValues.current);de.hasError?h.setFieldError(D,de.error):h.clearFieldError(D)}}),Object.assign(re,f==null?void 0:f({inputProps:re,field:D,options:{type:z,withError:W,withFocus:j,...q},form:H}))},P=(D,z)=>W=>{W==null||W.preventDefault();const j=k();j.hasErrors?z==null||z(j.errors,p.refValues.current,W):D==null||D(c(p.refValues.current),W)},$=D=>c(D||p.refValues.current),F=I.useCallback(D=>{D.preventDefault(),T()},[]),M=I.useCallback(D=>D?!_N(D,d,p.refValues.current).hasError:!p7(d,p.refValues.current).hasErrors,[d]),B=D=>`${v}-${D}-${w[D]||0}`,U=I.useCallback(D=>document.querySelector(`[data-path="${fue(e,D)}"]`),[]),H={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:S,setValues:C,setFieldValue:A,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:T,validate:k,validateField:N,getInputProps:O,onSubmit:P,onReset:F,isValid:M,getTransformedValues:$,key:B,getInputNode:U};return uot(e,H),H}function _ot(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function wot(e){return _ot(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function cxe(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const Eot=new URLSearchParams(window.location.search),xot=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?Eot.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},Sot=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return n.type==="checkbox"?cxe(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function Tot(e,t,n){const[r,i]=I.useState(null),s=lxe({initialValues:xot(e,n),validate:Sot(e)});return I.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function $b(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=cxe(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function Aot({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e;return _.jsx(bl.Group,{label:_.jsxs(Pt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Wa,{text:s,required:o})})]}),description:u,...n,error:$b(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(Es,{mt:"xs",children:a.map(l=>_.jsx(bl,{disabled:t,value:l.value,label:l.label},l.value))})})}function Cot({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e;return _.jsx(QI,{disabled:t,label:_.jsxs(Pt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Wa,{text:o,required:a})})]}),description:l,placeholder:s,data:u,radius:"md",size:"md",...n,error:$b(e,n,u)})}function Iot({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return _.jsx(fi.Wrapper,{label:_.jsxs(Pt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&_.jsx(we,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Wa,{text:i,required:s})})]}),description:o,size:"md",children:_.jsx(Pf,{children:Array.isArray(t.value)?t.value.map(a=>_.jsx(Pf.Item,{children:a},a)):_.jsx(Pf.Item,{children:t.value})})})}function fxe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e;return _.jsx(O1.Group,{name:`radioInput${e.id}`,label:_.jsxs(Pt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Wa,{text:s,required:o})})]}),description:c,...n,error:$b(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsxs(Es,{mt:"xs",children:[u?_.jsx(it,{style:{textAlign:"center"},children:u}):null,a.map(f=>_.jsx(O1,{disabled:t,value:f.value,label:f.label},f.label)),_.jsx(it,{children:l})]})},e.id)}function kot({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return _.jsx(fxe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function Rot({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return _.jsx(FG,{disabled:t,placeholder:l,label:_.jsxs(Pt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Wa,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:$b(e,n)})}function Not({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=$b(e,n);return _.jsx(fi.Wrapper,{label:_.jsxs(Pt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Wa,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(LL,{disabled:t,marks:a,...n,h:40})})}function Pot({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(Hg,{disabled:t,placeholder:s,label:_.jsxs(Pt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Wa,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:$b(e,n)})}function Dot({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(TG,{disabled:t,placeholder:s,label:_.jsxs(Pt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(we,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(we,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Wa,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:$b(e,n)})}function Oot({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=aY(),u=M0().uiConfig.enumerateQuestions??!1,l=I.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return _.jsxs(we,{mb:"md",children:[e.type==="numerical"&&_.jsx(Rot,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&_.jsx(Pot,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&_.jsx(Dot,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&_.jsx(kot,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&_.jsx(Cot,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&_.jsx(Not,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&_.jsx(fxe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&_.jsx(Aot,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&_.jsx(Iot,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function WO({config:e,location:t,status:n,style:r}){var N;const i=jh(),{updateResponseBlockValidation:s}=Fh(),o=qm(),a=ky(),u=n==null?void 0:n.answer,l=e,c=I.useMemo(()=>{var O;return((O=l==null?void 0:l.response)==null?void 0:O.filter(P=>P.location?P.location===t:t==="belowStimulus"))||[]},[l==null?void 0:l.response,t]),f=Tot(c,o,u||{}),[d,h]=I.useState(void 0),{iframeAnswers:p,iframeProvenance:m}=Uc(O=>O),g=(l==null?void 0:l.provideFeedback)&&(((N=l==null?void 0:l.correctAnswer)==null?void 0:N.length)||0)>0,y=(l==null?void 0:l.allowFailedTraining)===void 0?!0:l.allowFailedTraining,[v,b]=I.useState(0),w=(l==null?void 0:l.trainingAttempts)||2,[E,T]=I.useState(!1),S=t===((l==null?void 0:l.nextButtonLocation)||"belowStimulus");I.useEffect(()=>{const O=c.find(P=>P.type==="iframe");if(p&&O){const P=O.id;f.setValues({...f.values,[P]:p[P]})}},[p]),I.useEffect(()=>{m&&h(m)},[m]),I.useEffect(()=>{i(s({location:t,identifier:`${a}_${o}`,status:f.isValid(),values:m0(f.values),provenanceGraph:d}))},[f.values,a,o,t,i,s,d]);const[A,C]=I.useState({visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}),k=()=>{const O=v+1;b(O);const P=c.every($=>{var B,U;const F=(U=(B=l.correctAnswer)==null?void 0:B.find(H=>H.id===$.id))==null?void 0:U.answer,M=f.getInputProps($.id,{type:$.type==="checkbox"?"checkbox":"input"}).value;return F===M});if(g)if(P&&!A.message.includes("You've failed to answer this question correctly"))C({visible:!0,title:"Correct Answer",message:"You have answered the question correctly.",color:"green"});else{let $="";O>=w?$=`You've failed to answer this question correctly after ${w} attempts. ${y?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`:w-O===1?$="Please try again. You have 1 attempt left. Please read the help text carefully.":$=`Please try again. You have ${w-O} attempts left.`,C({visible:!0,title:"Incorrect Answer",message:$,color:"red"})}T(y&&O>=w||P&&O<=w)};return _.jsxs("div",{style:r,children:[c.map((O,P)=>{var F,M;const $=(M=(F=l.correctAnswer)==null?void 0:F.find(B=>B.id===O.id))==null?void 0:M.answer;return _.jsx(vr.Fragment,{children:O.hidden?"":_.jsxs(_.Fragment,{children:[_.jsx(Oot,{storedAnswer:u?u[O.id]:void 0,answer:{...f.getInputProps(O.id,{type:O.type==="checkbox"?"checkbox":"input"})},response:O,index:P+1}),A.visible&&_.jsxs(jx,{mb:"md",title:A.title,color:A.color,children:[A.message,_.jsx("br",{}),_.jsx("br",{}),v>=w&&$&&` The correct answer was: ${$}.`]})]})},`${O.id}-${o}`)}),_.jsxs(Es,{justify:"right",gap:"xs",children:[g&&S&&_.jsx(ln,{onClick:()=>k(),disabled:!f.isValid(),children:"Check Answer"}),S&&_.jsx(sot,{disabled:g&&!E||!f.isValid(),label:l.nextButtonText||"Next"})]})]})}const mT="@REVISIT_COMMS",$ot={minHeight:"500px",width:"100%",border:0};function Mot({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Fh(),r=jh(),i=FEe(),s=I.useRef(null),o=I.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=ky(),u=Hm(),l=I.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${mT}/${c}`,iframeId:o,message:f},"*")},[s,o]);return I.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${mT}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${mT}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${mT}/ANSWERS`:r(t(d.message));break;case`${mT}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),_.jsx("iframe",{ref:s,src:`${Fu}${e.path}?trialid=${a}&id=${o}`,style:$ot})}async function UY(e){const n=await(await fetch(`${Fu}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function M1({email:e,path:t}){const n=Ay();return _.jsxs(Cc,{fluid:!0,my:50,maw:800,mx:"auto",children:[_.jsx(Ei,{order:2,children:_.jsx(it,{span:!0,c:"orange",children:"404"})}),_.jsxs(it,{children:[_.jsx(it,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),_.jsx(Al,{h:"lg"}),_.jsxs(Pf,{children:[_.jsx(Pf.Item,{children:_.jsx(it,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),_.jsx(Pf.Item,{children:_.jsxs(it,{children:["If you're a participant, please contact the study administrator"," ",e&&_.jsxs(_.Fragment,{children:["at"," ",_.jsxs(Bx,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const Lot={maxWidth:"100%"};function Fot({currentConfig:e}){const t={...Lot,...e.style},[n,r]=I.useState(!0),[i,s]=I.useState(!1);return I.useEffect(()=>{async function o(){const a=await UY(e.path);s(!!a),r(!1)}o()},[e]),n||i?_.jsx(Ty,{mx:"auto",src:`${Fu}${e.path}`,style:t}):_.jsx(M1,{path:e.path})}function Kp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function jot(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function eS(e){let t,n,r;e.length!==2?(t=Kp,n=(a,u)=>Kp(e(a),u),r=(a,u)=>e(a)-u):(t=e===Kp||e===jot?e:Bot,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function Bot(){return 0}function dxe(e){return e===null?NaN:+e}function*Uot(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const hxe=eS(Kp),L0=hxe.right,zot=hxe.left;eS(dxe).center;function Vot(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Hot(e,t){const n=Vot(e,t);return n&&Math.sqrt(n)}function pue(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Va{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class mue extends Map{constructor(t,n=gxe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(m7(this,t))}has(t){return super.has(m7(this,t))}set(t,n){return super.set(pxe(this,t),n)}delete(t){return super.delete(mxe(this,t))}}class GO extends Set{constructor(t,n=gxe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(m7(this,t))}add(t){return super.add(pxe(this,t))}delete(t){return super.delete(mxe(this,t))}}function m7({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function pxe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function mxe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function gxe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function qot(e,t){return Array.from(t,n=>e[n])}function Wot(e=Kp){if(e===Kp)return yxe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function yxe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Got=Math.sqrt(50),Yot=Math.sqrt(10),Kot=Math.sqrt(2);function YO(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Got?10:s>=Yot?5:s>=Kot?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?YO(e,t,n*2):[a,u,l]}function g7(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?YO(t,e,n):YO(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function y7(e,t,n){return t=+t,e=+e,n=+n,YO(e,t,n)[2]}function F0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?y7(t,e,n):y7(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function g0(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function v7(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function vxe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?yxe:Wot(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));vxe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(gT(e,n,t),i(e[r],s)>0&&gT(e,n,r);o<a;){for(gT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?gT(e,n,a):(++a,gT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function gT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function b7(e,t,n){if(e=Float64Array.from(Uot(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return v7(e);if(t>=1)return g0(e);var r,i=(r-1)*t,s=Math.floor(i),o=g0(vxe(e,s).subarray(0,s+1)),a=v7(e.subarray(s+1));return o+(a-o)*(i-s)}}function bxe(e,t,n=dxe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function Xot(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function _xe(e,t){return b7(e,.5,t)}function*Qot(e){for(const t of e)yield*t}function wxe(e){return Array.from(Qot(e))}function Ru(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Exe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Jot(e,...t){e=new GO(e),t=t.map(Zot);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Zot(e){return e instanceof GO?e:new GO(e)}function eat(...e){const t=new GO;for(const n of e)for(const r of n)t.add(r);return t}var tat={value:()=>{}};function e6(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new eD(n)}function eD(e){this._=e}function nat(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}eD.prototype=e6.prototype={constructor:eD,on:function(e,t){var n=this._,r=nat(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=rat(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=gue(n[i],e.name,t);else if(t==null)for(i in n)n[i]=gue(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new eD(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function rat(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function gue(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=tat,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var _7="http://www.w3.org/1999/xhtml";const yue={svg:"http://www.w3.org/2000/svg",xhtml:_7,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function t6(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),yue.hasOwnProperty(t)?{space:yue[t],local:e}:e}function iat(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===_7&&t.documentElement.namespaceURI===_7?t.createElement(e):t.createElementNS(n,e)}}function sat(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function xxe(e){var t=t6(e);return(t.local?sat:iat)(t)}function oat(){}function zY(e){return e==null?oat:function(){return this.querySelector(e)}}function aat(e){typeof e!="function"&&(e=zY(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Ga(r,this._parents)}function Sxe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function uat(){return[]}function Txe(e){return e==null?uat:function(){return this.querySelectorAll(e)}}function lat(e){return function(){return Sxe(e.apply(this,arguments))}}function cat(e){typeof e=="function"?e=lat(e):e=Txe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Ga(r,i)}function Axe(e){return function(){return this.matches(e)}}function Cxe(e){return function(t){return t.matches(e)}}var fat=Array.prototype.find;function dat(e){return function(){return fat.call(this.children,e)}}function hat(){return this.firstElementChild}function pat(e){return this.select(e==null?hat:dat(typeof e=="function"?e:Cxe(e)))}var mat=Array.prototype.filter;function gat(){return Array.from(this.children)}function yat(e){return function(){return mat.call(this.children,e)}}function vat(e){return this.selectAll(e==null?gat:yat(typeof e=="function"?e:Cxe(e)))}function bat(e){typeof e!="function"&&(e=Axe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Ga(r,this._parents)}function Ixe(e){return new Array(e.length)}function _at(){return new Ga(this._enter||this._groups.map(Ixe),this._parents)}function KO(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}KO.prototype={constructor:KO,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function wat(e){return function(){return e}}function Eat(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new KO(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function xat(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new KO(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Sat(e){return e.__data__}function Tat(e,t){if(!arguments.length)return Array.from(this,Sat);var n=t?xat:Eat,r=this._parents,i=this._groups;typeof e!="function"&&(e=wat(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=Aat(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,w,E;v<p;++v)if(w=m[v]){for(v>=b&&(b=v+1);!(E=g[b])&&++b<p;);w._next=E||null}}return o=new Ga(o,r),o._enter=a,o._exit=u,o}function Aat(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Cat(){return new Ga(this._exit||this._groups.map(Ixe),this._parents)}function Iat(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function kat(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Ga(a,this._parents)}function Rat(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Nat(e){e||(e=Pat);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Ga(i,this._parents).order()}function Pat(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Dat(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Oat(){return Array.from(this)}function $at(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Mat(){let e=0;for(const t of this)++e;return e}function Lat(){return!this.node()}function Fat(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function jat(e){return function(){this.removeAttribute(e)}}function Bat(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Uat(e,t){return function(){this.setAttribute(e,t)}}function zat(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Vat(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Hat(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function qat(e,t){var n=t6(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Bat:jat:typeof t=="function"?n.local?Hat:Vat:n.local?zat:Uat)(n,t))}function kxe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Wat(e){return function(){this.style.removeProperty(e)}}function Gat(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Yat(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Kat(e,t,n){return arguments.length>1?this.each((t==null?Wat:typeof t=="function"?Yat:Gat)(e,t,n??"")):IE(this.node(),e)}function IE(e,t){return e.style.getPropertyValue(t)||kxe(e).getComputedStyle(e,null).getPropertyValue(t)}function Xat(e){return function(){delete this[e]}}function Qat(e,t){return function(){this[e]=t}}function Jat(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Zat(e,t){return arguments.length>1?this.each((t==null?Xat:typeof t=="function"?Jat:Qat)(e,t)):this.node()[e]}function Rxe(e){return e.trim().split(/^|\s+/)}function VY(e){return e.classList||new Nxe(e)}function Nxe(e){this._node=e,this._names=Rxe(e.getAttribute("class")||"")}Nxe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Pxe(e,t){for(var n=VY(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Dxe(e,t){for(var n=VY(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function eut(e){return function(){Pxe(this,e)}}function tut(e){return function(){Dxe(this,e)}}function nut(e,t){return function(){(t.apply(this,arguments)?Pxe:Dxe)(this,e)}}function rut(e,t){var n=Rxe(e+"");if(arguments.length<2){for(var r=VY(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?nut:t?eut:tut)(n,t))}function iut(){this.textContent=""}function sut(e){return function(){this.textContent=e}}function out(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function aut(e){return arguments.length?this.each(e==null?iut:(typeof e=="function"?out:sut)(e)):this.node().textContent}function uut(){this.innerHTML=""}function lut(e){return function(){this.innerHTML=e}}function cut(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function fut(e){return arguments.length?this.each(e==null?uut:(typeof e=="function"?cut:lut)(e)):this.node().innerHTML}function dut(){this.nextSibling&&this.parentNode.appendChild(this)}function hut(){return this.each(dut)}function put(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mut(){return this.each(put)}function gut(e){var t=typeof e=="function"?e:xxe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function yut(){return null}function vut(e,t){var n=typeof e=="function"?e:xxe(e),r=t==null?yut:typeof t=="function"?t:zY(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function but(){var e=this.parentNode;e&&e.removeChild(this)}function _ut(){return this.each(but)}function wut(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Eut(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function xut(e){return this.select(e?Eut:wut)}function Sut(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Tut(e){return function(t){e.call(this,t,this.__data__)}}function Aut(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Cut(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Iut(e,t,n){return function(){var r=this.__on,i,s=Tut(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function kut(e,t,n){var r=Aut(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?Iut:Cut,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function Oxe(e,t,n){var r=kxe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Rut(e,t){return function(){return Oxe(this,e,t)}}function Nut(e,t){return function(){return Oxe(this,e,t.apply(this,arguments))}}function Put(e,t){return this.each((typeof t=="function"?Nut:Rut)(e,t))}function*Dut(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var HY=[null];function Ga(e,t){this._groups=e,this._parents=t}function ok(){return new Ga([[document.documentElement]],HY)}function Out(){return this}Ga.prototype=ok.prototype={constructor:Ga,select:aat,selectAll:cat,selectChild:pat,selectChildren:vat,filter:bat,data:Tat,enter:_at,exit:Cat,join:Iat,merge:kat,selection:Out,order:Rat,sort:Nat,call:Dat,nodes:Oat,node:$at,size:Mat,empty:Lat,each:Fat,attr:qat,style:Kat,property:Zat,classed:rut,text:aut,html:fut,raise:hut,lower:mut,append:gut,insert:vut,remove:_ut,clone:xut,datum:Sut,on:kut,dispatch:Put,[Symbol.iterator]:Dut};function gs(e){return typeof e=="string"?new Ga([[document.querySelector(e)]],[document.documentElement]):new Ga([[e]],HY)}function $ut(e){let t;for(;t=e.sourceEvent;)e=t;return e}function w7(e,t){if(e=$ut(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Mut(e){return typeof e=="string"?new Ga([document.querySelectorAll(e)],[document.documentElement]):new Ga([Sxe(e)],HY)}const E7={capture:!0,passive:!1};function x7(e){e.preventDefault(),e.stopImmediatePropagation()}function Lut(e){var t=e.document.documentElement,n=gs(e).on("dragstart.drag",x7,E7);"onselectstart"in t?n.on("selectstart.drag",x7,E7):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Fut(e,t){var n=e.document.documentElement,r=gs(e).on("dragstart.drag",null);t&&(r.on("click.drag",x7,E7),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function tS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ak(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ry(){}var L1=.7,kE=1/L1,Fw="\\s*([+-]?\\d+)\\s*",SC="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jut=/^#([0-9a-f]{3,8})$/,But=new RegExp(`^rgb\\(${Fw},${Fw},${Fw}\\)$`),Uut=new RegExp(`^rgb\\(${Zd},${Zd},${Zd}\\)$`),zut=new RegExp(`^rgba\\(${Fw},${Fw},${Fw},${SC}\\)$`),Vut=new RegExp(`^rgba\\(${Zd},${Zd},${Zd},${SC}\\)$`),Hut=new RegExp(`^hsl\\(${SC},${Zd},${Zd}\\)$`),qut=new RegExp(`^hsla\\(${SC},${Zd},${Zd},${SC}\\)$`),vue={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tS(Ry,F1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:bue,formatHex:bue,formatHex8:Wut,formatHsl:Gut,formatRgb:_ue,toString:_ue});function bue(){return this.rgb().formatHex()}function Wut(){return this.rgb().formatHex8()}function Gut(){return $xe(this).formatHsl()}function _ue(){return this.rgb().formatRgb()}function F1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=jut.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?wue(t):n===3?new eo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?wN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?wN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=But.exec(e))?new eo(t[1],t[2],t[3],1):(t=Uut.exec(e))?new eo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=zut.exec(e))?wN(t[1],t[2],t[3],t[4]):(t=Vut.exec(e))?wN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Hut.exec(e))?Sue(t[1],t[2]/100,t[3]/100,1):(t=qut.exec(e))?Sue(t[1],t[2]/100,t[3]/100,t[4]):vue.hasOwnProperty(e)?wue(vue[e]):e==="transparent"?new eo(NaN,NaN,NaN,0):null}function wue(e){return new eo(e>>16&255,e>>8&255,e&255,1)}function wN(e,t,n,r){return r<=0&&(e=t=n=NaN),new eo(e,t,n,r)}function qY(e){return e instanceof Ry||(e=F1(e)),e?(e=e.rgb(),new eo(e.r,e.g,e.b,e.opacity)):new eo}function j0(e,t,n,r){return arguments.length===1?qY(e):new eo(e,t,n,r??1)}function eo(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}tS(eo,j0,ak(Ry,{brighter(e){return e=e==null?kE:Math.pow(kE,e),new eo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?L1:Math.pow(L1,e),new eo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new eo(g1(this.r),g1(this.g),g1(this.b),XO(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Eue,formatHex:Eue,formatHex8:Yut,formatRgb:xue,toString:xue}));function Eue(){return`#${Jv(this.r)}${Jv(this.g)}${Jv(this.b)}`}function Yut(){return`#${Jv(this.r)}${Jv(this.g)}${Jv(this.b)}${Jv((isNaN(this.opacity)?1:this.opacity)*255)}`}function xue(){const e=XO(this.opacity);return`${e===1?"rgb(":"rgba("}${g1(this.r)}, ${g1(this.g)}, ${g1(this.b)}${e===1?")":`, ${e})`}`}function XO(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function g1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Jv(e){return e=g1(e),(e<16?"0":"")+e.toString(16)}function Sue(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new yf(e,t,n,r)}function $xe(e){if(e instanceof yf)return new yf(e.h,e.s,e.l,e.opacity);if(e instanceof Ry||(e=F1(e)),!e)return new yf;if(e instanceof yf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new yf(o,a,u,e.opacity)}function QO(e,t,n,r){return arguments.length===1?$xe(e):new yf(e,t,n,r??1)}function yf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}tS(yf,QO,ak(Ry,{brighter(e){return e=e==null?kE:Math.pow(kE,e),new yf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?L1:Math.pow(L1,e),new yf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new eo(Wj(e>=240?e-240:e+120,i,r),Wj(e,i,r),Wj(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new yf(Tue(this.h),EN(this.s),EN(this.l),XO(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=XO(this.opacity);return`${e===1?"hsl(":"hsla("}${Tue(this.h)}, ${EN(this.s)*100}%, ${EN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Tue(e){return e=(e||0)%360,e<0?e+360:e}function EN(e){return Math.max(0,Math.min(1,e||0))}function Wj(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Mxe=Math.PI/180,Lxe=180/Math.PI,JO=18,Fxe=.96422,jxe=1,Bxe=.82521,Uxe=4/29,jw=6/29,zxe=3*jw*jw,Kut=jw*jw*jw;function Vxe(e){if(e instanceof eh)return new eh(e.l,e.a,e.b,e.opacity);if(e instanceof Fp)return Hxe(e);e instanceof eo||(e=qY(e));var t=Xj(e.r),n=Xj(e.g),r=Xj(e.b),i=Gj((.2225045*t+.7168786*n+.0606169*r)/jxe),s,o;return t===n&&n===r?s=o=i:(s=Gj((.4360747*t+.3850649*n+.1430804*r)/Fxe),o=Gj((.0139322*t+.0971045*n+.7141733*r)/Bxe)),new eh(116*i-16,500*(s-i),200*(i-o),e.opacity)}function ZO(e,t,n,r){return arguments.length===1?Vxe(e):new eh(e,t,n,r??1)}function eh(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}tS(eh,ZO,ak(Ry,{brighter(e){return new eh(this.l+JO*(e??1),this.a,this.b,this.opacity)},darker(e){return new eh(this.l-JO*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Fxe*Yj(t),e=jxe*Yj(e),n=Bxe*Yj(n),new eo(Kj(3.1338561*t-1.6168667*e-.4906146*n),Kj(-.9787684*t+1.9161415*e+.033454*n),Kj(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Gj(e){return e>Kut?Math.pow(e,1/3):e/zxe+Uxe}function Yj(e){return e>jw?e*e*e:zxe*(e-Uxe)}function Kj(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Xj(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Xut(e){if(e instanceof Fp)return new Fp(e.h,e.c,e.l,e.opacity);if(e instanceof eh||(e=Vxe(e)),e.a===0&&e.b===0)return new Fp(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Lxe;return new Fp(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function e3(e,t,n,r){return arguments.length===1?Xut(e):new Fp(e,t,n,r??1)}function Fp(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Hxe(e){if(isNaN(e.h))return new eh(e.l,0,0,e.opacity);var t=e.h*Mxe;return new eh(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}tS(Fp,e3,ak(Ry,{brighter(e){return new Fp(this.h,this.c,this.l+JO*(e??1),this.opacity)},darker(e){return new Fp(this.h,this.c,this.l-JO*(e??1),this.opacity)},rgb(){return Hxe(this).rgb()}}));var qxe=-.14861,WY=1.78277,GY=-.29227,n6=-.90649,TC=1.97294,Aue=TC*n6,Cue=TC*WY,Iue=WY*GY-n6*qxe;function Qut(e){if(e instanceof y1)return new y1(e.h,e.s,e.l,e.opacity);e instanceof eo||(e=qY(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Iue*r+Aue*t-Cue*n)/(Iue+Aue-Cue),s=r-i,o=(TC*(n-i)-GY*s)/n6,a=Math.sqrt(o*o+s*s)/(TC*i*(1-i)),u=a?Math.atan2(o,s)*Lxe-120:NaN;return new y1(u<0?u+360:u,a,i,e.opacity)}function S7(e,t,n,r){return arguments.length===1?Qut(e):new y1(e,t,n,r??1)}function y1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}tS(y1,S7,ak(Ry,{brighter(e){return e=e==null?kE:Math.pow(kE,e),new y1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?L1:Math.pow(L1,e),new y1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Mxe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new eo(255*(t+n*(qxe*r+WY*i)),255*(t+n*(GY*r+n6*i)),255*(t+n*(TC*r)),this.opacity)}}));function Wxe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function Gxe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return Wxe((n-r/t)*t,o,i,s,a)}}function Yxe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return Wxe((n-r/t)*t,i,s,o,a)}}const r6=e=>()=>e;function Kxe(e,t){return function(n){return e+n*t}}function Jut(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function i6(e,t){var n=t-e;return n?Kxe(e,n>180||n<-180?n-360*Math.round(n/360):n):r6(isNaN(e)?t:e)}function Zut(e){return(e=+e)==1?to:function(t,n){return n-t?Jut(t,n,e):r6(isNaN(t)?n:t)}}function to(e,t){var n=t-e;return n?Kxe(e,n):r6(isNaN(e)?t:e)}const AC=function e(t){var n=Zut(t);function r(i,s){var o=n((i=j0(i)).r,(s=j0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=to(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Xxe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=j0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var elt=Xxe(Gxe),tlt=Xxe(Yxe);function YY(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function Qxe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function nlt(e,t){return(Qxe(t)?YY:Jxe)(e,t)}function Jxe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Wm(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Zxe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function fc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function eSe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Wm(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var T7=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qj=new RegExp(T7.source,"g");function rlt(e){return function(){return e}}function ilt(e){return function(t){return e(t)+""}}function KY(e,t){var n=T7.lastIndex=Qj.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=T7.exec(e))&&(i=Qj.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:fc(r,i)})),n=Qj.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?ilt(u[0].x):rlt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Wm(e,t){var n=typeof t,r;return t==null||n==="boolean"?r6(t):(n==="number"?fc:n==="string"?(r=F1(t))?(t=r,AC):KY:t instanceof F1?AC:t instanceof Date?Zxe:Qxe(t)?YY:Array.isArray(t)?Jxe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?eSe:fc)(e,t)}function slt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function olt(e,t){var n=i6(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function uk(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var kue=180/Math.PI,A7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tSe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*kue,skewX:Math.atan(u)*kue,scaleX:o,scaleY:a}}var xN;function alt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?A7:tSe(t.a,t.b,t.c,t.d,t.e,t.f)}function ult(e){return e==null||(xN||(xN=document.createElementNS("http://www.w3.org/2000/svg","g")),xN.setAttribute("transform",e),!(e=xN.transform.baseVal.consolidate()))?A7:(e=e.matrix,tSe(e.a,e.b,e.c,e.d,e.e,e.f))}function nSe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:fc(l,f)},{i:m-2,x:fc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:fc(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:fc(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:fc(l,f)},{i:m-2,x:fc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var rSe=nSe(alt,"px, ","px)","deg)"),iSe=nSe(ult,", ",")",")"),llt=1e-12;function Rue(e){return((e=Math.exp(e))+1/e)/2}function clt(e){return((e=Math.exp(e))-1/e)/2}function flt(e){return((e=Math.exp(2*e))-1)/(e+1)}const dlt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<llt)y=Math.log(d/l)/t,g=function(S){return[a+S*h,u+S*p,l*Math.exp(t*S*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(b*b+1)-b),T=Math.log(Math.sqrt(w*w+1)-w);y=(T-E)/t,g=function(S){var A=S*y,C=Rue(E),k=l/(n*v)*(C*flt(t*A+E)-clt(E));return[a+k*h,u+k*p,l*C/Rue(t*A+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function sSe(e){return function(t,n){var r=e((t=QO(t)).h,(n=QO(n)).h),i=to(t.s,n.s),s=to(t.l,n.l),o=to(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const hlt=sSe(i6);var plt=sSe(to);function mlt(e,t){var n=to((e=ZO(e)).l,(t=ZO(t)).l),r=to(e.a,t.a),i=to(e.b,t.b),s=to(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function oSe(e){return function(t,n){var r=e((t=e3(t)).h,(n=e3(n)).h),i=to(t.c,n.c),s=to(t.l,n.l),o=to(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const glt=oSe(i6);var ylt=oSe(to);function aSe(e){return function t(n){n=+n;function r(i,s){var o=e((i=S7(i)).h,(s=S7(s)).h),a=to(i.s,s.s),u=to(i.l,s.l),l=to(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const vlt=aSe(i6);var blt=aSe(to);function XY(e,t){t===void 0&&(t=e,e=Wm);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function _lt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const wlt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Wm,interpolateArray:nlt,interpolateBasis:Gxe,interpolateBasisClosed:Yxe,interpolateCubehelix:vlt,interpolateCubehelixLong:blt,interpolateDate:Zxe,interpolateDiscrete:slt,interpolateHcl:glt,interpolateHclLong:ylt,interpolateHsl:hlt,interpolateHslLong:plt,interpolateHue:olt,interpolateLab:mlt,interpolateNumber:fc,interpolateNumberArray:YY,interpolateObject:eSe,interpolateRgb:AC,interpolateRgbBasis:elt,interpolateRgbBasisClosed:tlt,interpolateRound:uk,interpolateString:KY,interpolateTransformCss:rSe,interpolateTransformSvg:iSe,interpolateZoom:dlt,piecewise:XY,quantize:_lt},Symbol.toStringTag,{value:"Module"}));var RE=0,l2=0,yT=0,uSe=1e3,t3,c2,n3=0,j1=0,s6=0,CC=typeof performance=="object"&&performance.now?performance:Date,lSe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function o6(){return j1||(lSe(Elt),j1=CC.now()+s6)}function Elt(){j1=0}function IC(){this._call=this._time=this._next=null}IC.prototype=QY.prototype={constructor:IC,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?o6():+n)+(t==null?0:+t),!this._next&&c2!==this&&(c2?c2._next=this:t3=this,c2=this),this._call=e,this._time=n,C7()},stop:function(){this._call&&(this._call=null,this._time=1/0,C7())}};function QY(e,t,n){var r=new IC;return r.restart(e,t,n),r}function xlt(){o6(),++RE;for(var e=t3,t;e;)(t=j1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--RE}function Nue(){j1=(n3=CC.now())+s6,RE=l2=0;try{xlt()}finally{RE=0,Tlt(),j1=0}}function Slt(){var e=CC.now(),t=e-n3;t>uSe&&(s6-=t,n3=e)}function Tlt(){for(var e,t=t3,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:t3=n);c2=e,C7(r)}function C7(e){if(!RE){l2&&(l2=clearTimeout(l2));var t=e-j1;t>24?(e<1/0&&(l2=setTimeout(Nue,e-CC.now()-s6)),yT&&(yT=clearInterval(yT))):(yT||(n3=CC.now(),yT=setInterval(Slt,uSe)),RE=1,lSe(Nue))}}function Pue(e,t,n){var r=new IC;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function Alt(e,t,n){var r=new IC,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?o6():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var Clt=e6("start","end","cancel","interrupt"),Ilt=[],cSe=0,Due=1,I7=2,tD=3,Oue=4,k7=5,nD=6;function a6(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;klt(e,n,{name:t,index:r,group:i,on:Clt,tween:Ilt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:cSe})}function JY(e,t){var n=Qf(e,t);if(n.state>cSe)throw new Error("too late; already scheduled");return n}function Bh(e,t){var n=Qf(e,t);if(n.state>tD)throw new Error("too late; already running");return n}function Qf(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function klt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=QY(s,0,n.time);function s(l){n.state=Due,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==Due)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===tD)return Pue(o);h.state===Oue?(h.state=nD,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=nD,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Pue(function(){n.state===tD&&(n.state=Oue,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=I7,n.on.call("start",e,e.__data__,n.index,n.group),n.state===I7){for(n.state=tD,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=k7,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===k7&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=nD,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function R7(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>I7&&r.state<k7,r.state=nD,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Rlt(e){return this.each(function(){R7(this,e)})}function Nlt(e,t){var n,r;return function(){var i=Bh(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Plt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Bh(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function Dlt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Qf(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Nlt:Plt)(n,e,t))}function ZY(e,t,n){var r=e._id;return e.each(function(){var i=Bh(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Qf(i,r).value[t]}}function fSe(e,t){var n;return(typeof t=="number"?fc:t instanceof F1?AC:(n=F1(t))?(t=n,AC):KY)(e,t)}function Olt(e){return function(){this.removeAttribute(e)}}function $lt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Mlt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Llt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Flt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function jlt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function Blt(e,t){var n=t6(e),r=n==="transform"?iSe:fSe;return this.attrTween(e,typeof t=="function"?(n.local?jlt:Flt)(n,r,ZY(this,"attr."+e,t)):t==null?(n.local?$lt:Olt)(n):(n.local?Llt:Mlt)(n,r,t))}function Ult(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function zlt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Vlt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&zlt(e,s)),n}return i._value=t,i}function Hlt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Ult(e,s)),n}return i._value=t,i}function qlt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=t6(e);return this.tween(n,(r.local?Vlt:Hlt)(r,t))}function Wlt(e,t){return function(){JY(this,e).delay=+t.apply(this,arguments)}}function Glt(e,t){return t=+t,function(){JY(this,e).delay=t}}function Ylt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Wlt:Glt)(t,e)):Qf(this.node(),t).delay}function Klt(e,t){return function(){Bh(this,e).duration=+t.apply(this,arguments)}}function Xlt(e,t){return t=+t,function(){Bh(this,e).duration=t}}function Qlt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Klt:Xlt)(t,e)):Qf(this.node(),t).duration}function Jlt(e,t){if(typeof t!="function")throw new Error;return function(){Bh(this,e).ease=t}}function Zlt(e){var t=this._id;return arguments.length?this.each(Jlt(t,e)):Qf(this.node(),t).ease}function ect(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Bh(this,e).ease=n}}function tct(e){if(typeof e!="function")throw new Error;return this.each(ect(this._id,e))}function nct(e){typeof e!="function"&&(e=Axe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new gm(r,this._parents,this._name,this._id)}function rct(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new gm(o,this._parents,this._name,this._id)}function ict(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function sct(e,t,n){var r,i,s=ict(t)?JY:Bh;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function oct(e,t){var n=this._id;return arguments.length<2?Qf(this.node(),n).on.on(e):this.each(sct(n,e,t))}function act(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function uct(){return this.on("end.remove",act(this._id))}function lct(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zY(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,a6(l[d],t,n,d,l,Qf(c,n)));return new gm(s,this._parents,t,n)}function cct(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Txe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Qf(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&a6(h,t,n,m,d,p);s.push(d),o.push(c)}return new gm(s,o,t,n)}var fct=ok.prototype.constructor;function dct(){return new fct(this._groups,this._parents)}function hct(e,t){var n,r,i;return function(){var s=IE(this,e),o=(this.style.removeProperty(e),IE(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function dSe(e){return function(){this.style.removeProperty(e)}}function pct(e,t,n){var r,i=n+"",s;return function(){var o=IE(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function mct(e,t,n){var r,i,s;return function(){var o=IE(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),IE(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function gct(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Bh(this,e),l=u.on,c=u.value[s]==null?a||(a=dSe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function yct(e,t,n){var r=(e+="")=="transform"?rSe:fSe;return t==null?this.styleTween(e,hct(e,r)).on("end.style."+e,dSe(e)):typeof t=="function"?this.styleTween(e,mct(e,r,ZY(this,"style."+e,t))).each(gct(this._id,e)):this.styleTween(e,pct(e,r,t),n).on("end.style."+e,null)}function vct(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function bct(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&vct(e,o,n)),r}return s._value=t,s}function _ct(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,bct(e,t,n??""))}function wct(e){return function(){this.textContent=e}}function Ect(e){return function(){var t=e(this);this.textContent=t??""}}function xct(e){return this.tween("text",typeof e=="function"?Ect(ZY(this,"text",e)):wct(e==null?"":e+""))}function Sct(e){return function(t){this.textContent=e.call(this,t)}}function Tct(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Sct(i)),t}return r._value=e,r}function Act(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Tct(e))}function Cct(){for(var e=this._name,t=this._id,n=hSe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Qf(u,t);a6(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new gm(r,this._parents,e,n)}function Ict(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Bh(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var kct=0;function gm(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function hSe(){return++kct}var up=ok.prototype;gm.prototype={constructor:gm,select:lct,selectAll:cct,selectChild:up.selectChild,selectChildren:up.selectChildren,filter:nct,merge:rct,selection:dct,transition:Cct,call:up.call,nodes:up.nodes,node:up.node,size:up.size,empty:up.empty,each:up.each,on:oct,attr:Blt,attrTween:qlt,style:yct,styleTween:_ct,text:xct,textTween:Act,remove:uct,tween:Dlt,delay:Ylt,duration:Qlt,ease:Zlt,easeVarying:tct,end:Ict,[Symbol.iterator]:up[Symbol.iterator]};const Rct=e=>+e;function Nct(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Pct={time:null,delay:0,duration:250,ease:Nct};function Dct(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Oct(e){var t,n;e instanceof gm?(t=e._id,e=e._name):(t=hSe(),(n=Pct).time=o6(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&a6(u,e,t,l,o,n||Dct(u,t));return new gm(r,this._parents,e,t)}ok.prototype.interrupt=Rlt;ok.prototype.transition=Oct;const Jj=e=>()=>e;function $ct(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function Mct(e){e.stopImmediatePropagation()}function Zj(e){e.preventDefault(),e.stopImmediatePropagation()}var $ue={name:"drag"},e8={name:"space"},b_={name:"handle"},__={name:"center"};const{abs:Mue,max:Go,min:Yo}=Math;function Lue(e){return[+e[0],+e[1]]}function N7(e){return[Lue(e[0]),Lue(e[1])]}var rD={name:"x",handles:["w","e"].map(kC),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},iD={name:"y",handles:["n","s"].map(kC),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Lct={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(kC),input:function(e){return e==null?null:N7(e)},output:function(e){return e}},lp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Fue={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},jue={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Fct={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},jct={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function kC(e){return{type:e}}function Bct(e){return!e.ctrlKey&&!e.button}function Uct(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function zct(){return navigator.maxTouchPoints||"ontouchstart"in this}function t8(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Vct(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Hct(){return eK(rD)}function qct(){return eK(iD)}function Wct(){return eK(Lct)}function eK(e){var t=Uct,n=Bct,r=zct,i=!0,s=e6("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([kC("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",lp.overlay).merge(y).each(function(){var b=t8(this).extent;gs(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([kC("selection")]).enter().append("rect").attr("class","selection").attr("cursor",lp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(b){return b.type});v.exit().remove(),v.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return lp[b.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,E=c(b,arguments),T=w.selection,S=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),A=Wm(T,S);function C(k){w.selection=k===1&&S===null?null:A(k),l.call(b),E.brush()}return T!==null&&S!==null?C:C(1)}):g.each(function(){var b=this,w=arguments,E=b.__brush,T=e.input(typeof y=="function"?y.apply(b,w):y,E.extent),S=c(b,w).beforestart();R7(b),E.selection=T===null?null:T,l.call(b),S.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=gs(this),y=t8(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var b=g.__brush.emitter;return b&&(!v||!b.clean)?b:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var b=gs(this.that).datum();s.call(g,this.that,new $ct(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),b)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,b=(i&&g.metaKey?v="overlay":v)==="selection"?$ue:i&&g.altKey?__:b_,w=e===iD?null:Fct[v],E=e===rD?null:jct[v],T=t8(y),S=T.extent,A=T.selection,C=S[0][0],k,N,O=S[0][1],P,$,F=S[1][0],M,B,U=S[1][1],H,D,z=0,W=0,j,q=w&&E&&i&&g.shiftKey,G,re,de=Array.from(g.touches||[g],ve=>{const Re=ve.identifier;return ve=w7(ve,y),ve.point0=ve.slice(),ve.identifier=Re,ve});R7(y);var pe=c(y,arguments,!0).beforestart();if(v==="overlay"){A&&(j=!0);const ve=[de[0],de[1]||de[0]];T.selection=A=[[k=e===iD?C:Yo(ve[0][0],ve[1][0]),P=e===rD?O:Yo(ve[0][1],ve[1][1])],[M=e===iD?F:Go(ve[0][0],ve[1][0]),H=e===rD?U:Go(ve[0][1],ve[1][1])]],de.length>1&&fe(g)}else k=A[0][0],P=A[0][1],M=A[1][0],H=A[1][1];N=k,$=P,B=M,D=H;var ge=gs(y).attr("pointer-events","none"),Ee=ge.selectAll(".overlay").attr("cursor",lp[v]);if(g.touches)pe.moved=Q,pe.ended=be;else{var Z=gs(g.view).on("mousemove.brush",Q,!0).on("mouseup.brush",be,!0);i&&Z.on("keydown.brush",Me,!0).on("keyup.brush",Be,!0),Lut(g.view)}l.call(y),pe.start(g,b.name);function Q(ve){for(const Re of ve.changedTouches||[ve])for(const He of de)He.identifier===Re.identifier&&(He.cur=w7(Re,y));if(q&&!G&&!re&&de.length===1){const Re=de[0];Mue(Re.cur[0]-Re[0])>Mue(Re.cur[1]-Re[1])?re=!0:G=!0}for(const Re of de)Re.cur&&(Re[0]=Re.cur[0],Re[1]=Re.cur[1]);j=!0,Zj(ve),fe(ve)}function fe(ve){const Re=de[0],He=Re.point0;var Ze;switch(z=Re[0]-He[0],W=Re[1]-He[1],b){case e8:case $ue:{w&&(z=Go(C-k,Yo(F-M,z)),N=k+z,B=M+z),E&&(W=Go(O-P,Yo(U-H,W)),$=P+W,D=H+W);break}case b_:{de[1]?(w&&(N=Go(C,Yo(F,de[0][0])),B=Go(C,Yo(F,de[1][0])),w=1),E&&($=Go(O,Yo(U,de[0][1])),D=Go(O,Yo(U,de[1][1])),E=1)):(w<0?(z=Go(C-k,Yo(F-k,z)),N=k+z,B=M):w>0&&(z=Go(C-M,Yo(F-M,z)),N=k,B=M+z),E<0?(W=Go(O-P,Yo(U-P,W)),$=P+W,D=H):E>0&&(W=Go(O-H,Yo(U-H,W)),$=P,D=H+W));break}case __:{w&&(N=Go(C,Yo(F,k-z*w)),B=Go(C,Yo(F,M+z*w))),E&&($=Go(O,Yo(U,P-W*E)),D=Go(O,Yo(U,H+W*E)));break}}B<N&&(w*=-1,Ze=k,k=M,M=Ze,Ze=N,N=B,B=Ze,v in Fue&&Ee.attr("cursor",lp[v=Fue[v]])),D<$&&(E*=-1,Ze=P,P=H,H=Ze,Ze=$,$=D,D=Ze,v in jue&&Ee.attr("cursor",lp[v=jue[v]])),T.selection&&(A=T.selection),G&&(N=A[0][0],B=A[1][0]),re&&($=A[0][1],D=A[1][1]),(A[0][0]!==N||A[0][1]!==$||A[1][0]!==B||A[1][1]!==D)&&(T.selection=[[N,$],[B,D]],l.call(y),pe.brush(ve,b.name))}function be(ve){if(Mct(ve),ve.touches){if(ve.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else Fut(ve.view,j),Z.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ge.attr("pointer-events","all"),Ee.attr("cursor",lp.overlay),T.selection&&(A=T.selection),Vct(A)&&(T.selection=null,l.call(y)),pe.end(ve,b.name)}function Me(ve){switch(ve.keyCode){case 16:{q=w&&E;break}case 18:{b===b_&&(w&&(M=B-z*w,k=N+z*w),E&&(H=D-W*E,P=$+W*E),b=__,fe(ve));break}case 32:{(b===b_||b===__)&&(w<0?M=B-z:w>0&&(k=N-z),E<0?H=D-W:E>0&&(P=$-W),b=e8,Ee.attr("cursor",lp.selection),fe(ve));break}default:return}Zj(ve)}function Be(ve){switch(ve.keyCode){case 16:{q&&(G=re=q=!1,fe(ve));break}case 18:{b===__&&(w<0?M=B:w>0&&(k=N),E<0?H=D:E>0&&(P=$),b=b_,fe(ve));break}case 32:{b===e8&&(ve.altKey?(w&&(M=B-z*w,k=N+z*w),E&&(H=D-W*E,P=$+W*E),b=__):(w<0?M=B:w>0&&(k=N),E<0?H=D:E>0&&(P=$),b=b_),Ee.attr("cursor",lp[v]),fe(ve));break}default:return}Zj(ve)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=N7(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:Jj(N7(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:Jj(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:Jj(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const P7=Math.PI,D7=2*P7,wv=1e-6,Gct=D7-wv;function pSe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Yct(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return pSe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let tK=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?pSe:Yct(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>wv)if(!(Math.abs(f*u-l*c)>wv)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((P7-Math.acos((m+d-g)/(2*y*v)))/2),w=b/v,E=b/y;Math.abs(w-1)>wv&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>wv||Math.abs(this._y1-c)>wv)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%D7+D7),d>Gct?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>wv&&this._append`A${r},${r},0,${+(d>=P7)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function u6(){return new tK}u6.prototype=tK.prototype;const Xp=11102230246251565e-32,Ko=134217729,Kct=(3+8*Xp)*Xp;function n8(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function Xct(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function lk(e){return new Float64Array(e)}const Qct=(3+16*Xp)*Xp,Jct=(2+12*Xp)*Xp,Zct=(9+64*Xp)*Xp*Xp,w_=lk(4),Bue=lk(8),Uue=lk(12),zue=lk(16),Ia=lk(4);function eft(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,w,E,T,S,A;const C=e-i,k=n-i,N=t-s,O=r-s;w=C*O,d=Ko*C,h=d-(d-C),p=C-h,d=Ko*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),T=N*k,d=Ko*N,h=d-(d-N),p=N-h,d=Ko*k,m=d-(d-k),g=k-m,S=p*g-(T-h*m-p*m-h*g),y=E-S,f=E-y,w_[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,w_[1]=b-(y+f)+(f-T),A=v+y,f=A-v,w_[2]=v-(A-f)+(y-f),w_[3]=A;let P=Xct(4,w_),$=Jct*o;if(P>=$||-P>=$||(f=e-C,a=e-(C+f)+(f-i),f=n-k,l=n-(k+f)+(f-i),f=t-N,u=t-(N+f)+(f-s),f=r-O,c=r-(O+f)+(f-s),a===0&&u===0&&l===0&&c===0)||($=Zct*o+Kct*Math.abs(P),P+=C*c+O*a-(N*l+k*u),P>=$||-P>=$))return P;w=a*O,d=Ko*a,h=d-(d-a),p=a-h,d=Ko*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),T=u*k,d=Ko*u,h=d-(d-u),p=u-h,d=Ko*k,m=d-(d-k),g=k-m,S=p*g-(T-h*m-p*m-h*g),y=E-S,f=E-y,Ia[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,Ia[1]=b-(y+f)+(f-T),A=v+y,f=A-v,Ia[2]=v-(A-f)+(y-f),Ia[3]=A;const F=n8(4,w_,4,Ia,Bue);w=C*c,d=Ko*C,h=d-(d-C),p=C-h,d=Ko*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),T=N*l,d=Ko*N,h=d-(d-N),p=N-h,d=Ko*l,m=d-(d-l),g=l-m,S=p*g-(T-h*m-p*m-h*g),y=E-S,f=E-y,Ia[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,Ia[1]=b-(y+f)+(f-T),A=v+y,f=A-v,Ia[2]=v-(A-f)+(y-f),Ia[3]=A;const M=n8(F,Bue,4,Ia,Uue);w=a*c,d=Ko*a,h=d-(d-a),p=a-h,d=Ko*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),T=u*l,d=Ko*u,h=d-(d-u),p=u-h,d=Ko*l,m=d-(d-l),g=l-m,S=p*g-(T-h*m-p*m-h*g),y=E-S,f=E-y,Ia[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,Ia[1]=b-(y+f)+(f-T),A=v+y,f=A-v,Ia[2]=v-(A-f)+(y-f),Ia[3]=A;const B=n8(M,Uue,4,Ia,zue);return zue[B-1]}function SN(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=Qct*l?u:-eft(e,t,n,r,i,s,l)}const Vue=Math.pow(2,-52),TN=new Uint32Array(512);class r3{static from(t,n=sft,r=oft){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new r3(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let C=0;C<o;C++){const k=t[2*C],N=t[2*C+1];k<a&&(a=k),N<u&&(u=N),k>l&&(l=k),N>c&&(c=N),this._ids[C]=C}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let C=0,k=1/0;C<o;C++){const N=r8(f,d,t[2*C],t[2*C+1]);N<k&&(h=C,k=N)}const g=t[2*h],y=t[2*h+1];for(let C=0,k=1/0;C<o;C++){if(C===h)continue;const N=r8(g,y,t[2*C],t[2*C+1]);N<k&&N>0&&(p=C,k=N)}let v=t[2*p],b=t[2*p+1],w=1/0;for(let C=0;C<o;C++){if(C===h||C===p)continue;const k=rft(g,y,v,b,t[2*C],t[2*C+1]);k<w&&(m=C,w=k)}let E=t[2*m],T=t[2*m+1];if(w===1/0){for(let N=0;N<o;N++)this._dists[N]=t[2*N]-t[0]||t[2*N+1]-t[1];hw(this._ids,this._dists,0,o-1);const C=new Uint32Array(o);let k=0;for(let N=0,O=-1/0;N<o;N++){const P=this._ids[N],$=this._dists[P];$>O&&(C[k++]=P,O=$)}this.hull=C.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(SN(g,y,v,b,E,T)<0){const C=p,k=v,N=b;p=m,v=E,b=T,m=C,E=k,T=N}const S=ift(g,y,v,b,E,T);this._cx=S.x,this._cy=S.y;for(let C=0;C<o;C++)this._dists[C]=r8(t[2*C],t[2*C+1],S.x,S.y);hw(this._ids,this._dists,0,o-1),this._hullStart=h;let A=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(E,T)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let C=0,k,N;C<this._ids.length;C++){const O=this._ids[C],P=t[2*O],$=t[2*O+1];if(C>0&&Math.abs(P-k)<=Vue&&Math.abs($-N)<=Vue||(k=P,N=$,O===h||O===p||O===m))continue;let F=0;for(let D=0,z=this._hashKey(P,$);D<this._hashSize&&(F=s[(z+D)%this._hashSize],!(F!==-1&&F!==r[F]));D++);F=n[F];let M=F,B;for(;B=r[M],SN(P,$,t[2*M],t[2*M+1],t[2*B],t[2*B+1])>=0;)if(M=B,M===F){M=-1;break}if(M===-1)continue;let U=this._addTriangle(M,O,r[M],-1,-1,i[M]);i[O]=this._legalize(U+2),i[M]=U,A++;let H=r[M];for(;B=r[H],SN(P,$,t[2*H],t[2*H+1],t[2*B],t[2*B+1])<0;)U=this._addTriangle(H,O,B,i[O],-1,i[H]),i[O]=this._legalize(U+2),r[H]=H,A--,H=B;if(M===F)for(;B=n[M],SN(P,$,t[2*B],t[2*B+1],t[2*M],t[2*M+1])<0;)U=this._addTriangle(B,O,M,-1,i[M],i[B]),this._legalize(U+2),i[B]=U,r[M]=M,A--,M=B;this._hullStart=n[O]=M,r[M]=n[H]=O,r[O]=H,s[this._hashKey(P,$)]=O,s[this._hashKey(t[2*M],t[2*M+1])]=M}this.hull=new Uint32Array(A);for(let C=0,k=this._hullStart;C<A;C++)this.hull[C]=k,k=r[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(tft(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=TN[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(nft(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<TN.length&&(TN[s++]=v)}else{if(s===0)break;t=TN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function tft(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function r8(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function nft(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function rft(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function ift(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function hw(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;vT(e,i,s),t[e[n]]>t[e[r]]&&vT(e,n,r),t[e[s]]>t[e[r]]&&vT(e,s,r),t[e[n]]>t[e[s]]&&vT(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;vT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(hw(e,t,s,r),hw(e,t,n,o-1)):(hw(e,t,n,o-1),hw(e,t,s,r))}}function vT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function sft(e){return e[0]}function oft(e){return e[1]}const Hue=1e-6;class Zv{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Hue||Math.abs(this._y1-s)>Hue)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class O7{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let aft=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const w=r[m]*2,E=r[m+1]*2,T=r[m+2]*2,S=t[w],A=t[w+1],C=t[E],k=t[E+1],N=t[T],O=t[T+1],P=C-S,$=k-A,F=N-S,M=O-A,B=(P*M-$*F)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const H of n)s+=t[H*2],o+=t[H*2+1];s/=n.length,o/=n.length}const U=1e9*Math.sign((s-S)*M-(o-A)*F);v=(S+N)/2-U*M,b=(A+O)/2+U*F}else{const U=1/B,H=P*P+$*$,D=F*F+M*M;v=S+(M*H-$*D)*U,b=A+(P*D-F*H)*U}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new Zv:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Zv:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Zv:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new O7;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const uft=2*Math.PI,E_=Math.pow;function lft(e){return e[0]}function cft(e){return e[1]}function fft(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function dft(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class nK{static from(t,n=lft,r=cft,i){return new nK("length"in t?hft(t,n,r,i):Float64Array.from(pft(t,n,r,i)))}constructor(t){this._delaunator=new r3(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&fft(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=dft(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new r3(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new aft(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=E_(n-l[t*2],2)+E_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=E_(n-l[p*2],2)+E_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&E_(n-l[h*2],2)+E_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new Zv:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Zv:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,uft)}return r&&r.value()}renderHull(t){const n=t==null?t=new Zv:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new O7;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Zv:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new O7;return this.renderTriangle(t,n),n.value()}}function hft(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*pft(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var que={},i8={},s8=34,bT=10,o8=13;function mSe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function mft(e,t){var n=mSe(e);return function(r,i){return t(n(r),i,e)}}function Wue(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function hu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function gft(e){return e<0?"-"+hu(-e,6):e>9999?"+"+hu(e,6):hu(e,4)}function yft(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":gft(e.getUTCFullYear())+"-"+hu(e.getUTCMonth()+1,2)+"-"+hu(e.getUTCDate(),2)+(i?"T"+hu(t,2)+":"+hu(n,2)+":"+hu(r,2)+"."+hu(i,3)+"Z":r?"T"+hu(t,2)+":"+hu(n,2)+":"+hu(r,2)+"Z":n||t?"T"+hu(t,2)+":"+hu(n,2)+"Z":"")}function gSe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?mft(g,d):mSe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===bT&&--p,f.charCodeAt(p-1)===o8&&--p;function w(){if(v)return i8;if(b)return b=!1,que;var T,S=m,A;if(f.charCodeAt(S)===s8){for(;m++<p&&f.charCodeAt(m)!==s8||f.charCodeAt(++m)===s8;);return(T=m)>=p?v=!0:(A=f.charCodeAt(m++))===bT?b=!0:A===o8&&(b=!0,f.charCodeAt(m)===bT&&++m),f.slice(S+1,T-1).replace(/""/g,'"')}for(;m<p;){if((A=f.charCodeAt(T=m++))===bT)b=!0;else if(A===o8)b=!0,f.charCodeAt(m)===bT&&++m;else if(A!==n)continue;return f.slice(S,T)}return v=!0,f.slice(S,p)}for(;(y=w())!==i8;){for(var E=[];y!==que&&y!==i8;)E.push(y),y=w();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Wue(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Wue(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?yft(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var vft=gSe(","),bft=vft.parse;function _ft(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function wft(e,t){return fetch(e,t).then(_ft)}function Eft(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),wft(t,n).then(function(i){return e(i,r)})}}var xft=Eft(bft);function Sft(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Tft(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return ySe(this.cover(t,n),t,n,e)}function ySe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function Aft(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)ySe(this,o[n],a[n],e[n]);return this}function Cft(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Ift(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function kft(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function La(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Rft(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new La(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new La(h[3],g,y,u,l),new La(h[2],o,y,g,l),new La(h[1],g,a,u,y),new La(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),w=v*v+b*b;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function Nft(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function Pft(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Dft(){return this._root}function Oft(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function $ft(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new La(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new La(i,l,c,a,u)),(i=r[2])&&t.push(new La(i,s,c,l,u)),(i=r[1])&&t.push(new La(i,l,o,a,c)),(i=r[0])&&t.push(new La(i,s,o,l,c))}return this}function Mft(e){var t=[],n=[],r;for(this._root&&t.push(new La(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new La(s,o,a,c,f)),(s=i[1])&&t.push(new La(s,c,a,u,f)),(s=i[2])&&t.push(new La(s,o,f,c,l)),(s=i[3])&&t.push(new La(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Lft(e){return e[0]}function Fft(e){return arguments.length?(this._x=e,this):this._x}function jft(e){return e[1]}function Bft(e){return arguments.length?(this._y=e,this):this._y}function rK(e,t,n){var r=new iK(t??Lft,n??jft,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function iK(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Gue(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var tu=rK.prototype=iK.prototype;tu.copy=function(){var e=new iK(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Gue(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Gue(r));return e};tu.add=Tft;tu.addAll=Aft;tu.cover=Cft;tu.data=Ift;tu.extent=kft;tu.find=Rft;tu.remove=Nft;tu.removeAll=Pft;tu.root=Dft;tu.size=Oft;tu.visit=$ft;tu.visitAfter=Mft;tu.x=Fft;tu.y=Bft;function Ba(e){return function(){return e}}function Wg(e){return(e()-.5)*1e-6}function Uft(e){return e.x+e.vx}function zft(e){return e.y+e.vy}function Vft(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Ba(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=rK(t,Uft,zft).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,w,E,T,S){var A=b.data,C=b.r,k=m+C;if(A){if(A.index>d.index){var N=h-A.x-A.vx,O=p-A.y-A.vy,P=N*N+O*O;P<k*k&&(N===0&&(N=Wg(r),P+=N*N),O===0&&(O=Wg(r),P+=O*O),P=(k-(P=Math.sqrt(P)))/P*i,d.vx+=(N*=P)*(k=(C*=C)/(g+C)),d.vy+=(O*=P)*k,A.vx-=N*(k=1-k),A.vy-=O*k)}return}return w>h+k||T<h-k||E>p+k||S<p-k}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Ba(+l),u(),o):e},o}function Hft(e){return e.index}function Yue(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function qft(e){var t=Hft,n=f,r,i=Ba(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,w,E,T,S,A,C,k;b<v;++b)w=e[b],E=w.source,T=w.target,S=T.x+T.vx-E.x-E.vx||Wg(l),A=T.y+T.vy-E.y-E.vy||Wg(l),C=Math.sqrt(S*S+A*A),C=(C-s[b])/C*g*r[b],S*=C,A*=C,T.vx-=S*(k=u[b]),T.vy-=A*k,E.vx+=S*(k=1-k),E.vy+=A*k}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((E,T)=>[t(E,T,o),E])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=Yue(b,w.source)),typeof w.target!="object"&&(w.target=Yue(b,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Ba(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Ba(+g),m(),d):i},d}const Wft=1664525,Gft=1013904223,Kue=4294967296;function Yft(){let e=1;return()=>(e=(Wft*e+Gft)%Kue)/Kue}function Kft(e){return e.x}function Xft(e){return e.y}var Qft=10,Jft=Math.PI*(3-Math.sqrt(5));function Zft(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=QY(f),l=e6("tick","end"),c=Yft();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=Qft*Math.sqrt(.5+m),b=m*Jft;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,w,E,T,S,A;for(y==null?y=1/0:y*=y,v=0;v<b;++v)S=e[v],w=m-S.x,E=g-S.y,T=w*w+E*E,T<y&&(A=S,y=T);return A},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function edt(){var e,t,n,r,i=Ba(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=rK(e,Kft,Xft).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,w;if(h.length){for(v=b=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,w=y*y+v*v;if(b*b/u<w)return w<a&&(y===0&&(y=Wg(n),w+=y*y),v===0&&(v=Wg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Wg(n),w+=y*y),v===0&&(v=Wg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(b=s[h.data.index]*r/w,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Ba(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function tdt(e){var t=Ba(.1),n,r,i;typeof e!="function"&&(e=Ba(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ba(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Ba(+a),o(),s):e},s}function ndt(e){var t=Ba(.1),n,r,i;typeof e!="function"&&(e=Ba(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ba(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Ba(+a),o(),s):e},s}function rdt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function i3(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function NE(e){return e=i3(Math.abs(e)),e?e[1]:NaN}function idt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function sdt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var odt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function B1(e){if(!(t=odt.exec(e)))throw new Error("invalid format: "+e);var t;return new sK({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}B1.prototype=sK.prototype;function sK(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}sK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function adt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var vSe;function udt(e,t){var n=i3(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(vSe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+i3(e,Math.max(0,t+s-1))[0]}function Xue(e,t){var n=i3(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Que={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:rdt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Xue(e*100,t),r:Xue,s:udt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Jue(e){return e}var Zue=Array.prototype.map,ele=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function bSe(e){var t=e.grouping===void 0||e.thousands===void 0?Jue:idt(Zue.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Jue:sdt(Zue.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=B1(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,w=f.trim,E=f.type;E==="n"?(v=!0,E="g"):Que[E]||(b===void 0&&(b=12),w=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var T=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",S=m==="$"?r:/[%p]/.test(E)?o:"",A=Que[E],C=/[defgprs%]/.test(E);b=b===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function k(N){var O=T,P=S,$,F,M;if(E==="c")P=A(N)+P,N="";else{N=+N;var B=N<0||1/N<0;if(N=isNaN(N)?u:A(Math.abs(N),b),w&&(N=adt(N)),B&&+N==0&&p!=="+"&&(B=!1),O=(B?p==="("?p:a:p==="-"||p==="("?"":p)+O,P=(E==="s"?ele[8+vSe/3]:"")+P+(B&&p==="("?")":""),C){for($=-1,F=N.length;++$<F;)if(M=N.charCodeAt($),48>M||M>57){P=(M===46?i+N.slice($+1):N.slice($))+P,N=N.slice(0,$);break}}}v&&!g&&(N=t(N,1/0));var U=O.length+N.length+P.length,H=U<y?new Array(y-U+1).join(d):"";switch(v&&g&&(N=t(H+N,H.length?y-P.length:1/0),H=""),h){case"<":N=O+N+P+H;break;case"=":N=O+H+N+P;break;case"^":N=H.slice(0,U=H.length>>1)+O+N+P+H.slice(U);break;default:N=H+O+N+P;break}return s(N)}return k.toString=function(){return f+""},k}function c(f,d){var h=l((f=B1(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(NE(d)/3)))*3,m=Math.pow(10,-p),g=ele[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var AN,nS,oK;ldt({thousands:",",grouping:[3],currency:["$",""]});function ldt(e){return AN=bSe(e),nS=AN.format,oK=AN.formatPrefix,AN}function _Se(e){return Math.max(0,-NE(Math.abs(e)))}function wSe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(NE(t)/3)))*3-NE(Math.abs(e)))}function ESe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,NE(t)-NE(e))+1}var jt=1e-6,s3=1e-12,Rn=Math.PI,qi=Rn/2,o3=Rn/4,Ya=Rn*2,ts=180/Rn,In=Rn/180,Yn=Math.abs,rS=Math.atan,Ic=Math.atan2,Ut=Math.cos,CN=Math.ceil,xSe=Math.exp,$7=Math.hypot,a3=Math.log,a8=Math.pow,Lt=Math.sin,yc=Math.sign||function(e){return e>0?1:e<0?-1:0},Ka=Math.sqrt,aK=Math.tan;function SSe(e){return e>1?0:e<-1?Rn:Math.acos(e)}function Wu(e){return e>1?qi:e<-1?-qi:Math.asin(e)}function Ao(){}function u3(e,t){e&&nle.hasOwnProperty(e.type)&&nle[e.type](e,t)}var tle={Feature:function(e,t){u3(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)u3(n[r].geometry,t)}},nle={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){M7(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)M7(n[r],t,0)},Polygon:function(e,t){rle(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)rle(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)u3(n[r],t)}};function M7(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function rle(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)M7(e[n],t,1);t.polygonEnd()}function kp(e,t){e&&tle.hasOwnProperty(e.type)?tle[e.type](e,t):u3(e,t)}var l3=new Va,c3=new Va,TSe,ASe,L7,F7,j7,ph={point:Ao,lineStart:Ao,lineEnd:Ao,polygonStart:function(){l3=new Va,ph.lineStart=cdt,ph.lineEnd=fdt},polygonEnd:function(){var e=+l3;c3.add(e<0?Ya+e:e),this.lineStart=this.lineEnd=this.point=Ao},sphere:function(){c3.add(Ya)}};function cdt(){ph.point=ddt}function fdt(){CSe(TSe,ASe)}function ddt(e,t){ph.point=CSe,TSe=e,ASe=t,e*=In,t*=In,L7=e,F7=Ut(t=t/2+o3),j7=Lt(t)}function CSe(e,t){e*=In,t*=In,t=t/2+o3;var n=e-L7,r=n>=0?1:-1,i=r*n,s=Ut(t),o=Lt(t),a=j7*o,u=F7*s+a*Ut(i),l=a*r*Lt(i);l3.add(Ic(l,u)),L7=e,F7=s,j7=o}function hdt(e){return c3=new Va,kp(e,ph),c3*2}function f3(e){return[Ic(e[1],e[0]),Wu(e[2])]}function U1(e){var t=e[0],n=e[1],r=Ut(n);return[r*Ut(t),r*Lt(t),Lt(n)]}function IN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function PE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function u8(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function kN(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function d3(e){var t=Ka(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ii,Eu,Li,hl,Ev,ISe,kSe,Bw,dA,Tg,ym,Sp={point:B7,lineStart:ile,lineEnd:sle,polygonStart:function(){Sp.point=NSe,Sp.lineStart=pdt,Sp.lineEnd=mdt,dA=new Va,ph.polygonStart()},polygonEnd:function(){ph.polygonEnd(),Sp.point=B7,Sp.lineStart=ile,Sp.lineEnd=sle,l3<0?(Ii=-(Li=180),Eu=-(hl=90)):dA>jt?hl=90:dA<-jt&&(Eu=-90),ym[0]=Ii,ym[1]=Li},sphere:function(){Ii=-(Li=180),Eu=-(hl=90)}};function B7(e,t){Tg.push(ym=[Ii=e,Li=e]),t<Eu&&(Eu=t),t>hl&&(hl=t)}function RSe(e,t){var n=U1([e*In,t*In]);if(Bw){var r=PE(Bw,n),i=[r[1],-r[0],0],s=PE(i,r);d3(s),s=f3(s);var o=e-Ev,a=o>0?1:-1,u=s[0]*ts*a,l,c=Yn(o)>180;c^(a*Ev<u&&u<a*e)?(l=s[1]*ts,l>hl&&(hl=l)):(u=(u+360)%360-180,c^(a*Ev<u&&u<a*e)?(l=-s[1]*ts,l<Eu&&(Eu=l)):(t<Eu&&(Eu=t),t>hl&&(hl=t))),c?e<Ev?fl(Ii,e)>fl(Ii,Li)&&(Li=e):fl(e,Li)>fl(Ii,Li)&&(Ii=e):Li>=Ii?(e<Ii&&(Ii=e),e>Li&&(Li=e)):e>Ev?fl(Ii,e)>fl(Ii,Li)&&(Li=e):fl(e,Li)>fl(Ii,Li)&&(Ii=e)}else Tg.push(ym=[Ii=e,Li=e]);t<Eu&&(Eu=t),t>hl&&(hl=t),Bw=n,Ev=e}function ile(){Sp.point=RSe}function sle(){ym[0]=Ii,ym[1]=Li,Sp.point=B7,Bw=null}function NSe(e,t){if(Bw){var n=e-Ev;dA.add(Yn(n)>180?n+(n>0?360:-360):n)}else ISe=e,kSe=t;ph.point(e,t),RSe(e,t)}function pdt(){ph.lineStart()}function mdt(){NSe(ISe,kSe),ph.lineEnd(),Yn(dA)>jt&&(Ii=-(Li=180)),ym[0]=Ii,ym[1]=Li,Bw=null}function fl(e,t){return(t-=e)<0?t+360:t}function gdt(e,t){return e[0]-t[0]}function ole(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function ydt(e){var t,n,r,i,s,o,a;if(hl=Li=-(Ii=Eu=1/0),Tg=[],kp(e,Sp),n=Tg.length){for(Tg.sort(gdt),t=1,r=Tg[0],s=[r];t<n;++t)i=Tg[t],ole(r,i[0])||ole(r,i[1])?(fl(r[0],i[1])>fl(r[0],r[1])&&(r[1]=i[1]),fl(i[0],r[1])>fl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=fl(r[1],i[0]))>o&&(o=a,Ii=i[0],Li=r[1])}return Tg=ym=null,Ii===1/0||Eu===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ii,Eu],[Li,hl]]}var f2,h3,p3,m3,g3,y3,v3,b3,U7,z7,V7,PSe,DSe,Oa,$a,Ma,Sf={sphere:Ao,point:uK,lineStart:ale,lineEnd:ule,polygonStart:function(){Sf.lineStart=_dt,Sf.lineEnd=wdt},polygonEnd:function(){Sf.lineStart=ale,Sf.lineEnd=ule}};function uK(e,t){e*=In,t*=In;var n=Ut(t);ck(n*Ut(e),n*Lt(e),Lt(t))}function ck(e,t,n){++f2,p3+=(e-p3)/f2,m3+=(t-m3)/f2,g3+=(n-g3)/f2}function ale(){Sf.point=vdt}function vdt(e,t){e*=In,t*=In;var n=Ut(t);Oa=n*Ut(e),$a=n*Lt(e),Ma=Lt(t),Sf.point=bdt,ck(Oa,$a,Ma)}function bdt(e,t){e*=In,t*=In;var n=Ut(t),r=n*Ut(e),i=n*Lt(e),s=Lt(t),o=Ic(Ka((o=$a*s-Ma*i)*o+(o=Ma*r-Oa*s)*o+(o=Oa*i-$a*r)*o),Oa*r+$a*i+Ma*s);h3+=o,y3+=o*(Oa+(Oa=r)),v3+=o*($a+($a=i)),b3+=o*(Ma+(Ma=s)),ck(Oa,$a,Ma)}function ule(){Sf.point=uK}function _dt(){Sf.point=Edt}function wdt(){OSe(PSe,DSe),Sf.point=uK}function Edt(e,t){PSe=e,DSe=t,e*=In,t*=In,Sf.point=OSe;var n=Ut(t);Oa=n*Ut(e),$a=n*Lt(e),Ma=Lt(t),ck(Oa,$a,Ma)}function OSe(e,t){e*=In,t*=In;var n=Ut(t),r=n*Ut(e),i=n*Lt(e),s=Lt(t),o=$a*s-Ma*i,a=Ma*r-Oa*s,u=Oa*i-$a*r,l=$7(o,a,u),c=Wu(l),f=l&&-c/l;U7.add(f*o),z7.add(f*a),V7.add(f*u),h3+=c,y3+=c*(Oa+(Oa=r)),v3+=c*($a+($a=i)),b3+=c*(Ma+(Ma=s)),ck(Oa,$a,Ma)}function xdt(e){f2=h3=p3=m3=g3=y3=v3=b3=0,U7=new Va,z7=new Va,V7=new Va,kp(e,Sf);var t=+U7,n=+z7,r=+V7,i=$7(t,n,r);return i<s3&&(t=y3,n=v3,r=b3,h3<jt&&(t=p3,n=m3,r=g3),i=$7(t,n,r),i<s3)?[NaN,NaN]:[Ic(n,t)*ts,Wu(r/i)*ts]}function H7(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function q7(e,t){return Yn(e)>Rn&&(e-=Math.round(e/Ya)*Ya),[e,t]}q7.invert=q7;function $Se(e,t,n){return(e%=Ya)?t||n?H7(cle(e),fle(t,n)):cle(e):t||n?fle(t,n):q7}function lle(e){return function(t,n){return t+=e,Yn(t)>Rn&&(t-=Math.round(t/Ya)*Ya),[t,n]}}function cle(e){var t=lle(e);return t.invert=lle(-e),t}function fle(e,t){var n=Ut(e),r=Lt(e),i=Ut(t),s=Lt(t);function o(a,u){var l=Ut(u),c=Ut(a)*l,f=Lt(a)*l,d=Lt(u),h=d*n+c*r;return[Ic(f*i-h*s,c*n-d*r),Wu(h*i+f*s)]}return o.invert=function(a,u){var l=Ut(u),c=Ut(a)*l,f=Lt(a)*l,d=Lt(u),h=d*i-f*s;return[Ic(f*i+d*s,c*n+h*r),Wu(h*n-c*r)]},o}function Sdt(e){e=$Se(e[0]*In,e[1]*In,e.length>2?e[2]*In:0);function t(n){return n=e(n[0]*In,n[1]*In),n[0]*=ts,n[1]*=ts,n}return t.invert=function(n){return n=e.invert(n[0]*In,n[1]*In),n[0]*=ts,n[1]*=ts,n},t}function Tdt(e,t,n,r,i,s){if(n){var o=Ut(t),a=Lt(t),u=r*n;i==null?(i=t+r*Ya,s=t-u/2):(i=dle(o,i),s=dle(o,s),(r>0?i<s:i>s)&&(i+=r*Ya));for(var l,c=i;r>0?c>s:c<s;c-=u)l=f3([o,-a*Ut(c),-a*Lt(c)]),e.point(l[0],l[1])}}function dle(e,t){t=U1(t),t[0]-=e,d3(t);var n=SSe(-t[1]);return((-t[2]<0?-n:n)+Ya-jt)%Ya}function MSe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Ao,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function sD(e,t){return Yn(e[0]-t[0])<jt&&Yn(e[1]-t[1])<jt}function RN(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function LSe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(sD(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*jt}s.push(v=new RN(g,p,null,!0)),o.push(v.o=new RN(g,null,v,!1)),s.push(v=new RN(y,p,null,!1)),o.push(v.o=new RN(y,null,v,!0))}}),!!s.length){for(o.sort(t),hle(s),hle(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function hle(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function l8(e){return Yn(e[0])<=Rn?e[0]:yc(e[0])*((Yn(e[0])+Rn)%Ya-Rn)}function Adt(e,t){var n=l8(t),r=t[1],i=Lt(r),s=[Lt(n),-Ut(n),0],o=0,a=0,u=new Va;i===1?r=qi+jt:i===-1&&(r=-qi-jt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=l8(h),m=h[1]/2+o3,g=Lt(m),y=Ut(m),v=0;v<d;++v,p=w,g=T,y=S,h=b){var b=f[v],w=l8(b),E=b[1]/2+o3,T=Lt(E),S=Ut(E),A=w-p,C=A>=0?1:-1,k=C*A,N=k>Rn,O=g*T;if(u.add(Ic(O*C*Lt(k),y*S+O*Ut(k))),o+=N?A+C*Ya:A,N^p>=n^w>=n){var P=PE(U1(h),U1(b));d3(P);var $=PE(s,P);d3($);var F=(N^A>=0?-1:1)*Wu($[2]);(r>F||r===F&&(P[0]||P[1]))&&(a+=N^A>=0?1:-1)}}return(o<-jt||o<jt&&u<-s3)^a&1}function FSe(e,t,n,r){return function(i){var s=t(i),o=MSe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=wxe(c);var w=Adt(l,r);c.length?(u||(i.polygonStart(),u=!0),LSe(c,Idt,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,E){e(w,E)&&i.point(w,E)}function p(w,E){s.point(w,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,E){f.push([w,E]),a.point(w,E)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),E=o.result(),T,S=E.length,A,C,k;if(f.pop(),l.push(f),f=null,!!S){if(w&1){if(C=E[0],(A=C.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),T=0;T<A;++T)i.point((k=C[T])[0],k[1]);i.lineEnd()}return}S>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(Cdt))}}return d}}function Cdt(e){return e.length>1}function Idt(e,t){return((e=e.x)[0]<0?e[1]-qi-jt:qi-e[1])-((t=t.x)[0]<0?t[1]-qi-jt:qi-t[1])}const ple=FSe(function(){return!0},kdt,Ndt,[-Rn,-qi]);function kdt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Rn:-Rn,u=Yn(s-t);Yn(u-Rn)<jt?(e.point(t,n=(n+o)/2>0?qi:-qi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Rn&&(Yn(t-r)<jt&&(t-=r*jt),Yn(s-a)<jt&&(s-=a*jt),n=Rdt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Rdt(e,t,n,r){var i,s,o=Lt(e-n);return Yn(o)>jt?rS((Lt(t)*(s=Ut(r))*Lt(n)-Lt(r)*(i=Ut(t))*Lt(e))/(i*s*o)):(t+r)/2}function Ndt(e,t,n,r){var i;if(e==null)i=n*qi,r.point(-Rn,i),r.point(0,i),r.point(Rn,i),r.point(Rn,0),r.point(Rn,-i),r.point(0,-i),r.point(-Rn,-i),r.point(-Rn,0),r.point(-Rn,i);else if(Yn(e[0]-t[0])>jt){var s=e[0]<t[0]?Rn:-Rn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Pdt(e){var t=Ut(e),n=2*In,r=t>0,i=Yn(t)>jt;function s(c,f,d,h){Tdt(h,e,n,d,c,f)}function o(c,f){return Ut(c)*Ut(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,w=o(g,y),E=r?w?0:l(g,y):w?l(g+(g<0?Rn:-Rn),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(b=u(f,v),(!b||sD(f,b)||sD(v,b))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^w){var T;!(E&d)&&(T=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(T[0][0],T[0][1]),c.point(T[1][0],T[1][1]),c.lineEnd()):(c.point(T[1][0],T[1][1]),c.lineEnd(),c.lineStart(),c.point(T[0][0],T[0][1],3)))}w&&(!f||!sD(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=U1(c),p=U1(f),m=[1,0,0],g=PE(h,p),y=IN(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var w=t*y/b,E=-t*v/b,T=PE(m,g),S=kN(m,w),A=kN(g,E);u8(S,A);var C=T,k=IN(S,C),N=IN(C,C),O=k*k-N*(IN(S,S)-1);if(!(O<0)){var P=Ka(O),$=kN(C,(-k-P)/N);if(u8($,S),$=f3($),!d)return $;var F=c[0],M=f[0],B=c[1],U=f[1],H;M<F&&(H=F,F=M,M=H);var D=M-F,z=Yn(D-Rn)<jt,W=z||D<jt;if(!z&&U<B&&(H=B,B=U,U=H),W?z?B+U>0^$[1]<(Yn($[0]-F)<jt?B:U):B<=$[1]&&$[1]<=U:D>Rn^(F<=$[0]&&$[0]<=M)){var j=kN(C,(-k+P)/N);return u8(j,S),[$,f3(j)]}}}function l(c,f){var d=r?e:Rn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return FSe(o,a,s,r?[0,-e]:[-Rn,e-Rn])}function Ddt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var d2=1e9,NN=-d2;function jSe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Yn(l[0]-e)<jt?c>0?0:3:Yn(l[0]-n)<jt?c>0?2:1:Yn(l[1]-t)<jt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=MSe(),d,h,p,m,g,y,v,b,w,E,T,S={point:A,lineStart:O,lineEnd:P,polygonStart:k,polygonEnd:N};function A(F,M){i(F,M)&&c.point(F,M)}function C(){for(var F=0,M=0,B=h.length;M<B;++M)for(var U=h[M],H=1,D=U.length,z=U[0],W,j,q=z[0],G=z[1];H<D;++H)W=q,j=G,z=U[H],q=z[0],G=z[1],j<=r?G>r&&(q-W)*(r-j)>(G-j)*(e-W)&&++F:G<=r&&(q-W)*(r-j)<(G-j)*(e-W)&&--F;return F}function k(){c=f,d=[],h=[],T=!0}function N(){var F=C(),M=T&&F,B=(d=wxe(d)).length;(M||B)&&(l.polygonStart(),M&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),B&&LSe(d,a,F,s,l),l.polygonEnd()),c=l,d=h=p=null}function O(){S.point=$,h&&h.push(p=[]),E=!0,w=!1,v=b=NaN}function P(){d&&($(m,g),y&&w&&f.rejoin(),d.push(f.result())),S.point=A,w&&c.lineEnd()}function $(F,M){var B=i(F,M);if(h&&p.push([F,M]),E)m=F,g=M,y=B,E=!1,B&&(c.lineStart(),c.point(F,M));else if(B&&w)c.point(F,M);else{var U=[v=Math.max(NN,Math.min(d2,v)),b=Math.max(NN,Math.min(d2,b))],H=[F=Math.max(NN,Math.min(d2,F)),M=Math.max(NN,Math.min(d2,M))];Ddt(U,H,e,t,n,r)?(w||(c.lineStart(),c.point(U[0],U[1])),c.point(H[0],H[1]),B||c.lineEnd(),T=!1):B&&(c.lineStart(),c.point(F,M),T=!1)}v=F,b=M,w=B}return S}}function mle(e,t,n){var r=Ru(e,t-jt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function gle(e,t,n){var r=Ru(e,t-jt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Odt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Ru(CN(r/c)*c,n,c).map(p).concat(Ru(CN(a/f)*f,o,f).map(m)).concat(Ru(CN(t/u)*u,e,u).filter(function(b){return Yn(b%c)>jt}).map(d)).concat(Ru(CN(s/l)*l,i,l).filter(function(b){return Yn(b%f)>jt}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=mle(s,i,90),h=gle(t,e,g),p=mle(a,o,90),m=gle(r,n,g),y):g},y.extentMajor([[-180,-90+jt],[180,90-jt]]).extentMinor([[-180,-80-jt],[180,80+jt]])}const RC=e=>e;var c8=new Va,W7=new Va,BSe,USe,G7,Y7,Rp={point:Ao,lineStart:Ao,lineEnd:Ao,polygonStart:function(){Rp.lineStart=$dt,Rp.lineEnd=Ldt},polygonEnd:function(){Rp.lineStart=Rp.lineEnd=Rp.point=Ao,c8.add(Yn(W7)),W7=new Va},result:function(){var e=c8/2;return c8=new Va,e}};function $dt(){Rp.point=Mdt}function Mdt(e,t){Rp.point=zSe,BSe=G7=e,USe=Y7=t}function zSe(e,t){W7.add(Y7*e-G7*t),G7=e,Y7=t}function Ldt(){zSe(BSe,USe)}var DE=1/0,_3=DE,NC=-DE,w3=NC,E3={point:Fdt,lineStart:Ao,lineEnd:Ao,polygonStart:Ao,polygonEnd:Ao,result:function(){var e=[[DE,_3],[NC,w3]];return NC=w3=-(_3=DE=1/0),e}};function Fdt(e,t){e<DE&&(DE=e),e>NC&&(NC=e),t<_3&&(_3=t),t>w3&&(w3=t)}var K7=0,X7=0,h2=0,x3=0,S3=0,pw=0,Q7=0,J7=0,p2=0,VSe,HSe,Dd,Od,pc={point:z1,lineStart:yle,lineEnd:vle,polygonStart:function(){pc.lineStart=Udt,pc.lineEnd=zdt},polygonEnd:function(){pc.point=z1,pc.lineStart=yle,pc.lineEnd=vle},result:function(){var e=p2?[Q7/p2,J7/p2]:pw?[x3/pw,S3/pw]:h2?[K7/h2,X7/h2]:[NaN,NaN];return K7=X7=h2=x3=S3=pw=Q7=J7=p2=0,e}};function z1(e,t){K7+=e,X7+=t,++h2}function yle(){pc.point=jdt}function jdt(e,t){pc.point=Bdt,z1(Dd=e,Od=t)}function Bdt(e,t){var n=e-Dd,r=t-Od,i=Ka(n*n+r*r);x3+=i*(Dd+e)/2,S3+=i*(Od+t)/2,pw+=i,z1(Dd=e,Od=t)}function vle(){pc.point=z1}function Udt(){pc.point=Vdt}function zdt(){qSe(VSe,HSe)}function Vdt(e,t){pc.point=qSe,z1(VSe=Dd=e,HSe=Od=t)}function qSe(e,t){var n=e-Dd,r=t-Od,i=Ka(n*n+r*r);x3+=i*(Dd+e)/2,S3+=i*(Od+t)/2,pw+=i,i=Od*e-Dd*t,Q7+=i*(Dd+e),J7+=i*(Od+t),p2+=i*3,z1(Dd=e,Od=t)}function WSe(e){this._context=e}WSe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ya);break}}},result:Ao};var Z7=new Va,f8,GSe,YSe,m2,g2,PC={point:Ao,lineStart:function(){PC.point=Hdt},lineEnd:function(){f8&&KSe(GSe,YSe),PC.point=Ao},polygonStart:function(){f8=!0},polygonEnd:function(){f8=null},result:function(){var e=+Z7;return Z7=new Va,e}};function Hdt(e,t){PC.point=KSe,GSe=m2=e,YSe=g2=t}function KSe(e,t){m2-=e,g2-=t,Z7.add(Ka(m2*m2+g2*g2)),m2=e,g2=t}let ble,T3,_le,wle;class Ele{constructor(t){this._append=t==null?XSe:qdt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==_le||this._append!==T3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,_le=r,T3=this._append,wle=this._,this._=i}this._+=wle;break}}}result(){const t=this._;return this._="",t.length?t:null}}function XSe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function qdt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return XSe;if(t!==ble){const n=10**t;ble=t,T3=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return T3}function QSe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),kp(a,i(s))),s.result()}return o.area=function(a){return kp(a,i(Rp)),Rp.result()},o.measure=function(a){return kp(a,i(PC)),PC.result()},o.bounds=function(a){return kp(a,i(E3)),E3.result()},o.centroid=function(a){return kp(a,i(pc)),pc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,RC):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Ele(n)):new WSe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new Ele(n)),o},o.projection(e).digits(n).context(t)}function l6(e){return function(t){var n=new ez;for(var r in e)n[r]=e[r];return n.stream=t,n}}function ez(){}ez.prototype={constructor:ez,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function lK(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),kp(n,e.stream(E3)),t(E3.result()),r!=null&&e.clipExtent(r),e}function c6(e,t,n){return lK(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function cK(e,t,n){return c6(e,[[0,0],t],n)}function fK(e,t,n){return lK(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function dK(e,t,n){return lK(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var xle=16,Wdt=Ut(30*In);function Sle(e,t){return+t?Ydt(e,t):Gdt(e)}function Gdt(e){return l6({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Ydt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var w=o+d,E=a+h,T=u+p,S=Ka(w*w+E*E+T*T),A=Wu(T/=S),C=Yn(Yn(T)-1)<jt||Yn(s-f)<jt?(s+f)/2:Ic(E,w),k=e(C,A),N=k[0],O=k[1],P=N-r,$=O-i,F=v*P-y*$;(F*F/b>t||Yn((y*P+v*$)/b-.5)>.3||o*d+a*h+u*p<Wdt)&&(n(r,i,s,o,a,u,N,O,C,w/=S,E/=S,T,m,g),g.point(N,O),n(N,O,C,w,E,T,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(A,C){A=e(A,C),r.point(A[0],A[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(A,C){var k=U1([A,C]),N=e(A,C);n(f,d,c,h,p,m,f=N[0],d=N[1],c=A,h=k[0],p=k[1],m=k[2],xle,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function E(){v(),g.point=T,g.lineEnd=S}function T(A,C){b(i=A,C),s=f,o=d,a=h,u=p,l=m,g.point=b}function S(){n(f,d,c,h,p,m,s,o,i,a,u,l,xle,r),g.lineEnd=w,w()}return g}}var Kdt=l6({point:function(e,t){this.stream.point(e*In,t*In)}});function Xdt(e){return l6({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Qdt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Tle(e,t,n,r,i,s){if(!s)return Qdt(e,t,n,r,i);var o=Ut(s),a=Lt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Uh(e){return JSe(function(){return e})()}function JSe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=ple,g=null,y,v,b,w=RC,E=.5,T,S,A,C,k;function N(F){return A(F[0]*In,F[1]*In)}function O(F){return F=A.invert(F[0],F[1]),F&&[F[0]*ts,F[1]*ts]}N.stream=function(F){return C&&k===F?C:C=Kdt(Xdt(c)(m(T(w(k=F)))))},N.preclip=function(F){return arguments.length?(m=F,p=void 0,$()):m},N.postclip=function(F){return arguments.length?(w=F,g=y=v=b=null,$()):w},N.clipAngle=function(F){return arguments.length?(m=+F?Pdt(p=F*In):(p=null,ple),$()):p*ts},N.clipExtent=function(F){return arguments.length?(w=F==null?(g=y=v=b=null,RC):jSe(g=+F[0][0],y=+F[0][1],v=+F[1][0],b=+F[1][1]),$()):g==null?null:[[g,y],[v,b]]},N.scale=function(F){return arguments.length?(n=+F,P()):n},N.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],P()):[r,i]},N.center=function(F){return arguments.length?(s=F[0]%360*In,o=F[1]%360*In,P()):[s*ts,o*ts]},N.rotate=function(F){return arguments.length?(a=F[0]%360*In,u=F[1]%360*In,l=F.length>2?F[2]%360*In:0,P()):[a*ts,u*ts,l*ts]},N.angle=function(F){return arguments.length?(f=F%360*In,P()):f*ts},N.reflectX=function(F){return arguments.length?(d=F?-1:1,P()):d<0},N.reflectY=function(F){return arguments.length?(h=F?-1:1,P()):h<0},N.precision=function(F){return arguments.length?(T=Sle(S,E=F*F),$()):Ka(E)},N.fitExtent=function(F,M){return c6(N,F,M)},N.fitSize=function(F,M){return cK(N,F,M)},N.fitWidth=function(F,M){return fK(N,F,M)},N.fitHeight=function(F,M){return dK(N,F,M)};function P(){var F=Tle(n,0,0,d,h,f).apply(null,t(s,o)),M=Tle(n,r-F[0],i-F[1],d,h,f);return c=$Se(a,u,l),S=H7(t,M),A=H7(c,S),T=Sle(S,E),$()}function $(){return C=k=null,N}return function(){return t=e.apply(this,arguments),N.invert=t.invert&&O,P()}}function hK(e){var t=0,n=Rn/3,r=JSe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*In,n=s[1]*In):[t*ts,n*ts]},i}function Jdt(e){var t=Ut(e);function n(r,i){return[r*t,Lt(i)/t]}return n.invert=function(r,i){return[r/t,Wu(i*t)]},n}function Zdt(e,t){var n=Lt(e),r=(n+Lt(t))/2;if(Yn(r)<jt)return Jdt(e);var i=1+n*(2*r-n),s=Ka(i)/r;function o(a,u){var l=Ka(i-2*r*Lt(u))/r;return[l*Lt(a*=r),s-l*Ut(a)]}return o.invert=function(a,u){var l=s-u,c=Ic(a,Yn(l))*yc(l);return l*r<0&&(c-=Rn*yc(a)*yc(l)),[c/r,Wu((i-(a*a+l*l)*r*r)/(2*r))]},o}function A3(){return hK(Zdt).scale(155.424).center([0,33.6442])}function ZSe(){return A3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function eht(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function tht(){var e,t,n=ZSe(),r,i=A3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=A3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=eht([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+jt,m+.12*h+jt],[p-.214*h-jt,m+.234*h-jt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+jt,m+.166*h+jt],[p-.115*h-jt,m+.234*h-jt]]).stream(l),f()},c.fitExtent=function(d,h){return c6(c,d,h)},c.fitSize=function(d,h){return cK(c,d,h)},c.fitWidth=function(d,h){return fK(c,d,h)},c.fitHeight=function(d,h){return dK(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function eTe(e){return function(t,n){var r=Ut(t),i=Ut(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Lt(t),s*Lt(n)]}}function fk(e){return function(t,n){var r=Ka(t*t+n*n),i=e(r),s=Lt(i),o=Ut(i);return[Ic(t*s,r*o),Wu(r&&n*s/r)]}}var tTe=eTe(function(e){return Ka(2/(1+e))});tTe.invert=fk(function(e){return 2*Wu(e/2)});function nht(){return Uh(tTe).scale(124.75).clipAngle(180-.001)}var nTe=eTe(function(e){return(e=SSe(e))&&e/Lt(e)});nTe.invert=fk(function(e){return e});function rht(){return Uh(nTe).scale(79.4188).clipAngle(180-.001)}function f6(e,t){return[e,a3(aK((qi+t)/2))]}f6.invert=function(e,t){return[e,2*rS(xSe(t))-qi]};function iht(){return rTe(f6).scale(961/Ya)}function rTe(e){var t=Uh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Rn*r(),d=t(Sdt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===f6?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function PN(e){return aK((qi+e)/2)}function sht(e,t){var n=Ut(e),r=e===t?Lt(e):a3(n/Ut(t))/a3(PN(t)/PN(e)),i=n*a8(PN(e),r)/r;if(!r)return f6;function s(o,a){i>0?a<-qi+jt&&(a=-qi+jt):a>qi-jt&&(a=qi-jt);var u=i/a8(PN(a),r);return[u*Lt(r*o),i-u*Ut(r*o)]}return s.invert=function(o,a){var u=i-a,l=yc(r)*Ka(o*o+u*u),c=Ic(o,Yn(u))*yc(u);return u*r<0&&(c-=Rn*yc(o)*yc(u)),[c/r,2*rS(a8(i/l,1/r))-qi]},s}function oht(){return hK(sht).scale(109.5).parallels([30,30])}function C3(e,t){return[e,t]}C3.invert=C3;function aht(){return Uh(C3).scale(152.63)}function uht(e,t){var n=Ut(e),r=e===t?Lt(e):(n-Ut(t))/(t-e),i=n/r+e;if(Yn(r)<jt)return C3;function s(o,a){var u=i-a,l=r*o;return[u*Lt(l),i-u*Ut(l)]}return s.invert=function(o,a){var u=i-a,l=Ic(o,Yn(u))*yc(u);return u*r<0&&(l-=Rn*yc(o)*yc(u)),[l/r,i-yc(r)*Ka(o*o+u*u)]},s}function lht(){return hK(uht).scale(131.154).center([0,13.9389])}var hA=1.340264,pA=-.081106,mA=893e-6,gA=.003796,I3=Ka(3)/2,cht=12;function iTe(e,t){var n=Wu(I3*Lt(t)),r=n*n,i=r*r*r;return[e*Ut(n)/(I3*(hA+3*pA*r+i*(7*mA+9*gA*r))),n*(hA+pA*r+i*(mA+gA*r))]}iTe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<cht&&(a=n*(hA+pA*r+i*(mA+gA*r))-t,u=hA+3*pA*r+i*(7*mA+9*gA*r),n-=o=a/u,r=n*n,i=r*r*r,!(Yn(o)<s3));++s);return[I3*e*(hA+3*pA*r+i*(7*mA+9*gA*r))/Ut(n),Wu(Lt(n)/I3)]};function fht(){return Uh(iTe).scale(177.158)}function sTe(e,t){var n=Ut(t),r=Ut(e)*n;return[n*Lt(e)/r,Lt(t)/r]}sTe.invert=fk(rS);function dht(){return Uh(sTe).scale(144.049).clipAngle(60)}function hht(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=l6({point:function(w,E){var T=b([w,E]);this.stream.point(T[0],T[1])}}),m=RC,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(w){var E=w[0]*d,T=w[1]*h;if(s){var S=T*o-E*a;E=E*o+T*a,T=S}return[E+t,T+n]}return b.invert=function(w){var E=w[0]-t,T=w[1]-n;if(s){var S=T*o+E*a;E=E*o-T*a,T=S}return[E/d,T/h]},b.stream=function(w){return g&&y===w?g:g=p(m(y=w))},b.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},b.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,RC):jSe(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(w){return arguments.length?(e=+w,v()):e},b.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},b.angle=function(w){return arguments.length?(s=w%360*In,a=Lt(s),o=Ut(s),v()):s*ts},b.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},b.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},b.fitExtent=function(w,E){return c6(b,w,E)},b.fitSize=function(w,E){return cK(b,w,E)},b.fitWidth=function(w,E){return fK(b,w,E)},b.fitHeight=function(w,E){return dK(b,w,E)},b}function oTe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}oTe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Yn(i)>jt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function pht(){return Uh(oTe).scale(175.295)}function aTe(e,t){return[Ut(t)*Lt(e),Lt(t)]}aTe.invert=fk(Wu);function mht(){return Uh(aTe).scale(249.5).clipAngle(90+jt)}function uTe(e,t){var n=Ut(t),r=1+Ut(e)*n;return[n*Lt(e)/r,Lt(t)/r]}uTe.invert=fk(function(e){return 2*rS(e)});function ght(){return Uh(uTe).scale(250).clipAngle(142)}function lTe(e,t){return[a3(aK((qi+t)/2)),-e]}lTe.invert=function(e,t){return[-t,2*rS(xSe(e))-qi]};function yht(){var e=rTe(lTe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function vht(e,t){return e.parent===t.parent?1:2}function bht(e){return e.reduce(_ht,0)/e.length}function _ht(e,t){return e+t.x}function wht(e){return 1+e.reduce(Eht,0)}function Eht(e,t){return Math.max(e,t.y)}function xht(e){for(var t;t=e.children;)e=t[0];return e}function Sht(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Tht(){var e=vht,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=bht(h),d.y=wht(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=xht(s),l=Sht(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Aht(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Cht(){return this.eachAfter(Aht)}function Iht(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function kht(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Rht(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function Nht(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Pht(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Dht(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Oht(e){for(var t=this,n=$ht(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function $ht(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Mht(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Lht(){return Array.from(this)}function Fht(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function jht(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Bht(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function d6(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Vht)):t===void 0&&(t=zht);for(var n=new OE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new OE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(cTe)}function Uht(){return d6(this).eachBefore(Hht)}function zht(e){return e.children}function Vht(e){return Array.isArray(e)?e[1]:null}function Hht(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function cTe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function OE(e){this.data=e,this.depth=this.height=0,this.parent=null}OE.prototype=d6.prototype={constructor:OE,count:Cht,each:Iht,eachAfter:Rht,eachBefore:kht,find:Nht,sum:Pht,sort:Dht,path:Oht,ancestors:Mht,descendants:Lht,leaves:Fht,links:jht,copy:Uht,[Symbol.iterator]:Bht};function oD(e){return e==null?null:fTe(e)}function fTe(e){if(typeof e!="function")throw new Error;return e}function Mv(){return 0}function z_(e){return function(){return e}}const qht=1664525,Wht=1013904223,Ale=4294967296;function Ght(){let e=1;return()=>(e=(qht*e+Wht)%Ale)/Ale}function Yht(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Kht(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Xht(e,t){for(var n=0,r=(e=Kht(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&dTe(o,s)?++n:(o=Jht(i=Qht(i,s)),n=0);return o}function Qht(e,t){var n,r;if(d8(t,e))return[t];for(n=0;n<e.length;++n)if(DN(t,e[n])&&d8(y2(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(DN(y2(e[n],e[r]),t)&&DN(y2(e[n],t),e[r])&&DN(y2(e[r],t),e[n])&&d8(hTe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function DN(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function dTe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function d8(e,t){for(var n=0;n<t.length;++n)if(!dTe(e,t[n]))return!1;return!0}function Jht(e){switch(e.length){case 1:return Zht(e[0]);case 2:return y2(e[0],e[1]);case 3:return hTe(e[0],e[1],e[2])}}function Zht(e){return{x:e.x,y:e.y,r:e.r}}function y2(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function hTe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,E=h*p-d*m,T=(p*w-m*b)/(E*2)-r,S=(m*g-p*y)/E,A=(h*b-d*w)/(E*2)-i,C=(d*y-h*g)/E,k=S*S+C*C-1,N=2*(s+T*S+A*C),O=T*T+A*A-s*s,P=-(Math.abs(k)>1e-6?(N+Math.sqrt(N*N-4*k*O))/(2*k):O/N);return{x:r+T+S*P,y:i+A+C*P,r:P}}function Cle(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Ile(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function kle(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function ON(e){this._=e,this.next=null,this.previous=null}function ept(e,t){if(!(s=(e=Yht(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Cle(r,n,i=e[2]),n=new ON(n),r=new ON(r),i=new ON(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){Cle(n._,r._,i=e[u]),i=new ON(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Ile(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(Ile(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=kle(n);(i=i.next)!==r;)(a=kle(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Xht(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function tpt(e){return Math.sqrt(e.value)}function pTe(){var e=null,t=1,n=1,r=Mv;function i(s){const o=Ght();return s.x=t/2,s.y=n/2,e?s.eachBefore(Rle(e)).eachAfter(h8(r,.5,o)).eachBefore(Nle(1)):s.eachBefore(Rle(tpt)).eachAfter(h8(Mv,1,o)).eachAfter(h8(r,s.r/Math.min(t,n),o)).eachBefore(Nle(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=oD(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:z_(+s),i):r},i}function Rle(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function h8(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=ept(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function Nle(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function mTe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function dk(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function npt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(mTe),o}function s(o,a){return function(u){u.children&&dk(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var rpt={depth:-1},Ple={},p8={};function ipt(e){return e.id}function spt(e){return e.parentId}function Dle(){var e=ipt,t=spt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,E)=>opt(n(w,E,i))),v=y.map(Ole),b=new Set(y).add("");for(const w of v)b.has(w)||(b.add(w),y.push(w),v.push(Ole(w)),s.push(p8));o=(w,E)=>y[E],a=(w,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new OE(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?Ple:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===Ple)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===p8&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===p8);--y)h.data=null}if(f.parent=rpt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(cTe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=oD(i),r):e},r.parentId=function(i){return arguments.length?(t=oD(i),r):t},r.path=function(i){return arguments.length?(n=oD(i),r):n},r}function opt(e){e=`${e}`;let t=e.length;return tz(e,t-1)&&!tz(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Ole(e){let t=e.length;if(t<2)return"";for(;--t>1&&!tz(e,t););return e.slice(0,t)}function tz(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function apt(e,t){return e.parent===t.parent?1:2}function m8(e){var t=e.children;return t?t[0]:e.t}function g8(e){var t=e.children;return t?t[t.length-1]:e.t}function upt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function lpt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function cpt(e,t,n){return e.a.parent===t.parent?e.a:n}function aD(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}aD.prototype=Object.create(OE.prototype);function fpt(e){for(var t=new aD(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new aD(s[o],o)),i.parent=n;return(t.parent=new aD(null,0)).children=[t],t}function dpt(){var e=apt,t=1,n=1,r=null;function i(l){var c=fpt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){lpt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,w;p=g8(p),d=m8(d),p&&d;)m=m8(m),h=g8(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(upt(cpt(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!g8(h)&&(h.t=p,h.m+=v-y),d&&!m8(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function h6(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var gTe=(1+Math.sqrt(5))/2;function yTe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,w,E,T;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),T=g*g*E,w=Math.max(v/T,T/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),T=g*g*E,b=Math.max(v/T,T/y),b>w){g-=l;break}w=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?dk(u,n,r,i,m?r+=p*g/m:s):h6(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const vTe=function e(t){function n(r,i,s,o,a){yTe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(gTe);function hpt(){var e=vTe,t=!1,n=1,r=1,i=[0],s=Mv,o=Mv,a=Mv,u=Mv,l=Mv;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(mTe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=fTe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:z_(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:z_(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:z_(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:z_(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:z_(+d),c):l},c}function ppt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],w=h/2+b,E=f+1,T=d-1;E<T;){var S=E+T>>>1;l[S]<w?E=S+1:T=S}w-l[E-1]<l[E]-w&&f+1<E&&--E;var A=l[E]-b,C=h-A;if(g-p>y-m){var k=h?(p*C+g*A)/h:g;c(f,E,A,p,m,k,y),c(E,d,C,k,m,g,y)}else{var N=h?(m*C+y*A)/h:y;c(f,E,A,p,m,g,N),c(E,d,C,p,N,g,y)}}}function mpt(e,t,n,r,i){(e.depth&1?h6:dk)(e,t,n,r,i)}const gpt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?dk(l,i,s,o,m?s+=(a-s)*l.value/m:a):h6(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=yTe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(gTe);function Jf(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ny(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const nz=Symbol("implicit");function iS(){var e=new mue,t=[],n=[],r=nz;function i(s){let o=e.get(s);if(o===void 0){if(r!==nz)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new mue;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return iS(t,n).unknown(r)},Jf.apply(i,arguments),i}function hk(){var e=iS().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Ru(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return hk(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Jf.apply(f(),arguments)}function ypt(e){return function(){return e}}function rz(e){return+e}var $le=[0,1];function Nu(e){return e}function iz(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:ypt(isNaN(t)?NaN:.5)}function vpt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function bpt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=iz(i,r),s=n(o,s)):(r=iz(r,i),s=n(s,o)),function(a){return s(r(a))}}function _pt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=iz(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=L0(e,a,1,r)-1;return s[u](i[u](a))}}function pk(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function p6(){var e=$le,t=$le,n=Wm,r,i,s,o=Nu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Nu&&(o=vpt(e[0],e[d-1])),a=d>2?_pt:bpt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),fc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,rz),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=uk,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Nu,c()):o!==Nu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function bTe(){return p6()(Nu,Nu)}function _Te(e,t,n,r){var i=F0(e,t,n),s;switch(r=B1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=wSe(i,o))&&(r.precision=s),oK(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=ESe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=_Se(i))&&(r.precision=s-(r.type==="%")*2);break}}return nS(r)}function Mb(e){var t=e.domain;return e.ticks=function(n){var r=t();return g7(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return _Te(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=y7(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function vm(){var e=bTe();return e.copy=function(){return pk(e,vm())},Jf.apply(e,arguments),Mb(e)}function wTe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,rz),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return wTe(e).unknown(t)},e=arguments.length?Array.from(e,rz):[0,1],Mb(n)}function ETe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Mle(e){return Math.log(e)}function Lle(e){return Math.exp(e)}function wpt(e){return-Math.log(-e)}function Ept(e){return-Math.exp(-e)}function xpt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Spt(e){return e===10?xpt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Tpt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Fle(e){return(t,n)=>-e(-t,n)}function pK(e){const t=e(Mle,Lle),n=t.domain;let r=10,i,s;function o(){return i=Tpt(r),s=Spt(r),n()[0]<0?(i=Fle(i),s=Fle(s),e(wpt,Ept)):e(Mle,Lle),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=g7(l,c,g))}else y=g7(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=B1(u)).precision==null&&(u.trim=!0),u=nS(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(ETe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function xTe(){const e=pK(p6()).domain([1,10]);return e.copy=()=>pk(e,xTe()).base(e.base()),Jf.apply(e,arguments),e}function jle(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Ble(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function mK(e){var t=1,n=e(jle(t),Ble(t));return n.constant=function(r){return arguments.length?e(jle(t=+r),Ble(t)):t},Mb(n)}function STe(){var e=mK(p6());return e.copy=function(){return pk(e,STe()).constant(e.constant())},Jf.apply(e,arguments)}function Ule(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Apt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Cpt(e){return e<0?-e*e:e*e}function gK(e){var t=e(Nu,Nu),n=1;function r(){return n===1?e(Nu,Nu):n===.5?e(Apt,Cpt):e(Ule(n),Ule(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Mb(t)}function yK(){var e=gK(p6());return e.copy=function(){return pk(e,yK()).exponent(e.exponent())},Jf.apply(e,arguments),e}function Ipt(){return yK.apply(null,arguments).exponent(.5)}function TTe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=bxe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[L0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Kp),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return TTe().domain(e).range(t).unknown(r)},Jf.apply(s,arguments)}function ATe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[L0(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return ATe().domain([e,t]).range(i).unknown(s)},Jf.apply(Mb(o),arguments)}function CTe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[L0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return CTe().domain(e).range(t).unknown(n)},Jf.apply(i,arguments)}const y8=new Date,v8=new Date;function Bs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Bs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(y8.setTime(+s),v8.setTime(+o),e(y8),e(v8),Math.floor(n(y8,v8))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const $E=Bs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);$E.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Bs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):$E);$E.range;const jp=1e3,vc=jp*60,Bp=vc*60,bm=Bp*24,vK=bm*7,zle=bm*30,b8=bm*365,Up=Bs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*jp)},(e,t)=>(t-e)/jp,e=>e.getUTCSeconds());Up.range;const m6=Bs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*jp)},(e,t)=>{e.setTime(+e+t*vc)},(e,t)=>(t-e)/vc,e=>e.getMinutes());m6.range;const g6=Bs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*vc)},(e,t)=>(t-e)/vc,e=>e.getUTCMinutes());g6.range;const y6=Bs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*jp-e.getMinutes()*vc)},(e,t)=>{e.setTime(+e+t*Bp)},(e,t)=>(t-e)/Bp,e=>e.getHours());y6.range;const v6=Bs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Bp)},(e,t)=>(t-e)/Bp,e=>e.getUTCHours());v6.range;const Qp=Bs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*vc)/bm,e=>e.getDate()-1);Qp.range;const y0=Bs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bm,e=>e.getUTCDate()-1);y0.range;const ITe=Bs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bm,e=>Math.floor(e/bm));ITe.range;function Lb(e){return Bs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*vc)/vK)}const sS=Lb(0),k3=Lb(1),kpt=Lb(2),Rpt=Lb(3),ME=Lb(4),Npt=Lb(5),Ppt=Lb(6);sS.range;k3.range;kpt.range;Rpt.range;ME.range;Npt.range;Ppt.range;function Fb(e){return Bs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/vK)}const oS=Fb(0),R3=Fb(1),Dpt=Fb(2),Opt=Fb(3),LE=Fb(4),$pt=Fb(5),Mpt=Fb(6);oS.range;R3.range;Dpt.range;Opt.range;LE.range;$pt.range;Mpt.range;const DC=Bs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());DC.range;const OC=Bs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());OC.range;const mh=Bs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());mh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});mh.range;const gh=Bs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());gh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});gh.range;function kTe(e,t,n,r,i,s){const o=[[Up,1,jp],[Up,5,5*jp],[Up,15,15*jp],[Up,30,30*jp],[s,1,vc],[s,5,5*vc],[s,15,15*vc],[s,30,30*vc],[i,1,Bp],[i,3,3*Bp],[i,6,6*Bp],[i,12,12*Bp],[r,1,bm],[r,2,2*bm],[n,1,vK],[t,1,zle],[t,3,3*zle],[e,1,b8]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=eS(([,,g])=>g).right(o,d);if(h===o.length)return e.every(F0(l/b8,c/b8,f));if(h===0)return $E.every(Math.max(F0(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[Lpt,Fpt]=kTe(gh,OC,oS,ITe,v6,g6),[jpt,Bpt]=kTe(mh,DC,sS,Qp,y6,m6);function _8(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function w8(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function _T(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function RTe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=wT(i),c=ET(i),f=wT(s),d=ET(s),h=wT(o),p=ET(o),m=wT(a),g=ET(a),y=wT(u),v=ET(u),b={a:B,A:U,b:H,B:D,c:null,d:Yle,e:Yle,f:lmt,g:bmt,G:wmt,H:omt,I:amt,j:umt,L:NTe,m:cmt,M:fmt,p:z,q:W,Q:Qle,s:Jle,S:dmt,u:hmt,U:pmt,V:mmt,w:gmt,W:ymt,x:null,X:null,y:vmt,Y:_mt,Z:Emt,"%":Xle},w={a:j,A:q,b:G,B:re,c:null,d:Kle,e:Kle,f:Amt,g:Mmt,G:Fmt,H:xmt,I:Smt,j:Tmt,L:DTe,m:Cmt,M:Imt,p:de,q:pe,Q:Qle,s:Jle,S:kmt,u:Rmt,U:Nmt,V:Pmt,w:Dmt,W:Omt,x:null,X:null,y:$mt,Y:Lmt,Z:jmt,"%":Xle},E={a:k,A:N,b:O,B:P,c:$,d:Wle,e:Wle,f:nmt,g:qle,G:Hle,H:Gle,I:Gle,j:Jpt,L:tmt,m:Qpt,M:Zpt,p:C,q:Xpt,Q:imt,s:smt,S:emt,u:qpt,U:Wpt,V:Gpt,w:Hpt,W:Ypt,x:F,X:M,y:qle,Y:Hle,Z:Kpt,"%":rmt};b.x=T(n,b),b.X=T(r,b),b.c=T(t,b),w.x=T(n,w),w.X=T(r,w),w.c=T(t,w);function T(ge,Ee){return function(Z){var Q=[],fe=-1,be=0,Me=ge.length,Be,ve,Re;for(Z instanceof Date||(Z=new Date(+Z));++fe<Me;)ge.charCodeAt(fe)===37&&(Q.push(ge.slice(be,fe)),(ve=Vle[Be=ge.charAt(++fe)])!=null?Be=ge.charAt(++fe):ve=Be==="e"?" ":"0",(Re=Ee[Be])&&(Be=Re(Z,ve)),Q.push(Be),be=fe+1);return Q.push(ge.slice(be,fe)),Q.join("")}}function S(ge,Ee){return function(Z){var Q=_T(1900,void 0,1),fe=A(Q,ge,Z+="",0),be,Me;if(fe!=Z.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(Ee&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(be=w8(_T(Q.y,0,1)),Me=be.getUTCDay(),be=Me>4||Me===0?R3.ceil(be):R3(be),be=y0.offset(be,(Q.V-1)*7),Q.y=be.getUTCFullYear(),Q.m=be.getUTCMonth(),Q.d=be.getUTCDate()+(Q.w+6)%7):(be=_8(_T(Q.y,0,1)),Me=be.getDay(),be=Me>4||Me===0?k3.ceil(be):k3(be),be=Qp.offset(be,(Q.V-1)*7),Q.y=be.getFullYear(),Q.m=be.getMonth(),Q.d=be.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),Me="Z"in Q?w8(_T(Q.y,0,1)).getUTCDay():_8(_T(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(Me+5)%7:Q.w+Q.U*7-(Me+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,w8(Q)):_8(Q)}}function A(ge,Ee,Z,Q){for(var fe=0,be=Ee.length,Me=Z.length,Be,ve;fe<be;){if(Q>=Me)return-1;if(Be=Ee.charCodeAt(fe++),Be===37){if(Be=Ee.charAt(fe++),ve=E[Be in Vle?Ee.charAt(fe++):Be],!ve||(Q=ve(ge,Z,Q))<0)return-1}else if(Be!=Z.charCodeAt(Q++))return-1}return Q}function C(ge,Ee,Z){var Q=l.exec(Ee.slice(Z));return Q?(ge.p=c.get(Q[0].toLowerCase()),Z+Q[0].length):-1}function k(ge,Ee,Z){var Q=h.exec(Ee.slice(Z));return Q?(ge.w=p.get(Q[0].toLowerCase()),Z+Q[0].length):-1}function N(ge,Ee,Z){var Q=f.exec(Ee.slice(Z));return Q?(ge.w=d.get(Q[0].toLowerCase()),Z+Q[0].length):-1}function O(ge,Ee,Z){var Q=y.exec(Ee.slice(Z));return Q?(ge.m=v.get(Q[0].toLowerCase()),Z+Q[0].length):-1}function P(ge,Ee,Z){var Q=m.exec(Ee.slice(Z));return Q?(ge.m=g.get(Q[0].toLowerCase()),Z+Q[0].length):-1}function $(ge,Ee,Z){return A(ge,t,Ee,Z)}function F(ge,Ee,Z){return A(ge,n,Ee,Z)}function M(ge,Ee,Z){return A(ge,r,Ee,Z)}function B(ge){return o[ge.getDay()]}function U(ge){return s[ge.getDay()]}function H(ge){return u[ge.getMonth()]}function D(ge){return a[ge.getMonth()]}function z(ge){return i[+(ge.getHours()>=12)]}function W(ge){return 1+~~(ge.getMonth()/3)}function j(ge){return o[ge.getUTCDay()]}function q(ge){return s[ge.getUTCDay()]}function G(ge){return u[ge.getUTCMonth()]}function re(ge){return a[ge.getUTCMonth()]}function de(ge){return i[+(ge.getUTCHours()>=12)]}function pe(ge){return 1+~~(ge.getUTCMonth()/3)}return{format:function(ge){var Ee=T(ge+="",b);return Ee.toString=function(){return ge},Ee},parse:function(ge){var Ee=S(ge+="",!1);return Ee.toString=function(){return ge},Ee},utcFormat:function(ge){var Ee=T(ge+="",w);return Ee.toString=function(){return ge},Ee},utcParse:function(ge){var Ee=S(ge+="",!0);return Ee.toString=function(){return ge},Ee}}}var Vle={"-":"",_:" ",0:"0"},co=/^\s*\d+/,Upt=/^%/,zpt=/[\\^$*+?|[\]().{}]/g;function hr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function Vpt(e){return e.replace(zpt,"\\$&")}function wT(e){return new RegExp("^(?:"+e.map(Vpt).join("|")+")","i")}function ET(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Hpt(e,t,n){var r=co.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function qpt(e,t,n){var r=co.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Wpt(e,t,n){var r=co.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Gpt(e,t,n){var r=co.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Ypt(e,t,n){var r=co.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Hle(e,t,n){var r=co.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function qle(e,t,n){var r=co.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Kpt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Xpt(e,t,n){var r=co.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Qpt(e,t,n){var r=co.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Wle(e,t,n){var r=co.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Jpt(e,t,n){var r=co.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Gle(e,t,n){var r=co.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Zpt(e,t,n){var r=co.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function emt(e,t,n){var r=co.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function tmt(e,t,n){var r=co.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function nmt(e,t,n){var r=co.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function rmt(e,t,n){var r=Upt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function imt(e,t,n){var r=co.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function smt(e,t,n){var r=co.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Yle(e,t){return hr(e.getDate(),t,2)}function omt(e,t){return hr(e.getHours(),t,2)}function amt(e,t){return hr(e.getHours()%12||12,t,2)}function umt(e,t){return hr(1+Qp.count(mh(e),e),t,3)}function NTe(e,t){return hr(e.getMilliseconds(),t,3)}function lmt(e,t){return NTe(e,t)+"000"}function cmt(e,t){return hr(e.getMonth()+1,t,2)}function fmt(e,t){return hr(e.getMinutes(),t,2)}function dmt(e,t){return hr(e.getSeconds(),t,2)}function hmt(e){var t=e.getDay();return t===0?7:t}function pmt(e,t){return hr(sS.count(mh(e)-1,e),t,2)}function PTe(e){var t=e.getDay();return t>=4||t===0?ME(e):ME.ceil(e)}function mmt(e,t){return e=PTe(e),hr(ME.count(mh(e),e)+(mh(e).getDay()===4),t,2)}function gmt(e){return e.getDay()}function ymt(e,t){return hr(k3.count(mh(e)-1,e),t,2)}function vmt(e,t){return hr(e.getFullYear()%100,t,2)}function bmt(e,t){return e=PTe(e),hr(e.getFullYear()%100,t,2)}function _mt(e,t){return hr(e.getFullYear()%1e4,t,4)}function wmt(e,t){var n=e.getDay();return e=n>=4||n===0?ME(e):ME.ceil(e),hr(e.getFullYear()%1e4,t,4)}function Emt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+hr(t/60|0,"0",2)+hr(t%60,"0",2)}function Kle(e,t){return hr(e.getUTCDate(),t,2)}function xmt(e,t){return hr(e.getUTCHours(),t,2)}function Smt(e,t){return hr(e.getUTCHours()%12||12,t,2)}function Tmt(e,t){return hr(1+y0.count(gh(e),e),t,3)}function DTe(e,t){return hr(e.getUTCMilliseconds(),t,3)}function Amt(e,t){return DTe(e,t)+"000"}function Cmt(e,t){return hr(e.getUTCMonth()+1,t,2)}function Imt(e,t){return hr(e.getUTCMinutes(),t,2)}function kmt(e,t){return hr(e.getUTCSeconds(),t,2)}function Rmt(e){var t=e.getUTCDay();return t===0?7:t}function Nmt(e,t){return hr(oS.count(gh(e)-1,e),t,2)}function OTe(e){var t=e.getUTCDay();return t>=4||t===0?LE(e):LE.ceil(e)}function Pmt(e,t){return e=OTe(e),hr(LE.count(gh(e),e)+(gh(e).getUTCDay()===4),t,2)}function Dmt(e){return e.getUTCDay()}function Omt(e,t){return hr(R3.count(gh(e)-1,e),t,2)}function $mt(e,t){return hr(e.getUTCFullYear()%100,t,2)}function Mmt(e,t){return e=OTe(e),hr(e.getUTCFullYear()%100,t,2)}function Lmt(e,t){return hr(e.getUTCFullYear()%1e4,t,4)}function Fmt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?LE(e):LE.ceil(e),hr(e.getUTCFullYear()%1e4,t,4)}function jmt(){return"+0000"}function Xle(){return"%"}function Qle(e){return+e}function Jle(e){return Math.floor(+e/1e3)}var x_,bK,$Te,b6,MTe;Bmt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Bmt(e){return x_=RTe(e),bK=x_.format,$Te=x_.parse,b6=x_.utcFormat,MTe=x_.utcParse,x_}function Umt(e){return new Date(e)}function zmt(e){return e instanceof Date?+e:+new Date(+e)}function _K(e,t,n,r,i,s,o,a,u,l){var c=bTe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),w=l("%Y");function E(T){return(u(T)<T?h:a(T)<T?p:o(T)<T?m:s(T)<T?g:r(T)<T?i(T)<T?y:v:n(T)<T?b:w)(T)}return c.invert=function(T){return new Date(f(T))},c.domain=function(T){return arguments.length?d(Array.from(T,zmt)):d().map(Umt)},c.ticks=function(T){var S=d();return e(S[0],S[S.length-1],T??10)},c.tickFormat=function(T,S){return S==null?E:l(S)},c.nice=function(T){var S=d();return(!T||typeof T.range!="function")&&(T=t(S[0],S[S.length-1],T??10)),T?d(ETe(S,T)):c},c.copy=function(){return pk(c,_K(e,t,n,r,i,s,o,a,u,l))},c}function LTe(){return Jf.apply(_K(jpt,Bpt,mh,DC,sS,Qp,y6,m6,Up,bK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Vmt(){return Jf.apply(_K(Lpt,Fpt,gh,OC,oS,y0,v6,g6,Up,b6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function _6(){var e=0,t=1,n,r,i,s,o=Nu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Wm),l.rangeRound=c(uk),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Py(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function wK(){var e=Mb(_6()(Nu));return e.copy=function(){return Py(e,wK())},Ny.apply(e,arguments)}function FTe(){var e=pK(_6()).domain([1,10]);return e.copy=function(){return Py(e,FTe()).base(e.base())},Ny.apply(e,arguments)}function jTe(){var e=mK(_6());return e.copy=function(){return Py(e,jTe()).constant(e.constant())},Ny.apply(e,arguments)}function EK(){var e=gK(_6());return e.copy=function(){return Py(e,EK()).exponent(e.exponent())},Ny.apply(e,arguments)}function Hmt(){return EK.apply(null,arguments).exponent(.5)}function w6(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Nu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=XY(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(Wm),h.rangeRound=p(uk),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function BTe(){var e=Mb(w6()(Nu));return e.copy=function(){return Py(e,BTe())},Ny.apply(e,arguments)}function UTe(){var e=pK(w6()).domain([.1,1,10]);return e.copy=function(){return Py(e,UTe()).base(e.base())},Ny.apply(e,arguments)}function zTe(){var e=mK(w6());return e.copy=function(){return Py(e,zTe()).constant(e.constant())},Ny.apply(e,arguments)}function xK(){var e=gK(w6());return e.copy=function(){return Py(e,xK()).exponent(e.exponent())},Ny.apply(e,arguments)}function qmt(){return xK.apply(null,arguments).exponent(.5)}function Zf(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const Wmt=Zf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Gmt=Zf("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Ymt=Zf("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Kmt=Zf("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Xmt=Zf("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Qmt=Zf("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Jmt=Zf("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Zmt=Zf("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),egt=Zf("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),tgt=Zf("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),VTe=Zf("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function _n(e){return function(){return e}}const Zle=Math.abs,Xo=Math.atan2,rv=Math.cos,ngt=Math.max,E8=Math.min,hd=Math.sin,e1=Math.sqrt,Zo=1e-12,FE=Math.PI,N3=FE/2,yA=2*FE;function rgt(e){return e>1?0:e<-1?FE:Math.acos(e)}function ece(e){return e>=1?N3:e<=-1?-N3:Math.asin(e)}function E6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new tK(t)}function igt(e){return e.innerRadius}function sgt(e){return e.outerRadius}function ogt(e){return e.startAngle}function agt(e){return e.endAngle}function ugt(e){return e&&e.padAngle}function lgt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<Zo))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function $N(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/e1(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,w=v*v+b*b,E=i-s,T=d*m-p*h,S=(b<0?-1:1)*e1(ngt(0,E*E*w-T*T)),A=(T*b-v*S)/w,C=(-T*v-b*S)/w,k=(T*b+v*S)/w,N=(-T*v+b*S)/w,O=A-g,P=C-y,$=k-g,F=N-y;return O*O+P*P>$*$+F*F&&(A=k,C=N),{cx:A,cy:C,x01:-c,y01:-f,x11:A*(i/E-1),y11:C*(i/E-1)}}function sz(){var e=igt,t=sgt,n=_n(0),r=null,i=ogt,s=agt,o=ugt,a=null,u=E6(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-N3,m=s.apply(this,arguments)-N3,g=Zle(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Zo))a.moveTo(0,0);else if(g>yA-Zo)a.moveTo(h*rv(p),h*hd(p)),a.arc(0,0,h,p,m,!y),d>Zo&&(a.moveTo(d*rv(m),d*hd(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,w=p,E=m,T=g,S=g,A=o.apply(this,arguments)/2,C=A>Zo&&(r?+r.apply(this,arguments):e1(d*d+h*h)),k=E8(Zle(h-d)/2,+n.apply(this,arguments)),N=k,O=k,P,$;if(C>Zo){var F=ece(C/d*hd(A)),M=ece(C/h*hd(A));(T-=F*2)>Zo?(F*=y?1:-1,w+=F,E-=F):(T=0,w=E=(p+m)/2),(S-=M*2)>Zo?(M*=y?1:-1,v+=M,b-=M):(S=0,v=b=(p+m)/2)}var B=h*rv(v),U=h*hd(v),H=d*rv(E),D=d*hd(E);if(k>Zo){var z=h*rv(b),W=h*hd(b),j=d*rv(w),q=d*hd(w),G;if(g<FE)if(G=lgt(B,U,j,q,z,W,H,D)){var re=B-G[0],de=U-G[1],pe=z-G[0],ge=W-G[1],Ee=1/hd(rgt((re*pe+de*ge)/(e1(re*re+de*de)*e1(pe*pe+ge*ge)))/2),Z=e1(G[0]*G[0]+G[1]*G[1]);N=E8(k,(d-Z)/(Ee-1)),O=E8(k,(h-Z)/(Ee+1))}else N=O=0}S>Zo?O>Zo?(P=$N(j,q,B,U,h,O,y),$=$N(z,W,H,D,h,O,y),a.moveTo(P.cx+P.x01,P.cy+P.y01),O<k?a.arc(P.cx,P.cy,O,Xo(P.y01,P.x01),Xo($.y01,$.x01),!y):(a.arc(P.cx,P.cy,O,Xo(P.y01,P.x01),Xo(P.y11,P.x11),!y),a.arc(0,0,h,Xo(P.cy+P.y11,P.cx+P.x11),Xo($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,O,Xo($.y11,$.x11),Xo($.y01,$.x01),!y))):(a.moveTo(B,U),a.arc(0,0,h,v,b,!y)):a.moveTo(B,U),!(d>Zo)||!(T>Zo)?a.lineTo(H,D):N>Zo?(P=$N(H,D,z,W,d,-N,y),$=$N(B,U,j,q,d,-N,y),a.lineTo(P.cx+P.x01,P.cy+P.y01),N<k?a.arc(P.cx,P.cy,N,Xo(P.y01,P.x01),Xo($.y01,$.x01),!y):(a.arc(P.cx,P.cy,N,Xo(P.y01,P.x01),Xo(P.y11,P.x11),!y),a.arc(0,0,d,Xo(P.cy+P.y11,P.cx+P.x11),Xo($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,N,Xo($.y11,$.x11),Xo($.y01,$.x01),!y))):a.arc(0,0,d,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-FE/2;return[rv(f)*c,hd(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:_n(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:_n(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:_n(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:_n(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:_n(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:_n(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:_n(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function x6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function HTe(e){this._context=e}HTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function SK(e){return new HTe(e)}function qTe(e){return e[0]}function WTe(e){return e[1]}function GTe(e,t){var n=_n(!0),r=null,i=SK,s=null,o=E6(a);e=typeof e=="function"?e:e===void 0?qTe:_n(e),t=typeof t=="function"?t:t===void 0?WTe:_n(t);function a(u){var l,c=(u=x6(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:_n(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:_n(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:_n(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function YTe(e,t,n){var r=null,i=_n(!0),s=null,o=SK,a=null,u=E6(l);e=typeof e=="function"?e:e===void 0?qTe:_n(+e),t=typeof t=="function"?t:_n(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?WTe:_n(+n);function l(f){var d,h,p,m=(f=x6(f)).length,g,y=!1,v,b=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return GTe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:_n(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:_n(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:_n(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:_n(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:_n(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:_n(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:_n(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function cgt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function fgt(e){return e}function dgt(){var e=fgt,t=cgt,n=null,r=_n(0),i=_n(yA),s=_n(0);function o(a){var u,l=(a=x6(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(yA,Math.max(-yA,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),b=v*(g<0?-1:1),w;for(u=0;u<l;++u)(w=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=w);for(t!=null?h.sort(function(E,T){return t(p[E],p[T])}):n!=null&&h.sort(function(E,T){return n(a[E],a[T])}),u=0,f=d?(g-l*b)/d:0;u<l;++u,m=y)c=h[u],w=p[c],y=m+(w>0?w*f:0)+b,p[c]={data:a[c],index:u,value:w,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:_n(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:_n(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:_n(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:_n(+a),o):s},o}const hgt={draw(e,t){const n=e1(t/FE);e.moveTo(n,0),e.arc(0,0,n,0,yA)}};function pgt(e,t){let n=null,r=E6(i);e=typeof e=="function"?e:_n(e||hgt),t=typeof t=="function"?t:_n(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:_n(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:_n(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function B0(){}function P3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function S6(e){this._context=e}S6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:P3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:P3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mgt(e){return new S6(e)}function KTe(e){this._context=e}KTe.prototype={areaStart:B0,areaEnd:B0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:P3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ggt(e){return new KTe(e)}function XTe(e){this._context=e}XTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:P3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ygt(e){return new XTe(e)}function QTe(e,t){this._basis=new S6(e),this._beta=t}QTe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const vgt=function e(t){function n(r){return t===1?new S6(r):new QTe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function D3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function TK(e,t){this._context=e,this._k=(1-t)/6}TK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:D3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:D3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const bgt=function e(t){function n(r){return new TK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function AK(e,t){this._context=e,this._k=(1-t)/6}AK.prototype={areaStart:B0,areaEnd:B0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:D3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const _gt=function e(t){function n(r){return new AK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function CK(e,t){this._context=e,this._k=(1-t)/6}CK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:D3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const wgt=function e(t){function n(r){return new CK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function IK(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Zo){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Zo){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function JTe(e,t){this._context=e,this._alpha=t}JTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:IK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Egt=function e(t){function n(r){return t?new JTe(r,t):new TK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function ZTe(e,t){this._context=e,this._alpha=t}ZTe.prototype={areaStart:B0,areaEnd:B0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:IK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const xgt=function e(t){function n(r){return t?new ZTe(r,t):new AK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function e2e(e,t){this._context=e,this._alpha=t}e2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:IK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Sgt=function e(t){function n(r){return t?new e2e(r,t):new CK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function t2e(e){this._context=e}t2e.prototype={areaStart:B0,areaEnd:B0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Tgt(e){return new t2e(e)}function tce(e){return e<0?-1:1}function nce(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(tce(s)+tce(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function rce(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function x8(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function O3(e){this._context=e}O3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:x8(this,this._t0,rce(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,x8(this,rce(this,n=nce(this,e,t)),n);break;default:x8(this,this._t0,n=nce(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function n2e(e){this._context=new r2e(e)}(n2e.prototype=Object.create(O3.prototype)).point=function(e,t){O3.prototype.point.call(this,t,e)};function r2e(e){this._context=e}r2e.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Agt(e){return new O3(e)}function Cgt(e){return new n2e(e)}function i2e(e){this._context=e}i2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=ice(e),i=ice(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function ice(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Igt(e){return new i2e(e)}function T6(e,t){this._context=e,this._t=t}T6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function kgt(e){return new T6(e,.5)}function Rgt(e){return new T6(e,0)}function Ngt(e){return new T6(e,1)}function sce(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function oce(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Pgt(e,t){return e[t]}function Dgt(e){const t=[];return t.key=e,t}function Ogt(){var e=_n([]),t=oce,n=sce,r=Pgt;function i(s){var o=Array.from(e.apply(this,arguments),Dgt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=x6(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:_n(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:_n(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?oce:typeof s=="function"?s:_n(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??sce,i):n},i}function v2(e,t,n){this.k=e,this.x=t,this.y=n}v2.prototype={constructor:v2,scale:function(e){return e===1?this:new v2(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new v2(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};v2.prototype;function kK({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=I.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=I.useCallback(c=>(s?b6("%B"):nS(".2s"))(c),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:_.jsx(fm,{children:_.jsx(Es,{gap:3,children:_.jsx(it,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>_.jsxs("g",{transform:`translate(${f}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:_.jsx(fm,{children:_.jsx(wi,{withinPortal:!0,label:c,children:_.jsx(it,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const $gt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:kK},Symbol.toStringTag,{value:"Module"}));function s2e({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=I.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(fm,{children:_.jsx(Es,{gap:3,children:_.jsx(it,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx(Es,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(it,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const Mgt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:s2e},Symbol.toStringTag,{value:"Module"})),Jl={top:15,left:100,right:50,bottom:50};function oz({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=p1(),o=I.useMemo(()=>s-Jl.left-Jl.right,[s]),a=I.useMemo(()=>i-Jl.top-Jl.bottom,[i]),u=I.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return iS(VTe).domain(d)},[n,t.category]),l=I.useMemo(()=>e?vm([Jl.left,o+Jl.left]).domain([0,g0(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=I.useMemo(()=>e?hk([Jl.top,a+Jl.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=I.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:_.jsxs("g",{children:[_.jsx("rect",{x:Jl.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Jl.left},h),_.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?_.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(kK,{xScale:l,yRange:c.range(),vertPosition:a+Jl.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?_.jsx(s2e,{yScale:c,horizontalPosition:Jl.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):_.jsx(Oh,{})}const Lgt=Object.freeze(Object.defineProperty({__proto__:null,Bar:oz,default:oz},Symbol.toStringTag,{value:"Module"})),cr=Array.isArray;function Gu(e){return e!=null?cr(e)?e:[e]:[]}function Fgt(e=0,t=1/0){return`${ace(e)} < row_number() && row_number() <= ${ace(t)}`}function ace(e){return e<0?`count() + ${e}`:e}class o2e{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(Fgt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Gu(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function wn(e){throw Error(e)}function Xa(e){return typeof e=="number"}function di(e){return typeof e=="function"}function A6(e,t){const n=Array(e);if(di(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let jgt=class extends o2e{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){wn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){wn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){wn("Not implemented")}getter(t){wn("Not implemented")}objects(t){wn("Not implemented")}object(t){wn("Not implemented")}[Symbol.iterator](){wn("Not implemented")}print(t={}){Xa(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=A6(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},Bgt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},Ugt=function(e){return e&&di(e.get)?e:new Bgt(e)};function _m(e){return e instanceof Date}function ya(e){return e===Object(e)}function $3(e){return e instanceof RegExp}function Lo(e){return typeof e=="string"}function zgt(e,t){const n=r=>wn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?uce(e.entries(),t):_m(e)?n("Date"):$3(e)?n("RegExp"):Lo(e)?n():cr(e)?Vgt(e,t):di(e[Symbol.iterator])?Hgt(e,t):ya(e)?uce(Object.entries(e),t):n()}function uce(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function Vgt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function Hgt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:qgt}=Object.prototype;function Bf(e,t){return qgt.call(e,t)}function Yl(e){return e?new lce({...e.data()},e.columnNames()):new lce}class lce{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Bf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const sr=void 0,Wgt=Object.getPrototypeOf(Int8Array);function mk(e){return e instanceof Wgt}function t1(e){return cr(e)||mk(e)}function Tf(e){return e!=null&&e===e}const xT=e=>t1(e)||Lo(e),Ggt={compact:e=>t1(e)?e.filter(t=>Tf(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>xT(e)?e.includes(t,n):!1,indexof:(e,t)=>xT(e)?e.indexOf(t):-1,join:(e,t)=>t1(e)?e.join(t):sr,lastindexof:(e,t)=>xT(e)?e.lastIndexOf(t):-1,length:e=>xT(e)?e.length:0,pluck:(e,t)=>t1(e)?e.map(n=>Tf(n)?n[t]:sr):sr,reverse:e=>t1(e)?e.slice().reverse():Lo(e)?e.split("").reverse().join(""):sr,slice:(e,t,n)=>xT(e)?e.slice(t,n):sr};function Ygt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function uD(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const pd=e=>(e<10?"0":"")+e,Kgt=e=>e<0?"-"+uD(-e,6):e>9999?"+"+uD(e,6):uD(e,4);function a2e(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return Kgt(e)+"-"+pd(t+1)+"-"+pd(n)+(!u||o?"T"+pd(r)+":"+pd(i)+":"+pd(s)+"."+uD(o,3)+l:s?"T"+pd(r)+":"+pd(i)+":"+pd(s)+l:i||r||!a?"T"+pd(r)+":"+pd(i)+l:"")}function u2e(e,t){return isNaN(e)?"Invalid Date":a2e(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function C6(e,t){return isNaN(e)?"Invalid Date":a2e(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const Xgt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function Qgt(e){return e.match(Xgt)&&!isNaN(Date.parse(e))}function Jgt(e,t=Date.parse){return Qgt(e)?t(e):e}const l2e=6e4,c2e=864e5,f2e=6048e5,Ui=new Date,zi=new Date,Ji=e=>(Ui.setTime(typeof e=="string"?Jgt(e):e),Ui);function Zgt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function e0t(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function t0t(e){zi.setTime(+e),zi.setHours(0,0,0,0),Ui.setTime(+zi),Ui.setMonth(0),Ui.setDate(1);const t=(zi.getTimezoneOffset()-Ui.getTimezoneOffset())*l2e;return Math.floor(1+(zi-Ui-t)/c2e)}function n0t(e){zi.setTime(+e),zi.setUTCHours(0,0,0,0);const t=Date.UTC(zi.getUTCFullYear(),0,1);return Math.floor(1+(zi-t)/c2e)}function r0t(e,t){const n=t||0;zi.setTime(+e),zi.setDate(zi.getDate()-(zi.getDay()+7-n)%7),zi.setHours(0,0,0,0),Ui.setTime(+e),Ui.setMonth(0),Ui.setDate(1),Ui.setDate(1-(Ui.getDay()+7-n)%7),Ui.setHours(0,0,0,0);const r=(zi.getTimezoneOffset()-Ui.getTimezoneOffset())*l2e;return Math.floor((1+(zi-Ui)-r)/f2e)}function i0t(e,t){const n=t||0;return zi.setTime(+e),zi.setUTCDate(zi.getUTCDate()-(zi.getUTCDay()+7-n)%7),zi.setUTCHours(0,0,0,0),Ui.setTime(+e),Ui.setUTCMonth(0),Ui.setUTCDate(1),Ui.setUTCDate(1-(Ui.getUTCDay()+7-n)%7),Ui.setUTCHours(0,0,0,0),Math.floor((1+(zi-Ui))/f2e)}const s0t={format_date:(e,t)=>u2e(Ji(e),!t),format_utcdate:(e,t)=>C6(Ji(e),!t),timestamp:e=>+Ji(e),year:e=>Ji(e).getFullYear(),quarter:e=>Math.floor(Ji(e).getMonth()/3),month:e=>Ji(e).getMonth(),date:e=>Ji(e).getDate(),dayofweek:e=>Ji(e).getDay(),hours:e=>Ji(e).getHours(),minutes:e=>Ji(e).getMinutes(),seconds:e=>Ji(e).getSeconds(),milliseconds:e=>Ji(e).getMilliseconds(),utcyear:e=>Ji(e).getUTCFullYear(),utcquarter:e=>Math.floor(Ji(e).getUTCMonth()/3),utcmonth:e=>Ji(e).getUTCMonth(),utcdate:e=>Ji(e).getUTCDate(),utcdayofweek:e=>Ji(e).getUTCDay(),utchours:e=>Ji(e).getUTCHours(),utcminutes:e=>Ji(e).getUTCMinutes(),utcseconds:e=>Ji(e).getUTCSeconds(),utcmilliseconds:e=>Ji(e).getUTCMilliseconds(),datetime:Zgt,dayofyear:t0t,week:r0t,utcdatetime:e0t,utcdayofyear:n0t,utcweek:i0t,now:Date.now};function RK(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:_m(e)||_m(t)?+e==+t:$3(e)&&$3(t)?e+""==t+"":ya(e)&&ya(t)?o0t(e,t):!1}function o0t(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return cce(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!cce(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!RK(e[o],t[o]))return!1}return!0}function cce(e,t,n=RK){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const a0t={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let u0t=Math.random;function aS(){return u0t()}const l0t={random:aS,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function NK(e){return e instanceof Map}function c0t(e){return e instanceof Set}function lD(e){return NK(e)||c0t(e)}function S8(e){return Array.from(e)}const f0t={has:(e,t)=>lD(e)?e.has(t):e!=null?Bf(e,t):!1,keys:e=>NK(e)?S8(e.keys()):e!=null?Object.keys(e):[],values:e=>lD(e)?S8(e.values()):e!=null?Object.values(e):[],entries:e=>lD(e)?S8(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):sr};function d0t(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Bf(t,e))return t[e];return n!==void 0?n:e}function h0t(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const p0t={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},mw={bin:Ygt,equal:RK,recode:d0t,sequence:h0t,...Ggt,...s0t,...a0t,...l0t,...f0t,...p0t};function $C(e){return typeof e=="bigint"}function yh(e){return e===void 0?e+"":$C(e)?e+"n":JSON.stringify(e)}function gn(e,t=[],n=[]){return new m0t(e,Gu(t),Gu(n))}let m0t=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${yh(n)}]`),...this.params.map(yh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const d2e=e=>gn("any",e),h2e=()=>gn("count"),p2e=e=>gn("array_agg",e),m2e=e=>gn("array_agg_distinct",e),g2e=(e,t)=>gn("map_agg",[e,t]),y2e=(e,t)=>gn("object_agg",[e,t]),v2e=(e,t)=>gn("entries_agg",[e,t]);({...mw});function g0t(e,t){e=lD(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function y0t(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function v0t(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function b0t(e,t,n,r){const i=r==="map"||r===!0?g2e:r==="entries"?v2e:r==="object"?y2e:wn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=g0t(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:p2e(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const _0t="ArrayPattern",w0t="ArrowFunctionExpression",E0t="FunctionExpression",v0="Identifier",uS="Literal",b2e="MemberExpression",x0t="ObjectExpression",_2e="ObjectPattern",w2e="Property",gk="Column",S0t="Constant",T0t="Dictionary",A0t="Function",C0t="Parameter",E2e="Op",Qr=(e,t)=>{const n=I0t[e.type];return n?n(e,t):wn(`Unsupported expression construct: ${e.type}`)},T8=(e,t)=>"("+Qr(e.left,t)+" "+e.operator+" "+Qr(e.right,t)+")",A8=(e,t)=>"("+xd(e.params,t)+")=>"+Qr(e.body,t),fce=(e,t)=>Qr(e.callee,t)+"("+xd(e.arguments,t)+")",xd=(e,t,n=",")=>e.map(r=>Qr(r,t)).join(n),x2e=e=>e.computed?`[${yh(e.name)}]`:`.${e.name}`,dce=(e,t,n)=>{const r=e.table||"";return`data${r}${x2e(e)}.${n}(${t.index}${r})`},I0t={Constant:e=>e.raw,Column:(e,t)=>dce(e,t,"get"),Dictionary:(e,t)=>dce(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${x2e(e)}`,Op:(e,t)=>`op(${yh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Qr(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Qr(e.object,t),i=Qr(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:fce,NewExpression:(e,t)=>"new "+fce(e,t),ArrayExpression:(e,t)=>"["+xd(e.elements,t)+"]",AssignmentExpression:T8,BinaryExpression:T8,LogicalExpression:T8,UnaryExpression:(e,t)=>"("+e.operator+Qr(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Qr(e.test,t)+"?"+Qr(e.consequent,t)+":"+Qr(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+xd(e.properties,t)+"})",Property:(e,t)=>{const n=Qr(e.key,t);return(e.computed?`[${n}]`:n)+":"+Qr(e.value,t)},ArrowFunctionExpression:A8,FunctionExpression:A8,FunctionDeclaration:A8,ArrayPattern:(e,t)=>"["+xd(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+xd(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+xd(e.declarations,t,","),VariableDeclarator:(e,t)=>Qr(e.id,t)+"="+Qr(e.init,t),SpreadElement:(e,t)=>"..."+Qr(e.argument,t),BlockStatement:(e,t)=>"{"+xd(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Qr(e.expression,t),IfStatement:(e,t)=>"if ("+Qr(e.test,t)+")"+Qr(e.consequent,t)+(e.alternate?" else "+Qr(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Qr(e.discriminant,t)+") {"+xd(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Qr(e.test,t):"default")+": "+xd(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Qr(e.argument,t),Program:(e,t)=>Qr(e.body[0],t)};function M3(e,t={index:"row"}){return Qr(e,t)}function k0t(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function jE(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:_m(e)?+e:cr(e)||mk(e)?`[${e.map(jE)}]`:$3(e)?e+"":R0t(e)}function R0t(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${jE(e[r])}`;return t+="}",t}function L3(e,t){const n=e.length;return n===1?(r,i)=>jE(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=jE(a)}return s}}function N0t(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=jE(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=jE(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Tp(){}function P0t(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function Ts(e){return e.init=e.init||Tp,e.add=e.add||Tp,e.rem=e.rem||Tp,e}function hce(e,t){return e.product_v=!1,e.product=t}const S2e={count:{create:()=>Ts({value:e=>e.count}),param:[]},array_agg:{create:()=>Ts({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Ts({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Ts({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Ts({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Ts({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:sr}),param:[1]},valid:{create:()=>Ts({value:e=>e.valid}),param:[1]},invalid:{create:()=>Ts({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=N0t(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Ts({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Ts({value:e=>{let t=sr,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:sr,add:(e,t)=>$C(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>hce(e,1),value:e=>e.valid?e.product_v?hce(e,P0t(e.list.values())):e.product:void 0,add:(e,t)=>$C(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:sr,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Ts({value:e=>e.valid?e.mean:sr}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):sr,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Ts({value:e=>e.valid>1?e.dev/e.valid:sr}),param:[1],req:["variance"]},stdev:{create:()=>Ts({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):sr}),param:[1],req:["variance"]},stdevp:{create:()=>Ts({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):sr}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=sr,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===sr)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=sr,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===sr)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Ts({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Ts({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):sr,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>Ts({value:e=>e.valid>1?e.cov/e.valid:sr}),param:[2],req:["covariance"]},corr:{create:()=>Ts({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):sr}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>Ts({value:i=>k0t(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},pce={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},mce={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},T2e={row_number:{create(){return{init:Tp,value:e=>e.index+1}},param:[]},rank:pce,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=pce.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:mce,ntile:{create(e){e=+e,e>0||wn("ntile num must be greater than zero.");const{init:t,value:n}=mce.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=sr){return e=+e||1,{init:Tp,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=sr){return e=+e||1,{init:Tp,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Tp,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Tp,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||wn("nth_value nth must be greater than zero."),{init:Tp,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):sr}}},param:[1,1]},fill_down:{create(e=sr){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Tf(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=sr){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=D0t(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function D0t(e,t,n){for(const r=e.size;n<r;++n)if(Tf(e.value(n,t)))return n;return-1}function PK(e){return Bf(S2e,e)}function DK(e){return Bf(T2e,e)}function A2e(e){return Bf(mw,e)||e==="row_object"}function C2e(e){return PK(e)&&S2e[e]}function I2e(e){return DK(e)&&T2e[e]}function ST(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const OK={escape:(e,t,n)=>ST(e,t,n),expr:(e,t)=>ST(`(row,data,op)=>${e}`,mw,t),expr2:(e,t)=>ST(`(row0,data0,row,data)=>${e}`,mw,t),join:(e,t)=>ST(`(row1,data1,row2,data2)=>${e}`,mw,t),param:(e,t)=>ST(e,mw,t)},O0t={"==":1,"!=":1,"===":1,"!==":1};function k2e(e,t,n=0,r,i){if(e.type=gk,e.name=t,e.table=n,i&&r&&di(r.keyFor)){const s=O0t[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===uS&&$0t(i,e,s,r.keyFor(s.value))}return e}function $0t(e,t,n,r){return r<0?(e.type=uS,e.value=!1,e.raw="false"):(t.type=T0t,n.value=r,n.raw=r+""),!0}function I6(e){return cr(e)?e:NK(e)?e.entries():e?Object.entries(e):[]}const R2e="row_object";function N2e(e,t){e.type=x0t;const n=e.properties=[];for(const r of I6(t)){const[i,s]=cr(r)?r:[r,r];n.push({type:w2e,key:{type:uS,raw:yh(s)},value:k2e({computed:!0},i)})}return e}function P2e(e){return M3(N2e({},e))}function D2e(e){return OK.expr(P2e(e))}const M0t=new TextDecoder("utf-8"),az=e=>M0t.decode(e),L0t=new TextEncoder,$K=e=>L0t.encode(e),F0t=e=>typeof e=="boolean",yu=e=>typeof e=="function",Dy=e=>e!=null&&Object(e)===e,k6=e=>Dy(e)&&yu(e.then),MK=e=>Dy(e)&&yu(e[Symbol.iterator]),R6=e=>Dy(e)&&yu(e[Symbol.asyncIterator]),j0t=e=>Dy(e)&&"done"in e&&"value"in e,O2e=e=>"_getDOMStream"in e&&"_getNodeStream"in e,B0t=e=>Dy(e)&&yu(e.abort)&&yu(e.getWriter)&&!O2e(e),U0t=e=>Dy(e)&&yu(e.end)&&yu(e.write)&&F0t(e.writable)&&!O2e(e),z0t=e=>Dy(e)&&yu(e.clear)&&yu(e.bytes)&&yu(e.position)&&yu(e.setPosition)&&yu(e.capacity)&&yu(e.getBufferIdentifier)&&yu(e.createLong),LK=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function V0t(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function F3(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function vh(e,t){const n=V0t(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?F3(o,s,a):o=s;break}F3(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Ws(e,t){let n=j0t(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=$K(n)),n instanceof ArrayBuffer?new e(n):n instanceof LK?new e(n):z0t(n)?Ws(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const TT=e=>Ws(Int32Array,e),Rr=e=>Ws(Uint8Array,e),uz=e=>(e.next(),e);function*H0t(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof LK?n(t):MK(t)?t:n(t);return yield*uz(function*(i){let s=null;do s=i.next(yield Ws(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const q0t=e=>H0t(Uint8Array,e);function $2e(e,t){return Yv(this,arguments,function*(){if(k6(t))return yield Wn(yield Wn(yield*oj(nA($2e(e,yield Wn(t))))));const r=function(o){return Yv(this,arguments,function*(){yield yield Wn(yield Wn(o))})},i=function(o){return Yv(this,arguments,function*(){yield Wn(yield*oj(nA(uz(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof LK?r(t):MK(t)?i(t):R6(t)?t:r(t);return yield Wn(yield*oj(nA(uz(function(o){return Yv(this,arguments,function*(){let a=null;do a=yield Wn(o.next(yield yield Wn(Ws(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Wn(new e)})}const W0t=e=>$2e(Uint8Array,e);function M2e(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function G0t(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const gce={fromIterable(e){return MN(Y0t(e))},fromAsyncIterable(e){return MN(K0t(e))},fromDOMStream(e){return MN(X0t(e))},fromNodeStream(e){return MN(J0t(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},MN=e=>(e.next(),e);function*Y0t(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?vh(r,o)[0]:([i,r,a]=vh(r,o),i)}({cmd:s,size:o}=yield null);const l=q0t(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function K0t(e){return Yv(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?vh(i,a)[0]:([s,i,u]=vh(i,a),s)}({cmd:o,size:a}=yield yield Wn(null));const c=W0t(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Wn(c.next()):yield Wn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Wn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Wn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Wn(c.return(new Uint8Array(0))))}return yield Wn(null)})}function X0t(e){return Yv(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?vh(i,a)[0]:([s,i,u]=vh(i,a),s)}({cmd:o,size:a}=yield yield Wn(null));const c=new Q0t(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Wn(c.read()):yield Wn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Rr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Wn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Wn(c.cancel(f)))}finally{r===!1?yield Wn(c.cancel()):e.locked&&c.releaseLock()}return yield Wn(null)})}class Q0t{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Ip(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Ip(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Rr(n)),n})}}const C8=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function J0t(e){return Yv(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?vh(l,a)[0]:([c,l,u]=vh(l,a),c)}if({cmd:o,size:a}=yield yield Wn(null),e.isTTY)return yield yield Wn(new Uint8Array(0)),yield Wn(null);try{n[0]=C8(e,"end"),n[1]=C8(e,"error");do{if(n[2]=C8(e,"readable"),[r,s]=yield Wn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Rr(e.read(a-u)),c.byteLength<a-u&&(c=Rr(e.read()))):c=Rr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Wn(f()));while(a<u)}while(!i)}finally{yield Wn(d(n,r==="error"?s:null))}return yield Wn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Fa;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Fa||(Fa={}));var Yu;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Yu||(Yu={}));var Ro;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Ro||(Ro={}));var bh;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(bh||(bh={}));var qt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(qt||(qt={}));var _h;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(_h||(_h={}));var Ks;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Ks||(Ks={}));var se;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(se||(se={}));var bp;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(bp||(bp={}));const Z0t=void 0;function V1(e){if(e===null)return"null";if(e===Z0t)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>V1(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const eyt=Symbol.for("isArrowBigNum");function ed(e,...t){return t.length===0?Object.setPrototypeOf(Ws(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}ed.prototype[eyt]=!0;ed.prototype.toJSON=function(){return`"${LC(this)}"`};ed.prototype.valueOf=function(){return L2e(this)};ed.prototype.toString=function(){return LC(this)};ed.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return L2e(this);case"string":return LC(this);case"default":return tyt(this)}return LC(this)};function Uw(...e){return ed.apply(this,e)}function zw(...e){return ed.apply(this,e)}function MC(...e){return ed.apply(this,e)}Object.setPrototypeOf(Uw.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(zw.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(MC.prototype,Object.create(Uint32Array.prototype));Object.assign(Uw.prototype,ed.prototype,{constructor:Uw,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(zw.prototype,ed.prototype,{constructor:zw,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(MC.prototype,ed.prototype,{constructor:MC,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function L2e(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const LC=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return I8(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return I8(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${I8(t)}`},tyt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:LC(e);function I8(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class FK{static new(t,n){switch(n){case!0:return new Uw(t);case!1:return new zw(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Uw(t)}return t.byteLength===16?new MC(t):new zw(t)}static signed(t){return new Uw(t)}static unsigned(t){return new zw(t)}static decimal(t){return new MC(t)}constructor(t,n){return FK.new(t,n)}}function Uf(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var F2e,j2e,B2e,U2e,z2e,V2e,H2e,q2e,W2e,G2e,Y2e,K2e,X2e,Q2e,J2e,Z2e,eAe,tAe,nAe,rAe;let En=class lz{static isNull(t){return(t==null?void 0:t.typeId)===se.Null}static isInt(t){return(t==null?void 0:t.typeId)===se.Int}static isFloat(t){return(t==null?void 0:t.typeId)===se.Float}static isBinary(t){return(t==null?void 0:t.typeId)===se.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===se.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===se.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===se.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===se.Date}static isTime(t){return(t==null?void 0:t.typeId)===se.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===se.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===se.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===se.Duration}static isList(t){return(t==null?void 0:t.typeId)===se.List}static isStruct(t){return(t==null?void 0:t.typeId)===se.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===se.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===se.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===se.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===se.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===se.Dictionary}static isDenseUnion(t){return lz.isUnion(t)&&t.mode===Yu.Dense}static isSparseUnion(t){return lz.isUnion(t)&&t.mode===Yu.Sparse}get typeId(){return se.NONE}};F2e=Symbol.toStringTag;En[F2e]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(En.prototype);let wm=class extends En{toString(){return"Null"}get typeId(){return se.Null}};j2e=Symbol.toStringTag;wm[j2e]=(e=>e[Symbol.toStringTag]="Null")(wm.prototype);class Qa extends En{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return se.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}B2e=Symbol.toStringTag;Qa[B2e]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Qa.prototype);class jK extends Qa{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class BK extends Qa{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class U0 extends Qa{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class UK extends Qa{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class zK extends Qa{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class VK extends Qa{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class HK extends Qa{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class qK extends Qa{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(jK.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(BK.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(U0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(UK.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(zK.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(VK.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(HK.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(qK.prototype,"ArrayType",{value:BigUint64Array});class z0 extends En{constructor(t){super(),this.precision=t}get typeId(){return se.Float}get ArrayType(){switch(this.precision){case Ro.HALF:return Uint16Array;case Ro.SINGLE:return Float32Array;case Ro.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}U2e=Symbol.toStringTag;z0[U2e]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(z0.prototype);class iAe extends z0{constructor(){super(Ro.HALF)}}class WK extends z0{constructor(){super(Ro.SINGLE)}}class GK extends z0{constructor(){super(Ro.DOUBLE)}}Object.defineProperty(iAe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(WK.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(GK.prototype,"ArrayType",{value:Float64Array});let FC=class extends En{constructor(){super()}get typeId(){return se.Binary}toString(){return"Binary"}};z2e=Symbol.toStringTag;FC[z2e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(FC.prototype);let BE=class extends En{constructor(){super()}get typeId(){return se.Utf8}toString(){return"Utf8"}};V2e=Symbol.toStringTag;BE[V2e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(BE.prototype);let jC=class extends En{constructor(){super()}get typeId(){return se.Bool}toString(){return"Bool"}};H2e=Symbol.toStringTag;jC[H2e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(jC.prototype);let j3=class extends En{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return se.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};q2e=Symbol.toStringTag;j3[q2e]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(j3.prototype);class UE extends En{constructor(t){super(),this.unit=t}get typeId(){return se.Date}toString(){return`Date${(this.unit+1)*32}<${bh[this.unit]}>`}}W2e=Symbol.toStringTag;UE[W2e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(UE.prototype);class nyt extends UE{constructor(){super(bh.DAY)}}class ryt extends UE{constructor(){super(bh.MILLISECOND)}}class Em extends En{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return se.Time}toString(){return`Time${this.bitWidth}<${qt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}G2e=Symbol.toStringTag;Em[G2e]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Em.prototype);class iyt extends Em{constructor(){super(qt.SECOND,32)}}class syt extends Em{constructor(){super(qt.MILLISECOND,32)}}class oyt extends Em{constructor(){super(qt.MICROSECOND,64)}}class ayt extends Em{constructor(){super(qt.NANOSECOND,64)}}class B3 extends En{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return se.Timestamp}toString(){return`Timestamp<${qt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Y2e=Symbol.toStringTag;B3[Y2e]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(B3.prototype);class zE extends En{constructor(t){super(),this.unit=t}get typeId(){return se.Interval}toString(){return`Interval<${_h[this.unit]}>`}}K2e=Symbol.toStringTag;zE[K2e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(zE.prototype);class uyt extends zE{constructor(){super(_h.DAY_TIME)}}class lyt extends zE{constructor(){super(_h.YEAR_MONTH)}}let U3=class extends En{constructor(t){super(),this.unit=t}get typeId(){return se.Duration}toString(){return`Duration<${qt[this.unit]}>`}};X2e=Symbol.toStringTag;U3[X2e]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(U3.prototype);let VE=class extends En{constructor(t){super(),this.children=[t]}get typeId(){return se.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Q2e=Symbol.toStringTag;VE[Q2e]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(VE.prototype);class aa extends En{constructor(t){super(),this.children=t}get typeId(){return se.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}J2e=Symbol.toStringTag;aa[J2e]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(aa.prototype);class BC extends En{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return se.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}Z2e=Symbol.toStringTag;BC[Z2e]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(BC.prototype);let z3=class extends En{constructor(t){super(),this.byteWidth=t}get typeId(){return se.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};eAe=Symbol.toStringTag;z3[eAe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(z3.prototype);let HE=class extends En{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return se.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};tAe=Symbol.toStringTag;HE[tAe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(HE.prototype);class UC extends En{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return se.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}nAe=Symbol.toStringTag;UC[nAe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(UC.prototype);const cyt=(e=>()=>++e)(-1);class V0 extends En{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?cyt():Uf(r)}get typeId(){return se.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}rAe=Symbol.toStringTag;V0[rAe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(V0.prototype);function Ad(e){const t=e;switch(e.typeId){case se.Decimal:return e.bitWidth/32;case se.Timestamp:return 2;case se.Date:return 1+t.unit;case se.Interval:return 1+t.unit;case se.FixedSizeList:return t.listSize;case se.FixedSizeBinary:return t.byteWidth;default:return 1}}class Sn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return fyt(this,t,n)}getVisitFnByTypeId(t,n=!0){return V_(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function fyt(e,t,n=!0){return typeof t=="number"?V_(e,t,n):typeof t=="string"&&t in se?V_(e,se[t],n):t&&t instanceof En?V_(e,yce(t),n):t!=null&&t.type&&t.type instanceof En?V_(e,yce(t.type),n):V_(e,se.NONE,n)}function V_(e,t,n=!0){let r=null;switch(t){case se.Null:r=e.visitNull;break;case se.Bool:r=e.visitBool;break;case se.Int:r=e.visitInt;break;case se.Int8:r=e.visitInt8||e.visitInt;break;case se.Int16:r=e.visitInt16||e.visitInt;break;case se.Int32:r=e.visitInt32||e.visitInt;break;case se.Int64:r=e.visitInt64||e.visitInt;break;case se.Uint8:r=e.visitUint8||e.visitInt;break;case se.Uint16:r=e.visitUint16||e.visitInt;break;case se.Uint32:r=e.visitUint32||e.visitInt;break;case se.Uint64:r=e.visitUint64||e.visitInt;break;case se.Float:r=e.visitFloat;break;case se.Float16:r=e.visitFloat16||e.visitFloat;break;case se.Float32:r=e.visitFloat32||e.visitFloat;break;case se.Float64:r=e.visitFloat64||e.visitFloat;break;case se.Utf8:r=e.visitUtf8;break;case se.Binary:r=e.visitBinary;break;case se.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case se.Date:r=e.visitDate;break;case se.DateDay:r=e.visitDateDay||e.visitDate;break;case se.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case se.Timestamp:r=e.visitTimestamp;break;case se.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case se.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case se.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case se.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case se.Time:r=e.visitTime;break;case se.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case se.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case se.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case se.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case se.Decimal:r=e.visitDecimal;break;case se.List:r=e.visitList;break;case se.Struct:r=e.visitStruct;break;case se.Union:r=e.visitUnion;break;case se.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case se.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case se.Dictionary:r=e.visitDictionary;break;case se.Interval:r=e.visitInterval;break;case se.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case se.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case se.Duration:r=e.visitDuration;break;case se.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case se.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case se.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case se.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case se.FixedSizeList:r=e.visitFixedSizeList;break;case se.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${se[t]}'`)}function yce(e){switch(e.typeId){case se.Null:return se.Null;case se.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?se.Int8:se.Uint8;case 16:return n?se.Int16:se.Uint16;case 32:return n?se.Int32:se.Uint32;case 64:return n?se.Int64:se.Uint64}return se.Int}case se.Float:switch(e.precision){case Ro.HALF:return se.Float16;case Ro.SINGLE:return se.Float32;case Ro.DOUBLE:return se.Float64}return se.Float;case se.Binary:return se.Binary;case se.Utf8:return se.Utf8;case se.Bool:return se.Bool;case se.Decimal:return se.Decimal;case se.Time:switch(e.unit){case qt.SECOND:return se.TimeSecond;case qt.MILLISECOND:return se.TimeMillisecond;case qt.MICROSECOND:return se.TimeMicrosecond;case qt.NANOSECOND:return se.TimeNanosecond}return se.Time;case se.Timestamp:switch(e.unit){case qt.SECOND:return se.TimestampSecond;case qt.MILLISECOND:return se.TimestampMillisecond;case qt.MICROSECOND:return se.TimestampMicrosecond;case qt.NANOSECOND:return se.TimestampNanosecond}return se.Timestamp;case se.Date:switch(e.unit){case bh.DAY:return se.DateDay;case bh.MILLISECOND:return se.DateMillisecond}return se.Date;case se.Interval:switch(e.unit){case _h.DAY_TIME:return se.IntervalDayTime;case _h.YEAR_MONTH:return se.IntervalYearMonth}return se.Interval;case se.Duration:switch(e.unit){case qt.SECOND:return se.DurationSecond;case qt.MILLISECOND:return se.DurationMillisecond;case qt.MICROSECOND:return se.DurationMicrosecond;case qt.NANOSECOND:return se.DurationNanosecond}return se.Duration;case se.Map:return se.Map;case se.List:return se.List;case se.Struct:return se.Struct;case se.Union:switch(e.mode){case Yu.Dense:return se.DenseUnion;case Yu.Sparse:return se.SparseUnion}return se.Union;case se.FixedSizeBinary:return se.FixedSizeBinary;case se.FixedSizeList:return se.FixedSizeList;case se.Dictionary:return se.Dictionary}throw new Error(`Unrecognized type '${se[e.typeId]}'`)}Sn.prototype.visitInt8=null;Sn.prototype.visitInt16=null;Sn.prototype.visitInt32=null;Sn.prototype.visitInt64=null;Sn.prototype.visitUint8=null;Sn.prototype.visitUint16=null;Sn.prototype.visitUint32=null;Sn.prototype.visitUint64=null;Sn.prototype.visitFloat16=null;Sn.prototype.visitFloat32=null;Sn.prototype.visitFloat64=null;Sn.prototype.visitDateDay=null;Sn.prototype.visitDateMillisecond=null;Sn.prototype.visitTimestampSecond=null;Sn.prototype.visitTimestampMillisecond=null;Sn.prototype.visitTimestampMicrosecond=null;Sn.prototype.visitTimestampNanosecond=null;Sn.prototype.visitTimeSecond=null;Sn.prototype.visitTimeMillisecond=null;Sn.prototype.visitTimeMicrosecond=null;Sn.prototype.visitTimeNanosecond=null;Sn.prototype.visitDenseUnion=null;Sn.prototype.visitSparseUnion=null;Sn.prototype.visitIntervalDayTime=null;Sn.prototype.visitIntervalYearMonth=null;Sn.prototype.visitDuration=null;Sn.prototype.visitDurationSecond=null;Sn.prototype.visitDurationMillisecond=null;Sn.prototype.visitDurationMicrosecond=null;Sn.prototype.visitDurationNanosecond=null;const sAe=new Float64Array(1),S_=new Uint32Array(sAe.buffer);function oAe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function aAe(e){if(e!==e)return 32256;sAe[0]=e;const t=(S_[1]&2147483648)>>16&65535;let n=S_[1]&2146435072,r=0;return n>=1089470464?S_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(S_[1]&1048575)>>10):n<=1056964608?(r=1048576+(S_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(S_[1]&1048575)+512>>10),t|n|r&65535}class Xt extends Sn{}function nn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const dyt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},YK=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},hyt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},pyt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},uAe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},myt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Gm=({values:e},t,n)=>{e[t]=n},KK=({values:e},t,n)=>{e[t]=n},lAe=({values:e},t,n)=>{e[t]=aAe(n)},gyt=(e,t,n)=>{switch(e.type.precision){case Ro.HALF:return lAe(e,t,n);case Ro.SINGLE:case Ro.DOUBLE:return KK(e,t,n)}},XK=({values:e},t,n)=>{dyt(e,t,n.valueOf())},QK=({values:e},t,n)=>{YK(e,t*2,n.valueOf())},cAe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},yyt=({values:e,valueOffsets:t},n,r)=>uAe(e,t,n,r),vyt=({values:e,valueOffsets:t},n,r)=>{uAe(e,t,n,$K(r))},fAe=(e,t,n)=>{e.type.unit===bh.DAY?XK(e,t,n):QK(e,t,n)},JK=({values:e},t,n)=>YK(e,t*2,n/1e3),ZK=({values:e},t,n)=>YK(e,t*2,n),eX=({values:e},t,n)=>hyt(e,t*2,n),tX=({values:e},t,n)=>pyt(e,t*2,n),dAe=(e,t,n)=>{switch(e.type.unit){case qt.SECOND:return JK(e,t,n);case qt.MILLISECOND:return ZK(e,t,n);case qt.MICROSECOND:return eX(e,t,n);case qt.NANOSECOND:return tX(e,t,n)}},nX=({values:e},t,n)=>{e[t]=n},rX=({values:e},t,n)=>{e[t]=n},iX=({values:e},t,n)=>{e[t]=n},sX=({values:e},t,n)=>{e[t]=n},hAe=(e,t,n)=>{switch(e.type.unit){case qt.SECOND:return nX(e,t,n);case qt.MILLISECOND:return rX(e,t,n);case qt.MICROSECOND:return iX(e,t,n);case qt.NANOSECOND:return sX(e,t,n)}},pAe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},byt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=kc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},_yt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=kc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},wyt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),Eyt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),xyt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),Syt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),Tyt=(e,t,n)=>{const r=e.type.children.map(s=>kc.getVisitFn(s.type)),i=n instanceof Map?xyt(t,n):n instanceof fr?Eyt(t,n):Array.isArray(n)?wyt(t,n):Syt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},Ayt=(e,t,n)=>{e.type.mode===Yu.Dense?mAe(e,t,n):gAe(e,t,n)},mAe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];kc.visit(i,e.valueOffsets[t],n)},gAe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];kc.visit(i,t,n)},Cyt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},yAe=(e,t,n)=>{e.type.unit===_h.DAY_TIME?oX(e,t,n):aX(e,t,n)},oX=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},aX=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},uX=({values:e},t,n)=>{e[t]=n},lX=({values:e},t,n)=>{e[t]=n},cX=({values:e},t,n)=>{e[t]=n},fX=({values:e},t,n)=>{e[t]=n},vAe=(e,t,n)=>{switch(e.type.unit){case qt.SECOND:return uX(e,t,n);case qt.MILLISECOND:return lX(e,t,n);case qt.MICROSECOND:return cX(e,t,n);case qt.NANOSECOND:return fX(e,t,n)}},Iyt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=kc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Xt.prototype.visitBool=nn(myt);Xt.prototype.visitInt=nn(Gm);Xt.prototype.visitInt8=nn(Gm);Xt.prototype.visitInt16=nn(Gm);Xt.prototype.visitInt32=nn(Gm);Xt.prototype.visitInt64=nn(Gm);Xt.prototype.visitUint8=nn(Gm);Xt.prototype.visitUint16=nn(Gm);Xt.prototype.visitUint32=nn(Gm);Xt.prototype.visitUint64=nn(Gm);Xt.prototype.visitFloat=nn(gyt);Xt.prototype.visitFloat16=nn(lAe);Xt.prototype.visitFloat32=nn(KK);Xt.prototype.visitFloat64=nn(KK);Xt.prototype.visitUtf8=nn(vyt);Xt.prototype.visitBinary=nn(yyt);Xt.prototype.visitFixedSizeBinary=nn(cAe);Xt.prototype.visitDate=nn(fAe);Xt.prototype.visitDateDay=nn(XK);Xt.prototype.visitDateMillisecond=nn(QK);Xt.prototype.visitTimestamp=nn(dAe);Xt.prototype.visitTimestampSecond=nn(JK);Xt.prototype.visitTimestampMillisecond=nn(ZK);Xt.prototype.visitTimestampMicrosecond=nn(eX);Xt.prototype.visitTimestampNanosecond=nn(tX);Xt.prototype.visitTime=nn(hAe);Xt.prototype.visitTimeSecond=nn(nX);Xt.prototype.visitTimeMillisecond=nn(rX);Xt.prototype.visitTimeMicrosecond=nn(iX);Xt.prototype.visitTimeNanosecond=nn(sX);Xt.prototype.visitDecimal=nn(pAe);Xt.prototype.visitList=nn(byt);Xt.prototype.visitStruct=nn(Tyt);Xt.prototype.visitUnion=nn(Ayt);Xt.prototype.visitDenseUnion=nn(mAe);Xt.prototype.visitSparseUnion=nn(gAe);Xt.prototype.visitDictionary=nn(Cyt);Xt.prototype.visitInterval=nn(yAe);Xt.prototype.visitIntervalDayTime=nn(oX);Xt.prototype.visitIntervalYearMonth=nn(aX);Xt.prototype.visitDuration=nn(vAe);Xt.prototype.visitDurationSecond=nn(uX);Xt.prototype.visitDurationMillisecond=nn(lX);Xt.prototype.visitDurationMicrosecond=nn(cX);Xt.prototype.visitDurationNanosecond=nn(fX);Xt.prototype.visitFixedSizeList=nn(Iyt);Xt.prototype.visitMap=nn(_yt);const kc=new Xt,lf=Symbol.for("parent"),Vw=Symbol.for("rowIndex");class dX{constructor(t,n){return this[lf]=t,this[Vw]=n,new Proxy(this,new Ryt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Vw],n=this[lf],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Ku.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${V1(t)}: ${V1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new kyt(this[lf],this[Vw])}}class kyt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Ku.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(dX.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[lf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Vw]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Ryt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[lf].type.children.map(n=>n.name)}has(t,n){return t[lf].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[lf].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[lf].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Ku.visit(t[lf].children[r],t[Vw]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[lf].type.children.findIndex(s=>s.name===n);return i!==-1?(kc.visit(t[lf].children[i],t[Vw],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Wt extends Sn{}function Qt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const Nyt=(e,t)=>864e5*e[t],hX=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),Pyt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,Dyt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,bAe=e=>new Date(e),Oyt=(e,t)=>bAe(Nyt(e,t)),$yt=(e,t)=>bAe(hX(e,t)),Myt=(e,t)=>null,_Ae=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},Lyt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},wAe=({values:e},t)=>Oyt(e,t),EAe=({values:e},t)=>$yt(e,t*2),Oy=({stride:e,values:t},n)=>t[e*n],Fyt=({stride:e,values:t},n)=>oAe(t[e*n]),xAe=({values:e},t)=>e[t],jyt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),Byt=({values:e,valueOffsets:t},n)=>_Ae(e,t,n),Uyt=({values:e,valueOffsets:t},n)=>{const r=_Ae(e,t,n);return r!==null?az(r):null},zyt=({values:e},t)=>e[t],Vyt=({type:e,values:t},n)=>e.precision!==Ro.HALF?t[n]:oAe(t[n]),Hyt=(e,t)=>e.type.unit===bh.DAY?wAe(e,t):EAe(e,t),SAe=({values:e},t)=>1e3*hX(e,t*2),TAe=({values:e},t)=>hX(e,t*2),AAe=({values:e},t)=>Pyt(e,t*2),CAe=({values:e},t)=>Dyt(e,t*2),qyt=(e,t)=>{switch(e.type.unit){case qt.SECOND:return SAe(e,t);case qt.MILLISECOND:return TAe(e,t);case qt.MICROSECOND:return AAe(e,t);case qt.NANOSECOND:return CAe(e,t)}},IAe=({values:e},t)=>e[t],kAe=({values:e},t)=>e[t],RAe=({values:e},t)=>e[t],NAe=({values:e},t)=>e[t],Wyt=(e,t)=>{switch(e.type.unit){case qt.SECOND:return IAe(e,t);case qt.MILLISECOND:return kAe(e,t);case qt.MICROSECOND:return RAe(e,t);case qt.NANOSECOND:return NAe(e,t)}},Gyt=({values:e,stride:t},n)=>FK.decimal(e.subarray(t*n,t*(n+1))),Yyt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new fr([u])},Kyt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new N6(o.slice(i,s-i))},Xyt=(e,t)=>new dX(e,t),Qyt=(e,t)=>e.type.mode===Yu.Dense?PAe(e,t):DAe(e,t),PAe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Ku.visit(r,e.valueOffsets[t])},DAe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Ku.visit(r,t)},Jyt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},Zyt=(e,t)=>e.type.unit===_h.DAY_TIME?OAe(e,t):$Ae(e,t),OAe=({values:e},t)=>e.subarray(2*t,2*(t+1)),$Ae=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},MAe=({values:e},t)=>e[t],LAe=({values:e},t)=>e[t],FAe=({values:e},t)=>e[t],jAe=({values:e},t)=>e[t],evt=(e,t)=>{switch(e.type.unit){case qt.SECOND:return MAe(e,t);case qt.MILLISECOND:return LAe(e,t);case qt.MICROSECOND:return FAe(e,t);case qt.NANOSECOND:return jAe(e,t)}},tvt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new fr([s])};Wt.prototype.visitNull=Qt(Myt);Wt.prototype.visitBool=Qt(Lyt);Wt.prototype.visitInt=Qt(zyt);Wt.prototype.visitInt8=Qt(Oy);Wt.prototype.visitInt16=Qt(Oy);Wt.prototype.visitInt32=Qt(Oy);Wt.prototype.visitInt64=Qt(xAe);Wt.prototype.visitUint8=Qt(Oy);Wt.prototype.visitUint16=Qt(Oy);Wt.prototype.visitUint32=Qt(Oy);Wt.prototype.visitUint64=Qt(xAe);Wt.prototype.visitFloat=Qt(Vyt);Wt.prototype.visitFloat16=Qt(Fyt);Wt.prototype.visitFloat32=Qt(Oy);Wt.prototype.visitFloat64=Qt(Oy);Wt.prototype.visitUtf8=Qt(Uyt);Wt.prototype.visitBinary=Qt(Byt);Wt.prototype.visitFixedSizeBinary=Qt(jyt);Wt.prototype.visitDate=Qt(Hyt);Wt.prototype.visitDateDay=Qt(wAe);Wt.prototype.visitDateMillisecond=Qt(EAe);Wt.prototype.visitTimestamp=Qt(qyt);Wt.prototype.visitTimestampSecond=Qt(SAe);Wt.prototype.visitTimestampMillisecond=Qt(TAe);Wt.prototype.visitTimestampMicrosecond=Qt(AAe);Wt.prototype.visitTimestampNanosecond=Qt(CAe);Wt.prototype.visitTime=Qt(Wyt);Wt.prototype.visitTimeSecond=Qt(IAe);Wt.prototype.visitTimeMillisecond=Qt(kAe);Wt.prototype.visitTimeMicrosecond=Qt(RAe);Wt.prototype.visitTimeNanosecond=Qt(NAe);Wt.prototype.visitDecimal=Qt(Gyt);Wt.prototype.visitList=Qt(Yyt);Wt.prototype.visitStruct=Qt(Xyt);Wt.prototype.visitUnion=Qt(Qyt);Wt.prototype.visitDenseUnion=Qt(PAe);Wt.prototype.visitSparseUnion=Qt(DAe);Wt.prototype.visitDictionary=Qt(Jyt);Wt.prototype.visitInterval=Qt(Zyt);Wt.prototype.visitIntervalDayTime=Qt(OAe);Wt.prototype.visitIntervalYearMonth=Qt($Ae);Wt.prototype.visitDuration=Qt(evt);Wt.prototype.visitDurationSecond=Qt(MAe);Wt.prototype.visitDurationMillisecond=Qt(LAe);Wt.prototype.visitDurationMicrosecond=Qt(FAe);Wt.prototype.visitDurationNanosecond=Qt(jAe);Wt.prototype.visitFixedSizeList=Qt(tvt);Wt.prototype.visitMap=Qt(Kyt);const Ku=new Wt,vf=Symbol.for("keys"),Hw=Symbol.for("vals");class N6{constructor(t){return this[vf]=new fr([t.children[0]]).memoize(),this[Hw]=t.children[1],new Proxy(this,new rvt)}[Symbol.iterator](){return new nvt(this[vf],this[Hw])}get size(){return this[vf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[vf],n=this[Hw],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Ku.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${V1(t)}: ${V1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class nvt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Ku.visit(this.vals,t)]})}}class rvt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[vf].toArray().map(String)}has(t,n){return t[vf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[vf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[vf].indexOf(n);if(r!==-1){const i=Ku.visit(Reflect.get(t,Hw),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[vf].indexOf(n);return i!==-1?(kc.visit(Reflect.get(t,Hw),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(N6.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[vf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Hw]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let vce;function BAe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(vce=s,s=o,o=vce),o>i&&(o=i),r?r(e,s,o):[s,o]}const bce=e=>e!==e;function lS(e){if(typeof e!=="object"||e===null)return bce(e)?bce:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?G0t(e,n):!1:e instanceof Map?svt(e):Array.isArray(e)?ivt(e):e instanceof fr?ovt(e):avt(e,!0)}function ivt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=lS(e[n]);return P6(t)}function svt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=lS(r);return P6(n)}function ovt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=lS(e.get(n));return P6(t)}function avt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=lS(e[n[i]]);return P6(r,n)}function P6(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return uvt(e,n);case Map:return _ce(e,n,n.keys());case N6:case dX:case Object:case void 0:return _ce(e,n,t||Object.keys(n))}return n instanceof fr?lvt(e,n):!1}}function uvt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function lvt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function _ce(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function UAe(e,t,n,r){return(n&1<<r)!==0}function cvt(e,t,n,r){return(n&1<<r)>>r}function V3(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):zAe(new pX(n,e,t,null,UAe)).subarray(0,r)),i}return n}function zAe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class pX{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function cz(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new pX(e,t,n-t,e,cvt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return cz(e,t,i)+cz(e,r,n)+fvt(e,i>>3,r-i>>3)}function fvt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=k8(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=k8(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=k8(s.getUint8(i)),i+=1;return r}function k8(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const dvt=-1;class kr{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return En.isSparseUnion(t)?this.children.some(n=>n.nullable):En.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(En.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=dvt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-cz(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof kr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Ad(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(En.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===Yu.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(En.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===Yu.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(V3(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new kr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===se.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(V3(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[bp.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[bp.TYPE])&&(o[bp.TYPE]=s.subarray(t,t+n)),(s=o[bp.OFFSET])&&(o[bp.OFFSET]=s.subarray(t,t+n+1))||(s=o[bp.DATA])&&(o[bp.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}kr.prototype.children=Object.freeze([]);class vA extends Sn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new kr(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ws(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ws(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ws(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.data),s=Rr(t.nullBitmap),o=TT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.data),s=Rr(t.nullBitmap),o=TT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ws(n.ArrayType,t.data),{["length"]:o=s.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ws(n.ArrayType,t.data),{["length"]:o=s.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ws(n.ArrayType,t.data),{["length"]:o=s.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ws(n.ArrayType,t.data),{["length"]:o=s.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ws(n.ArrayType,t.data),{["length"]:o=s.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Rr(t.nullBitmap),o=TT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Rr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Ws(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(En.isSparseUnion(n))return new kr(n,r,o,a,[void 0,void 0,void 0,s],i);const u=TT(t.valueOffsets);return new kr(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ws(n.indices.ArrayType,t.data),{["dictionary"]:o=new fr([new vA().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ws(n.ArrayType,t.data),{["length"]:o=s.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ws(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new vA().visit({type:n.valueType})}=t,s=Rr(t.nullBitmap),{["length"]:o=i.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new vA().visit({type:n.childType})}=t,s=Rr(t.nullBitmap),o=TT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[o,void 0,s],[i])}}const hvt=new vA;function ra(e){return hvt.visit(e)}class wce{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function VAe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function HAe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function qAe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function mX(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function gX(e,t){return e.getValid(t)}function qw(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return mX(r,this._offsets,n,t)}}function WAe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=mX(s,this._offsets,r,n);return t=void 0,o}}function GAe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):mX(s,this._offsets,i,n);return t=void 0,o}}class Gt extends Sn{}function pvt(e,t){return t===null&&e.length>0?0:-1}function mvt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new pX(n,e.offset+(t||0),e.length,n,UAe)){if(!i)return r;++r}return-1}function un(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case se.Union:break;case se.Dictionary:break;default:return mvt(e,n)}const r=Ku.getVisitFn(e),i=lS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function YAe(e,t,n){const r=Ku.getVisitFn(e),i=lS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Gt.prototype.visitNull=pvt;Gt.prototype.visitBool=un;Gt.prototype.visitInt=un;Gt.prototype.visitInt8=un;Gt.prototype.visitInt16=un;Gt.prototype.visitInt32=un;Gt.prototype.visitInt64=un;Gt.prototype.visitUint8=un;Gt.prototype.visitUint16=un;Gt.prototype.visitUint32=un;Gt.prototype.visitUint64=un;Gt.prototype.visitFloat=un;Gt.prototype.visitFloat16=un;Gt.prototype.visitFloat32=un;Gt.prototype.visitFloat64=un;Gt.prototype.visitUtf8=un;Gt.prototype.visitBinary=un;Gt.prototype.visitFixedSizeBinary=un;Gt.prototype.visitDate=un;Gt.prototype.visitDateDay=un;Gt.prototype.visitDateMillisecond=un;Gt.prototype.visitTimestamp=un;Gt.prototype.visitTimestampSecond=un;Gt.prototype.visitTimestampMillisecond=un;Gt.prototype.visitTimestampMicrosecond=un;Gt.prototype.visitTimestampNanosecond=un;Gt.prototype.visitTime=un;Gt.prototype.visitTimeSecond=un;Gt.prototype.visitTimeMillisecond=un;Gt.prototype.visitTimeMicrosecond=un;Gt.prototype.visitTimeNanosecond=un;Gt.prototype.visitDecimal=un;Gt.prototype.visitList=un;Gt.prototype.visitStruct=un;Gt.prototype.visitUnion=un;Gt.prototype.visitDenseUnion=YAe;Gt.prototype.visitSparseUnion=YAe;Gt.prototype.visitDictionary=un;Gt.prototype.visitInterval=un;Gt.prototype.visitIntervalDayTime=un;Gt.prototype.visitIntervalYearMonth=un;Gt.prototype.visitDuration=un;Gt.prototype.visitDurationSecond=un;Gt.prototype.visitDurationMillisecond=un;Gt.prototype.visitDurationMicrosecond=un;Gt.prototype.visitDurationNanosecond=un;Gt.prototype.visitFixedSizeList=un;Gt.prototype.visitMap=un;const H3=new Gt;class Yt extends Sn{}function Jt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===se.Timestamp||t instanceof Qa&&t.bitWidth!==64||t instanceof Em&&t.bitWidth!==64||t instanceof z0&&t.precision!==Ro.HALF))return new wce(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new wce(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new gvt(o)})}class gvt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Yt.prototype.visitNull=Jt;Yt.prototype.visitBool=Jt;Yt.prototype.visitInt=Jt;Yt.prototype.visitInt8=Jt;Yt.prototype.visitInt16=Jt;Yt.prototype.visitInt32=Jt;Yt.prototype.visitInt64=Jt;Yt.prototype.visitUint8=Jt;Yt.prototype.visitUint16=Jt;Yt.prototype.visitUint32=Jt;Yt.prototype.visitUint64=Jt;Yt.prototype.visitFloat=Jt;Yt.prototype.visitFloat16=Jt;Yt.prototype.visitFloat32=Jt;Yt.prototype.visitFloat64=Jt;Yt.prototype.visitUtf8=Jt;Yt.prototype.visitBinary=Jt;Yt.prototype.visitFixedSizeBinary=Jt;Yt.prototype.visitDate=Jt;Yt.prototype.visitDateDay=Jt;Yt.prototype.visitDateMillisecond=Jt;Yt.prototype.visitTimestamp=Jt;Yt.prototype.visitTimestampSecond=Jt;Yt.prototype.visitTimestampMillisecond=Jt;Yt.prototype.visitTimestampMicrosecond=Jt;Yt.prototype.visitTimestampNanosecond=Jt;Yt.prototype.visitTime=Jt;Yt.prototype.visitTimeSecond=Jt;Yt.prototype.visitTimeMillisecond=Jt;Yt.prototype.visitTimeMicrosecond=Jt;Yt.prototype.visitTimeNanosecond=Jt;Yt.prototype.visitDecimal=Jt;Yt.prototype.visitList=Jt;Yt.prototype.visitStruct=Jt;Yt.prototype.visitUnion=Jt;Yt.prototype.visitDenseUnion=Jt;Yt.prototype.visitSparseUnion=Jt;Yt.prototype.visitDictionary=Jt;Yt.prototype.visitInterval=Jt;Yt.prototype.visitIntervalDayTime=Jt;Yt.prototype.visitIntervalYearMonth=Jt;Yt.prototype.visitDuration=Jt;Yt.prototype.visitDurationSecond=Jt;Yt.prototype.visitDurationMillisecond=Jt;Yt.prototype.visitDurationMicrosecond=Jt;Yt.prototype.visitDurationNanosecond=Jt;Yt.prototype.visitFixedSizeList=Jt;Yt.prototype.visitMap=Jt;const yX=new Yt,yvt=(e,t)=>e+t;class $y extends Sn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===qt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+wh.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+wh.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const vvt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),bvt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),_vt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=wh.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},wvt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=wh.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},Evt=(e,t)=>e.type.mode===Yu.Dense?KAe(e,t):XAe(e,t),KAe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+wh.visit(t[s],r[i])},XAe=({children:e},t)=>4+wh.visitMany(e,e.map(()=>t)).reduce(yvt,0);$y.prototype.visitUtf8=vvt;$y.prototype.visitBinary=bvt;$y.prototype.visitList=_vt;$y.prototype.visitFixedSizeList=wvt;$y.prototype.visitUnion=Evt;$y.prototype.visitDenseUnion=KAe;$y.prototype.visitSparseUnion=XAe;const wh=new $y;var QAe;const JAe={},ZAe={};class fr{constructor(t){var n,r,i;const s=t[0]instanceof fr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof kr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=JAe[o.typeId],f=s[0];this.isValid=d=>gX(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,ZAe[o.typeId]),this._offsets=HAe(s);break}this.data=s,this.type=o,this.stride=Ad(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return VAe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${se[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return yX.visit(this)}concat(...t){return new fr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new fr(BAe(this,t,n,({data:r,_offsets:i},s,o)=>qAe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case se.Int:case se.Float:case se.Decimal:case se.Time:case se.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new fr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return En.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(En.isDictionary(this.type)){const t=new q3(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new fr(n)}return new q3(this)}unmemoize(){if(En.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new fr(n)}return this}}QAe=Symbol.toStringTag;fr[QAe]=(e=>{e.type=En.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(se).map(n=>se[n]).filter(n=>typeof n=="number"&&n!==se.NONE);for(const n of t){const r=Ku.getVisitFnByTypeId(n),i=kc.getVisitFnByTypeId(n),s=H3.getVisitFnByTypeId(n),o=wh.getVisitFnByTypeId(n);JAe[n]={get:r,set:i,indexOf:s,byteLength:o},ZAe[n]=Object.create(e,{isValid:{value:qw(gX)},get:{value:qw(Ku.getVisitFnByTypeId(n))},set:{value:WAe(kc.getVisitFnByTypeId(n))},indexOf:{value:GAe(H3.getVisitFnByTypeId(n))},getByteLength:{value:qw(wh.getVisitFnByTypeId(n))}})}return"Vector"})(fr.prototype);class q3 extends fr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new q3(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new fr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function xvt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${Svt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function Svt(e){return typeof e!="bigint"?V1(e):`${V1(e)}n`}const R8=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,Tvt=(e,t=0)=>e.length>=t?e.subarray(0,t):F3(new e.constructor(t),e,0);class D6{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?R8(r*1,this.BYTES_PER_ELEMENT):R8(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=R8(t*this.stride,this.BYTES_PER_ELEMENT);const n=Tvt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=F3(new this.ArrayType(t),this.buffer)}}D6.prototype.offset=0;class yk extends D6{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class eCe extends yk{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class tCe extends yk{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let nl=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Ad(t),this._nulls=new eCe,n&&n.length>0&&(this._isValid=xvt(n))}toVector(){return new fr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),ra({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};nl.prototype.length=1;nl.prototype.stride=1;nl.prototype.children=null;nl.prototype.finished=!1;nl.prototype.nullValues=null;nl.prototype._isValid=()=>!0;class Ym extends nl{constructor(t){super(t),this._values=new yk(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class O6 extends nl{constructor(t){super(t),this._pendingLength=0,this._offsets=new tCe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof N6?n[vf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class fz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const N8=2,$d=4,Np=4,Br=4,Ag=new Int32Array(2),Ece=new Float32Array(Ag.buffer),xce=new Float64Array(Ag.buffer),LN=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var dz;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(dz||(dz={}));let W3=class nCe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new nCe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Ag[0]=this.readInt32(t),Ece[0]}readFloat64(t){return Ag[LN?0:1]=this.readInt32(t),Ag[LN?1:0]=this.readInt32(t+4),xce[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Ece[0]=n,this.writeInt32(t,Ag[0])}writeFloat64(t,n){xce[0]=n,this.writeInt32(t,Ag[LN?0:1]),this.writeInt32(t+4,Ag[LN?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+$d+Np)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Np;n++)t+=String.fromCharCode(this.readInt8(this.position_+$d+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=$d;const i=this.bytes_.subarray(t,t+r);return n===dz.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+$d}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Np)throw new Error("FlatBuffers: file identifier must be length "+Np);for(let n=0;n<Np;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+$d+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},rCe=class iCe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=W3.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=iCe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=W3.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep($d,0),this.writeInt32(this.offset()-t+$d)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*N8;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=N8;l<s;l+=N8)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Br:0;if(n){const s=n;if(this.prep(this.minalign,$d+Np+i),s.length!=Np)throw new TypeError("FlatBuffers: file identifier must be length "+Np);for(let o=Np-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,$d+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep($d,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Is{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Is).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Br),(n||new Is).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Is.startKeyValue(t),Is.addKey(t,n),Is.addValue(t,r),Is.endKeyValue(t)}}var qE;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(qE||(qE={}));var WE;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(WE||(WE={}));var G3;(function(e){e[e.DenseArray=0]="DenseArray"})(G3||(G3={}));class pl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new pl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Br),(n||new pl).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return pl.startInt(t),pl.addBitWidth(t,n),pl.addIsSigned(t,r),pl.endInt(t)}}class Pp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Pp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Br),(n||new Pp).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new pl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):G3.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,G3.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class n1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new n1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Br),(n||new n1).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return n1.startBinary(t),n1.endBinary(t)}}class r1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new r1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Br),(n||new r1).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return r1.startBool(t),r1.endBool(t)}}var Y3;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Y3||(Y3={}));let cD=class H_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new H_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Br),(n||new H_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Y3.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Y3.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return H_.startDate(t),H_.addUnit(t,n),H_.endDate(t)}};class vu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new vu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Br),(n||new vu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return vu.startDecimal(t),vu.addPrecision(t,n),vu.addScale(t,r),vu.addBitWidth(t,i),vu.endDecimal(t)}}var H0;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(H0||(H0={}));class Md{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new Md).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Br),(n||new Md).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):H0.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,H0.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return Md.startDuration(t),Md.addUnit(t,n),Md.endDuration(t)}}class Ld{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Ld).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Br),(n||new Ld).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Ld.startFixedSizeBinary(t),Ld.addByteWidth(t,n),Ld.endFixedSizeBinary(t)}}class Fd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Fd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Br),(n||new Fd).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Fd.startFixedSizeList(t),Fd.addListSize(t,n),Fd.endFixedSizeList(t)}}var K3;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(K3||(K3={}));class jd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new jd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Br),(n||new jd).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):K3.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,K3.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return jd.startFloatingPoint(t),jd.addPrecision(t,n),jd.endFloatingPoint(t)}}var X3;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(X3||(X3={}));class Bd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Bd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Br),(n||new Bd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):X3.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,X3.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Bd.startInterval(t),Bd.addUnit(t,n),Bd.endInterval(t)}}class i1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new i1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Br),(n||new i1).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return i1.startList(t),i1.endList(t)}}let fD=class q_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new q_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Br),(n||new q_).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return q_.startMap(t),q_.addKeysSorted(t,n),q_.endMap(t)}};class s1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new s1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Br),(n||new s1).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return s1.startNull(t),s1.endNull(t)}}class o1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new o1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Br),(n||new o1).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return o1.startStruct_(t),o1.endStruct_(t)}}let b2=class xv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new xv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Br),(n||new xv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):H0.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,H0.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return xv.startTime(t),xv.addUnit(t,n),xv.addBitWidth(t,r),xv.endTime(t)}},_2=class Sv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Sv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Br),(n||new Sv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):H0.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,H0.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Sv.startTimestamp(t),Sv.addUnit(t,n),Sv.addTimezone(t,r),Sv.endTimestamp(t)}};var Q3;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Q3||(Q3={}));let Tv=class Av{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Av).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Br),(n||new Av).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Q3.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,Q3.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Av.startUnion(t),Av.addMode(t,n),Av.addTypeIds(t,r),Av.endUnion(t)}};class a1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new a1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Br),(n||new a1).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return a1.startUtf8(t),a1.endUtf8(t)}}var mi;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(mi||(mi={}));let ic=class dD{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new dD).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Br),(n||new dD).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):mi.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Pp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new dD).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Is).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,mi.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Sd=class yp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new yp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Br),(n||new yp).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):WE.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new ic).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Is).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,WE.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return yp.startSchema(t),yp.addEndianness(t,n),yp.addFields(t,r),yp.addCustomMetadata(t,i),yp.addFeatures(t,s),yp.endSchema(t)}};class ll{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new ll).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Br),(n||new ll).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):qE.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Sd).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new fz).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new fz).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Is).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,qE.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class xr{constructor(t=[],n,r,i=Fa.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=pz(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new xr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new xr(n,this.metadata)}assign(...t){const n=t[0]instanceof xr?t[0]:Array.isArray(t[0])?new xr(t[0]):new xr(t),r=[...this.fields],i=FN(FN(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:FN(FN(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=pz(s,new Map);return new xr([...r,...s],i,new Map([...this.dictionaries,...o]))}}xr.prototype.fields=null;xr.prototype.metadata=null;xr.prototype.dictionaries=null;let Mr=class hz{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new hz(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],hz.new(n,r,i,s)}};Mr.prototype.type=null;Mr.prototype.name=null;Mr.prototype.nullable=null;Mr.prototype.metadata=null;function FN(e,t){return new Map([...e||new Map,...t||new Map])}function pz(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(En.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&pz(s.children,t)}return t}var Avt=rCe,Cvt=W3;class mz{static decode(t){t=new Cvt(Rr(t));const n=ll.getRootAsFooter(t),r=xr.decode(n.schema(),new Map,n.version());return new Ivt(r,n)}static encode(t){const n=new Avt,r=xr.encode(n,t.schema);ll.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())q0.encode(n,o);const i=n.endVector();ll.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())q0.encode(n,o);const s=n.endVector();return ll.startFooter(n),ll.addSchema(n,r),ll.addVersion(n,Fa.V5),ll.addRecordBatches(n,i),ll.addDictionaries(n,s),ll.finishFooterBuffer(n,ll.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Fa.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Ivt extends mz{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return q0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return q0.decode(n)}return null}}class q0{static decode(t){return new q0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return fz.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Uf(r),this.bodyLength=Uf(n)}}const jN=Object.freeze({done:!0,value:void 0});class sCe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class kvt extends sCe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Ip(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(jN);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return gce.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return gce.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Ip(this,void 0,void 0,function*(){return yield this.abort(t),jN})}return(t){return Ip(this,void 0,void 0,function*(){return yield this.close(),jN})}read(t){return Ip(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Ip(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(jN)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class P8 extends kvt{write(t){if((t=Rr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?az(this.toUint8Array(!0)):this.toUint8Array(!1).then(az)}toUint8Array(t=!1){return t?vh(this._values)[0]:Ip(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=nA(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return vh(o,a)[0]})}}class oCe extends O6{constructor(t){super(t),this._values=new D6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Rr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class Rvt extends nl{constructor(t){super(t),this._values=new eCe}setValue(t,n){this._values.set(t,+n)}}class $6 extends Ym{}$6.prototype._setValue=fAe;class aCe extends $6{}aCe.prototype._setValue=XK;class uCe extends $6{}uCe.prototype._setValue=QK;class lCe extends Ym{}lCe.prototype._setValue=pAe;class Nvt extends nl{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new V0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=J3({type:this.type.indices,nullValues:n}),this.dictionary=J3({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class cCe extends Ym{}cCe.prototype._setValue=cAe;class Pvt extends nl{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new HE(this.type.listSize,new Mr(n,t.type,!0)),r}}class M6 extends Ym{setValue(t,n){this._values.set(t,n)}}class Dvt extends M6{setValue(t,n){super.setValue(t,aAe(n))}}class Ovt extends M6{}class $vt extends M6{}class L6 extends Ym{}L6.prototype._setValue=yAe;class fCe extends L6{}fCe.prototype._setValue=oX;class dCe extends L6{}dCe.prototype._setValue=aX;class cS extends Ym{}cS.prototype._setValue=vAe;class hCe extends cS{}hCe.prototype._setValue=uX;class pCe extends cS{}pCe.prototype._setValue=lX;class mCe extends cS{}mCe.prototype._setValue=cX;class gCe extends cS{}gCe.prototype._setValue=fX;class Km extends Ym{setValue(t,n){this._values.set(t,n)}}class Mvt extends Km{}class Lvt extends Km{}class Fvt extends Km{}class jvt extends Km{}class Bvt extends Km{}class Uvt extends Km{}class zvt extends Km{}class Vvt extends Km{}class Hvt extends O6{constructor(t){super(t),this._offsets=new tCe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new VE(new Mr(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class qvt extends O6{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new UC(new Mr(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class Wvt extends nl{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class Gvt extends nl{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new aa([...this.type.children,new Mr(n,t.type,!0)]),r}}class fS extends Ym{}fS.prototype._setValue=dAe;class yCe extends fS{}yCe.prototype._setValue=JK;class vCe extends fS{}vCe.prototype._setValue=ZK;class bCe extends fS{}bCe.prototype._setValue=eX;class _Ce extends fS{}_Ce.prototype._setValue=tX;class dS extends Ym{}dS.prototype._setValue=hAe;class wCe extends dS{}wCe.prototype._setValue=nX;class ECe extends dS{}ECe.prototype._setValue=rX;class xCe extends dS{}xCe.prototype._setValue=iX;class SCe extends dS{}SCe.prototype._setValue=sX;class vX extends nl{constructor(t){super(t),this._typeIds=new yk(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Mr(n,t.type)];return this.type=new BC(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class Yvt extends vX{}class Kvt extends vX{constructor(t){super(t),this._offsets=new yk(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class TCe extends O6{constructor(t){super(t),this._values=new D6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,$K(n))}_flushPending(t,n){}}TCe.prototype._flushPending=oCe.prototype._flushPending;class Xvt extends Sn{visitNull(){return Wvt}visitBool(){return Rvt}visitInt(){return Km}visitInt8(){return Mvt}visitInt16(){return Lvt}visitInt32(){return Fvt}visitInt64(){return jvt}visitUint8(){return Bvt}visitUint16(){return Uvt}visitUint32(){return zvt}visitUint64(){return Vvt}visitFloat(){return M6}visitFloat16(){return Dvt}visitFloat32(){return Ovt}visitFloat64(){return $vt}visitUtf8(){return TCe}visitBinary(){return oCe}visitFixedSizeBinary(){return cCe}visitDate(){return $6}visitDateDay(){return aCe}visitDateMillisecond(){return uCe}visitTimestamp(){return fS}visitTimestampSecond(){return yCe}visitTimestampMillisecond(){return vCe}visitTimestampMicrosecond(){return bCe}visitTimestampNanosecond(){return _Ce}visitTime(){return dS}visitTimeSecond(){return wCe}visitTimeMillisecond(){return ECe}visitTimeMicrosecond(){return xCe}visitTimeNanosecond(){return SCe}visitDecimal(){return lCe}visitList(){return Hvt}visitStruct(){return Gvt}visitUnion(){return vX}visitDenseUnion(){return Kvt}visitSparseUnion(){return Yvt}visitDictionary(){return Nvt}visitInterval(){return L6}visitIntervalDayTime(){return fCe}visitIntervalYearMonth(){return dCe}visitDuration(){return cS}visitDurationSecond(){return hCe}visitDurationMillisecond(){return pCe}visitDurationMicrosecond(){return mCe}visistDurationNanosecond(){return gCe}visitFixedSizeList(){return Pvt}visitMap(){return qvt}}const Qvt=new Xvt;class Kt extends Sn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function nu(e,t){return t instanceof e.constructor}function vk(e,t){return e===t||nu(e,t)}function Xm(e,t){return e===t||nu(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function F6(e,t){return e===t||nu(e,t)&&e.precision===t.precision}function Jvt(e,t){return e===t||nu(e,t)&&e.byteWidth===t.byteWidth}function bX(e,t){return e===t||nu(e,t)&&e.unit===t.unit}function bk(e,t){return e===t||nu(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function _k(e,t){return e===t||nu(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Zvt(e,t){return e===t||nu(e,t)&&e.children.length===t.children.length&&W0.compareManyFields(e.children,t.children)}function e1t(e,t){return e===t||nu(e,t)&&e.children.length===t.children.length&&W0.compareManyFields(e.children,t.children)}function _X(e,t){return e===t||nu(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&W0.compareManyFields(e.children,t.children)}function t1t(e,t){return e===t||nu(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&W0.visit(e.indices,t.indices)&&W0.visit(e.dictionary,t.dictionary)}function wX(e,t){return e===t||nu(e,t)&&e.unit===t.unit}function wk(e,t){return e===t||nu(e,t)&&e.unit===t.unit}function n1t(e,t){return e===t||nu(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&W0.compareManyFields(e.children,t.children)}function r1t(e,t){return e===t||nu(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&W0.compareManyFields(e.children,t.children)}Kt.prototype.visitNull=vk;Kt.prototype.visitBool=vk;Kt.prototype.visitInt=Xm;Kt.prototype.visitInt8=Xm;Kt.prototype.visitInt16=Xm;Kt.prototype.visitInt32=Xm;Kt.prototype.visitInt64=Xm;Kt.prototype.visitUint8=Xm;Kt.prototype.visitUint16=Xm;Kt.prototype.visitUint32=Xm;Kt.prototype.visitUint64=Xm;Kt.prototype.visitFloat=F6;Kt.prototype.visitFloat16=F6;Kt.prototype.visitFloat32=F6;Kt.prototype.visitFloat64=F6;Kt.prototype.visitUtf8=vk;Kt.prototype.visitBinary=vk;Kt.prototype.visitFixedSizeBinary=Jvt;Kt.prototype.visitDate=bX;Kt.prototype.visitDateDay=bX;Kt.prototype.visitDateMillisecond=bX;Kt.prototype.visitTimestamp=bk;Kt.prototype.visitTimestampSecond=bk;Kt.prototype.visitTimestampMillisecond=bk;Kt.prototype.visitTimestampMicrosecond=bk;Kt.prototype.visitTimestampNanosecond=bk;Kt.prototype.visitTime=_k;Kt.prototype.visitTimeSecond=_k;Kt.prototype.visitTimeMillisecond=_k;Kt.prototype.visitTimeMicrosecond=_k;Kt.prototype.visitTimeNanosecond=_k;Kt.prototype.visitDecimal=vk;Kt.prototype.visitList=Zvt;Kt.prototype.visitStruct=e1t;Kt.prototype.visitUnion=_X;Kt.prototype.visitDenseUnion=_X;Kt.prototype.visitSparseUnion=_X;Kt.prototype.visitDictionary=t1t;Kt.prototype.visitInterval=wX;Kt.prototype.visitIntervalDayTime=wX;Kt.prototype.visitIntervalYearMonth=wX;Kt.prototype.visitDuration=wk;Kt.prototype.visitDurationSecond=wk;Kt.prototype.visitDurationMillisecond=wk;Kt.prototype.visitDurationMicrosecond=wk;Kt.prototype.visitDurationNanosecond=wk;Kt.prototype.visitFixedSizeList=n1t;Kt.prototype.visitMap=r1t;const W0=new Kt;function gz(e,t){return W0.compareSchemas(e,t)}function J3(e){const t=e.type,n=new(Qvt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(J3(Object.assign(Object.assign({},l),{type:u})))}}return n}function D8(e,t){return i1t(e,t.map(n=>n.data.concat()))}function i1t(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=s1t(n,o,c,t,i),o>0&&(r[s++]=ra({type:new aa(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new ml(e,f))]}function s1t(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:ra({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var ACe;class xu{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new xr([]),this._offsets=[0],this;let i,s;t[0]instanceof xr&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof ml)return[u];if(u instanceof xu)return u.batches;if(u instanceof kr){if(u.type instanceof aa)return[new ml(new xr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new fr([u[h]])),f=new xr(l.map((h,p)=>new Mr(String(h),c[p].type))),[,d]=D8(f,c);return d.length===0?[new ml(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new xr([]),!(i instanceof xr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof ml))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!gz(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??HAe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=VAe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?yX.visit(new fr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new xu(n,r.map(i=>new ml(n,i)))}slice(t,n){const r=this.schema;[t,n]=BAe({length:this.numRows},t,n);const i=qAe(this.data,this._offsets,t,n);return new xu(r,i.map(s=>new ml(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=ra({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new fr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new fr([ra({type:new wm,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=D8(r,a)}return new xu(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new xu(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new xu(...D8(s,o))}}ACe=Symbol.toStringTag;xu[ACe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=qw(gX),e.get=qw(Ku.getVisitFn(se.Struct)),e.set=WAe(kc.getVisitFn(se.Struct)),e.indexOf=GAe(H3.getVisitFn(se.Struct)),e.getByteLength=qw(wh.getVisitFn(se.Struct)),"Table"))(xu.prototype);var CCe;let ml=class w2{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof xr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=ra({nullCount:0,type:new aa(this.schema.fields),children:this.schema.fields.map(n=>ra({type:n.type,nullCount:0}))})]=t,!(this.data instanceof kr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Sce(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Mr.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new xr(r),a=ra({type:new aa(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Sce(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=ICe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Ku.visit(this.data,t)}set(t,n){return kc.visit(this.data,t,n)}indexOf(t,n){return H3.visit(this.data,t,n)}getByteLength(t){return wh.visit(this.data,t)}[Symbol.iterator](){return yX.visit(new fr([this.data]))}toArray(){return[...this]}concat(...t){return new xu(this.schema,[this,...t])}slice(t,n){const[r]=new fr([this.data]).slice(t,n).data;return new w2(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new fr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new fr([ra({type:new wm,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new xr(s,new Map(this.schema.metadata)),i=ra({type:new aa(s),children:o})}return new w2(r,i)}select(t){const n=this.schema.select(t),r=new aa(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new w2(n,ra({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=ra({type:new aa(n.fields),length:this.numRows,children:r});return new w2(n,i)}};CCe=Symbol.toStringTag;ml[CCe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(ml.prototype);function Sce(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:ra({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),ra({type:new aa(i),length:n,children:s})]}function ICe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])ICe(a.children,l==null?void 0:l.children,n);if(En.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class o1t extends ml{constructor(t){const n=t.fields.map(i=>ra({type:i.type})),r=ra({type:new aa(t.fields),nullCount:0,children:n});super(t,r)}}var Z3;(function(e){e[e.BUFFER=0]="BUFFER"})(Z3||(Z3={}));var e$;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(e$||(e$={}));class Cg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Cg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Br),(n||new Cg).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):e$.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Z3.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,e$.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,Z3.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Cg.startBodyCompression(t),Cg.addCodec(t,n),Cg.addMethod(t,r),Cg.endBodyCompression(t)}}let kCe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},RCe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},_p=class yz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new yz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Br),(n||new yz).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new RCe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new kCe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Cg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},W_=class vz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new vz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Br),(n||new vz).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new _p).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var t$;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(t$||(t$={}));let fg=class gd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new gd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Br),(n||new gd).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):qE.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):t$.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Is).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,qE.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,t$.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return gd.startMessage(t),gd.addVersion(t,n),gd.addHeaderType(t,r),gd.addHeader(t,i),gd.addBodyLength(t,s),gd.addCustomMetadata(t,o),gd.endMessage(t)}};class a1t extends Sn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return s1.startNull(n),s1.endNull(n)}visitInt(t,n){return pl.startInt(n),pl.addBitWidth(n,t.bitWidth),pl.addIsSigned(n,t.isSigned),pl.endInt(n)}visitFloat(t,n){return jd.startFloatingPoint(n),jd.addPrecision(n,t.precision),jd.endFloatingPoint(n)}visitBinary(t,n){return n1.startBinary(n),n1.endBinary(n)}visitBool(t,n){return r1.startBool(n),r1.endBool(n)}visitUtf8(t,n){return a1.startUtf8(n),a1.endUtf8(n)}visitDecimal(t,n){return vu.startDecimal(n),vu.addScale(n,t.scale),vu.addPrecision(n,t.precision),vu.addBitWidth(n,t.bitWidth),vu.endDecimal(n)}visitDate(t,n){return cD.startDate(n),cD.addUnit(n,t.unit),cD.endDate(n)}visitTime(t,n){return b2.startTime(n),b2.addUnit(n,t.unit),b2.addBitWidth(n,t.bitWidth),b2.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return _2.startTimestamp(n),_2.addUnit(n,t.unit),r!==void 0&&_2.addTimezone(n,r),_2.endTimestamp(n)}visitInterval(t,n){return Bd.startInterval(n),Bd.addUnit(n,t.unit),Bd.endInterval(n)}visitDuration(t,n){return Md.startDuration(n),Md.addUnit(n,t.unit),Md.endDuration(n)}visitList(t,n){return i1.startList(n),i1.endList(n)}visitStruct(t,n){return o1.startStruct_(n),o1.endStruct_(n)}visitUnion(t,n){Tv.startTypeIdsVector(n,t.typeIds.length);const r=Tv.createTypeIdsVector(n,t.typeIds);return Tv.startUnion(n),Tv.addMode(n,t.mode),Tv.addTypeIds(n,r),Tv.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Pp.startDictionaryEncoding(n),Pp.addId(n,BigInt(t.id)),Pp.addIsOrdered(n,t.isOrdered),r!==void 0&&Pp.addIndexType(n,r),Pp.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Ld.startFixedSizeBinary(n),Ld.addByteWidth(n,t.byteWidth),Ld.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Fd.startFixedSizeList(n),Fd.addListSize(n,t.listSize),Fd.endFixedSizeList(n)}visitMap(t,n){return fD.startMap(n),fD.addKeysSorted(n,t.keysSorted),fD.endMap(n)}}const O8=new a1t;function u1t(e,t=new Map){return new xr(c1t(e,t),hD(e.metadata),t)}function NCe(e){return new $l(e.count,PCe(e.columns),DCe(e.columns))}function l1t(e){return new Eh(NCe(e.data),e.id,e.isDelta)}function c1t(e,t){return(e.fields||[]).filter(Boolean).map(n=>Mr.fromJSON(n,t))}function Tce(e,t){return(e.children||[]).filter(Boolean).map(n=>Mr.fromJSON(n,t))}function PCe(e){return(e||[]).reduce((t,n)=>[...t,new G0(n.count,f1t(n.VALIDITY)),...PCe(n.children)],[])}function DCe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Wd(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Wd(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Wd(t.length,i.OFFSET.length)),i.DATA&&t.push(new Wd(t.length,i.DATA.length)),t=DCe(i.children,t)}return t}function f1t(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function d1t(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Cce(e,Tce(e,t)),i=new Mr(e.name,o,e.nullable,hD(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Ace(r):new U0,a=new V0(t.get(n),r,n,s.isOrdered),i=new Mr(e.name,a,e.nullable,hD(e.metadata))):(r=(r=s.indexType)?Ace(r):new U0,t.set(n,o=Cce(e,Tce(e,t))),a=new V0(o,r,n,s.isOrdered),i=new Mr(e.name,a,e.nullable,hD(e.metadata))),i||null}function hD(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Ace(e){return new Qa(e.isSigned,e.bitWidth)}function Cce(e,t){const n=e.type.name;switch(n){case"NONE":return new wm;case"null":return new wm;case"binary":return new FC;case"utf8":return new BE;case"bool":return new jC;case"list":return new VE((t||[])[0]);case"struct":return new aa(t||[]);case"struct_":return new aa(t||[])}switch(n){case"int":{const r=e.type;return new Qa(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new z0(Ro[r.precision])}case"decimal":{const r=e.type;return new j3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new UE(bh[r.unit])}case"time":{const r=e.type;return new Em(qt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new B3(qt[r.unit],r.timezone)}case"interval":{const r=e.type;return new zE(_h[r.unit])}case"duration":{const r=e.type;return new U3(qt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new BC(Yu[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new z3(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new HE(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new UC((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var h1t=rCe,p1t=W3;class Ud{static fromJSON(t,n){const r=new Ud(0,Fa.V5,n);return r._createHeader=m1t(t,n),r}static decode(t){t=new p1t(Rr(t));const n=fg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Ud(r,i,s);return o._createHeader=g1t(n,s),o}static encode(t){const n=new h1t;let r=-1;return t.isSchema()?r=xr.encode(n,t.header()):t.isRecordBatch()?r=$l.encode(n,t.header()):t.isDictionaryBatch()&&(r=Eh.encode(n,t.header())),fg.startMessage(n),fg.addVersion(n,Fa.V5),fg.addHeader(n,r),fg.addHeaderType(n,t.headerType),fg.addBodyLength(n,BigInt(t.bodyLength)),fg.finishMessageBuffer(n,fg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof xr)return new Ud(0,Fa.V5,Ks.Schema,t);if(t instanceof $l)return new Ud(n,Fa.V5,Ks.RecordBatch,t);if(t instanceof Eh)return new Ud(n,Fa.V5,Ks.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Ks.Schema}isRecordBatch(){return this.headerType===Ks.RecordBatch}isDictionaryBatch(){return this.headerType===Ks.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Uf(t)}}class $l{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Uf(t)}}class Eh{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Uf(n)}}class Wd{constructor(t,n){this.offset=Uf(t),this.length=Uf(n)}}class G0{constructor(t,n){this.length=Uf(t),this.nullCount=Uf(n)}}function m1t(e,t){return()=>{switch(t){case Ks.Schema:return xr.fromJSON(e);case Ks.RecordBatch:return $l.fromJSON(e);case Ks.DictionaryBatch:return Eh.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Ks[t]}, type: ${t} }`)}}function g1t(e,t){return()=>{switch(t){case Ks.Schema:return xr.decode(e.header(new Sd),new Map,e.version());case Ks.RecordBatch:return $l.decode(e.header(new _p),e.version());case Ks.DictionaryBatch:return Eh.decode(e.header(new W_),e.version())}throw new Error(`Unrecognized Message type: { name: ${Ks[t]}, type: ${t} }`)}}Mr.encode=C1t;Mr.decode=T1t;Mr.fromJSON=d1t;xr.encode=A1t;xr.decode=y1t;xr.fromJSON=u1t;$l.encode=I1t;$l.decode=v1t;$l.fromJSON=NCe;Eh.encode=k1t;Eh.decode=b1t;Eh.fromJSON=l1t;G0.encode=R1t;G0.decode=w1t;Wd.encode=N1t;Wd.decode=_1t;function y1t(e,t=new Map,n=Fa.V5){const r=S1t(e,t);return new xr(r,pD(e),t,n)}function v1t(e,t=Fa.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new $l(e.length(),E1t(e),x1t(e,t))}function b1t(e,t=Fa.V5){return new Eh($l.decode(e.data(),t),e.id(),e.isDelta())}function _1t(e){return new Wd(e.offset(),e.length())}function w1t(e){return new G0(e.length(),e.nullCount())}function E1t(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=G0.decode(n));return t}function x1t(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Fa.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Wd.decode(r));return n}function S1t(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Mr.decode(r,t));return n}function Ice(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Mr.decode(r,t));return n}function T1t(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Rce(e,Ice(e,t)),r=new Mr(e.name(),i,e.nullable(),pD(e))):t.has(n=Uf(a.id()))?(s=(s=a.indexType())?kce(s):new U0,o=new V0(t.get(n),s,n,a.isOrdered()),r=new Mr(e.name(),o,e.nullable(),pD(e))):(s=(s=a.indexType())?kce(s):new U0,t.set(n,i=Rce(e,Ice(e,t))),o=new V0(i,s,n,a.isOrdered()),r=new Mr(e.name(),o,e.nullable(),pD(e))),r||null}function pD(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function kce(e){return new Qa(e.isSigned(),e.bitWidth())}function Rce(e,t){const n=e.typeType();switch(n){case mi.NONE:return new wm;case mi.Null:return new wm;case mi.Binary:return new FC;case mi.Utf8:return new BE;case mi.Bool:return new jC;case mi.List:return new VE((t||[])[0]);case mi.Struct_:return new aa(t||[])}switch(n){case mi.Int:{const r=e.type(new pl);return new Qa(r.isSigned(),r.bitWidth())}case mi.FloatingPoint:{const r=e.type(new jd);return new z0(r.precision())}case mi.Decimal:{const r=e.type(new vu);return new j3(r.scale(),r.precision(),r.bitWidth())}case mi.Date:{const r=e.type(new cD);return new UE(r.unit())}case mi.Time:{const r=e.type(new b2);return new Em(r.unit(),r.bitWidth())}case mi.Timestamp:{const r=e.type(new _2);return new B3(r.unit(),r.timezone())}case mi.Interval:{const r=e.type(new Bd);return new zE(r.unit())}case mi.Duration:{const r=e.type(new Md);return new U3(r.unit())}case mi.Union:{const r=e.type(new Tv);return new BC(r.mode(),r.typeIdsArray()||[],t||[])}case mi.FixedSizeBinary:{const r=e.type(new Ld);return new z3(r.byteWidth())}case mi.FixedSizeList:{const r=e.type(new Fd);return new HE(r.listSize(),(t||[])[0])}case mi.Map:{const r=e.type(new fD);return new UC((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${mi[n]}" (${n})`)}function A1t(e,t){const n=t.fields.map(s=>Mr.encode(e,s));Sd.startFieldsVector(e,n.length);const r=Sd.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Sd.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Is.startKeyValue(e),Is.addKey(e,a),Is.addValue(e,u),Is.endKeyValue(e)})):-1;return Sd.startSchema(e),Sd.addFields(e,r),Sd.addEndianness(e,P1t?WE.Little:WE.Big),i!==-1&&Sd.addCustomMetadata(e,i),Sd.endSchema(e)}function C1t(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;En.isDictionary(s)?(o=s.dictionary.typeId,i=O8.visit(s,e),r=O8.visit(s.dictionary,e)):r=O8.visit(s,e);const a=(s.children||[]).map(c=>Mr.encode(e,c)),u=ic.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?ic.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Is.startKeyValue(e),Is.addKey(e,d),Is.addValue(e,h),Is.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),ic.startField(e),ic.addType(e,r),ic.addTypeType(e,o),ic.addChildren(e,u),ic.addNullable(e,!!t.nullable),n!==-1&&ic.addName(e,n),i!==-1&&ic.addDictionary(e,i),l!==-1&&ic.addCustomMetadata(e,l),ic.endField(e)}function I1t(e,t){const n=t.nodes||[],r=t.buffers||[];_p.startNodesVector(e,n.length);for(const o of n.slice().reverse())G0.encode(e,o);const i=e.endVector();_p.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Wd.encode(e,o);const s=e.endVector();return _p.startRecordBatch(e),_p.addLength(e,BigInt(t.length)),_p.addNodes(e,i),_p.addBuffers(e,s),_p.endRecordBatch(e)}function k1t(e,t){const n=$l.encode(e,t.data);return W_.startDictionaryBatch(e),W_.addId(e,BigInt(t.id)),W_.addIsDelta(e,t.isDelta),W_.addData(e,n),W_.endDictionaryBatch(e)}function R1t(e,t){return RCe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function N1t(e,t){return kCe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const P1t=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),bz="ARROW1",EX=new Uint8Array(bz.length);for(let e=0;e<bz.length;e+=1)EX[e]=bz.codePointAt(e);EX.length;class os extends Sn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof ml?s.data.children:s.data),r=new os;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof fr)return this.visitMany(t.data),this;const{type:n}=t;if(!En.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(En.isUnion(n))this.nodes.push(new G0(r,0));else{const{nullCount:i}=t;En.isNull(n)||Df.call(this,i<=0?new Uint8Array(0):V3(t.offset,r,t.nullBitmap)),this.nodes.push(new G0(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Df(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Wd(this._byteLength,t)),this._byteLength+=t,this}function D1t(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Df.call(this,i),n.mode===Yu.Sparse)return _z.call(this,e);if(n.mode===Yu.Dense){if(e.offset<=0)return Df.call(this,s),_z.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Df.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function O1t(e){let t;return e.nullCount>=e.length?Df.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Df.call(this,V3(e.offset,e.length,t)):Df.call(this,zAe(e.values))}function Qm(e){return Df.call(this,e.values.subarray(0,e.length*e.stride))}function OCe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Df.call(this,M2e(-i,t+1,r)),Df.call(this,n.subarray(i,i+o)),this}function xX(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Df.call(this,M2e(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function _z(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}os.prototype.visitBool=O1t;os.prototype.visitInt=Qm;os.prototype.visitFloat=Qm;os.prototype.visitUtf8=OCe;os.prototype.visitBinary=OCe;os.prototype.visitFixedSizeBinary=Qm;os.prototype.visitDate=Qm;os.prototype.visitTimestamp=Qm;os.prototype.visitTime=Qm;os.prototype.visitDecimal=Qm;os.prototype.visitList=xX;os.prototype.visitStruct=_z;os.prototype.visitUnion=D1t;os.prototype.visitInterval=Qm;os.prototype.visitDuration=Qm;os.prototype.visitFixedSizeList=xX;os.prototype.visitMap=xX;class $Ce extends sCe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new P8,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Dy(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return k6(t)?t.then(n=>this.writeAll(n)):R6(t)?CX(this,t):AX(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof P8?this._sink=t:(this._sink=new P8,t&&B0t(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&U0t(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!gz(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof xu&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof ml&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!gz(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof ml?t instanceof o1t||this._writeRecordBatch(t):t instanceof xu?this.writeAll(t.batches):MK(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Ud.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Ks.RecordBatch?this._recordBatchBlocks.push(new q0(a,t.bodyLength,this._position)):t.headerType===Ks.DictionaryBatch&&this._dictionaryBlocks.push(new q0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Rr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Ud.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(EX)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=os.assemble(t),o=new $l(t.numRows,r,i),a=Ud.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=os.assemble(new fr([t])),u=new $l(t.length,s,o),l=new Eh(u,n,r),c=Ud.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class SX extends $Ce{static writeAll(t,n){const r=new SX(n);return k6(t)?t.then(i=>r.writeAll(i)):R6(t)?CX(r,t):AX(r,t)}}class TX extends $Ce{static writeAll(t){const n=new TX;return k6(t)?t.then(r=>n.writeAll(r)):R6(t)?CX(n,t):AX(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=mz.encode(new mz(t,Fa.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function AX(e,t){let n=t;t instanceof xu&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function CX(e,t){var n,r,i,s,o,a,u;return Ip(this,void 0,void 0,function*(){try{for(n=!0,r=nA(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function $1t(e,t="stream"){return(t==="stream"?SX:TX).writeAll(e).toUint8Array(!0)}function IX(e,t=1){return(e*t+63&-64||64)/t}function Y0(e,t,n=e.BYTES_PER_ELEMENT){return new e(IX(t,n))}function kX(e){return e instanceof kr?e:new kr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function M1t(e){return new fr([kX(e)])}const RX=new TextEncoder;function L1t(e,t,n){const r=RX.encode(n);return e.set(r,t),r.length}function F1t(e,t,n){return RX.encodeInto(n,e.subarray(t)).written}const j1t=RX.encodeInto?F1t:L1t;function Nce(e,t){const n=Y0(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function B1t(e,t){const n=Y0(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function U1t(e,t){const n=Y0(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function z1t(e,t){const n=Y0(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function V1t(e){const t=J3({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function H1t(e,t,n){const r=Y0(Int32Array,t+1),i=Y0(Uint8Array,3*n);let s=0;return{set(o,a){s+=j1t(i,s,o),r[a+1]=s},data:()=>{const o=IX(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function q1t(e,t){const n=[],r=Y0(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:W1t(e.dictionary,n,o)})}}function W1t(e,t,n){const r=H1t(e,t.length,n);return t.forEach(r.set),M1t(r.data())}function G1t(e,t){const n=Y0(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function Y1t(e,t,n=!0){let r;switch(e.typeId){case se.Int:r=e.bitWidth<64?Nce:null;break;case se.Float:r=e.precision>0?Nce:null;break;case se.Dictionary:r=e.dictionary.typeId===se.Utf8&&e.indices.typeId===se.Int&&e.indices.bitWidth<64?q1t:null;break;case se.Bool:r=B1t;break;case se.Date:r=e.unit?z1t:U1t;break}return r==null?V1t(e):n?G1t(r(e,t),t):r(e,t)}function K1t(e,t){const n=e.length,r=IX(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),kX({type:t,length:n,buffers:[null,i]})}function MCe(e,t,n,r,i=!0){const s=Y1t(r,e,i);return t(n,s.set),kX(s.data())}function NX(e){if(e instanceof En||e==null)return e;switch(e){case se.Binary:return new FC;case se.Bool:return new jC;case se.DateDay:return new nyt;case se.DateMillisecond:case se.Date:return new ryt;case se.Dictionary:return new V0(new BE,new U0);case se.Float16:return new iAe;case se.Float32:return new WK;case se.Float64:case se.Float:return new GK;case se.Int8:return new jK;case se.Int16:return new BK;case se.Int32:case se.Int:return new U0;case se.Int64:return new UK;case se.IntervalDayTime:return new uyt;case se.Interval:case se.IntervalYearMonth:return new lyt;case se.Null:return new wm;case se.TimeMicrosecond:return new oyt;case se.TimeMillisecond:case se.Time:return new syt;case se.TimeNanosecond:return new ayt;case se.TimeSecond:return new iyt;case se.Uint8:return new zK;case se.Uint16:return new VK;case se.Uint32:return new HK;case se.Uint64:return new qK;case se.Utf8:return new BE;default:wn(`Unsupported type code: ${yh(e)}. Use a data type constructor instead?`)}}function X1t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function LCe(e,t){const n=wz();return e(t,n.add),n}function wz(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(_m(t))++e.dates,X1t(t)&&++e.utcdays;else if(t1(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=wz());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=wz())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return NX(Q1t(e))}};return e}function Q1t(e){const t=e.count-e.nulls;if(t===0)return se.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?se.Float64:n<128?se.Int8:n<32768?se.Int16:se.Int32:n>=2**32?se.Float64:n<256?se.Uint8:n<65536?se.Uint16:se.Uint32}else{if(e.nums===t)return se.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?se.Int64:wn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?se.Uint64:wn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return se.Bool;if(e.utcdays===t)return se.DateDay;if(e.dates===t)return se.DateMillisecond;if(e.arrays===t){const n=Mr.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new HE(e.minlen,n):new VE(n)}else if(e.structs===t){const n=e.struct_prof;return new aa(Object.keys(n).map(r=>Mr.new(r,n[r].type(),!0)))}else{if(e.strings>0)return se.Dictionary;wn("Type inference failure")}}}}function J1t(e,t,n,r,i,s=!0){if(i=NX(i),!i){const o=LCe(r,t);s=o.nulls>0,i=o.type()}return MCe(n,r,t,i,s)}function Z1t(e,t,n,r,i,s=!0){i=NX(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=ebt(o);if(u&&a&&Pce(u.type,i))return u;const l=o.data;if(mk(l)){const c=tbt(l);if(a&&c&&Pce(c,i))return K1t(l,c);i=i||c,s=!1}if(!i){const c=LCe(r,o);s=c.nulls>0,i=c.type()}return MCe(n,r,o,i,s)}function ebt(e){return e instanceof fr?e:e.vector instanceof fr?e.vector:null}function tbt(e){const n={Float32Array:WK,Float64Array:GK,Int8Array:jK,Int16Array:BK,Int32Array:U0,Uint8Array:zK,Uint16Array:VK,Uint32Array:HK,BigInt64Array:UK,BigUint64Array:qK}[e.constructor.name];return n?new n:null}function Pce(e,t){return!e||!t?!0:e.compareTo(t)}function nbt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function rbt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&t1(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const ibt=()=>wn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function sbt(){try{return xu}catch{ibt()}}function FCe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=obt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&wn("Column length mismatch"),a[l]=c});const u=sbt();return new u(a)}function obt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=di(n)?n(e):cr(n)?n:null;if(cr(e))return{dataFrom:J1t,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:nbt(e,r,i)};if(abt(e))return{dataFrom:Z1t,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:rbt(e,r,i)};wn("Unsupported input data type")}function abt(e){return e&&di(e.reify)}function ubt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return $1t(FCe(e,r),n)}function lbt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function cbt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&_m(u))++i,lbt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function j6(e,t){return di(t)?t(e):t||e.columnNames()}function jCe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=cbt(fbt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function fbt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function PX(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function dbt(e,t={}){const n=j6(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":_m(l)?C6(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return PX(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function BCe(e,t={}){if(di(t))return t(e)+"";const n=typeof e;if(n==="object"){if(_m(e))return t.utc?C6(e):u2e(e);{const r=JSON.stringify(e,(s,o)=>mk(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function B6(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function hbt(e,t={}){const n=j6(e,t.columns),{align:r,format:i}=jCe(e,n,t),s=pbt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(BCe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return PX(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function pbt(e){return B6(e.style,t=>di(t)?t:()=>t)}function mbt(e,t=!0,n=!1){return e===void 0||e?t:n}const gbt=e=>_m(e)?C6(e,!0):e;function ybt(e,t={}){const n=mbt(t.schema),r=t.format||{},i=j6(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||gbt;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function vbt(e,t={}){const n=j6(e,t.columns),{align:r,format:i}=jCe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return PX(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(BCe(u,i[l]))+"|"}}),a+`
`}function UCe(e,t){for(const[n,r]of I6(t))e.set(n,r);return e}function bbt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function xm(e,t,n=new Map){return t=Xa(t)?e.columnName(t):t,Lo(t)?n.set(t,t):cr(t)?t.forEach(r=>xm(e,r,n)):di(t)?xm(e,t(e),n):ya(t)?UCe(n,t):wn(`Invalid column selection: ${yh(t)}`),n}function U6(e,t){return e.toObject=t,e}function zCe(e){return cr(e)?e.map(zCe):e&&e.toObject?e.toObject():e}function GE(){return U6(e=>e.columnNames(),()=>({all:[]}))}function VCe(...e){return e=e.flat(),U6(t=>{const n=xm(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:zCe(e)}))}function _bt(e,t){return U6(n=>{let r=Xa(e)?e:n.columnIndex(e),i=Xa(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function wbt(e){return Lo(e)&&(e=RegExp(bbt(e))),U6(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function Ebt(e){return mk(e.data)?e.data.constructor:Array}class Dp extends jgt{static from(t,n){return new Dp(zgt(t,n),n)}static new(t,n){if(t instanceof Dp)return t;const r={},i=[];for(const[s,o]of I6(t))r[s]=o,i.push(s);return new Dp(r,n||i)}constructor(t,n,r,i,s,o){B6(t,Ugt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Dp(t||this._data,n||(t?null:this._names),o,i!==void 0?i:y0t(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Yl(r).groupby(r.groups());return t.forEach(s=>{s=Dp.new(s),s.numRows()!==n&&wn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):wn(`Unrecognized column: ${t}`)}object(t=0){return Dce(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=xm(this,t.columns||GE()),o=D2e(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),b0t(this,u,a,n)}return a}*[Symbol.iterator](){const t=Dce(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(Ebt(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=v0t(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return FCe(this,t)}toArrowBuffer(t){return ubt(this,t)}toCSV(t){return dbt(this,t)}toHTML(t){return hbt(this,t)}toJSON(t){return ybt(this,t)}toMarkdown(t){return vbt(this,t)}}function Dce(e){let t=e._builder;if(!t){const n=D2e(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class xbt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Jn(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=Sbt[e.type];s&&s(e,t,n)}const BN=(e,t,n)=>{Jn(e.argument,t,n,e)},$8=(e,t,n)=>{Jn(e.left,t,n,e),Jn(e.right,t,n,e)},Oce=(e,t,n)=>{Jn(e.test,t,n,e),Jn(e.consequent,t,n,e),e.alternate&&Jn(e.alternate,t,n,e)},M8=(e,t,n)=>{Td(e.params,t,n,e),Jn(e.body,t,n,e)},$ce=(e,t,n)=>{Jn(e.callee,t,n,e),Td(e.arguments,t,n,e)},Td=(e,t,n,r)=>{e.forEach(i=>Jn(i,t,n,r))},Sbt={TemplateLiteral:(e,t,n)=>{Td(e.expressions,t,n,e),Td(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Jn(e.object,t,n,e),Jn(e.property,t,n,e)},CallExpression:$ce,NewExpression:$ce,ArrayExpression:(e,t,n)=>{Td(e.elements,t,n,e)},AssignmentExpression:$8,AwaitExpression:BN,BinaryExpression:$8,LogicalExpression:$8,UnaryExpression:BN,UpdateExpression:BN,ConditionalExpression:Oce,ObjectExpression:(e,t,n)=>{Td(e.properties,t,n,e)},Property:(e,t,n)=>{Jn(e.key,t,n,e),Jn(e.value,t,n,e)},ArrowFunctionExpression:M8,FunctionExpression:M8,FunctionDeclaration:M8,VariableDeclaration:(e,t,n)=>{Td(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Jn(e.id,t,n,e),Jn(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Jn(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Td(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Jn(e.expression,t,n,e)},IfStatement:Oce,ForStatement:(e,t,n)=>{Jn(e.init,t,n,e),Jn(e.test,t,n,e),Jn(e.update,t,n,e),Jn(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Jn(e.test,t,n,e),Jn(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Jn(e.body,t,n,e),Jn(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Jn(e.discriminant,t,n,e),Td(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Jn(e.test,t,n,e),Td(e.consequent,t,n,e)},ReturnStatement:BN,Program:(e,t,n)=>{Jn(e.body[0],t,n,e)}};function HCe(e){delete e.start,delete e.end,delete e.optional}function Mce(e){HCe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function Tbt(e){return Jn(e,null,{Column:Mce,Constant:Mce,Default:HCe}),e}function Rs(e,t){return t&&t.type===e}function Abt(e){return Rs(E0t,e)||Rs(w0t,e)}function Cbt(e){return di(e)?e:()=>e}const Ibt="Escaped functions are not valid as rollup or pivot values.";function kbt(e,t,n){e.aggronly&&wn(Ibt);const r="(row,data)=>fn("+P2e(e.table.columnNames())+",$)";return{escape:OK.escape(r,Cbt(t.expr),n)}}var Rbt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],qCe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],Nbt="-----------------------------------------------------------------------------------------------------------------------------------------------------",WCe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",L8={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},F8="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",Pbt={5:F8,"5module":F8+" export import",6:F8+" const class extends export import super"},Dbt=/^in(stanceof)?$/,Obt=new RegExp("["+WCe+"]"),$bt=new RegExp("["+WCe+Nbt+"]");function Ez(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Sm(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&Obt.test(String.fromCharCode(e)):t===!1?!1:Ez(e,qCe)}function YE(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&$bt.test(String.fromCharCode(e)):t===!1?!1:Ez(e,qCe)||Ez(e,Rbt)}var ir=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Zl(e,t){return new ir(e,{beforeExpr:!0,binop:t})}var ec={beforeExpr:!0},cu={startsExpr:!0},DX={};function Hn(e,t){return t===void 0&&(t={}),t.keyword=e,DX[e]=new ir(e,t)}var K={num:new ir("num",cu),regexp:new ir("regexp",cu),string:new ir("string",cu),name:new ir("name",cu),privateId:new ir("privateId",cu),eof:new ir("eof"),bracketL:new ir("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ir("]"),braceL:new ir("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ir("}"),parenL:new ir("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ir(")"),comma:new ir(",",ec),semi:new ir(";",ec),colon:new ir(":",ec),dot:new ir("."),question:new ir("?",ec),questionDot:new ir("?."),arrow:new ir("=>",ec),template:new ir("template"),invalidTemplate:new ir("invalidTemplate"),ellipsis:new ir("...",ec),backQuote:new ir("`",cu),dollarBraceL:new ir("${",{beforeExpr:!0,startsExpr:!0}),eq:new ir("=",{beforeExpr:!0,isAssign:!0}),assign:new ir("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ir("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ir("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Zl("||",1),logicalAND:Zl("&&",2),bitwiseOR:Zl("|",3),bitwiseXOR:Zl("^",4),bitwiseAND:Zl("&",5),equality:Zl("==/!=/===/!==",6),relational:Zl("</>/<=/>=",7),bitShift:Zl("<</>>/>>>",8),plusMin:new ir("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Zl("%",10),star:Zl("*",10),slash:Zl("/",10),starstar:new ir("**",{beforeExpr:!0}),coalesce:Zl("??",1),_break:Hn("break"),_case:Hn("case",ec),_catch:Hn("catch"),_continue:Hn("continue"),_debugger:Hn("debugger"),_default:Hn("default",ec),_do:Hn("do",{isLoop:!0,beforeExpr:!0}),_else:Hn("else",ec),_finally:Hn("finally"),_for:Hn("for",{isLoop:!0}),_function:Hn("function",cu),_if:Hn("if"),_return:Hn("return",ec),_switch:Hn("switch"),_throw:Hn("throw",ec),_try:Hn("try"),_var:Hn("var"),_const:Hn("const"),_while:Hn("while",{isLoop:!0}),_with:Hn("with"),_new:Hn("new",{beforeExpr:!0,startsExpr:!0}),_this:Hn("this",cu),_super:Hn("super",cu),_class:Hn("class",cu),_extends:Hn("extends",ec),_export:Hn("export"),_import:Hn("import",cu),_null:Hn("null",cu),_true:Hn("true",cu),_false:Hn("false",cu),_in:Hn("in",{beforeExpr:!0,binop:7}),_instanceof:Hn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Hn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Hn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Hn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},zc=/\r\n?|\n|\u2028|\u2029/,Mbt=new RegExp(zc.source,"g");function hS(e){return e===10||e===13||e===8232||e===8233}function GCe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(hS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var YCe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,dc=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,KCe=Object.prototype,Lbt=KCe.hasOwnProperty,Fbt=KCe.toString,Ek=Object.hasOwn||function(e,t){return Lbt.call(e,t)},Lce=Array.isArray||function(e){return Fbt.call(e)==="[object Array]"},Fce=Object.create(null);function Gg(e){return Fce[e]||(Fce[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function K0(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var jbt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,zC=function(t,n){this.line=t,this.column=n};zC.prototype.offset=function(t){return new zC(this.line,this.column+t)};var z6=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function XCe(e,t){for(var n=1,r=0;;){var i=GCe(e,r,t);if(i<0)return new zC(n,t-r);++n,r=i}}var xz={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},jce=!1;function Bbt(e){var t={};for(var n in xz)t[n]=e&&Ek(e,n)?e[n]:xz[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!jce&&typeof console=="object"&&console.warn&&(jce=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Lce(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Lce(t.onComment)&&(t.onComment=Ubt(t,t.onComment)),t}function Ubt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new z6(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var VC=1,pS=2,OX=4,QCe=8,JCe=16,ZCe=32,$X=64,eIe=128,xk=256,MX=VC|pS|xk;function LX(e,t){return pS|(e?OX:0)|(t?QCe:0)}var n$=0,FX=1,Jm=2,tIe=3,nIe=4,rIe=5,Fs=function(t,n,r){this.options=t=Bbt(t),this.sourceFile=t.sourceFile,this.keywords=Gg(Pbt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=L8[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=Gg(i);var s=(i?i+" ":"")+L8.strict;this.reservedWordsStrict=Gg(s),this.reservedWordsStrictBind=Gg(s+" "+L8.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(zc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(VC),this.regexpState=null,this.privateNameStack=[]},zh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Fs.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};zh.inFunction.get=function(){return(this.currentVarScope().flags&pS)>0};zh.inGenerator.get=function(){return(this.currentVarScope().flags&QCe)>0&&!this.currentVarScope().inClassFieldInit};zh.inAsync.get=function(){return(this.currentVarScope().flags&OX)>0&&!this.currentVarScope().inClassFieldInit};zh.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&xk)return!1;if(t.flags&pS)return(t.flags&OX)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};zh.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&$X)>0||n||this.options.allowSuperOutsideMethod};zh.allowDirectSuper.get=function(){return(this.currentThisScope().flags&eIe)>0};zh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};zh.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(pS|xk))>0||n};zh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&xk)>0};Fs.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Fs.parse=function(t,n){return new this(n,t).parse()};Fs.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Fs.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Fs.prototype,zh);var ru=Fs.prototype,zbt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;ru.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){dc.lastIndex=e,e+=dc.exec(this.input)[0].length;var t=zbt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){dc.lastIndex=e+t[0].length;var n=dc.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||zc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,dc.lastIndex=e,e+=dc.exec(this.input)[0].length,this.input[e]===";"&&e++}};ru.eat=function(e){return this.type===e?(this.next(),!0):!1};ru.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};ru.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};ru.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};ru.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||zc.test(this.input.slice(this.lastTokEnd,this.start))};ru.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};ru.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};ru.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};ru.expect=function(e){this.eat(e)||this.unexpected()};ru.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var V6=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};ru.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};ru.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};ru.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};ru.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Ot=Fs.prototype;Ot.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var jX={kind:"loop"},Vbt={kind:"switch"};Ot.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;dc.lastIndex=this.pos;var t=dc.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Sm(r,!0)){for(var i=n+1;YE(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!Dbt.test(s))return!0}return!1};Ot.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;dc.lastIndex=this.pos;var e=dc.exec(this.input),t=this.pos+e[0].length,n;return!zc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(YE(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Ot.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){dc.lastIndex=this.pos;var o=dc.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};Ot.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Ot.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Ot.parseDoStatement=function(e){return this.next(),this.labels.push(jX),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Ot.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(jX),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new V6,u=this.parseExpression(t>-1?"await":!0,a);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};Ot.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,bA|(n?0:Sz),!1,t)};Ot.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Ot.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Ot.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(Vbt),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Ot.parseThrowStatement=function(e){return this.next(),zc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var Hbt=[];Ot.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?ZCe:0),this.checkLValPattern(e,t?nIe:Jm),this.expect(K.parenR),e};Ot.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Ot.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Ot.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(jX),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Ot.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Ot.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Ot.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Ot.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Ot.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Ot.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Ot.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Ot.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};Ot.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?FX:Jm,!1)};var bA=1,Sz=2,iIe=4;Ot.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&Sz&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&bA&&(e.id=t&iIe&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&Sz)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?FX:Jm:tIe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(LX(e.async,e.generator)),t&bA||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&bA?"FunctionDeclaration":"FunctionExpression")};Ot.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Ot.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&qbt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Ot.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var l=!n.static&&r$(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};Ot.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};Ot.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Ot.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&r$(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Ot.parseClassField=function(e){if(r$(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&r$(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Ot.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(xk|$X);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Ot.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Jm,!1)):(t===!0&&this.unexpected(),e.id=null)};Ot.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};Ot.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Ot.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];Ek(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function qbt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function r$(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Ot.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Ot.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Ot.parseExportDeclaration=function(e){return this.parseStatement(null)};Ot.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,bA|iIe,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Ot.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),Ek(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Ot.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Ot.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Ot.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Ot.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Ot.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Ot.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=Hbt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Ot.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Jm),this.finishNode(e,"ImportSpecifier")};Ot.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Jm),this.finishNode(e,"ImportDefaultSpecifier")};Ot.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Jm),this.finishNode(e,"ImportNamespaceSpecifier")};Ot.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};Ot.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return jbt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Ot.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Ot.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Vc=Fs.prototype;Vc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Vc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Vc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Vc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Vc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};Vc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Vc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Vc.parseBindingListItem=function(e){return e};Vc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Vc.checkLValSimple=function(e,t,n){t===void 0&&(t=n$);var r=t!==n$;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===Jm&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(Ek(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==rIe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Vc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=n$),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Vc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=n$),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Zc=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},xi={b_stat:new Zc("{",!1),b_expr:new Zc("{",!0),b_tmpl:new Zc("${",!1),p_stat:new Zc("(",!1),p_expr:new Zc("(",!0),q_tmpl:new Zc("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Zc("function",!1),f_expr:new Zc("function",!0),f_expr_gen:new Zc("function",!0,!1,null,!0),f_gen:new Zc("function",!1,!1,null,!0)},mS=Fs.prototype;mS.initialContext=function(){return[xi.b_stat]};mS.curContext=function(){return this.context[this.context.length-1]};mS.braceIsBlock=function(e){var t=this.curContext();return t===xi.f_expr||t===xi.f_stat?!0:e===K.colon&&(t===xi.b_stat||t===xi.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?zc.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===xi.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};mS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};mS.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};mS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===xi.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?xi.b_stat:xi.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(xi.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?xi.p_stat:xi.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==xi.p_stat)&&!(e===K._return&&zc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===xi.b_stat)?this.context.push(xi.f_expr):this.context.push(xi.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===xi.q_tmpl?this.context.pop():this.context.push(xi.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===xi.f_expr?this.context[t]=xi.f_expr_gen:this.context[t]=xi.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var on=Fs.prototype;on.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};on.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};on.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new V6,r=!0);var a=this.start,u=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===K.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};on.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};on.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};on.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};on.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};on.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&sIe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function sIe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&sIe(e.expression)}on.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};on.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};on.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};on.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};on.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(K.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(K.bracketL);if(l||u&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var f=new V6,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};on.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(xi.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case K.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(xi.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};on.parseExprAtomDefault=function(){this.unexpected()};on.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};on.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};on.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};on.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};on.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};on.shouldParseArrow=function(e){return!this.canInsertSemicolon()};on.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new V6,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(l?l=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(u)&&this.eat(K.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};on.parseParenItem=function(e){return e};on.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var Wbt=[];on.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=Wbt,this.finishNode(e,"NewExpression")};on.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};on.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};on.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!zc.test(this.input.slice(this.lastTokEnd,this.start))};on.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};on.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};on.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};on.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};on.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};on.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};on.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(LX(t,r.generator)|$X|(n?eIe:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};on.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(LX(n,!1)|JCe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};on.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,rIe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};on.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};on.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,FX,t?null:n)}};on.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};on.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};on.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};on.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};on.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};on.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};on.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var i$=Fs.prototype;i$.raise=function(e,t){var n=XCe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};i$.raiseRecoverable=i$.raise;i$.curPosition=function(){if(this.options.locations)return new zC(this.curLine,this.pos-this.lineStart)};var My=Fs.prototype,Gbt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};My.enterScope=function(e){this.scopeStack.push(new Gbt(e))};My.exitScope=function(){this.scopeStack.pop()};My.treatFunctionsAsVarInScope=function(e){return e.flags&pS||!this.inModule&&e.flags&VC};My.declareName=function(e,t,n){var r=!1;if(t===Jm){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&VC&&delete this.undefinedExports[e]}else if(t===nIe){var s=this.currentScope();s.lexical.push(e)}else if(t===tIe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&ZCe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&VC&&delete this.undefinedExports[e],u.flags&MX)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};My.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};My.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};My.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&MX)return t}};My.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&MX&&!(t.flags&JCe))return t}};var H6=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new z6(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},Sk=Fs.prototype;Sk.startNode=function(){return new H6(this,this.start,this.startLoc)};Sk.startNodeAt=function(e,t){return new H6(this,e,t)};function oIe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}Sk.finishNode=function(e,t){return oIe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};Sk.finishNodeAt=function(e,t,n,r){return oIe.call(this,e,t,n,r)};Sk.copyNode=function(e){var t=new H6(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var aIe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",uIe=aIe+" Extended_Pictographic",lIe=uIe,cIe=lIe+" EBase EComp EMod EPres ExtPict",fIe=cIe,Ybt=fIe,Kbt={9:aIe,10:uIe,11:lIe,12:cIe,13:fIe,14:Ybt},Xbt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",Qbt={9:"",10:"",11:"",12:"",13:"",14:Xbt},Bce="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",dIe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",hIe=dIe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",pIe=hIe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",mIe=pIe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",gIe=mIe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Jbt=gIe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",Zbt={9:dIe,10:hIe,11:pIe,12:mIe,13:gIe,14:Jbt},yIe={};function e_t(e){var t=yIe[e]={binary:Gg(Kbt[e]+" "+Bce),binaryOfStrings:Gg(Qbt[e]),nonBinary:{General_Category:Gg(Bce),Script:Gg(Zbt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var j8=0,Uce=[9,10,11,12,13,14];j8<Uce.length;j8+=1){var t_t=Uce[j8];e_t(t_t)}var Ct=Fs.prototype,Vh=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=yIe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Vh.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Vh.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Vh.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};Vh.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};Vh.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Vh.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Vh.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Vh.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};Vh.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Ct.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};Ct.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Ct.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Ct.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Ct.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Ct.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Ct.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Ct.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Ct.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Ct.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Ct.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Ct.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Ct.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Ct.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Ct.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Ct.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Ct.regexp_eatSyntaxCharacter=function(e){var t=e.current();return vIe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function vIe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Ct.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!vIe(n);)e.advance();return e.pos!==t};Ct.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Ct.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Ct.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Ct.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=K0(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=K0(e.lastIntValue);return!0}return!1};Ct.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),n_t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function n_t(e){return Sm(e,!0)||e===36||e===95}Ct.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),r_t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function r_t(e){return YE(e,!0)||e===36||e===95||e===8204||e===8205}Ct.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Ct.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Ct.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Ct.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Ct.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Ct.regexp_eatZero=function(e){return e.current()===48&&!q6(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Ct.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Ct.regexp_eatControlLetter=function(e){var t=e.current();return bIe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function bIe(e){return e>=65&&e<=90||e>=97&&e<=122}Ct.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&i_t(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function i_t(e){return e>=0&&e<=1114111}Ct.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Ct.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var _Ie=0,Tm=1,mc=2;Ct.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(s_t(t))return e.lastIntValue=-1,e.advance(),Tm;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===mc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return _Ie};function s_t(e){return e===100||e===68||e===115||e===83||e===119||e===87}Ct.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Tm}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return _Ie};Ct.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){Ek(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Ct.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Tm;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return mc;e.raise("Invalid property name")};Ct.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";wIe(t=e.current());)e.lastStringValue+=K0(t),e.advance();return e.lastStringValue!==""};function wIe(e){return bIe(e)||e===95}Ct.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";o_t(t=e.current());)e.lastStringValue+=K0(t),e.advance();return e.lastStringValue!==""};function o_t(e){return wIe(e)||q6(e)}Ct.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Ct.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===mc&&e.raise("Negated character class may contain strings"),!0}return!1};Ct.regexp_classContents=function(e){return e.current()===93?Tm:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Tm)};Ct.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Ct.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||SIe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Ct.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Ct.regexp_classSetExpression=function(e){var t=Tm,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===mc&&(t=mc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==mc&&(t=Tm);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===mc&&(t=mc)}};Ct.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Ct.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Tm:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Ct.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===mc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Ct.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Ct.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===mc&&(t=mc);return t};Ct.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Tm:mc};Ct.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&a_t(n)||u_t(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function a_t(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function u_t(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Ct.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return l_t(t)?(e.lastIntValue=t,e.advance(),!0):!1};function l_t(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Ct.regexp_eatClassControlLetter=function(e){var t=e.current();return q6(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Ct.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Ct.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;q6(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function q6(e){return e>=48&&e<=57}Ct.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;EIe(n=e.current());)e.lastIntValue=16*e.lastIntValue+xIe(n),e.advance();return e.pos!==t};function EIe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function xIe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Ct.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Ct.regexp_eatOctalDigit=function(e){var t=e.current();return SIe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function SIe(e){return e>=48&&e<=55}Ct.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!EIe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+xIe(i),e.advance()}return!0};var BX=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new z6(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Vn=Fs.prototype;Vn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new BX(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Vn.getToken=function(){return this.next(),new BX(this)};typeof Symbol<"u"&&(Vn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});Vn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Vn.readToken=function(e){return Sm(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Vn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Vn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=GCe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Vn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!hS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Vn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&YCe.test(String.fromCharCode(e)))++this.pos;else break e}}};Vn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Vn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};Vn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};Vn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};Vn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};Vn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};Vn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||zc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};Vn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};Vn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};Vn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};Vn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Sm(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+K0(t)+"'")};Vn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+K0(e)+"'")};Vn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Vn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(zc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new Vh(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:u})};Vn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function c_t(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function TIe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Vn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=TIe(this.input.slice(t,this.pos)),++this.pos):Sm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};Vn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=TIe(this.input.slice(t,this.pos));return++this.pos,Sm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Sm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=c_t(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};Vn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Vn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(hS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var AIe={};Vn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===AIe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Vn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw AIe;this.raise(e,t)};Vn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(hS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Vn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Vn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return K0(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return hS(t)?"":String.fromCharCode(t)}};Vn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Vn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(YE(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Sm:YE)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=K0(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Vn.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=DX[e]),this.finishToken(t,e)};var f_t="8.11.3";Fs.acorn={Parser:Fs,version:f_t,defaultOptions:xz,Position:zC,SourceLocation:z6,getLineInfo:XCe,Node:H6,TokenType:ir,tokTypes:K,keywordTypes:DX,TokContext:Zc,tokContexts:xi,isIdentifierChar:YE,isIdentifierStart:Sm,Token:BX,isNewLine:hS,lineBreak:zc,lineBreakG:Mbt,nonASCIIwhitespace:YCe};function d_t(e,t){return Fs.parse(e,t)}const UX={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},h_t={ecmaVersion:11},zce="$",p_t="d",m_t="d1",g_t="d2",wo=e=>(t,n)=>n.error(t,e+" not allowed"),y_t=wo("Aggregate function"),v_t=wo("Window function"),b_t="Invalid argument",zX="Invalid column reference",__t=zX+" (must be input to an aggregate function)",CIe="Invalid function call",w_t="Invalid member expression",E_t="Invalid operator parameter",x_t="Invalid param reference",S_t="Invalid variable reference",T_t="Variable not accessible in operator call",A_t="Unsupported variable declaration",C_t="Unsupported destructuring pattern",IIe="Table expressions do not support closures",kIe="Use aq.escape(fn) to use a function as-is (including closures)",I_t="use table.params({ name: value }) to define dynamic parameters",k_t="use aq.addFunction(name, fn) to add new op functions",R_t=`
Note: ${IIe}. ${kIe}, or ${I_t}.`,RIe=`
Note: ${IIe}. ${kIe}, or ${k_t}.`,N_t=`The ${R2e} method is not valid in multi-table expressions.`;function P_t(e,t){const n=D_t(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,Abt(r)?($_t(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=m_t),e.scope.add(e.tuple2=g_t),e.scope.add(e.$param=zce)):(e.scope.add(e.tuple=p_t),e.scope.add(e.$param=zce)),Jn(r,e,VX),e.root}function D_t(e){try{const t=e.field?O_t(e):cr(e)?yh(e):e;return d_t(`expr=(${t})`,h_t).body[0].expression.right}catch{wn(`Expression parse error: ${e+""}`)}}function O_t(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const VX={FunctionDeclaration:wo("Function definitions"),ForStatement:wo("For loops"),ForOfStatement:wo("For-of loops"),ForInStatement:wo("For-in loops"),WhileStatement:wo("While loops"),DoWhileStatement:wo("Do-while loops"),AwaitExpression:wo("Await expressions"),ArrowFunctionExpression:wo("Function definitions"),AssignmentExpression:wo("Assignments"),FunctionExpression:wo("Function definitions"),NewExpression:wo('Use of "new"'),UpdateExpression:wo("Update expressions"),VariableDeclarator(e,t){Cz(e.id,t)},Identifier(e,t,n){DIe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,S_t,R_t)},CallExpression(e,t){const n=NIe(e.callee),r=C2e(n)||I2e(n);if(r){if((t.join||t.aggregate===!1)&&PK(n)&&y_t(e,t),(t.join||t.window===!1)&&DK(n)&&v_t(e,t),t.$op=1,t.ast)Az(e,n,t),e.arguments.forEach(i=>Jn(i,t,Tz));else{const i=t.op(M_t(t,r,n,e.arguments));Object.assign(e,{type:E2e,name:i.id})}return t.$op=0,!1}else A2e(n)?Az(e,n,t):t.error(e,CIe,RIe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Rs(v0,r))return;const{name:s}=r;if(PIe(e)&&Rs(v0,i)&&Bf(UX,i.name)){MIe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return Vce(e,o,t,OIe,n);if(s===t.$param)return Vce(e,o,t,F_t);t.paramsRef.has(s)?HC(e,t.paramsRef.get(s)):t.columnRef.has(s)?$Ie(r,s,t,e):Bf(t.params,s)&&HC(r,s)}};function Vce(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Rs(uS,s))a=s.value;else try{Jn(s,n,VX,e),a=n.param(s)}catch{n.error(e,w_t)}return r(e,a,t,n,i),!1}const Tz={...VX,VariableDeclarator:wo("Variable declaration in operator call"),Identifier(e,t,n){DIe(e,t,n)&&t.error(e,T_t)},CallExpression(e,t){const n=NIe(e.callee);A2e(n)?Az(e,n,t):t.error(e,CIe,RIe)}};function $_t(e,t){e.generator&&wo("Generator functions")(e,t),e.async&&wo("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(AT(t,n[0],"tuple1",i(1)),r>1&&AT(t,n[1],"tuple2",i(2)),r>2&&AT(t,n[2],"$param",s)):(AT(t,n[0],"tuple",i(0)),r>1&&AT(t,n[1],"$param",s))),t.root=e.body}function AT(e,t,n,r){Rs(v0,t)?(e.scope.add(t.name),e[n]=t.name):Rs(_2e,t)&&t.properties.forEach(i=>{const s=Rs(v0,i.key)?i.key.name:Rs(uS,i.key)?i.key.value:e.error(i,b_t);Rs(v0,i.value)||e.error(i.value,C_t),r(i.value.name,s)})}function M_t(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(Jn(u,e,Tz),i.push(e.field(u))):l<a?(Jn(u,e,Tz),s.push(e.param(u))):e.error(u,E_t)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function NIe(e){return Rs(v0,e)?e.name:Rs(b2e,e)?PIe(e)?L_t(e.property.name):e.property.name:null}function PIe(e){return Rs(v0,e.object)&&e.object.name==="Math"}function L_t(e){return e==="max"?"greatest":e==="min"?"least":e}function DIe(e,t,n){const{name:r}=e;if(!(Rs(b2e,n)&&n.property===e)){if(!(Rs(w2e,n)&&n.key===e))if(t.paramsRef.has(r))HC(e,t.paramsRef.get(r));else if(t.columnRef.has(r))$Ie(e,r,t,n);else if(Bf(t.params,r))HC(e,r);else if(Bf(UX,r))MIe(e,r);else return!0}}function OIe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,zX),r.aggronly&&!r.$op&&r.error(e,__t),k2e(e,t,n,o,i)}function $Ie(e,t,n,r){const[i,s]=n.columnRef.get(t);OIe(e,i,s,n,r)}function F_t(e,t,n,r){r.params&&!Bf(r.params,t)&&r.error(e,x_t),HC(e,t)}function HC(e,t){e.type=C0t,e.name=t}function MIe(e,t){e.type=S0t,e.name=t,e.raw=UX[t]}function Az(e,t,n){if(t===R2e){const r=n.table;r||n.error(e,N_t),N2e(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Xa(s)?r.columnName(s):s;return r.column(o)||n.error(i,zX),o}):r.columnNames())}else e.callee={type:A0t,name:t}}function Cz(e,t){Rs(v0,e)?t.scope.add(e.name):Rs(_0t,e)?e.elements.forEach(n=>Cz(n,t)):Rs(_2e,e)?e.properties.forEach(n=>Cz(n.value,t)):t.error(e.id,A_t)}const j_t={[gk]:1,[E2e]:1};function Xu(e,t={}){const n=t.generate||M3,r=t.compiler||OK,i=U_t(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=B_t(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Rs(uS,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?Tbt(g):f(n(g),i));u.push(y),j_t[g.type]&&y!==g&&ya(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,w=String(d.spec).slice(v,b);wn(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of I6(e))d.value(m+"",g.escape?kbt(d,g,i):P_t(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function B_t(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function U_t(e){return(e.table?B8(e.table):e.join?{...B8(e.join[1]),...B8(e.join[0])}:{})||{}}function B8(e){return e&&di(e.params)?e.params():{}}const LIe="Expr",ef="ExprList",FIe="ExprNumber",E2="ExprObject",gw="JoinKeys",s$="JoinValues",sc="Options",HX="OrderKeys",vg="SelectionList",Lv="TableRef",yw="TableRefList",z_t="Descending",V_t="Query",H_t="Selection",q_t="Verb",W_t="Window";function W6(e,t){return e&&e.expr?new Hce({...e,...t}):new Hce(t,e)}class Hce{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...di(this.expr)?{func:!0}:{}}}}function G_t(e){return W6(e,{desc:!0})}function H1(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return W6(e,t?{expr:t,...r}:r)}function Y_t(e,t,n){return W6(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function K_t(e){const t=n=>n;return t.toString=()=>e,t}function qce(e,t){return t=t&&di(t.query)?t.query():t,t&&di(t.evaluate)?t.evaluate(null,e):e(t)}function jIe(e){return ya(e)&&(cr(e.all)||cr(e.matches)||cr(e.not)||cr(e.range))}function qC(e){return e&&di(e.toObject)?e.toObject():di(e)?{expr:String(e),func:!0}:cr(e)?e.map(qC):ya(e)?B6(e,t=>qC(t)):e}function qX(e){return cr(e)?e.map(qX):ya(e)?cr(e.verbs)?GX.from(e):cr(e.all)?GE():cr(e.range)?_bt(...e.range):cr(e.match)?wbt(RegExp(...e.match)):cr(e.not)?VCe(e.not.map(qC)):X_t(e):e}function X_t(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=H1(n):e.func===!0&&(t=n=K_t(n)),ya(e.window)){const{frame:r,peers:i}=e.window;t=n=Y_t(n,r,i)}e.desc===!0&&(t=G_t(n))}return e===t?B6(e,r=>qX(r)):t}function Q_t(e){return cr(e)?e.map(J_t):e}function J_t(e){const t=[];return Gu(e).forEach(n=>{Xa(n)?t.push(n):Lo(n)?t.push(H1(n,null)):ya(n)&&n.expr||di(n)?t.push(n):wn(`Invalid key value: ${n+""}`)}),t}function Z_t(e){return cr(e)?e.map(ewt):e}function ewt(e,t){return t<2?Gu(e):e}function twt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(ya(r)&&!di(r))for(const i in r)t.push(r[i]);else n=Xa(r)?r:Lo(r)?H1(n):di(r)?n:wn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const nwt={[LIe]:VIe,[ef]:KE,[FIe]:uwt,[E2]:X0,[gw]:lwt,[s$]:cwt,[HX]:KE,[vg]:owt};function rwt(e,t,n){return t===Lv?Wce(e):t===yw?e.map(Wce):BIe(qC(e),t,n)}function BIe(e,t,n){return t===sc?e&&iwt(e,n):nwt[t](e)}function iwt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?BIe(i,t[r]):i}return n}function swt(e,t){return Xu({expr:e},{...t,ast:!0}).exprs[0]}function WX(e){return{type:gk,name:e}}function UIe(e){return{type:gk,index:e}}function X0(e,t){if(Lo(e))return swt(e,t);if(e.expr){let n;if(e.field===!0?n=WX(e.expr):e.func===!0&&(n=X0(e.expr,t)),n)return e.desc&&(n={type:z_t,expr:n}),e.window&&(n={type:W_t,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...X0(e[n],t),as:n}))}function zIe(e){const t=H_t;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:KE(e.not)}:e.range?{type:t,operator:"range",arguments:KE(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:wn("Invalid input")}function owt(e){return Gu(e).map(awt).flat()}function awt(e){return jIe(e)?zIe(e):Xa(e)?UIe(e):Lo(e)?WX(e):ya(e)?Object.keys(e).map(t=>({type:gk,name:t,as:e[t]})):wn("Invalid input")}function VIe(e){return jIe(e)?zIe(e):Xa(e)?UIe(e):Lo(e)?WX(e):ya(e)?X0(e):wn("Invalid input")}function KE(e){return Gu(e).map(VIe).flat()}function uwt(e){return Xa(e)?e:X0(e)}function lwt(e){return cr(e)?e.map(KE):X0(e,{join:!0})}function cwt(e){return cr(e)?e.map((t,n)=>n<2?KE(t):X0(t,{join:!0})):X0(e,{join:!0})}function Wce(e){return e&&di(e.toAST)?e.toAST():e}class HIe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===gw?Q_t(a):o===s$?Z_t(a):o===HX?twt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=Iz[t.verb],r=(n.schema||[]).map(({name:i})=>qX(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===Lv?qce(n,o):s===yw?o.map(a=>qce(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=qC(this[n])}),t}toAST(){const t={type:q_t,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=rwt(this[n],r,i)}),t}}function $r(e,t){return Object.assign((...n)=>new HIe(e,t,n),{schema:t})}const Iz={count:$r("count",[{name:"options",type:sc}]),derive:$r("derive",[{name:"values",type:E2},{name:"options",type:sc,props:{before:vg,after:vg}}]),filter:$r("filter",[{name:"criteria",type:E2}]),groupby:$r("groupby",[{name:"keys",type:ef}]),orderby:$r("orderby",[{name:"keys",type:HX}]),relocate:$r("relocate",[{name:"columns",type:vg},{name:"options",type:sc,props:{before:vg,after:vg}}]),rename:$r("rename",[{name:"columns",type:vg}]),rollup:$r("rollup",[{name:"values",type:E2}]),sample:$r("sample",[{name:"size",type:FIe},{name:"options",type:sc,props:{weight:LIe}}]),select:$r("select",[{name:"columns",type:vg}]),ungroup:$r("ungroup"),unorder:$r("unorder"),reify:$r("reify"),dedupe:$r("dedupe",[{name:"keys",type:ef,default:[]}]),impute:$r("impute",[{name:"values",type:E2},{name:"options",type:sc,props:{expand:ef}}]),fold:$r("fold",[{name:"values",type:ef},{name:"options",type:sc}]),pivot:$r("pivot",[{name:"keys",type:ef},{name:"values",type:ef},{name:"options",type:sc}]),spread:$r("spread",[{name:"values",type:ef},{name:"options",type:sc}]),unroll:$r("unroll",[{name:"values",type:ef},{name:"options",type:sc,props:{drop:ef}}]),lookup:$r("lookup",[{name:"table",type:Lv},{name:"on",type:gw},{name:"values",type:ef}]),join:$r("join",[{name:"table",type:Lv},{name:"on",type:gw},{name:"values",type:s$},{name:"options",type:sc}]),cross:$r("cross",[{name:"table",type:Lv},{name:"values",type:s$},{name:"options",type:sc}]),semijoin:$r("semijoin",[{name:"table",type:Lv},{name:"on",type:gw}]),antijoin:$r("antijoin",[{name:"table",type:Lv},{name:"on",type:gw}]),concat:$r("concat",[{name:"tables",type:yw}]),union:$r("union",[{name:"tables",type:yw}]),intersect:$r("intersect",[{name:"tables",type:yw}]),except:$r("except",[{name:"tables",type:yw}])};let GX=class qIe extends o2e{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new qIe(t.map(HIe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return Gce(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Gce(this,"toAST",{type:V_t})}};function Gce(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function fwt(e,t){return new GX(e._verbs.concat(t),e._params,e._table)}for(const e in Iz){const t=Iz[e];GX.prototype["__"+e]=function(n,...r){return fwt(n,t(...r))}}function gS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function dwt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function YX(e,t){const n=Yl();return t.forEach((r,i)=>{const s=Lo(r)?r:i;if(s){const o=e.column(i)||wn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function WIe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||wn("relocate requires a before or after option."),i&&s&&wn("relocate accepts only one of the before or after options."),t=xm(e,t);const o=[...xm(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),YX(e,u)}function Tk(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function KX(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function hwt(e,t=0,n=e.length){let r=n?e[t++]:sr;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function pwt(e,t=0,n=e.length){let r=n?e[t++]:sr;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function UN(e){return $C(e)?e:+e}function mwt(e,t){const n=e.length;if(!n)return sr;if((t=+t)<=0||n<2)return UN(e[0]);if(t>=1)return UN(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=UN(e[i]);return $C(s)?s:s+(UN(e[i+1])-s)*(r-i)}class gwt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:hwt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:pwt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(KX)),mwt(this._sorted,t)}}const o$=(e,t,n)=>gS(t,"{"+Tk(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function ywt(e,t){const{ops:n,output:r}=vwt(e,t),i=e[0].fields,s=i.length,o=s===0?XX:s===1?bwt:s===2?_wt:wn("Unsupported field count: "+s);return new o(i,n,r,t)}function vwt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=C2e(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class XX extends xbt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new gwt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class bwt extends XX{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=o$(n,s,"add"),this._rem=o$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Tf(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Tf(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class _wt extends XX{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=o$(n,s,"add"),this._rem=o$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Tf(i)&&Tf(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Tf(i)&&Tf(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function jb(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=yS(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function yS(e,t,n){if(!t.length)return n;const r=GIe(t),i=e.groups(),s=i?i.size:1;return n=n||A6(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=KIe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=YIe(e,o);o.write(a,n,0)}),n}function GIe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(ywt(r[i],t));return n}function YIe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function KIe(e,t,n){const{keys:r,size:i}=n,s=A6(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function XIe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function QIe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Yce=QIe(KX);function wwt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?gS(["w","r","k"],"{"+Tk(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(b=>b.init()):null;for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Yce.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=Yce.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const T=i[E],S=a[E];for(let A=b;A<p.i0;++A)T.rem(S,s[A],e);for(let A=w;A<p.i1;++A)T.add(S,s[A],e);T.write(S,u,l)}return h(p,u,l),u}};return p}const Ewt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),xwt=e=>!!e.peers;function Swt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=I2e(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function Twt(e,t,n,r={},i){const s=e.data(),o=Awt(i,s),a=o.length,u=gS(["r","d","op"],"{"+Tk(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=Cwt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function Awt(e,t){const n={};return e.forEach(r=>{const i=Ewt(r),s=xwt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});PK(r.name)?a.push(r):u.push(Swt(r))}),Object.values(n).map(r=>wwt(t,r.frame,r.peers,r.winOps,GIe(r.aggOps,r.frame[0]!=null?-1:1)))}function Cwt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function Iwt(e){return DK(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function QX(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Yl(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=kwt(r),c=e.isGrouped()?e.groups().size:1,f=yS(e,u,A6(r.length,()=>Array(c)));return l.length?Twt(e,a,n,f,l):Rwt(e,a,n,f),e.create(o)}function kwt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(Iwt(s)?n:t).push(s)}return[t,n]}function Rwt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function Nwt(e,t,n={}){const r=QX(e,Xu(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:WIe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function Pwt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const zN=2147483648,Dwt=4294967295;class JIe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&zN>>>t}set(t){this._bits[t>>5]|=zN>>>t}clear(t){this._bits[t>>5]&=~(zN>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&Dwt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=zN>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function Owt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new JIe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function $wt(e,t){const n=Xu({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=QX(e,n,{drop:!0}).column("p");r=s=>i[s]}return Owt(e,r)}function ZIe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=jb(e,r,n),l=Yl(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const E=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(E))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,E)=>{for(let T=0;T<g;++T)d[T].length=m+E,d[T].fill(f[T].get(w),m,m+E)},b=p?(w,E)=>{for(let T=0;T<E;++T)p[w+T]=T}:()=>{};if(y===1){const w=u[0],E=h[0];e.scan((T,S)=>{const A=Gu(w(T,S)),C=Math.min(A.length,s);v(T,C);for(let k=0;k<C;++k)E[m+k]=A[k];b(m,C),m+=C})}else e.scan((w,E)=>{let T=0;const S=u.map(A=>{const C=Gu(A(w,E));return T=Math.min(Math.max(T,C.length),s),C});v(w,T);for(let A=0;A<y;++A){const C=h[A],k=S[A];for(let N=0;N<T;++N)C[m+N]=k[N]}b(m,T),m+=T});return e.create(l.new())}function Mwt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=jb(e,r,n);return ZIe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function zf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Xa(o)?t.columnName(o):o,Lo(o)?i.set(o,H1(o)):di(o)?xm(t,o).forEach(s):ya(o)?UCe(i,o):wn(`Invalid ${e} value: ${o+""}`)};return Gu(n).forEach(s),r.preparse&&r.preparse(i),Xu(i,{table:t,...r})}function Lwt(e,t,n){return Mwt(e,zf("fold",e,t),n)}function Kce(e,t,n,r){const i=n&&n.length;return Fwt(i?jwt(e,n,r):e,t,i)}function Fwt(e,{names:t,exprs:n,ops:r},i){const s=jb(e,r,n),o=i?null:Yl(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Tf(p)?p:d(h)})}),i?e:e.create(o)}function jwt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=L3(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Yl(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=L3(o.map((p,m)=>g=>g[m])),h=gS("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Xce(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Xce(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Xce(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function JX(e,{names:t,exprs:n,ops:r}){const i=Yl(),s=e.groups();return s&&XIe(i,s),Bwt(t,n,s,yS(e,r),i),e.create(i.new())}function Bwt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function Uwt(e,t,n={}){if(t=Xu(t,{table:e}),t.names.forEach(r=>e.column(r)?0:wn(`Invalid impute column ${yh(r)}`)),n.expand){const r={preparse:zwt,aggronly:!0},i=zf("impute",e,n.expand,r),s=JX(e.ungroup(),i);return Kce(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Kce(e,t)}function zwt(e){e.forEach((t,n)=>t.field?e.set(n,m2e(t+"")):0)}function Vwt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function eke(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function Hwt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function qwt(e,t){const n=["i","a","j","b"];return gS(n,"{"+Tk(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function Wwt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Yl(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=qwt(g,y);if((cr(n)?Ywt:Gwt)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function Gwt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function Ywt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(T,S,A,C)=>e(A,C,T,S));const w=Hwt(v,m,g),E=p.length;for(let T=0;T<E;++T){const S=p[T],A=w.get(d(S,f));if(A){const C=A.length;for(let k=0;k<C;++k){const N=A[k];b(S,f,v[N],m),y[N]=1}h[T]=1}}}function a$(e,t,n){const r=new Map;Gu(n).forEach((s,o)=>{s=Xa(s)?t.columnName(s):s,Lo(s)?r.set(o,H1(s)):di(s)||ya(s)&&s.expr?r.set(o,s):wn(`Invalid ${e} key value: ${s+""}`)});const i=Xu(r,{table:t,aggregate:!1,window:!1});return L3(i.exprs,!0)}function Kwt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function ZX(e,t,n){if(n)Lo(n)?n=[n,n]:cr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=Kwt(e.columnNames(),t.columnNames());r.length||wn("Natural join requires shared column names."),n=[r,r]}return n}function tke(e,t,n,r){return n.length!==r.length&&wn("Mismatched number of join keys"),[a$("join",e,n),a$("join",t,r)]}const Xwt={aggregate:!1,window:!1},Qwt={...Xwt,index:1};function Qce(e,t,n,r,i={}){n=ZX(e,t,n);const s={join:[e,t]};let o;if(cr(n)){const[a,u]=n.map(Gu);o=tke(e,t,a,u),r||(r=Jwt(e,a,u,i))}else o=Xu({on:n},s).exprs[0],r||(r=[GE(),GE()]);return Wwt(e,t,o,Zwt(e,t,r,s,i&&i.suffix),i)}function Jwt(e,t,n,r){const i=[];t.forEach((o,a)=>Lo(o)&&o===n[a]?i.push(o):0);const s=VCe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${yh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,GE()]:[GE(),s]}function Zwt(e,t,n,r,i=[]){if(cr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=zf("join",e,n[0],r)),u--&&(o=zf("join",t,n[1],Qwt)),u--&&(a=Xu(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&Jce(s.names,l,i[0]||"_1"),i[1]!==""&&Jce(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Xu(n,r)}function Jce(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function eEt(e,t,n,r={}){const i=new JIe(e.totalRows());return(cr(n)?tEt:nEt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function tEt(e,t,n,[r,i]){const s=eke(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function nEt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function Zce(e,t,n,r){n=ZX(e,t,n);const i=cr(n)?tke(e,t,...n.map(Gu)):Xu({on:n},{join:[e,t]}).exprs[0];return eEt(e,t,i,r)}function rEt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Yl(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(sr)));const l=eke(t,r),c=gS(["lr","rr","data"],"{"+Tk(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),jb(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function iEt(e,t,n,r){return n=ZX(e,t,n),rEt(e,t,[a$("lookup",e,n[0]),a$("lookup",t,n[1])],zf("lookup",t,r))}const kz=(e,t)=>e??t;function sEt(e,t,n,r={}){const{keys:i,keyColumn:s}=oEt(e,t,r),o=kz(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>yS(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(aEt(n,a,e.groups(),u))}function oEt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=kz(n.sort,!0),s=kz(n.keySeparator,"_"),o=jb(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=yS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function aEt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Yl(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&XIe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function uEt(e,t,n,r){return sEt(e,zf("fold",e,t),zf("fold",e,n,{preparse:lEt,aggronly:!0}),r)}function lEt(e){e.forEach((t,n)=>t.field?e.set(n,d2e(t+"")):0)}function cEt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),YX(e,xm(e,t,n))}function efe(e,t){return JX(e,Xu(t,{table:e,aggronly:!0,window:!1}))}function fEt(e,t,n,r){return(t?r?hEt:dEt:r?mEt:pEt)(e.length,e,n,r)}function dEt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*aS()|0];return t}function hEt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=QIe(KX).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*aS())];return t}function pEt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*aS();s<e&&(t[s|0]=n[i])}return t}function mEt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(aS())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function gEt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=aS()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function yEt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):fEt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&gEt(u),e.reify(u)}function vEt(e,t,n={}){return yEt(e,bEt(e,t),_Et(e,n.weight),n)}const nke=e=>t=>e.get(t)||0;function bEt(e,t){return Xa(t)?()=>t:nke(JX(e,Xu({size:t},{table:e,window:!1})).column("size"))}function _Et(e,t){return t==null?null:(t=Xa(t)?e.columnName(t):t,nke(Lo(t)?e.column(t):QX(e,Xu({w:t},{table:e}),{drop:!0}).column("w")))}function wEt(e,t){return YX(e,xm(e,t))}function EEt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=jb(e,r,n),l=Yl(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=xEt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function xEt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Gu(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(sr));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function SEt(e,t,n){return EEt(e,zf("spread",e,t),n)}function TEt(e,t){return e.concat(t).dedupe()}function AEt(e,t,n){return ZIe(e,zf("unroll",e,t),n&&n.drop?{...n,drop:zf("unroll",e,n.drop).names}:n)}function CEt(e,t){return e.create({groups:IEt(e,t)})}function IEt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=jb(e,r,n);const o=L3(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function kEt(e,t){return CEt(e,zf("groupby",e,t))}function REt(e,t){return e.create({order:t})}const NEt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function PEt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Xu(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([M3(p,{index:"a",op:o}),M3(p,{index:"b",op:a})])},window:!1}),l=yS(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=NEt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function DEt(e,t){return REt(e,OEt(e,t))}function OEt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(ya(o)&&!di(o))for(const a in o)i(o[a]);else i(Xa(o)?H1(s,e.columnName(o)):Lo(o)?H1(s):di(o)?s:wn(`Invalid orderby field: ${s+""}`))}),PEt(e,r)}function $Et(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Yl();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>sr};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function MEt(e,t){const n=Yl(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?KIe(e,t,r):[YIe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function LEt(e){return e.isGrouped()?e.create({groups:null}):e}function FEt(e){return e.isOrdered()?e.create({order:null}):e}const jEt={__antijoin:(e,t,n)=>Zce(e,t,n,{anti:!0}),__count:(e,t={})=>efe(e,{[t.as||"count"]:h2e()}),__cross:(e,t,n,r)=>Qce(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:$Et,__dedupe:dwt,__derive:Nwt,__except:Pwt,__filter:$wt,__fold:Lwt,__impute:Uwt,__intersect:Vwt,__join:Qce,__lookup:iEt,__pivot:uEt,__relocate:WIe,__rename:cEt,__rollup:efe,__sample:vEt,__select:wEt,__semijoin:Zce,__spread:SEt,__union:TEt,__unroll:AEt,__groupby:kEt,__orderby:DEt,__ungroup:LEt,__unorder:FEt,__reduce:MEt};Object.assign(Dp.prototype,jEt);function BEt(e,t){return Dp.from(e,t)}function U8(e){return W6(e,{escape:!0,toString(){wn("Escaped values can not be serialized.")}})}Dp.prototype;function bf(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Q0(e){return!!e&&!!e[yi]}function Am(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===KEt}(e)||Array.isArray(e)||!!e[afe]||!!(!((t=e.constructor)===null||t===void 0)&&t[afe])||eQ(e)||tQ(e))}function q1(e,t,n){n===void 0&&(n=!1),vS(e)===0?(n?Object.keys:Gw)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function vS(e){var t=e[yi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:eQ(e)?2:tQ(e)?3:0}function Ww(e,t){return vS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function UEt(e,t){return vS(e)===2?e.get(t):e[t]}function rke(e,t,n){var r=vS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function ike(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function eQ(e){return GEt&&e instanceof Map}function tQ(e){return YEt&&e instanceof Set}function Cv(e){return e.o||e.t}function nQ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=oke(e);delete t[yi];for(var n=Gw(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function rQ(e,t){return t===void 0&&(t=!1),iQ(e)||Q0(e)||!Am(e)||(vS(e)>1&&(e.set=e.add=e.clear=e.delete=zEt),Object.freeze(e),t&&q1(e,function(n,r){return rQ(r,!0)},!0)),e}function zEt(){bf(2)}function iQ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function th(e){var t=Dz[e];return t||bf(18,e),t}function VEt(e,t){Dz[e]||(Dz[e]=t)}function Rz(){return WC}function z8(e,t){t&&(th("Patches"),e.u=[],e.s=[],e.v=t)}function u$(e){Nz(e),e.p.forEach(HEt),e.p=null}function Nz(e){e===WC&&(WC=e.l)}function tfe(e){return WC={p:[],l:WC,h:e,m:!0,_:0}}function HEt(e){var t=e[yi];t.i===0||t.i===1?t.j():t.g=!0}function V8(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||th("ES5").S(t,e,r),r?(n[yi].P&&(u$(t),bf(4)),Am(e)&&(e=l$(t,e),t.l||c$(t,e)),t.u&&th("Patches").M(n[yi].t,e,t.u,t.s)):e=l$(t,n,[]),u$(t),t.u&&t.v(t.u,t.s),e!==ske?e:void 0}function l$(e,t,n){if(iQ(t))return t;var r=t[yi];if(!r)return q1(t,function(a,u){return nfe(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return c$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=nQ(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),q1(s,function(a,u){return nfe(e,r,i,a,u,n,o)}),c$(e,i,!1),n&&e.u&&th("Patches").N(r,n,e.u,e.s)}return r.o}function nfe(e,t,n,r,i,s,o){if(Q0(i)){var a=l$(e,i,s&&t&&t.i!==3&&!Ww(t.R,r)?s.concat(r):void 0);if(rke(n,r,a),!Q0(a))return;e.m=!1}else o&&n.add(i);if(Am(i)&&!iQ(i)){if(!e.h.D&&e._<1)return;l$(e,i),t&&t.A.l||c$(e,i)}}function c$(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&rQ(t,n)}function H8(e,t){var n=e[yi];return(n?Cv(n):e)[t]}function rfe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Mg(e){e.P||(e.P=!0,e.l&&Mg(e.l))}function q8(e){e.o||(e.o=nQ(e.t))}function Pz(e,t,n){var r=eQ(t)?th("MapSet").F(t,n):tQ(t)?th("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Rz(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=GC;o&&(u=[a],l=x2);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):th("ES5").J(t,n);return(n?n.A:Rz()).p.push(r),r}function qEt(e){return Q0(e)||bf(22,e),function t(n){if(!Am(n))return n;var r,i=n[yi],s=vS(n);if(i){if(!i.P&&(i.i<4||!th("ES5").K(i)))return i.t;i.I=!0,r=ife(n,s),i.I=!1}else r=ife(n,s);return q1(r,function(o,a){i&&UEt(i.t,o)===a||rke(r,o,t(a))}),s===3?new Set(r):r}(e)}function ife(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return nQ(e)}function WEt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[yi];return GC.get(u,s)},set:function(u){var l=this[yi];GC.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][yi];if(!a.P)switch(a.i){case 5:r(a)&&Mg(a);break;case 4:n(a)&&Mg(a)}}}function n(s){for(var o=s.t,a=s.k,u=Gw(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==yi){var f=o[c];if(f===void 0&&!Ww(o,c))return!0;var d=a[c],h=d&&d[yi];if(h?h.t!==f:!ike(d,f))return!0}}var p=!!o[yi];return u.length!==Gw(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};VEt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=oke(f);delete p[yi];for(var m=Gw(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:Rz(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,yi,{value:l,writable:!0}),u},S:function(s,o,a){a?Q0(o)&&o[yi].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[yi];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)q1(d,function(b){b!==yi&&(f[b]!==void 0||Ww(f,b)?h[b]||u(d[b]):(h[b]=!0,Mg(c)))}),q1(f,function(b){d[b]!==void 0||Ww(d,b)||(h[b]=!1,Mg(c))});else if(p===5){if(r(c)&&(Mg(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var sfe,WC,sQ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",GEt=typeof Map<"u",YEt=typeof Set<"u",ofe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",ske=sQ?Symbol.for("immer-nothing"):((sfe={})["immer-nothing"]=!0,sfe),afe=sQ?Symbol.for("immer-draftable"):"__$immer_draftable",yi=sQ?Symbol.for("immer-state"):"__$immer_state",KEt=""+Object.prototype.constructor,Gw=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,oke=Object.getOwnPropertyDescriptors||function(e){var t={};return Gw(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Dz={},GC={get:function(e,t){if(t===yi)return e;var n=Cv(e);if(!Ww(n,t))return function(i,s,o){var a,u=rfe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Am(r)?r:r===H8(e.t,t)?(q8(e),e.o[t]=Pz(e.A.h,r,e)):r},has:function(e,t){return t in Cv(e)},ownKeys:function(e){return Reflect.ownKeys(Cv(e))},set:function(e,t,n){var r=rfe(Cv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=H8(Cv(e),t),s=i==null?void 0:i[yi];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(ike(n,i)&&(n!==void 0||Ww(e.t,t)))return!0;q8(e),Mg(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return H8(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,q8(e),Mg(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Cv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){bf(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){bf(12)}},x2={};q1(GC,function(e,t){x2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),x2.deleteProperty=function(e,t){return x2.set.call(this,e,t,void 0)},x2.set=function(e,t,n){return GC.set.call(this,e[0],t,n,e[0])};var XEt=function(){function e(n){var r=this;this.O=ofe,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&bf(6),o!==void 0&&typeof o!="function"&&bf(7),Am(i)){var c=tfe(r),f=Pz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?u$(c):Nz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return z8(c,o),V8(m,c)},function(m){throw u$(c),m}):(z8(c,o),V8(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===ske&&(l=void 0),r.D&&rQ(l,!0),o){var h=[],p=[];th("Patches").M(i,l,h,p),o(h,p)}return l}bf(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Am(n)||bf(8),Q0(n)&&(n=qEt(n));var r=tfe(this),i=Pz(this,n,void 0);return i[yi].C=!0,Nz(r),i},t.finishDraft=function(n,r){var i=n&&n[yi],s=i.A;return z8(s,r),V8(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!ofe&&bf(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=th("Patches").$;return Q0(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Ml=new XEt,QEt=Ml.produce;Ml.produceWithPatches.bind(Ml);Ml.setAutoFreeze.bind(Ml);Ml.setUseProxies.bind(Ml);Ml.applyPatches.bind(Ml);Ml.createDraft.bind(Ml);Ml.finishDraft.bind(Ml);const ake=QEt;function YC(e){"@babel/helpers - typeof";return YC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YC(e)}function JEt(e,t){if(YC(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(YC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZEt(e){var t=JEt(e,"string");return YC(t)=="symbol"?t:t+""}function ext(e,t,n){return(t=ZEt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ufe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lfe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ufe(Object(n),!0).forEach(function(r){ext(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ufe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ta(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var cfe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),W8=function(){return Math.random().toString(36).substring(7).split("").join(".")},f$={INIT:"@@redux/INIT"+W8(),REPLACE:"@@redux/REPLACE"+W8(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+W8()}};function txt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function uke(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ta(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ta(1));return n(uke)(e,t)}if(typeof e!="function")throw new Error(ta(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(ta(3));return s}function f(m){if(typeof m!="function")throw new Error(ta(4));if(u)throw new Error(ta(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(ta(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!txt(m))throw new Error(ta(7));if(typeof m.type>"u")throw new Error(ta(8));if(u)throw new Error(ta(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(ta(10));i=m,d({type:f$.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(ta(11));function b(){v.next&&v.next(c())}b();var w=g(b);return{unsubscribe:w}}},m[cfe]=function(){return this},m}return d({type:f$.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[cfe]=p,r}function nxt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:f$.INIT});if(typeof r>"u")throw new Error(ta(12));if(typeof n(void 0,{type:f$.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ta(13))})}function rxt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{nxt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(ta(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function d$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function ixt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(ta(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=d$.apply(void 0,a)(i.dispatch),lfe(lfe({},i),{},{dispatch:s})}}}function lke(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var Oz=lke();Oz.withExtraArgument=lke;var cke=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ak=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},W1=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},sxt=Object.defineProperty,oxt=Object.defineProperties,axt=Object.getOwnPropertyDescriptors,ffe=Object.getOwnPropertySymbols,uxt=Object.prototype.hasOwnProperty,lxt=Object.prototype.propertyIsEnumerable,dfe=function(e,t,n){return t in e?sxt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},b0=function(e,t){for(var n in t||(t={}))uxt.call(t,n)&&dfe(e,n,t[n]);if(ffe)for(var r=0,i=ffe(t);r<i.length;r++){var n=i[r];lxt.call(t,n)&&dfe(e,n,t[n])}return e},G8=function(e,t){return oxt(e,axt(t))},Ck=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},cxt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?d$:d$.apply(null,arguments)};function fke(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var fxt=function(e){return e&&typeof e.match=="function"};function nh(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return b0(b0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function dxt(e){return fke(e)&&"type"in e}var hxt=function(e){cke(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,W1([void 0],n[0].concat(this)))):new(t.bind.apply(t,W1([void 0],n.concat(this))))},t}(Array),pxt=function(e){cke(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,W1([void 0],n[0].concat(this)))):new(t.bind.apply(t,W1([void 0],n.concat(this))))},t}(Array);function $z(e){return Am(e)?ake(e,function(){}):e}function mxt(e){return typeof e=="boolean"}function gxt(){return function(t){return yxt(t)}}function yxt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new hxt;return n&&(mxt(n)?r.push(Oz):r.push(Oz.withExtraArgument(n.extraArgument))),r}var vxt=!0;function bxt(e){var t=gxt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(fke(i))h=rxt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=ixt.apply(void 0,p),g=d$;u&&(g=cxt(b0({trace:!vxt},typeof u=="object"&&u)));var y=new pxt(m),v=y;Array.isArray(d)?v=W1([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return uke(h,c,b)}function dke(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function _xt(e){return typeof e=="function"}function wxt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?dke(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(_xt(e))u=function(){return $z(e())};else{var l=$z(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=W1([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(Q0(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Am(p))return ake(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function Ext(e,t){return e+"/"+t}function xxt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:$z(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=Ext(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?nh(d,p):nh(d)});function u(){var c=typeof e.extraReducers=="function"?dke(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=b0(b0({},d),o);return wxt(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var w=0,E=p;w<E.length;w++){var T=E[w];v.addMatcher(T.matcher,T.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var Sxt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",hke=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=Sxt[Math.random()*64|0];return t},Txt=["name","message","stack","code"],Y8=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),hfe=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Axt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=Txt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=nh(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:G8(b0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=nh(t+"/pending",function(l,c,f){return{payload:void 0,meta:G8(b0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=nh(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||Axt)(l||"Rejected"),meta:G8(b0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):hke(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return Ck(this,null,function(){var v,b,w,E,T,S,A;return Ak(this,function(C){switch(C.label){case 0:return C.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),Ixt(E)?[4,E]:[3,2];case 1:E=C.sent(),C.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(k,N){return p.signal.addEventListener("abort",function(){return N({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([T,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(k,N){return new Y8(k,N)},fulfillWithValue:function(k,N){return new hfe(k,N)}})).then(function(k){if(k instanceof Y8)throw k;return k instanceof hfe?i(k.payload,h,l,k.meta):i(k,h,l)})])];case 3:return w=C.sent(),[3,5];case 4:return S=C.sent(),w=S instanceof Y8?o(null,h,l,S.payload,S.meta):o(S,h,l),[3,5];case 5:return A=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,A||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(Cxt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function Cxt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Ixt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var kxt=function(e,t){return fxt(e)?e.match(t):e(t)};function pfe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return kxt(r,n)})}}var oQ=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},Mz=function(){},pke=function(e,t){return t===void 0&&(t=Mz),e.catch(t),e},mke=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Yw=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Rxt="task",gke="listener",yke="completed",aQ="cancelled",Nxt="task-"+aQ,Pxt="task-"+yke,vke=gke+"-"+aQ,Dxt=gke+"-"+yke,G6=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=Rxt+" "+aQ+" (reason: "+t+")"}return e}(),Kw=function(e){if(e.aborted)throw new G6(e.reason)};function bke(e,t){var n=Mz;return new Promise(function(r,i){var s=function(){return i(new G6(e.reason))};if(e.aborted){s();return}n=mke(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=Mz})}var Oxt=function(e,t){return Ck(void 0,null,function(){var n,r;return Ak(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof G6?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},h$=function(e){return function(t){return pke(bke(e,t).then(function(n){return Kw(e),n}))}},_ke=function(e){var t=h$(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},$xt=Object.assign,mfe={},Ik="listenerMiddleware",Mxt=function(e,t){var n=function(r){return mke(e,function(){return Yw(r,e.reason)})};return function(r,i){oQ(r,"taskExecutor");var s=new AbortController;n(s);var o=Oxt(function(){return Ck(void 0,null,function(){var a;return Ak(this,function(u){switch(u.label){case 0:return Kw(e),Kw(s.signal),[4,r({pause:h$(s.signal),delay:_ke(s.signal),signal:s.signal})];case 1:return a=u.sent(),Kw(s.signal),[2,a]}})})},function(){return Yw(s,Pxt)});return i!=null&&i.autoJoin&&t.push(o),{result:h$(e)(o),cancel:function(){Yw(s,Nxt)}}}},Lxt=function(e,t){var n=function(r,i){return Ck(void 0,null,function(){var s,o,a,u;return Ak(this,function(l){switch(l.label){case 0:Kw(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,bke(t,Promise.race(a))];case 2:return u=l.sent(),Kw(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return pke(n(r,i))}},wke=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=nh(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return oQ(s,"options.listener"),{predicate:i,type:t,effect:s}},Fxt=function(e){var t=wke(e),n=t.type,r=t.predicate,i=t.effect,s=hke(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},Lz=function(e){e.pending.forEach(function(t){Yw(t,vke)})},jxt=function(e){return function(){e.forEach(Lz),e.clear()}},gfe=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},Bxt=nh(Ik+"/add"),Uxt=nh(Ik+"/removeAll"),zxt=nh(Ik+"/remove"),Vxt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,W1([Ik+"/error"],e))};function Hxt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?Vxt:i;oQ(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&Lz(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=Fxt(h)),o(p)},l=function(h){var p=wke(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var w=typeof m=="string"?b.type===m:b.predicate===y;return w&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&Lz(v)),!!v},c=function(h,p,m,g){return Ck(t,null,function(){var y,v,b,w;return Ak(this,function(E){switch(E.label){case 0:y=new AbortController,v=Lxt(u,y.signal),b=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,$xt({},m,{getOriginalState:g,condition:function(T,S){return v(T,S).then(Boolean)},take:v,delay:_ke(y.signal),pause:h$(y.signal),extra:r,signal:y.signal,fork:Mxt(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(T,S,A){T!==y&&(Yw(T,vke),A.delete(T))})}})))];case 2:return E.sent(),[3,6];case 3:return w=E.sent(),w instanceof G6||gfe(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return E.sent(),Yw(y,Dxt),h.pending.delete(y),[7];case 6:return[2]}})})},f=jxt(n),d=function(h){return function(p){return function(m){if(!dxt(m))return p(m);if(Bxt.match(m))return u(m.payload);if(Uxt.match(m)){f();return}if(zxt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===mfe)throw new Error(Ik+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),w=Array.from(n.values()),E=0,T=w;E<T.length;E++){var S=T[E],A=!1;try{A=S.predicate(m,b,g)}catch(C){A=!1,gfe(s,C,{raisedBy:"predicate"})}A&&c(S,m,h,y)}}finally{g=mfe}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var yfe;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);WEt();function qxt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let VN;const Wxt=new Uint8Array(16);function Gxt(){if(!VN&&(VN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!VN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return VN(Wxt)}const go=[];for(let e=0;e<256;++e)go.push((e+256).toString(16).slice(1));function Yxt(e,t=0){return(go[e[t+0]]+go[e[t+1]]+go[e[t+2]]+go[e[t+3]]+"-"+go[e[t+4]]+go[e[t+5]]+"-"+go[e[t+6]]+go[e[t+7]]+"-"+go[e[t+8]]+go[e[t+9]]+"-"+go[e[t+10]]+go[e[t+11]]+go[e[t+12]]+go[e[t+13]]+go[e[t+14]]+go[e[t+15]]).toLowerCase()}const Kxt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),vfe={randomUUID:Kxt};function bfe(e,t,n){if(vfe.randomUUID&&!t&&!e)return vfe.randomUUID();e=e||{};const r=e.random||(e.rng||Gxt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Yxt(r)}class rh{static get(){let t=bfe();for(;this.ids.has(t);)t=bfe();return this.ids.set(t,!0),t}}rh.ids=new Map;function ih(e){return"parent"in e}function Xxt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:rh.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:rh.get(),createdOn:Date.now(),val:r}]:[];return{id:rh.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function Qxt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:rh.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:rh.get(),createdOn:Date.now(),val:s}]:[];return{id:rh.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Vi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=oSt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function G1(e){return!!e&&!!e[Ll]}function J0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===aSt}(e)||Array.isArray(e)||!!e[_A]||!!(!((t=e.constructor)===null||t===void 0)&&t[_A])||Y6(e)||K6(e))}function XE(e,t,n){n===void 0&&(n=!1),Z0(e)===0?(n?Object.keys:hQ)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Z0(e){var t=e[Ll];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Y6(e)?2:K6(e)?3:0}function KC(e,t){return Z0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function mD(e,t){return Z0(e)===2?e.get(t):e[t]}function Eke(e,t,n){var r=Z0(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function Jxt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Y6(e){return iSt&&e instanceof Map}function K6(e){return sSt&&e instanceof Set}function Iv(e){return e.o||e.t}function uQ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=uSt(e);delete t[Ll];for(var n=hQ(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function lQ(e,t){return t===void 0&&(t=!1),cQ(e)||G1(e)||!J0(e)||(Z0(e)>1&&(e.set=e.add=e.clear=e.delete=Zxt),Object.freeze(e),t&&XE(e,function(n,r){return lQ(r,!0)},!0)),e}function Zxt(){Vi(2)}function cQ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function sh(e){var t=Uz[e];return t||Vi(18,e),t}function eSt(e,t){Uz[e]||(Uz[e]=t)}function _fe(){return{}.NODE_ENV==="production"||QE||Vi(0),QE}function K8(e,t){t&&(sh("Patches"),e.u=[],e.s=[],e.v=t)}function p$(e){Fz(e),e.p.forEach(tSt),e.p=null}function Fz(e){e===QE&&(QE=e.l)}function wfe(e){return QE={p:[],l:QE,h:e,m:!0,_:0}}function tSt(e){var t=e[Ll];t.i===0||t.i===1?t.j():t.O=!0}function X8(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||sh("ES5").S(t,e,r),r?(n[Ll].P&&(p$(t),Vi(4)),J0(e)&&(e=m$(t,e),t.l||g$(t,e)),t.u&&sh("Patches").M(n[Ll].t,e,t.u,t.s)):e=m$(t,n,[]),p$(t),t.u&&t.v(t.u,t.s),e!==dQ?e:void 0}function m$(e,t,n){if(cQ(t))return t;var r=t[Ll];if(!r)return XE(t,function(s,o){return Efe(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return g$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=uQ(r.k):r.o;XE(r.i===3?new Set(i):i,function(s,o){return Efe(e,r,i,s,o,n)}),g$(e,i,!1),n&&e.u&&sh("Patches").R(r,n,e.u,e.s)}return r.o}function Efe(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Vi(5),G1(i)){var o=m$(e,i,s&&t&&t.i!==3&&!KC(t.D,r)?s.concat(r):void 0);if(Eke(n,r,o),!G1(o))return;e.m=!1}if(J0(i)&&!cQ(i)){if(!e.h.F&&e._<1)return;m$(e,i),t&&t.A.l||g$(e,i)}}function g$(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&lQ(t,n)}function Q8(e,t){var n=e[Ll];return(n?Iv(n):e)[t]}function xfe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function jz(e){e.P||(e.P=!0,e.l&&jz(e.l))}function J8(e){e.o||(e.o=uQ(e.t))}function Bz(e,t,n){var r=Y6(t)?sh("MapSet").N(t,n):K6(t)?sh("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:_fe(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=zz;o&&(u=[a],l=S2);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):sh("ES5").J(t,n);return(n?n.A:_fe()).p.push(r),r}function nSt(e){return G1(e)||Vi(22,e),function t(n){if(!J0(n))return n;var r,i=n[Ll],s=Z0(n);if(i){if(!i.P&&(i.i<4||!sh("ES5").K(i)))return i.t;i.I=!0,r=Sfe(n,s),i.I=!1}else r=Sfe(n,s);return XE(r,function(o,a){i&&mD(i.t,o)===a||Eke(r,o,t(a))}),s===3?new Set(r):r}(e)}function Sfe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return uQ(e)}function rSt(){function e(r){if(!J0(r))return r;if(Array.isArray(r))return r.map(e);if(Y6(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(K6(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return KC(r,_A)&&(i[_A]=r[_A]),i}function t(r){return G1(r)?e(r):r}var n="add";eSt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=Z0(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Vi(24),typeof u=="function"&&f==="prototype"&&Vi(24),typeof(u=mD(u,f))!="object"&&Vi(15,o.join("/"))}var d=Z0(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Vi(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Vi(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;XE(a.D,function(h,p){var m=mD(f,h),g=mD(d,h),y=p?KC(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===dQ?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Tfe,QE,fQ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",iSt=typeof Map<"u",sSt=typeof Set<"u",Afe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",dQ=fQ?Symbol.for("immer-nothing"):((Tfe={})["immer-nothing"]=!0,Tfe),_A=fQ?Symbol.for("immer-draftable"):"__$immer_draftable",Ll=fQ?Symbol.for("immer-state"):"__$immer_state",oSt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},aSt=""+Object.prototype.constructor,hQ=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,uSt=Object.getOwnPropertyDescriptors||function(e){var t={};return hQ(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Uz={},zz={get:function(e,t){if(t===Ll)return e;var n=Iv(e);if(!KC(n,t))return function(i,s,o){var a,u=xfe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!J0(r)?r:r===Q8(e.t,t)?(J8(e),e.o[t]=Bz(e.A.h,r,e)):r},has:function(e,t){return t in Iv(e)},ownKeys:function(e){return Reflect.ownKeys(Iv(e))},set:function(e,t,n){var r=xfe(Iv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Q8(Iv(e),t),s=i==null?void 0:i[Ll];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(Jxt(n,i)&&(n!==void 0||KC(e.t,t)))return!0;J8(e),jz(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return Q8(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,J8(e),jz(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Iv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Vi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Vi(12)}},S2={};XE(zz,function(e,t){S2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),S2.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Vi(13),S2.set.call(this,e,t,void 0)},S2.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Vi(14),zz.set.call(this,e[0],t,n,e[0])};var lSt=function(){function e(n){var r=this;this.g=Afe,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Vi(6),o!==void 0&&typeof o!="function"&&Vi(7),J0(i)){var c=wfe(r),f=Bz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?p$(c):Fz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return K8(c,o),X8(m,c)},function(m){throw p$(c),m}):(K8(c,o),X8(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===dQ&&(l=void 0),r.F&&lQ(l,!0),o){var h=[],p=[];sh("Patches").M(i,l,h,p),o(h,p)}return l}Vi(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){J0(n)||Vi(8),G1(n)&&(n=nSt(n));var r=wfe(this),i=Bz(this,n,void 0);return i[Ll].C=!0,Fz(r),i},t.finishDraft=function(n,r){var i=n&&n[Ll];({}).NODE_ENV!=="production"&&(i&&i.C||Vi(9),i.I&&Vi(10));var s=i.A;return K8(s,r),X8(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Afe&&Vi(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=sh("Patches").$;return G1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Fl=new lSt,cSt=Fl.produce;Fl.produceWithPatches.bind(Fl);Fl.setAutoFreeze.bind(Fl);Fl.setUseProxies.bind(Fl);Fl.applyPatches.bind(Fl);Fl.createDraft.bind(Fl);Fl.finishDraft.bind(Fl);function fSt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=Xxt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return xxt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:rh.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:rh.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function dSt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=fSt(e),s=Hxt();s.startListening({matcher:pfe(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=pfe(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=bxt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:rh.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var hSt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pSt=Object.prototype.hasOwnProperty;function Vz(e,t){return pSt.call(e,t)}function Hz(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Vz(e,i)&&r.push(i);return r}function Pu(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function qz(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function kv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function xke(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Wz(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Wz(e[t]))return!0}else if(typeof e=="object"){for(var r=Hz(e),i=r.length,s=0;s<i;s++)if(Wz(e[r[s]]))return!0}}return!1}function Cfe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var Ske=function(e){hSt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Cfe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Cfe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Fi=Ske,mSt=Pu,vw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=y$(n,this.path);r&&(r=Pu(r));var i=v1(n,{op:"remove",path:this.from}).removed;return v1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=y$(n,this.from);return v1(n,{op:"add",path:this.path,value:Pu(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:XC(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},gSt={add:function(e,t,n){return qz(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:vw.move,copy:vw.copy,test:vw.test,_get:vw._get};function y$(e,t){if(t=="")return e;var n={op:"_get",path:t};return v1(e,n),n.value}function v1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):v$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=y$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=XC(e,t.value),o.test===!1)throw new Fi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Fi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Pu(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=v$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=xke(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!qz(h))throw new Fi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);qz(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Fi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=gSt[t.op].call(t,l,h,e);if(o.test===!1)throw new Fi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=vw[t.op].call(t,l,h,e);if(o.test===!1)throw new Fi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Fi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function X6(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Fi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Pu(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=v1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function ySt(e,t,n){var r=v1(e,t);if(r.test===!1)throw new Fi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function v$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Fi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(vw[e.op]){if(typeof e.path!="string")throw new Fi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Fi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Fi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Fi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Wz(e.value))throw new Fi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Fi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Fi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=Tke([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Fi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Fi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function Tke(e,t,n){try{if(!Array.isArray(e))throw new Fi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)X6(Pu(t),Pu(e),n||!0);else{n=n||v$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Fi)return i;throw i}}function XC(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!XC(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!XC(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const vSt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Fi,_areEquals:XC,applyOperation:v1,applyPatch:X6,applyReducer:ySt,deepClone:mSt,getValueByPointer:y$,validate:Tke,validator:v$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var pQ=new WeakMap,bSt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),_St=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function wSt(e){return pQ.get(e)}function ESt(e,t){return e.observers.get(t)}function xSt(e,t){e.observers.delete(t.callback)}function SSt(e,t){t.unobserve()}function TSt(e,t){var n=[],r,i=wSt(e);if(!i)i=new bSt(e),pQ.set(e,i);else{var s=ESt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Pu(e),t){r.callback=t,r.next=null;var o=function(){Gz(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){Gz(r),clearTimeout(r.next),xSt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new _St(t,r)),r}function Gz(e,t){t===void 0&&(t=!1);var n=pQ.get(e.object);mQ(n.value,e.object,e.patches,"",t),e.patches.length&&X6(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function mQ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=Hz(t),o=Hz(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(Vz(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?mQ(c,f,n,r+"/"+kv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+kv(l),value:Pu(c)}),n.push({op:"replace",path:r+"/"+kv(l),value:Pu(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+kv(l),value:Pu(c)}),n.push({op:"remove",path:r+"/"+kv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!Vz(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+kv(l),value:Pu(t[l])})}}}function Ake(e,t,n){n===void 0&&(n=!1);var r=[];return mQ(e,t,r,"",n),r}const ASt=Object.freeze(Object.defineProperty({__proto__:null,compare:Ake,generate:Gz,observe:TSt,unobserve:SSt},Symbol.toStringTag,{value:"Module"}));Object.assign({},vSt,ASt,{JsonPatchError:Ske,deepClone:Pu,escapePathComponent:kv,unescapePathComponent:xke});var T2=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(T2||{});function gD(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=Ike(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=gD(i,t);return X6(a,Pu(o),!0,!1).newDocument}function CSt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function Cke({registry:e,initialState:t}){let n=!1;const r=qxt(),i=dSt(t);function s(c){return i.backend.nodes[c]}r.listen(T2.TRAVERSAL_START,()=>{n=!0}),r.listen(T2.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return gD(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=gD(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=Ake(y,f);if(CSt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=Qxt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=gD(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(T2.TRAVERSAL_START);const f=Ike(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);kSt(p,m)?ih(p)&&d.push(...p.sideEffects.undo):ih(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(T2.TRAVERSAL_END)},undo(){const{current:c}=i;return ih(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return kke(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function ISt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;ih(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)ih(r)&&(r=n[r.parent]),ih(i)&&(i=n[i.parent]);return r.id}function Ike(e,t,n){const r=ISt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),ih(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),ih(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function kSt(e,t){if(ih(e)&&e.parent===t.id)return!0;if(ih(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function kke(e,t){return{...e,children:e.children.map(n=>kke(t[n],t)),name:`${e.label}`}}rSt();function RSt(e){return e.length===2?cSt(e):e}class Q6{static create(){return new Q6}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:RSt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),nh(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var NSt="Expected a function",Ife=NaN,PSt="[object Symbol]",DSt=/^\s+|\s+$/g,OSt=/^[-+]0x[0-9a-f]+$/i,$St=/^0b[01]+$/i,MSt=/^0o[0-7]+$/i,LSt=parseInt,FSt=typeof Zs=="object"&&Zs&&Zs.Object===Object&&Zs,jSt=typeof self=="object"&&self&&self.Object===Object&&self,BSt=FSt||jSt||Function("return this")(),USt=Object.prototype,zSt=USt.toString,VSt=Math.max,HSt=Math.min,Z8=function(){return BSt.Date.now()};function qSt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(NSt);t=kfe(t)||0,Yz(n)&&(c=!!n.leading,f="maxWait"in n,s=f?VSt(kfe(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(T){var S=r,A=i;return r=i=void 0,l=T,o=e.apply(A,S),o}function p(T){return l=T,a=setTimeout(y,t),c?h(T):o}function m(T){var S=T-u,A=T-l,C=t-S;return f?HSt(C,s-A):C}function g(T){var S=T-u,A=T-l;return u===void 0||S>=t||S<0||f&&A>=s}function y(){var T=Z8();if(g(T))return v(T);a=setTimeout(y,m(T))}function v(T){return a=void 0,d&&r?h(T):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(Z8())}function E(){var T=Z8(),S=g(T);if(r=arguments,i=this,u=T,S){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=b,E.flush=w,E}function Yz(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function WSt(e){return!!e&&typeof e=="object"}function GSt(e){return typeof e=="symbol"||WSt(e)&&zSt.call(e)==PSt}function kfe(e){if(typeof e=="number")return e;if(GSt(e))return Ife;if(Yz(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Yz(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(DSt,"");var n=$St.test(e);return n||MSt.test(e)?LSt(e.slice(2),n?2:8):OSt.test(e)?Ife:+e}var YSt=qSt;const yd=Hl(YSt);function Rke({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=I.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=I.useMemo(()=>nS(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(fm,{children:_.jsx(Es,{gap:3,children:_.jsx(it,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const KSt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:Rke},Symbol.toStringTag,{value:"Module"})),e9=15;function Nke({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=I.useState([0,0]),[l,c]=I.useState(!1);return I.useEffect(()=>{const f=gs("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<e9&&Math.abs(t(g[r.y])-p[1])<e9);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),_.jsx("circle",{style:{cursor:l?"pointer":"default"},r:e9,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const XSt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:Nke},Symbol.toStringTag,{value:"Module"})),hi={top:15,left:100,right:15,bottom:70};function Kz({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=p1(),[c]=p1(),[f]=p1(),[d,h]=I.useState(!0),p=I.useMemo(()=>l-hi.left-hi.right,[l]),m=I.useMemo(()=>u-hi.top-hi.bottom,[u]),g=I.useMemo(()=>{const k=Array.from(new Set(s.map(N=>N[i.category])));return iS(VTe).domain(k)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:w}=I.useMemo(()=>{const k=s.map(M=>+M[i.x]).filter(M=>M!==null),[N,O]=pue(k),P=s.map(M=>+M[i.y]).filter(M=>M!==null),[$,F]=pue(P);return{xMin:N,xMax:O,yMin:$,yMax:F}},[s,i.x,i.y]),E=I.useMemo(()=>{const k=b-y;return p<=0?null:i.dataType==="date"?LTe([hi.left,p+hi.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):vm([hi.left,p+hi.left]).domain([y-k/10,b+k/10]).nice()},[i.dataType,p,b,y]),T=I.useMemo(()=>{const k=w-v;return m<=0?null:vm([m+hi.top,hi.top]).domain([v-k/10,w+k/10]).nice()},[m,w,v]),S=I.useMemo(()=>{if(!E||!T)return()=>null;if(r==="Axis Selection"){const k=Hct().extent([[hi.left,hi.top+m-5],[hi.left+p,hi.top+m+5]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[O.selection[0],null],[O.selection[1],null]],E,T,O.mode)}),N=qct().extent([[hi.left-5,hi.top],[hi.left+5,hi.top+m]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[null,O.selection[0]],[null,O.selection[1]]],E,T,O.mode)});return c.current&&f.current&&(gs(f.current).call(N),gs(c.current).call(k),t.hasBrush||(gs(f.current).call(N.move,[T(w),T(v)]),gs(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),T(w)],[E(new Date("2015-12-31")),T(v)]],E,T,"drag"))),()=>{gs(f.current).call(N.move,[T(w),T(v)]),gs(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),T(w)],[E(new Date("2015-12-31")),T(v)]],E,T,"clear")}}if(r==="Rectangular Selection"){const k=Wct().extent([[hi.left,hi.top],[hi.left+p,hi.top+m]]).on("brush",N=>{N.sourceEvent!==void 0&&n([[N.selection[0][0],N.selection[0][1]],[N.selection[1][0],N.selection[1][1]]],E,T,N.mode)}).on("end",N=>{N.selection===null&&N.sourceEvent!==void 0&&(gs(a.current).call(k.move,null),e(null))});return gs(a.current).call(k),()=>{gs(a.current).call(k.move,null),n([[null,null],[null,null]],E,T,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),T(w)],[E(b),T(v)]],E,T,null),()=>n([[E(y),T(w)],[E(b),T(v)]],E,T,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),T(w)],[E(b),T(v)]],E,T,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,E,w,v,T]),A=I.useMemo(()=>o.length===0?null:new Set(o),[o]),C=I.useMemo(()=>!E||!T?null:s.map((k,N)=>{if(k[i.x]===null||k[i.y]===null)return null;const O=i.dataType==="date"?E(new Date(k[i.x])):E(k[i.x]);return _.jsx("circle",{opacity:A&&!A.has(k[i.ids])?.3:1,r:3,fill:A&&!A.has(k[i.ids])?"lightgray":g(k[i.category]),cx:O,cy:T(k[i.y])},N)}),[A,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,T]);return I.useEffect(()=>{r==="Axis Selection"&&Mut(".handle").style("fill","darkgrey")},[t,r]),_.jsxs(Hd,{children:[_.jsxs(Es,{children:[_.jsx(ln,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),S==null||S()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?_.jsx(HG,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:k=>h(k==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),_.jsxs(Es,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&T?_.jsxs("g",{children:[_.jsx(Rke,{yScale:T,label:i.y,horizontalPosition:hi.left,xRange:E.range()}),_.jsx(kK,{xScale:E,yRange:T.range(),isDate:i.dataType==="date",vertPosition:m+hi.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(k=>({value:k.toString(),offset:E(k)}))})]}):null,C,_.jsx("g",{id:"brushXRef",ref:c}),_.jsx("g",{id:"brushYRef",ref:f}),E&&T&&r==="Paintbrush Selection"?_.jsx(Nke,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:T}):null]}),r==="Slider Selection"&&E&&T?_.jsxs(Hd,{style:{flexGrow:1},gap:50,children:[_.jsxs(Hd,{gap:0,children:[_.jsx(it,{children:i.x}),_.jsx(DO,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:k=>{n([[E(k[0]),t.y1],[E(k[1]),t.y2]],E,T,"drag")},style:{width:"300px"},marks:E.ticks(5).map(k=>({value:k,label:k})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),_.jsxs(Hd,{gap:0,children:[_.jsx(it,{children:i.y}),_.jsx(DO,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],onChange:k=>{n([[t.x1,T(k[1])],[t.x2,T(k[0])]],E,T,"drag")},style:{width:"300px"},marks:T.ticks(5).map(k=>({value:k,label:k})),value:[T.invert(t.y2),T.invert(t.y1)]})]})]}):null]})]})}const QSt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:Kz,default:Kz},Symbol.toStringTag,{value:"Module"}));function Rfe({parameters:e,setAnswer:t}){const[n,r]=I.useState(null),[i,s]=I.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=I.useState(null);I.useEffect(()=>{xft(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=I.useMemo(()=>o?BEt(o):null,[o]),{actions:l,trrack:c}=I.useMemo(()=>{const g=Q6.create(),y=g.register("brush",(T,S)=>(T.all={brush:S},T)),v=g.register("brushMove",(T,S)=>(T.all={brush:S},T)),b=g.register("brushResize",(T,S)=>(T.all={brush:S},T)),w=g.register("brushClear",(T,S)=>(T.all={brush:S},T)),E=Cke({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:b,clearBrush:w},trrack:E}},[]),f=I.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=I.useMemo(()=>yd(f,100,{maxWait:100}),[f]),h=I.useCallback((g,y,v,b,w)=>{if(!y||!v)return;const E=y.invert(g[0][0]||i.x1),T=y.invert(g[1][0]||i.x2),S=v.invert(g[1][1]||i.y2),A=v.invert(g[0][1]||i.y1);let C=null;if(b==="clear")C=u;else if(w){const N=new Set(w);C=u.filter(U8(O=>N.has(O[e.ids])))}else e.brushType==="Axis Selection"?C=u.filter(U8(N=>new Date(N[e.x])>=new Date(E)&&new Date(N[e.x])<=new Date(T)&&N[e.y]>=S&&N[e.y]<=A)):C=u.filter(U8(N=>N[e.x]>=E&&N[e.x]<=T&&N[e.y]>=S&&N[e.y]<=A));const k={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:b!=="clear",ids:b!=="clear"?C==null?void 0:C.array("id"):[]};s(k),b==="drag"||b==="handle"?d(b,k):b==="clear"&&c.apply("Clear Brush",l.clearBrush(k)),r(C),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=I.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=I.useCallback(g=>{r(g)},[]);return o?_.jsxs(Hd,{gap:"xs",children:[_.jsx(Kz,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),_.jsx(oz,{data:o,parameters:e,barsTable:p})]}):_.jsx(Oh,{})}const JSt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Rfe,default:Rfe},Symbol.toStringTag,{value:"Module"})),ZSt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Nfe=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},bS=e=>{const t=I.useRef(null),n=Nfe(e),[r,i]=I.useState(0),[s,o]=I.useState(0);I.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=Nfe({...n,width:n.width||r,height:n.height||s});return[t,a]},eTt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:bS},Symbol.toStringTag,{value:"Module"}));function Pke({data:e,xScale:t,yScale:n,height:r}){return _.jsx("g",{children:e.map((i,s)=>_.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const tTt=Object.freeze(Object.defineProperty({__proto__:null,Bars:Pke},Symbol.toStringTag,{value:"Module"}));function gQ({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=vm().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(0,${a})`,children:[_.jsx("line",{x2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const nTt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:gQ},Symbol.toStringTag,{value:"Module"}));function Dke({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=hk().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsx("g",{transform:`translate(${a}, 10)`,children:_.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const rTt=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:Dke},Symbol.toStringTag,{value:"Module"})),iTt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function sTt({parameters:e}){const[n,r]=bS(iTt),i=hk().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=vm().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(Dke,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(gQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(Pke,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const oTt=Object.freeze(Object.defineProperty({__proto__:null,default:sTt},Symbol.toStringTag,{value:"Module"}));function Oke({data:e}){return _.jsx("g",{children:e.map(({bubble:t},n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const aTt=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:Oke},Symbol.toStringTag,{value:"Module"}));function yQ({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const uTt=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:yQ},Symbol.toStringTag,{value:"Module"})),lTt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},cTt=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=pTe().size([t-10,n-10]).padding(1.5),o=d6(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},fTt=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function dTt({parameters:e}){const[t,n]=bS(lTt),r=cTt(e,n.width,n.height),i=fTt(r,e.selectedIndices);return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[_.jsx(Oke,{data:r}),_.jsx(yQ,{positions:i})]})})})}const hTt=Object.freeze(Object.defineProperty({__proto__:null,default:dTt},Symbol.toStringTag,{value:"Module"}));function $ke({arcs:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const pTt=Object.freeze(Object.defineProperty({__proto__:null,Slices:$ke},Symbol.toStringTag,{value:"Module"}));function Mke({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("g",{transform:`translate(${t.centroid()})`,children:_.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const mTt=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:Mke},Symbol.toStringTag,{value:"Module"})),gTt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},yTt=dgt().value(e=>e.value),CT=150;function vTt({parameters:e}){const[t,n]=bS(gTt),r=yTt(e.data),i=r.map(o=>sz().innerRadius(0).outerRadius(CT).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>sz().outerRadius(CT+10).innerRadius(CT+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft+CT,n.marginTop+CT].join(",")})`,children:[_.jsx($ke,{arcs:i}),_.jsx(Mke,{positions:s})]})})})}const bTt=Object.freeze(Object.defineProperty({__proto__:null,default:vTt},Symbol.toStringTag,{value:"Module"}));function Lke({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=vm().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(${a}, 0)`,children:[_.jsx("line",{y2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const _Tt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:Lke},Symbol.toStringTag,{value:"Module"}));function Fke({data:e,barWidth:t,yScale:n}){return _.jsx("g",{children:e.map((r,i)=>_.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const wTt=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:Fke},Symbol.toStringTag,{value:"Module"})),ETt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function xTt({parameters:e}){const[n,r]=bS(ETt),i=hk().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=vm().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(b=>+b.value),g=p.reduce((b,w)=>Number(b)+Number(w))/100,y={};p.forEach((b,w)=>{y[String.fromCharCode(w+65)]=b/g});const v=[y];return Ogt().keys(e.data.map(b=>b.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(Lke,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:"translate(0, 0)",children:_.jsx(gQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsxs("g",{transform:"translate(0, 0)",children:[_.jsx(Fke,{data:c,barWidth:f,yScale:s}),_.jsx(yQ,{positions:d})]})]})})})}const STt=Object.freeze(Object.defineProperty({__proto__:null,default:xTt},Symbol.toStringTag,{value:"Module"})),TTt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function ATt({parameters:e,setAnswer:t}){const[n,r]=bS(TTt),[i,s]=I.useState(100),[o,a]=I.useState(100),[u,l]=I.useState(300),{taskid:c}=e,{actions:f,trrack:d}=I.useMemo(()=>{const p=Q6.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=Cke({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=I.useCallback(p=>{const m=gs("#movingCircle"),g=gs("#clickAccuracySvg"),y=w7(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],b=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+b,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:b}})},[f,t,c,d]);return I.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;gs(n.current).select("circle").transition().duration(y).ease(Rct).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:_.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[_.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),_.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),_.jsxs(we,{children:["Adjust speed (px/s):",_.jsx(LL,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const CTt=Object.freeze(Object.defineProperty({__proto__:null,default:ATt},Symbol.toStringTag,{value:"Module"}));function Pfe({rankings:e}){return _.jsx("div",{style:{fontFamily:"sans-serif"},children:_.jsx("div",{children:e.map((t,n)=>_.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function ITt({parameters:e,setAnswer:t}){const n=ky(),[r,i]=I.useState(""),{goToNextStep:s,isNextDisabled:o}=oxe(),a=I.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=I.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=I.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=I.useCallback(()=>{o||s()},[o,s]);I.useEffect(()=>{const h=WBe([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),_.jsxs("div",{children:[_.jsxs(ja,{children:[_.jsxs(ja.Col,{span:2,children:[_.jsx(Pfe,{rankings:a==="r1"?e.data.r1:e.data.r2}),_.jsx(ln,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?_.jsx(Boe,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),_.jsxs(ja.Col,{span:2,children:[_.jsx(Pfe,{rankings:a==="r1"?e.data.r2:e.data.r1}),_.jsx(ln,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?_.jsx(Boe,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&_.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const kTt=Object.freeze(Object.defineProperty({__proto__:null,default:ITt},Symbol.toStringTag,{value:"Module"})),Dfe=Object.assign({"../public/demo-brush-interactions/assets/Bar.tsx":Lgt,"../public/demo-brush-interactions/assets/BrushPlot.tsx":JSt,"../public/demo-brush-interactions/assets/Paintbrush.tsx":XSt,"../public/demo-brush-interactions/assets/Scatter.tsx":QSt,"../public/demo-brush-interactions/assets/XAxisBar.tsx":$gt,"../public/demo-brush-interactions/assets/YAxis.tsx":KSt,"../public/demo-brush-interactions/assets/YAxisBar.tsx":Mgt,"../public/demo-brush-interactions/assets/types.ts":ZSt,"../public/demo-cleveland/assets/BarChart.tsx":oTt,"../public/demo-cleveland/assets/BubbleChart.tsx":hTt,"../public/demo-cleveland/assets/PieChart.tsx":bTt,"../public/demo-cleveland/assets/StackedBarChart.tsx":STt,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":tTt,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":aTt,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":uTt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":_Tt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":nTt,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":rTt,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":pTt,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":mTt,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":wTt,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":eTt,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":CTt,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":kTt});function RTt({currentConfig:e}){const t=qm(),n=ky(),r=`../public/${e.path}`,i=r in Dfe?Dfe[r].default:null,s=jh(),{updateResponseBlockValidation:o,setIframeAnswers:a}=Fh();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return _.jsx(I.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:i?_.jsx(i,{parameters:e.parameters,setAnswer:u}):_.jsx(M1,{path:e.path})})}function NTt({currentConfig:e}){const[t,n]=I.useState(""),[r,i]=I.useState(!0);return I.useEffect(()=>{async function s(){const o=await UY(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?_.jsx(Wa,{text:t}):_.jsx(M1,{path:e.path})}const PTt={},DTt=Object.freeze(Object.defineProperty({__proto__:null,default:PTt},Symbol.toStringTag,{value:"Module"})),OTt=uje(DTt);var $Tt=OTt;function MTt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function LTt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function FTt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function jTt(e){return e.__COMMENTS__}function BTt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var J6={EOL:$Tt.EOL||`
`,tryParseNumber:MTt,createComment:LTt,removeComment:FTt,getComment:jTt,forceComment:BTt},UTt="3.2.1";function zTt(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return Ofe}else if(e.length===0)return Ofe;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return HTt(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),VTt.bind(null,n)}function VTt(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function Ofe(){}function HTt(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function jke(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}jke.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function Bke(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}Bke.description="parse hexadecimal numbers prefixed with 0x";function Uke(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}Uke.description="support ISO dates";var vQ={loadDsf:zTt,std:{math:jke,hex:Bke,date:Uke}},qTt=function(e,t){var n=J6,r=vQ,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f($){return $==="{"||$==="}"||$==="["||$==="]"||$===","||$===":"}function d($){var F,M=0,B=1;for(F=s-1;F>0&&i[F]!==`
`;F--,M++);for(;F>0;F--)i[F]===`
`&&B++;throw new Error($+" at line "+B+","+M+" >>>"+i.substr(s-M,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p($){return i.charAt(s+$)}function m($){for(var F="",M=o;h();){if(o===M)return h(),$&&M==="'"&&o==="'"&&F.length===0?(h(),g()):F;if(o==="\\")if(h(),o==="u"){for(var B=0,U=0;U<4;U++){h();var H=o.charCodeAt(0),D;o>="0"&&o<="9"?D=H-48:o>="a"&&o<="f"?D=H-97+10:o>="A"&&o<="F"?D=H-65+10:d("Bad \\u char "+o),B=B*16+D}F+=String.fromCharCode(B)}else if(typeof a[o]=="string")F+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):F+=o}d("Bad string")}function g(){for(var $="",F=0,M=0;;){var B=p(-M-5);if(!B||B===`
`)break;M++}function U(){for(var H=M;o&&o<=" "&&o!==`
`&&H-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),U());;){if(!o)d("Bad multiline string");else if(o==="'"){if(F++,h(),F===3)return $.slice(-1)===`
`&&($=$.slice(0,-1)),$;continue}else for(;F>0;)$+="'",F--;o===`
`?($+=`
`,h(),U()):(o!=="\r"&&($+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var $="",F=s,M=-1;;){if(o===":")return $?M>=0&&M!==$.length&&(s=F+M,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),$;o<=" "?o?M<0&&(M=$.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):$+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var $=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var F=o==="\r"||o===`
`||o==="";if(F||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var M=$[0];switch(M){case"f":if($.trim()==="false")return!1;break;case"n":if($.trim()==="null")return null;break;case"t":if($.trim()==="true")return!0;break;default:if(M==="-"||M>="0"&&M<="9"){var B=n.tryParseNumber($);if(B!==void 0)return B}}if(F){$=$.trim();var U=l($);return U!==void 0?U:$}}$+=o}}function w($,F){var M;for($--,M=s-2;M>$&&i[M]<=" "&&i[M]!==`
`;M--);i[M]===`
`&&M--,i[M]==="\r"&&M--;var B=i.substr($,M-$+1);for(M=0;M<B.length;M++)if(B[M]>" "){var U=B.indexOf(`
`);if(U>=0){var H=[B.substr(0,U),B.substr(U+1)];return F&&H[0].trim().length===0&&H.shift(),H}else return[B]}return[]}function E($){function F(B,U){var H,D,z,W;switch(typeof B){case"string":B.indexOf(U)>=0&&(W=B);break;case"object":if(Object.prototype.toString.apply(B)==="[object Array]")for(H=0,z=B.length;H<z;H++)W=F(B[H],U)||W;else for(D in B)Object.prototype.hasOwnProperty.call(B,D)&&(W=F(B[D],U)||W)}return W}function M(B){var U=F($,B);return U?"found '"+B+`' in a string value, your mistake could be with:
  > `+U+`
  (unquoted strings contain everything up to the next line!)`:""}return M("}")||M("]")}function T(){var $=[],F,M,B;try{if(u&&(F=n.createComment($,{a:[]})),h(),M=s,v(),F&&(B=w(M,!0).join(`
`)),o==="]")return h(),F&&(F.e=[B]),$;for(;o;){if($.push(A()),M=s,v(),o===","&&(h(),M=s,v()),F){var U=w(M);F.a.push([B||"",U[0]||""]),B=U[1]}if(o==="]")return h(),F&&(F.a[F.a.length-1][1]+=B||""),$;v()}d("End of input while parsing an array (missing ']')")}catch(H){throw H.hint=H.hint||E($),H}}function S($){var F="",M={},B,U,H;try{if(u&&(B=n.createComment(M,{c:{},o:[]})),$?U=1:(h(),U=s),v(),B&&(H=w(U,!0).join(`
`)),o==="}"&&!$)return B&&(B.e=[H]),h(),M;for(;o;){if(F=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),M[F]=A(),U=s,v(),o===","&&(h(),U=s,v()),B){var D=w(U);B.c[F]=[H||"",D[0]||""],H=D[1],B.o.push(F)}if(o==="}"&&!$)return h(),B&&(B.c[F][1]+=H||""),M;v()}if($)return M;d("End of input while parsing an object (missing '}')")}catch(z){throw z.hint=z.hint||E(M),z}}function A(){switch(v(),o){case"{":return S();case"[":return T();case"'":case'"':return m(!0);default:return b()}}function C($,F){var M=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var B=F.join(`
`),U=w(M).join(`
`);if(U||B){var H=n.createComment($,n.getComment($));H.r=[B,U]}}return $}function k(){v();var $=u?w(1):null;switch(o){case"{":return C(S(),$);case"[":return C(T(),$);default:return C(A(),$)}}function N(){v();var $=u?w(1):null;switch(o){case"{":return C(S(),$);case"[":return C(T(),$)}try{return C(S(!0),$)}catch(F){c();try{return C(A(),$)}catch{throw F}}}if(typeof e!="string")throw new Error("source is not a string");var O=null,P=!0;return t&&typeof t=="object"&&(u=t.keepWsc,O=t.dsf,P=t.legacyRoot!==!1),l=r.loadDsf(O,"parse"),i=e,c(),P?N():k()},WTt=function(e,t){var n=J6,r=vQ,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var w,E="---\u2028--\uFEFF-",T=new RegExp('[\\\\\\"\0-'+E+"]","g"),S=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),A=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),C=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),k={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},N=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,O="",P=0;function $(W,j){return P+=W[0].length+W[1].length-W[2]-W[3],W[0]+j+W[1]}function F(W){return W.replace(T,function(j){var q=k[j];return typeof q=="string"?$(g.esc,q):$(g.uni,("0000"+j.charCodeAt(0).toString(16)).slice(-4))})}function M(W,j,q,G){return W?(S.lastIndex=0,C.lastIndex=0,c||q||S.test(W)||n.tryParseNumber(W,!0)!==void 0||C.test(W)?(T.lastIndex=0,A.lastIndex=0,T.test(W)?!A.test(W)&&!G&&d?B(W,j):$(g.qstr,F(W)):$(g.qstr,W)):$(g.str,W)):$(g.qstr,"")}function B(W,j){var q,G=W.replace(/\r/g,"").split(`
`);if(j+=o,G.length===1)return $(g.mstr,G[0]);var re=s+j+g.mstr[0];for(q=0;q<G.length;q++)re+=s,G[q]&&(re+=j+G[q]);return re+s+j+g.mstr[1]}function U(W){return W?l||N.test(W)?(T.lastIndex=0,$(g.qkey,T.test(W)?F(W):W)):$(g.key,W):'""'}function H(W,j,q,G){function re(pn){return pn&&pn[pn[0]==="\r"?1:0]===`
`}function de(pn){return pn&&!re(pn)}function pe(pn,Tn,er){if(!pn)return"";pn=n.forceComment(pn);var tr,jo=pn.length;for(tr=0;tr<jo&&pn[tr]<=" ";tr++);return er&&tr>0&&(pn=pn.substr(tr)),tr<jo?Tn+$(g.rem,pn):pn}var ge=w(W);if(ge!==void 0)return $(g.dsf,ge);switch(typeof W){case"string":return M(W,O,j,G);case"number":return isFinite(W)?$(g.num,String(W)):$(g.lit,"null");case"boolean":return $(g.lit,String(W));case"object":if(!W)return $(g.lit,"null");var Ee;a&&(Ee=n.getComment(W));var Z=Object.prototype.toString.apply(W)==="[object Array]",Q=O;O+=o;var fe=s+Q,be=s+O,Me=q||u?"":fe,Be=[],ve,Re=f?[]:null,He=c,Ze=d,bt=h?"":g.com[0],Ge=0,ye,pt,vt,_e,Ne,Ye,ct,wt,$n;if(Z){for(ye=0,pt=W.length;ye<pt;ye++){if(ve=ye<pt-1,Ee?(Ye=Ee.a[ye]||[],ct=de(Ye[1]),Be.push(pe(Ye[0],`
`)+be),Re&&(Ye[0]||Ye[1]||ct)&&(Re=null)):Be.push(be),P=0,_e=W[ye],Be.push(H(_e,Ee?ct:!1,!0)+(ve?h:"")),Re){switch(typeof _e){case"string":P=0,c=!0,d=0,Re.push(H(_e,!1,!0)+(ve?g.com[0]:"")),c=He,d=Ze;break;case"object":if(_e){Re=null;break}default:Re.push(Be[Be.length-1]+(ve?bt:""));break}ve&&(P+=g.com[0].length-g.com[2]),Ge+=P}Ee&&Ye[1]&&Be.push(pe(Ye[1],ct?" ":`
`,ct))}pt===0?Ee&&Ee.e&&Be.push(pe(Ee.e[0],`
`)+fe):Be.push(fe),Be.length===0?wt=$(g.arr,""):(wt=Me+$(g.arr,Be.join("")),Re&&($n=Re.join(" "),$n.length-Ge<=f&&(wt=$(g.arr,$n))))}else{var Sr=Ee?Ee.o.slice():[],Mn=[];for(vt in W)Object.prototype.hasOwnProperty.call(W,vt)&&Sr.indexOf(vt)<0&&Mn.push(vt);m&&Mn.sort();var ur=Sr.concat(Mn);for(ye=0,pt=ur.length;ye<pt;ye++)if(ve=ye<pt-1,vt=ur[ye],Ee?(Ye=Ee.c[vt]||[],ct=de(Ye[1]),Be.push(pe(Ye[0],`
`)+be),Re&&(Ye[0]||Ye[1]||ct)&&(Re=null)):Be.push(be),P=0,_e=W[vt],Ne=H(_e,Ee&&ct),Be.push(U(vt)+g.col[0]+(re(Ne)?"":" ")+Ne+(ve?h:"")),Ee&&Ye[1]&&Be.push(pe(Ye[1],ct?" ":`
`,ct)),Re){switch(typeof _e){case"string":P=0,c=!0,d=0,Ne=H(_e,!1),c=He,d=Ze,Re.push(U(vt)+g.col[0]+" "+Ne+(ve?g.com[0]:""));break;case"object":if(_e){Re=null;break}default:Re.push(Be[Be.length-1]+(ve?bt:""));break}P+=g.col[0].length-g.col[2],ve&&(P+=g.com[0].length-g.com[2]),Ge+=P}pt===0?Ee&&Ee.e&&Be.push(pe(Ee.e[0],`
`)+fe):Be.push(fe),Be.length===0?wt=$(g.obj,""):(wt=Me+$(g.obj,Be.join("")),Re&&($n=Re.join(" "),$n.length-Ge<=f&&(wt=$(g.obj,$n))))}return O=Q,wt}}w=r.loadDsf(p,"stringify");var D="",z=a?z=(n.getComment(e)||{}).r:null;return z&&z[0]&&(D=z[0]+`
`),D+=H(e,null,!0,!0),z&&(D+=z[1]||""),D},Xw=J6;function wA(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function Xz(e,t){if(!(e===null||typeof e!="object")){var n=Xw.getComment(e);n&&Xw.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)$fe(o.a,r,n.a[r],Xz(e[r]))&&(s=!0);!s&&n.e&&(o.e=wA(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];$fe(o.s,l,n.c[l],Xz(e[l]))&&(s=!0)}!s&&n.e&&(o.e=wA(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=wA(n.r[0],n.r[1])),s?o:void 0}}function GTt(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function YTt(e,t){var n=[];if(Qz(e,t,n,[]),n.length>0){var r=b$(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+GTt(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),b$(t,r,1)}}function $fe(e,t,n,r){var i=wA(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function EA(e,t){var n=wA(t.b,t.a);return n.path=e,n}function xA(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(EA(s,o)),xA(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(EA(u,l)),xA(l.x,t,u))});e.e&&t.push(EA(n,e.e))}}function Qz(e,t,n,r){if(e){if(t===null||typeof t!="object"){xA(e,n,r);return}var i,s=Xw.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],Qz(u.x,t[i],n,l)):(n.push(EA(l,u)),xA(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],Qz(d.x,t[c],n,f))):d&&(n.push(EA(f,d)),xA(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function b$(e,t,n){var r=Xw.createComment(e,Xw.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=Xw.forceComment(t)),r.r[n]||""}var KTt={extract:function(e){return Xz(e,!0)},merge:YTt,header:function(e,t){return b$(e,t,0)},footer:function(e,t){return b$(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var Mfe=J6,XTt=UTt,Lfe=qTt,Ffe=WTt,QTt=KTt,JTt=vQ,bQ={parse:Lfe,stringify:Ffe,endOfLine:function(){return Mfe.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(Mfe.EOL=e)},version:XTt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,Lfe(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,Ffe(e,t)}},comments:QTt,dsf:JTt.std},Jz={exports:{}},zke={},cp={},iv={},kk={},Nn={},QC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,w)=>`${b}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,w)=>(w instanceof n&&(b[w.str]=(b[w.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let w=0;for(;w<v.length;)a(b,v[w]),b.push(y[++w]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let w=0;for(;w<v.length;)b.push(s),a(b,v[w]),b.push(s,h(y[++w]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(QC);var Zz={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=QC;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(Zz);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=QC,n=Zz;var r=QC;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=Zz;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(q,G){return this}}class o extends s{constructor(q,G,re){super(),this.varKind=q,this.name=G,this.rhs=re}render({es5:q,_n:G}){const re=q?n.varKinds.var:this.varKind,de=this.rhs===void 0?"":` = ${this.rhs}`;return`${re} ${this.name}${de};`+G}optimizeNames(q,G){if(q[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,q,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(q,G,re){super(),this.lhs=q,this.rhs=G,this.sideEffects=re}render({_n:q}){return`${this.lhs} = ${this.rhs};`+q}optimizeNames(q,G){if(!(this.lhs instanceof t.Name&&!q[this.lhs.str]&&!this.sideEffects))return this.rhs=$(this.rhs,q,G),this}get names(){const q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return P(q,this.rhs)}}class u extends a{constructor(q,G,re,de){super(q,re,de),this.op=G}render({_n:q}){return`${this.lhs} ${this.op}= ${this.rhs};`+q}}class l extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`${this.label}:`+q}}class c extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`break${this.label?` ${this.label}`:""};`+q}}class f extends s{constructor(q){super(),this.error=q}render({_n:q}){return`throw ${this.error};`+q}get names(){return this.error.names}}class d extends s{constructor(q){super(),this.code=q}render({_n:q}){return`${this.code};`+q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(q,G){return this.code=$(this.code,q,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(q=[]){super(),this.nodes=q}render(q){return this.nodes.reduce((G,re)=>G+re.render(q),"")}optimizeNodes(){const{nodes:q}=this;let G=q.length;for(;G--;){const re=q[G].optimizeNodes();Array.isArray(re)?q.splice(G,1,...re):re?q[G]=re:q.splice(G,1)}return q.length>0?this:void 0}optimizeNames(q,G){const{nodes:re}=this;let de=re.length;for(;de--;){const pe=re[de];pe.optimizeNames(q,G)||(F(q,pe.names),re.splice(de,1))}return re.length>0?this:void 0}get names(){return this.nodes.reduce((q,G)=>O(q,G.names),{})}}class p extends h{render(q){return"{"+q._n+super.render(q)+"}"+q._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(q,G){super(G),this.condition=q}render(q){let G=`if(${this.condition})`+super.render(q);return this.else&&(G+="else "+this.else.render(q)),G}optimizeNodes(){super.optimizeNodes();const q=this.condition;if(q===!0)return this.nodes;let G=this.else;if(G){const re=G.optimizeNodes();G=this.else=Array.isArray(re)?new g(re):re}if(G)return q===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(M(q),G instanceof y?[G]:G.nodes);if(!(q===!1||!this.nodes.length))return this}optimizeNames(q,G){var re;if(this.else=(re=this.else)===null||re===void 0?void 0:re.optimizeNames(q,G),!!(super.optimizeNames(q,G)||this.else))return this.condition=$(this.condition,q,G),this}get names(){const q=super.names;return P(q,this.condition),this.else&&O(q,this.else.names),q}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(q){super(),this.iteration=q}render(q){return`for(${this.iteration})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iteration=$(this.iteration,q,G),this}get names(){return O(super.names,this.iteration.names)}}class w extends v{constructor(q,G,re,de){super(),this.varKind=q,this.name=G,this.from=re,this.to=de}render(q){const G=q.es5?n.varKinds.var:this.varKind,{name:re,from:de,to:pe}=this;return`for(${G} ${re}=${de}; ${re}<${pe}; ${re}++)`+super.render(q)}get names(){const q=P(super.names,this.from);return P(q,this.to)}}class E extends v{constructor(q,G,re,de){super(),this.loop=q,this.varKind=G,this.name=re,this.iterable=de}render(q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iterable=$(this.iterable,q,G),this}get names(){return O(super.names,this.iterable.names)}}class T extends p{constructor(q,G,re){super(),this.name=q,this.args=G,this.async=re}render(q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(q)}}T.kind="func";class S extends h{render(q){return"return "+super.render(q)}}S.kind="return";class A extends p{render(q){let G="try"+super.render(q);return this.catch&&(G+=this.catch.render(q)),this.finally&&(G+=this.finally.render(q)),G}optimizeNodes(){var q,G;return super.optimizeNodes(),(q=this.catch)===null||q===void 0||q.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(q,G){var re,de;return super.optimizeNames(q,G),(re=this.catch)===null||re===void 0||re.optimizeNames(q,G),(de=this.finally)===null||de===void 0||de.optimizeNames(q,G),this}get names(){const q=super.names;return this.catch&&O(q,this.catch.names),this.finally&&O(q,this.finally.names),q}}class C extends p{constructor(q){super(),this.error=q}render(q){return`catch(${this.error})`+super.render(q)}}C.kind="catch";class k extends p{render(q){return"finally"+super.render(q)}}k.kind="finally";class N{constructor(q,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=q,this._scope=new n.Scope({parent:q}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(q){return this._scope.name(q)}scopeName(q){return this._extScope.name(q)}scopeValue(q,G){const re=this._extScope.value(q,G);return(this._values[re.prefix]||(this._values[re.prefix]=new Set)).add(re),re}getScopeValue(q,G){return this._extScope.getValue(q,G)}scopeRefs(q){return this._extScope.scopeRefs(q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(q,G,re,de){const pe=this._scope.toName(G);return re!==void 0&&de&&(this._constants[pe.str]=re),this._leafNode(new o(q,pe,re)),pe}const(q,G,re){return this._def(n.varKinds.const,q,G,re)}let(q,G,re){return this._def(n.varKinds.let,q,G,re)}var(q,G,re){return this._def(n.varKinds.var,q,G,re)}assign(q,G,re){return this._leafNode(new a(q,G,re))}add(q,G){return this._leafNode(new u(q,e.operators.ADD,G))}code(q){return typeof q=="function"?q():q!==t.nil&&this._leafNode(new d(q)),this}object(...q){const G=["{"];for(const[re,de]of q)G.length>1&&G.push(","),G.push(re),(re!==de||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,de));return G.push("}"),new t._Code(G)}if(q,G,re){if(this._blockNode(new y(q)),G&&re)this.code(G).else().code(re).endIf();else if(G)this.code(G).endIf();else if(re)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(q){return this._elseNode(new y(q))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(q,G){return this._blockNode(q),G&&this.code(G).endFor(),this}for(q,G){return this._for(new b(q),G)}forRange(q,G,re,de,pe=this.opts.es5?n.varKinds.var:n.varKinds.let){const ge=this._scope.toName(q);return this._for(new w(pe,ge,G,re),()=>de(ge))}forOf(q,G,re,de=n.varKinds.const){const pe=this._scope.toName(q);if(this.opts.es5){const ge=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${ge}.length`,Ee=>{this.var(pe,(0,t._)`${ge}[${Ee}]`),re(pe)})}return this._for(new E("of",de,pe,G),()=>re(pe))}forIn(q,G,re,de=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(q,(0,t._)`Object.keys(${G})`,re);const pe=this._scope.toName(q);return this._for(new E("in",de,pe,G),()=>re(pe))}endFor(){return this._endBlockNode(v)}label(q){return this._leafNode(new l(q))}break(q){return this._leafNode(new c(q))}return(q){const G=new S;if(this._blockNode(G),this.code(q),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(q,G,re){if(!G&&!re)throw new Error('CodeGen: "try" without "catch" and "finally"');const de=new A;if(this._blockNode(de),this.code(q),G){const pe=this.name("e");this._currNode=de.catch=new C(pe),G(pe)}return re&&(this._currNode=de.finally=new k,this.code(re)),this._endBlockNode(C,k)}throw(q){return this._leafNode(new f(q))}block(q,G){return this._blockStarts.push(this._nodes.length),q&&this.code(q).endBlock(G),this}endBlock(q){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const re=this._nodes.length-G;if(re<0||q!==void 0&&re!==q)throw new Error(`CodeGen: wrong number of nodes: ${re} vs ${q} expected`);return this._nodes.length=G,this}func(q,G=t.nil,re,de){return this._blockNode(new T(q,G,re)),de&&this.code(de).endFunc(),this}endFunc(){return this._endBlockNode(T)}optimize(q=1){for(;q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(q){return this._currNode.nodes.push(q),this}_blockNode(q){this._currNode.nodes.push(q),this._nodes.push(q)}_endBlockNode(q,G){const re=this._currNode;if(re instanceof q||G&&re instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${q.kind}/${G.kind}`:q.kind}"`)}_elseNode(q){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=q,this}get _root(){return this._nodes[0]}get _currNode(){const q=this._nodes;return q[q.length-1]}set _currNode(q){const G=this._nodes;G[G.length-1]=q}}e.CodeGen=N;function O(j,q){for(const G in q)j[G]=(j[G]||0)+(q[G]||0);return j}function P(j,q){return q instanceof t._CodeOrName?O(j,q.names):j}function $(j,q,G){if(j instanceof t.Name)return re(j);if(!de(j))return j;return new t._Code(j._items.reduce((pe,ge)=>(ge instanceof t.Name&&(ge=re(ge)),ge instanceof t._Code?pe.push(...ge._items):pe.push(ge),pe),[]));function re(pe){const ge=G[pe.str];return ge===void 0||q[pe.str]!==1?pe:(delete q[pe.str],ge)}function de(pe){return pe instanceof t._Code&&pe._items.some(ge=>ge instanceof t.Name&&q[ge.str]===1&&G[ge.str]!==void 0)}}function F(j,q){for(const G in q)j[G]=(j[G]||0)-(q[G]||0)}function M(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,t._)`!${W(j)}`}e.not=M;const B=z(e.operators.AND);function U(...j){return j.reduce(B)}e.and=U;const H=z(e.operators.OR);function D(...j){return j.reduce(H)}e.or=D;function z(j){return(q,G)=>q===t.nil?G:G===t.nil?q:(0,t._)`${W(q)} ${j} ${W(G)}`}function W(j){return j instanceof t.Name?j:(0,t._)`(${j})`}})(Nn);var Et={};Object.defineProperty(Et,"__esModule",{value:!0});Et.checkStrictMode=Et.getErrorPath=Et.Type=Et.useFunc=Et.setEvaluated=Et.evaluatedPropsToName=Et.mergeEvaluated=Et.eachItem=Et.unescapeJsonPointer=Et.escapeJsonPointer=Et.escapeFragment=Et.unescapeFragment=Et.schemaRefOrVal=Et.schemaHasRulesButRef=Et.schemaHasRules=Et.checkUnknownRules=Et.alwaysValidSchema=Et.toHash=void 0;const Wr=Nn,ZTt=QC;function e2t(e){const t={};for(const n of e)t[n]=!0;return t}Et.toHash=e2t;function t2t(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Vke(e,t),!Hke(t,e.self.RULES.all))}Et.alwaysValidSchema=t2t;function Vke(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||Gke(e,`unknown keyword: "${s}"`)}Et.checkUnknownRules=Vke;function Hke(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}Et.schemaHasRules=Hke;function n2t(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}Et.schemaHasRulesButRef=n2t;function r2t({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Wr._)`${n}`}return(0,Wr._)`${e}${t}${(0,Wr.getProperty)(r)}`}Et.schemaRefOrVal=r2t;function i2t(e){return qke(decodeURIComponent(e))}Et.unescapeFragment=i2t;function s2t(e){return encodeURIComponent(_Q(e))}Et.escapeFragment=s2t;function _Q(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}Et.escapeJsonPointer=_Q;function qke(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Et.unescapeJsonPointer=qke;function o2t(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}Et.eachItem=o2t;function jfe({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Wr.Name?(s instanceof Wr.Name?e(i,s,o):t(i,s,o),o):s instanceof Wr.Name?(t(i,o,s),s):n(s,o);return a===Wr.Name&&!(u instanceof Wr.Name)?r(i,u):u}}Et.mergeEvaluated={props:jfe({mergeNames:(e,t,n)=>e.if((0,Wr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Wr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Wr._)`${n} || {}`).code((0,Wr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Wr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Wr._)`${n} || {}`),wQ(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Wke}),items:jfe({mergeNames:(e,t,n)=>e.if((0,Wr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Wr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Wr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Wr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Wke(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Wr._)`{}`);return t!==void 0&&wQ(e,n,t),n}Et.evaluatedPropsToName=Wke;function wQ(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Wr._)`${t}${(0,Wr.getProperty)(r)}`,!0))}Et.setEvaluated=wQ;const Bfe={};function a2t(e,t){return e.scopeValue("func",{ref:t,code:Bfe[t.code]||(Bfe[t.code]=new ZTt._Code(t.code))})}Et.useFunc=a2t;var eV;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(eV||(Et.Type=eV={}));function u2t(e,t,n){if(e instanceof Wr.Name){const r=t===eV.Num;return n?r?(0,Wr._)`"[" + ${e} + "]"`:(0,Wr._)`"['" + ${e} + "']"`:r?(0,Wr._)`"/" + ${e}`:(0,Wr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Wr.getProperty)(e).toString():"/"+_Q(e)}Et.getErrorPath=u2t;function Gke(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}Et.checkStrictMode=Gke;var Hh={};Object.defineProperty(Hh,"__esModule",{value:!0});const Qo=Nn,l2t={data:new Qo.Name("data"),valCxt:new Qo.Name("valCxt"),instancePath:new Qo.Name("instancePath"),parentData:new Qo.Name("parentData"),parentDataProperty:new Qo.Name("parentDataProperty"),rootData:new Qo.Name("rootData"),dynamicAnchors:new Qo.Name("dynamicAnchors"),vErrors:new Qo.Name("vErrors"),errors:new Qo.Name("errors"),this:new Qo.Name("this"),self:new Qo.Name("self"),scope:new Qo.Name("scope"),json:new Qo.Name("json"),jsonPos:new Qo.Name("jsonPos"),jsonLen:new Qo.Name("jsonLen"),jsonPart:new Qo.Name("jsonPart")};Hh.default=l2t;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Nn,n=Et,r=Hh;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:w}=g,{gen:E,compositeRule:T,allErrors:S}=w,A=f(g,y,v);b??(T||S)?u(E,A):l(w,(0,t._)`[${A}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:w,compositeRule:E,allErrors:T}=b,S=f(g,y,v);u(w,S),E||T||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const T=g.name("err");g.forRange("i",w,r.default.errors,S=>{g.const(T,(0,t._)`${r.default.vErrors}[${S}]`),g.if((0,t._)`${T}.instancePath === undefined`,()=>g.assign((0,t._)`${T}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${T}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${T}.schema`,v),g.assign((0,t._)`${T}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:w}=g,E=[h(w,v),p(g,v)];return m(g,y,E),b.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let w=b?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},b){const{keyword:w,data:E,schemaValue:T,it:S}=g,{opts:A,propertyName:C,topSchemaRef:k,schemaPath:N}=S;b.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),A.messages&&b.push([c.message,typeof v=="function"?v(g):v]),A.verbose&&b.push([c.schema,T],[c.parentSchema,(0,t._)`${k}${N}`],[r.default.data,E]),C&&b.push([c.propertyName,C])}})(kk);var Ufe;function c2t(){if(Ufe)return iv;Ufe=1,Object.defineProperty(iv,"__esModule",{value:!0}),iv.boolOrEmptySchema=iv.topBoolOrEmptySchema=void 0;const e=kk,t=Nn,n=Hh,r={message:"boolean schema is false"};function i(a){const{gen:u,schema:l,validateName:c}=a;l===!1?o(a,!1):typeof l=="object"&&l.$async===!0?u.return(n.default.data):(u.assign((0,t._)`${c}.errors`,null),u.return(!0))}iv.topBoolOrEmptySchema=i;function s(a,u){const{gen:l,schema:c}=a;c===!1?(l.var(u,!1),o(a)):l.var(u,!0)}iv.boolOrEmptySchema=s;function o(a,u){const{gen:l,data:c}=a,f={gen:l,keyword:"false schema",data:c,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(f,r,void 0,u)}return iv}var Cs={},Y1={};Object.defineProperty(Y1,"__esModule",{value:!0});Y1.getRules=Y1.isJSONType=void 0;const f2t=["string","number","integer","boolean","null","object","array"],d2t=new Set(f2t);function h2t(e){return typeof e=="string"&&d2t.has(e)}Y1.isJSONType=h2t;function p2t(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Y1.getRules=p2t;var Jp={};Object.defineProperty(Jp,"__esModule",{value:!0});Jp.shouldUseRule=Jp.shouldUseGroup=Jp.schemaHasRulesForType=void 0;function m2t({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&Yke(e,r)}Jp.schemaHasRulesForType=m2t;function Yke(e,t){return t.rules.some(n=>Kke(e,n))}Jp.shouldUseGroup=Yke;function Kke(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Jp.shouldUseRule=Kke;Object.defineProperty(Cs,"__esModule",{value:!0});Cs.reportTypeError=Cs.checkDataTypes=Cs.checkDataType=Cs.coerceAndCheckDataType=Cs.getJSONTypes=Cs.getSchemaTypes=Cs.DataType=void 0;const g2t=Y1,y2t=Jp,v2t=kk,bn=Nn,Xke=Et;var Qw;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Qw||(Cs.DataType=Qw={}));function b2t(e){const t=Qke(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Cs.getSchemaTypes=b2t;function Qke(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(g2t.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Cs.getJSONTypes=Qke;function _2t(e,t){const{gen:n,data:r,opts:i}=e,s=w2t(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,y2t.schemaHasRulesForType)(e,t[0]));if(o){const a=EQ(t,r,i.strictNumbers,Qw.Wrong);n.if(a,()=>{s.length?E2t(e,t,s):xQ(e)})}return o}Cs.coerceAndCheckDataType=_2t;const Jke=new Set(["string","number","integer","boolean","null"]);function w2t(e,t){return t?e.filter(n=>Jke.has(n)||t==="array"&&n==="array"):[]}function E2t(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,bn._)`typeof ${i}`),a=r.let("coerced",(0,bn._)`undefined`);s.coerceTypes==="array"&&r.if((0,bn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,bn._)`${i}[0]`).assign(o,(0,bn._)`typeof ${i}`).if(EQ(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,bn._)`${a} !== undefined`);for(const l of n)(Jke.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),xQ(e),r.endIf(),r.if((0,bn._)`${a} !== undefined`,()=>{r.assign(i,a),x2t(e,a)});function u(l){switch(l){case"string":r.elseIf((0,bn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,bn._)`"" + ${i}`).elseIf((0,bn._)`${i} === null`).assign(a,(0,bn._)`""`);return;case"number":r.elseIf((0,bn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,bn._)`+${i}`);return;case"integer":r.elseIf((0,bn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,bn._)`+${i}`);return;case"boolean":r.elseIf((0,bn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,bn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,bn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,bn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,bn._)`[${i}]`)}}}function x2t({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,bn._)`${t} !== undefined`,()=>e.assign((0,bn._)`${t}[${n}]`,r))}function tV(e,t,n,r=Qw.Correct){const i=r===Qw.Correct?bn.operators.EQ:bn.operators.NEQ;let s;switch(e){case"null":return(0,bn._)`${t} ${i} null`;case"array":s=(0,bn._)`Array.isArray(${t})`;break;case"object":s=(0,bn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,bn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,bn._)`typeof ${t} ${i} ${e}`}return r===Qw.Correct?s:(0,bn.not)(s);function o(a=bn.nil){return(0,bn.and)((0,bn._)`typeof ${t} == "number"`,a,n?(0,bn._)`isFinite(${t})`:bn.nil)}}Cs.checkDataType=tV;function EQ(e,t,n,r){if(e.length===1)return tV(e[0],t,n,r);let i;const s=(0,Xke.toHash)(e);if(s.array&&s.object){const o=(0,bn._)`typeof ${t} != "object"`;i=s.null?o:(0,bn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=bn.nil;s.number&&delete s.integer;for(const o in s)i=(0,bn.and)(i,tV(o,t,n,r));return i}Cs.checkDataTypes=EQ;const S2t={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,bn._)`{type: ${e}}`:(0,bn._)`{type: ${t}}`};function xQ(e){const t=T2t(e);(0,v2t.reportError)(t,S2t)}Cs.reportTypeError=xQ;function T2t(e){const{gen:t,data:n,schema:r}=e,i=(0,Xke.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var IT={},zfe;function A2t(){if(zfe)return IT;zfe=1,Object.defineProperty(IT,"__esModule",{value:!0}),IT.assignDefaults=void 0;const e=Nn,t=Et;function n(i,s){const{properties:o,items:a}=i.schema;if(s==="object"&&o)for(const u in o)r(i,u,o[u].default);else s==="array"&&Array.isArray(a)&&a.forEach((u,l)=>r(i,l,u.default))}IT.assignDefaults=n;function r(i,s,o){const{gen:a,compositeRule:u,data:l,opts:c}=i;if(o===void 0)return;const f=(0,e._)`${l}${(0,e.getProperty)(s)}`;if(u){(0,t.checkStrictMode)(i,`default is ignored for: ${f}`);return}let d=(0,e._)`${f} === undefined`;c.useDefaults==="empty"&&(d=(0,e._)`${d} || ${f} === null || ${f} === ""`),a.if(d,(0,e._)`${f} = ${(0,e.stringify)(o)}`)}return IT}var Kc={},kn={};Object.defineProperty(kn,"__esModule",{value:!0});kn.validateUnion=kn.validateArray=kn.usePattern=kn.callValidateCode=kn.schemaProperties=kn.allSchemaProperties=kn.noPropertyInData=kn.propertyInData=kn.isOwnProperty=kn.hasPropFunc=kn.reportMissingProp=kn.checkMissingProp=kn.checkReportMissingProp=void 0;const si=Nn,SQ=Et,dg=Hh,C2t=Et;function I2t(e,t){const{gen:n,data:r,it:i}=e;n.if(AQ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,si._)`${t}`},!0),e.error()})}kn.checkReportMissingProp=I2t;function k2t({gen:e,data:t,it:{opts:n}},r,i){return(0,si.or)(...r.map(s=>(0,si.and)(AQ(e,t,s,n.ownProperties),(0,si._)`${i} = ${s}`)))}kn.checkMissingProp=k2t;function R2t(e,t){e.setParams({missingProperty:t},!0),e.error()}kn.reportMissingProp=R2t;function Zke(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,si._)`Object.prototype.hasOwnProperty`})}kn.hasPropFunc=Zke;function TQ(e,t,n){return(0,si._)`${Zke(e)}.call(${t}, ${n})`}kn.isOwnProperty=TQ;function N2t(e,t,n,r){const i=(0,si._)`${t}${(0,si.getProperty)(n)} !== undefined`;return r?(0,si._)`${i} && ${TQ(e,t,n)}`:i}kn.propertyInData=N2t;function AQ(e,t,n,r){const i=(0,si._)`${t}${(0,si.getProperty)(n)} === undefined`;return r?(0,si.or)(i,(0,si.not)(TQ(e,t,n))):i}kn.noPropertyInData=AQ;function eRe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}kn.allSchemaProperties=eRe;function P2t(e,t){return eRe(t).filter(n=>!(0,SQ.alwaysValidSchema)(e,t[n]))}kn.schemaProperties=P2t;function D2t({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,si._)`${e}, ${t}, ${r}${i}`:t,f=[[dg.default.instancePath,(0,si.strConcat)(dg.default.instancePath,s)],[dg.default.parentData,o.parentData],[dg.default.parentDataProperty,o.parentDataProperty],[dg.default.rootData,dg.default.rootData]];o.opts.dynamicRef&&f.push([dg.default.dynamicAnchors,dg.default.dynamicAnchors]);const d=(0,si._)`${c}, ${n.object(...f)}`;return u!==si.nil?(0,si._)`${a}.call(${u}, ${d})`:(0,si._)`${a}(${d})`}kn.callValidateCode=D2t;const O2t=(0,si._)`new RegExp`;function $2t({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,si._)`${i.code==="new RegExp"?O2t:(0,C2t.useFunc)(e,i)}(${n}, ${r})`})}kn.usePattern=$2t;function M2t(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,si._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:SQ.Type.Num},s),t.if((0,si.not)(s),a)})}}kn.validateArray=M2t;function L2t(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,SQ.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,si._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,si.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}kn.validateUnion=L2t;var Vfe;function F2t(){if(Vfe)return Kc;Vfe=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.validateKeywordUsage=Kc.validSchemaType=Kc.funcKeywordCode=Kc.macroKeywordCode=void 0;const e=Nn,t=Hh,n=kn,r=kk;function i(d,h){const{gen:p,keyword:m,schema:g,parentSchema:y,it:v}=d,b=h.macro.call(v.self,g,y,v),w=l(p,m,b);v.opts.validateSchema!==!1&&v.self.validateSchema(b,!0);const E=p.name("valid");d.subschema({schema:b,schemaPath:e.nil,errSchemaPath:`${v.errSchemaPath}/${m}`,topSchemaRef:w,compositeRule:!0},E),d.pass(E,()=>d.error(!0))}Kc.macroKeywordCode=i;function s(d,h){var p;const{gen:m,keyword:g,schema:y,parentSchema:v,$data:b,it:w}=d;u(w,h);const E=!b&&h.compile?h.compile.call(w.self,y,v,w):h.validate,T=l(m,g,E),S=m.let("valid");d.block$data(S,A),d.ok((p=h.valid)!==null&&p!==void 0?p:S);function A(){if(h.errors===!1)N(),h.modifying&&o(d),O(()=>d.error());else{const P=h.async?C():k();h.modifying&&o(d),O(()=>a(d,P))}}function C(){const P=m.let("ruleErrs",null);return m.try(()=>N((0,e._)`await `),$=>m.assign(S,!1).if((0,e._)`${$} instanceof ${w.ValidationError}`,()=>m.assign(P,(0,e._)`${$}.errors`),()=>m.throw($))),P}function k(){const P=(0,e._)`${T}.errors`;return m.assign(P,null),N(e.nil),P}function N(P=h.async?(0,e._)`await `:e.nil){const $=w.opts.passContext?t.default.this:t.default.self,F=!("compile"in h&&!b||h.schema===!1);m.assign(S,(0,e._)`${P}${(0,n.callValidateCode)(d,T,$,F)}`,h.modifying)}function O(P){var $;m.if((0,e.not)(($=h.valid)!==null&&$!==void 0?$:S),P)}}Kc.funcKeywordCode=s;function o(d){const{gen:h,data:p,it:m}=d;h.if(m.parentData,()=>h.assign(p,(0,e._)`${m.parentData}[${m.parentDataProperty}]`))}function a(d,h){const{gen:p}=d;p.if((0,e._)`Array.isArray(${h})`,()=>{p.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${h} : ${t.default.vErrors}.concat(${h})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(d)},()=>d.error())}function u({schemaEnv:d},h){if(h.async&&!d.$async)throw new Error("async keyword in sync schema")}function l(d,h,p){if(p===void 0)throw new Error(`keyword "${h}" failed to compile`);return d.scopeValue("keyword",typeof p=="function"?{ref:p}:{ref:p,code:(0,e.stringify)(p)})}function c(d,h,p=!1){return!h.length||h.some(m=>m==="array"?Array.isArray(d):m==="object"?d&&typeof d=="object"&&!Array.isArray(d):typeof d==m||p&&typeof d>"u")}Kc.validSchemaType=c;function f({schema:d,opts:h,self:p,errSchemaPath:m},g,y){if(Array.isArray(g.keyword)?!g.keyword.includes(y):g.keyword!==y)throw new Error("ajv implementation error");const v=g.dependencies;if(v!=null&&v.some(b=>!Object.prototype.hasOwnProperty.call(d,b)))throw new Error(`parent schema must have dependencies of ${y}: ${v.join(",")}`);if(g.validateSchema&&!g.validateSchema(d[y])){const w=`keyword "${y}" value is invalid at path "${m}": `+p.errorsText(g.validateSchema.errors);if(h.validateSchema==="log")p.logger.error(w);else throw new Error(w)}}return Kc.validateKeywordUsage=f,Kc}var fp={},Hfe;function j2t(){if(Hfe)return fp;Hfe=1,Object.defineProperty(fp,"__esModule",{value:!0}),fp.extendSubschemaMode=fp.extendSubschemaData=fp.getSubschema=void 0;const e=Nn,t=Et;function n(s,{keyword:o,schemaProp:a,schema:u,schemaPath:l,errSchemaPath:c,topSchemaRef:f}){if(o!==void 0&&u!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const d=s.schema[o];return a===void 0?{schema:d,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}`,errSchemaPath:`${s.errSchemaPath}/${o}`}:{schema:d[a],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${o}/${(0,t.escapeFragment)(a)}`}}if(u!==void 0){if(l===void 0||c===void 0||f===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:u,schemaPath:l,topSchemaRef:f,errSchemaPath:c}}throw new Error('either "keyword" or "schema" must be passed')}fp.getSubschema=n;function r(s,o,{dataProp:a,dataPropType:u,data:l,dataTypes:c,propertyName:f}){if(l!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:d}=o;if(a!==void 0){const{errorPath:p,dataPathArr:m,opts:g}=o,y=d.let("data",(0,e._)`${o.data}${(0,e.getProperty)(a)}`,!0);h(y),s.errorPath=(0,e.str)`${p}${(0,t.getErrorPath)(a,u,g.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${a}`,s.dataPathArr=[...m,s.parentDataProperty]}if(l!==void 0){const p=l instanceof e.Name?l:d.let("data",l,!0);h(p),f!==void 0&&(s.propertyName=f)}c&&(s.dataTypes=c);function h(p){s.data=p,s.dataLevel=o.dataLevel+1,s.dataTypes=[],o.definedProperties=new Set,s.parentData=o.data,s.dataNames=[...o.dataNames,p]}}fp.extendSubschemaData=r;function i(s,{jtdDiscriminator:o,jtdMetadata:a,compositeRule:u,createErrors:l,allErrors:c}){u!==void 0&&(s.compositeRule=u),l!==void 0&&(s.createErrors=l),c!==void 0&&(s.allErrors=c),s.jtdDiscriminator=o,s.jtdMetadata=a}return fp.extendSubschemaMode=i,fp}var So={},tRe={exports:{}},Yg=tRe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};yD(t,r,i,e,"",e)};Yg.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Yg.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Yg.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Yg.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function yD(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in Yg.arrayKeywords)for(var d=0;d<f.length;d++)yD(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in Yg.propsKeywords){if(f&&typeof f=="object")for(var h in f)yD(e,t,n,f[h],i+"/"+c+"/"+B2t(h),s,i,c,r,h)}else(c in Yg.keywords||e.allKeys&&!(c in Yg.skipKeywords))&&yD(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function B2t(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var U2t=tRe.exports;Object.defineProperty(So,"__esModule",{value:!0});So.getSchemaRefs=So.resolveUrl=So.normalizeId=So._getFullPath=So.getFullPath=So.inlineRef=void 0;const z2t=Et,V2t=BY,H2t=U2t,q2t=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function W2t(e,t=!0){return typeof e=="boolean"?!0:t===!0?!nV(e):t?nRe(e)<=t:!1}So.inlineRef=W2t;const G2t=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function nV(e){for(const t in e){if(G2t.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(nV)||typeof n=="object"&&nV(n))return!0}return!1}function nRe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!q2t.has(n)&&(typeof e[n]=="object"&&(0,z2t.eachItem)(e[n],r=>t+=nRe(r)),t===1/0))return 1/0}return t}function rRe(e,t="",n){n!==!1&&(t=Jw(t));const r=e.parse(t);return iRe(e,r)}So.getFullPath=rRe;function iRe(e,t){return e.serialize(t).split("#")[0]+"#"}So._getFullPath=iRe;const Y2t=/#\/?$/;function Jw(e){return e?e.replace(Y2t,""):""}So.normalizeId=Jw;function K2t(e,t,n){return n=Jw(n),e.resolve(t,n)}So.resolveUrl=K2t;const X2t=/^[a-z_][-a-z0-9._]*$/i;function Q2t(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Jw(e[n]||t),s={"":i},o=rRe(r,i,!1),a={},u=new Set;return H2t(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const w=this.opts.uriResolver.resolve;if(b=Jw(g?w(g,b):b),u.has(b))throw c(b);u.add(b);let E=this.refs[b];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,b):b!==Jw(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!X2t.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!V2t(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}So.getSchemaRefs=Q2t;var qfe;function Z6(){if(qfe)return cp;qfe=1,Object.defineProperty(cp,"__esModule",{value:!0}),cp.getData=cp.KeywordCxt=cp.validateFunctionCode=void 0;const e=c2t(),t=Cs,n=Jp,r=Cs,i=A2t(),s=F2t(),o=j2t(),a=Nn,u=Hh,l=So,c=Et,f=kk;function d(Z){if(E(Z)&&(S(Z),w(Z))){g(Z);return}h(Z,()=>(0,e.topBoolOrEmptySchema)(Z))}cp.validateFunctionCode=d;function h({gen:Z,validateName:Q,schema:fe,schemaEnv:be,opts:Me},Be){Me.code.es5?Z.func(Q,(0,a._)`${u.default.data}, ${u.default.valCxt}`,be.$async,()=>{Z.code((0,a._)`"use strict"; ${v(fe,Me)}`),m(Z,Me),Z.code(Be)}):Z.func(Q,(0,a._)`${u.default.data}, ${p(Me)}`,be.$async,()=>Z.code(v(fe,Me)).code(Be))}function p(Z){return(0,a._)`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${Z.dynamicRef?(0,a._)`, ${u.default.dynamicAnchors}={}`:a.nil}}={}`}function m(Z,Q){Z.if(u.default.valCxt,()=>{Z.var(u.default.instancePath,(0,a._)`${u.default.valCxt}.${u.default.instancePath}`),Z.var(u.default.parentData,(0,a._)`${u.default.valCxt}.${u.default.parentData}`),Z.var(u.default.parentDataProperty,(0,a._)`${u.default.valCxt}.${u.default.parentDataProperty}`),Z.var(u.default.rootData,(0,a._)`${u.default.valCxt}.${u.default.rootData}`),Q.dynamicRef&&Z.var(u.default.dynamicAnchors,(0,a._)`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{Z.var(u.default.instancePath,(0,a._)`""`),Z.var(u.default.parentData,(0,a._)`undefined`),Z.var(u.default.parentDataProperty,(0,a._)`undefined`),Z.var(u.default.rootData,u.default.data),Q.dynamicRef&&Z.var(u.default.dynamicAnchors,(0,a._)`{}`)})}function g(Z){const{schema:Q,opts:fe,gen:be}=Z;h(Z,()=>{fe.$comment&&Q.$comment&&P(Z),k(Z),be.let(u.default.vErrors,null),be.let(u.default.errors,0),fe.unevaluated&&y(Z),A(Z),$(Z)})}function y(Z){const{gen:Q,validateName:fe}=Z;Z.evaluated=Q.const("evaluated",(0,a._)`${fe}.evaluated`),Q.if((0,a._)`${Z.evaluated}.dynamicProps`,()=>Q.assign((0,a._)`${Z.evaluated}.props`,(0,a._)`undefined`)),Q.if((0,a._)`${Z.evaluated}.dynamicItems`,()=>Q.assign((0,a._)`${Z.evaluated}.items`,(0,a._)`undefined`))}function v(Z,Q){const fe=typeof Z=="object"&&Z[Q.schemaId];return fe&&(Q.code.source||Q.code.process)?(0,a._)`/*# sourceURL=${fe} */`:a.nil}function b(Z,Q){if(E(Z)&&(S(Z),w(Z))){T(Z,Q);return}(0,e.boolOrEmptySchema)(Z,Q)}function w({schema:Z,self:Q}){if(typeof Z=="boolean")return!Z;for(const fe in Z)if(Q.RULES.all[fe])return!0;return!1}function E(Z){return typeof Z.schema!="boolean"}function T(Z,Q){const{schema:fe,gen:be,opts:Me}=Z;Me.$comment&&fe.$comment&&P(Z),N(Z),O(Z);const Be=be.const("_errs",u.default.errors);A(Z,Be),be.var(Q,(0,a._)`${Be} === ${u.default.errors}`)}function S(Z){(0,c.checkUnknownRules)(Z),C(Z)}function A(Z,Q){if(Z.opts.jtd)return M(Z,[],!1,Q);const fe=(0,t.getSchemaTypes)(Z.schema),be=(0,t.coerceAndCheckDataType)(Z,fe);M(Z,fe,!be,Q)}function C(Z){const{schema:Q,errSchemaPath:fe,opts:be,self:Me}=Z;Q.$ref&&be.ignoreKeywordsWithRef&&(0,c.schemaHasRulesButRef)(Q,Me.RULES)&&Me.logger.warn(`$ref: keywords ignored in schema at path "${fe}"`)}function k(Z){const{schema:Q,opts:fe}=Z;Q.default!==void 0&&fe.useDefaults&&fe.strictSchema&&(0,c.checkStrictMode)(Z,"default is ignored in the schema root")}function N(Z){const Q=Z.schema[Z.opts.schemaId];Q&&(Z.baseId=(0,l.resolveUrl)(Z.opts.uriResolver,Z.baseId,Q))}function O(Z){if(Z.schema.$async&&!Z.schemaEnv.$async)throw new Error("async schema in sync schema")}function P({gen:Z,schemaEnv:Q,schema:fe,errSchemaPath:be,opts:Me}){const Be=fe.$comment;if(Me.$comment===!0)Z.code((0,a._)`${u.default.self}.logger.log(${Be})`);else if(typeof Me.$comment=="function"){const ve=(0,a.str)`${be}/$comment`,Re=Z.scopeValue("root",{ref:Q.root});Z.code((0,a._)`${u.default.self}.opts.$comment(${Be}, ${ve}, ${Re}.schema)`)}}function $(Z){const{gen:Q,schemaEnv:fe,validateName:be,ValidationError:Me,opts:Be}=Z;fe.$async?Q.if((0,a._)`${u.default.errors} === 0`,()=>Q.return(u.default.data),()=>Q.throw((0,a._)`new ${Me}(${u.default.vErrors})`)):(Q.assign((0,a._)`${be}.errors`,u.default.vErrors),Be.unevaluated&&F(Z),Q.return((0,a._)`${u.default.errors} === 0`))}function F({gen:Z,evaluated:Q,props:fe,items:be}){fe instanceof a.Name&&Z.assign((0,a._)`${Q}.props`,fe),be instanceof a.Name&&Z.assign((0,a._)`${Q}.items`,be)}function M(Z,Q,fe,be){const{gen:Me,schema:Be,data:ve,allErrors:Re,opts:He,self:Ze}=Z,{RULES:bt}=Ze;if(Be.$ref&&(He.ignoreKeywordsWithRef||!(0,c.schemaHasRulesButRef)(Be,bt))){Me.block(()=>de(Z,"$ref",bt.all.$ref.definition));return}He.jtd||U(Z,Q),Me.block(()=>{for(const ye of bt.rules)Ge(ye);Ge(bt.post)});function Ge(ye){(0,n.shouldUseGroup)(Be,ye)&&(ye.type?(Me.if((0,r.checkDataType)(ye.type,ve,He.strictNumbers)),B(Z,ye),Q.length===1&&Q[0]===ye.type&&fe&&(Me.else(),(0,r.reportTypeError)(Z)),Me.endIf()):B(Z,ye),Re||Me.if((0,a._)`${u.default.errors} === ${be||0}`))}}function B(Z,Q){const{gen:fe,schema:be,opts:{useDefaults:Me}}=Z;Me&&(0,i.assignDefaults)(Z,Q.type),fe.block(()=>{for(const Be of Q.rules)(0,n.shouldUseRule)(be,Be)&&de(Z,Be.keyword,Be.definition,Q.type)})}function U(Z,Q){Z.schemaEnv.meta||!Z.opts.strictTypes||(H(Z,Q),Z.opts.allowUnionTypes||D(Z,Q),z(Z,Z.dataTypes))}function H(Z,Q){if(Q.length){if(!Z.dataTypes.length){Z.dataTypes=Q;return}Q.forEach(fe=>{j(Z.dataTypes,fe)||G(Z,`type "${fe}" not allowed by context "${Z.dataTypes.join(",")}"`)}),q(Z,Q)}}function D(Z,Q){Q.length>1&&!(Q.length===2&&Q.includes("null"))&&G(Z,"use allowUnionTypes to allow union type keyword")}function z(Z,Q){const fe=Z.self.RULES.all;for(const be in fe){const Me=fe[be];if(typeof Me=="object"&&(0,n.shouldUseRule)(Z.schema,Me)){const{type:Be}=Me.definition;Be.length&&!Be.some(ve=>W(Q,ve))&&G(Z,`missing type "${Be.join(",")}" for keyword "${be}"`)}}}function W(Z,Q){return Z.includes(Q)||Q==="number"&&Z.includes("integer")}function j(Z,Q){return Z.includes(Q)||Q==="integer"&&Z.includes("number")}function q(Z,Q){const fe=[];for(const be of Z.dataTypes)j(Q,be)?fe.push(be):Q.includes("integer")&&be==="number"&&fe.push("integer");Z.dataTypes=fe}function G(Z,Q){const fe=Z.schemaEnv.baseId+Z.errSchemaPath;Q+=` at "${fe}" (strictTypes)`,(0,c.checkStrictMode)(Z,Q,Z.opts.strictTypes)}class re{constructor(Q,fe,be){if((0,s.validateKeywordUsage)(Q,fe,be),this.gen=Q.gen,this.allErrors=Q.allErrors,this.keyword=be,this.data=Q.data,this.schema=Q.schema[be],this.$data=fe.$data&&Q.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,c.schemaRefOrVal)(Q,this.schema,be,this.$data),this.schemaType=fe.schemaType,this.parentSchema=Q.schema,this.params={},this.it=Q,this.def=fe,this.$data)this.schemaCode=Q.gen.const("vSchema",Ee(this.$data,Q));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,fe.schemaType,fe.allowUndefined))throw new Error(`${be} value must be ${JSON.stringify(fe.schemaType)}`);("code"in fe?fe.trackErrors:fe.errors!==!1)&&(this.errsCount=Q.gen.const("_errs",u.default.errors))}result(Q,fe,be){this.failResult((0,a.not)(Q),fe,be)}failResult(Q,fe,be){this.gen.if(Q),be?be():this.error(),fe?(this.gen.else(),fe(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(Q,fe){this.failResult((0,a.not)(Q),void 0,fe)}fail(Q){if(Q===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(Q),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(Q){if(!this.$data)return this.fail(Q);const{schemaCode:fe}=this;this.fail((0,a._)`${fe} !== undefined && (${(0,a.or)(this.invalid$data(),Q)})`)}error(Q,fe,be){if(fe){this.setParams(fe),this._error(Q,be),this.setParams({});return}this._error(Q,be)}_error(Q,fe){(Q?f.reportExtraError:f.reportError)(this,this.def.error,fe)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(Q){this.allErrors||this.gen.if(Q)}setParams(Q,fe){fe?Object.assign(this.params,Q):this.params=Q}block$data(Q,fe,be=a.nil){this.gen.block(()=>{this.check$data(Q,be),fe()})}check$data(Q=a.nil,fe=a.nil){if(!this.$data)return;const{gen:be,schemaCode:Me,schemaType:Be,def:ve}=this;be.if((0,a.or)((0,a._)`${Me} === undefined`,fe)),Q!==a.nil&&be.assign(Q,!0),(Be.length||ve.validateSchema)&&(be.elseIf(this.invalid$data()),this.$dataError(),Q!==a.nil&&be.assign(Q,!1)),be.else()}invalid$data(){const{gen:Q,schemaCode:fe,schemaType:be,def:Me,it:Be}=this;return(0,a.or)(ve(),Re());function ve(){if(be.length){if(!(fe instanceof a.Name))throw new Error("ajv implementation error");const He=Array.isArray(be)?be:[be];return(0,a._)`${(0,r.checkDataTypes)(He,fe,Be.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}function Re(){if(Me.validateSchema){const He=Q.scopeValue("validate$data",{ref:Me.validateSchema});return(0,a._)`!${He}(${fe})`}return a.nil}}subschema(Q,fe){const be=(0,o.getSubschema)(this.it,Q);(0,o.extendSubschemaData)(be,this.it,Q),(0,o.extendSubschemaMode)(be,Q);const Me={...this.it,...be,items:void 0,props:void 0};return b(Me,fe),Me}mergeEvaluated(Q,fe){const{it:be,gen:Me}=this;be.opts.unevaluated&&(be.props!==!0&&Q.props!==void 0&&(be.props=c.mergeEvaluated.props(Me,Q.props,be.props,fe)),be.items!==!0&&Q.items!==void 0&&(be.items=c.mergeEvaluated.items(Me,Q.items,be.items,fe)))}mergeValidEvaluated(Q,fe){const{it:be,gen:Me}=this;if(be.opts.unevaluated&&(be.props!==!0||be.items!==!0))return Me.if(fe,()=>this.mergeEvaluated(Q,a.Name)),!0}}cp.KeywordCxt=re;function de(Z,Q,fe,be){const Me=new re(Z,fe,Q);"code"in fe?fe.code(Me,be):Me.$data&&fe.validate?(0,s.funcKeywordCode)(Me,fe):"macro"in fe?(0,s.macroKeywordCode)(Me,fe):(fe.compile||fe.validate)&&(0,s.funcKeywordCode)(Me,fe)}const pe=/^\/(?:[^~]|~0|~1)*$/,ge=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Ee(Z,{dataLevel:Q,dataNames:fe,dataPathArr:be}){let Me,Be;if(Z==="")return u.default.rootData;if(Z[0]==="/"){if(!pe.test(Z))throw new Error(`Invalid JSON-pointer: ${Z}`);Me=Z,Be=u.default.rootData}else{const Ze=ge.exec(Z);if(!Ze)throw new Error(`Invalid JSON-pointer: ${Z}`);const bt=+Ze[1];if(Me=Ze[2],Me==="#"){if(bt>=Q)throw new Error(He("property/index",bt));return be[Q-bt]}if(bt>Q)throw new Error(He("data",bt));if(Be=fe[Q-bt],!Me)return Be}let ve=Be;const Re=Me.split("/");for(const Ze of Re)Ze&&(Be=(0,a._)`${Be}${(0,a.getProperty)((0,c.unescapeJsonPointer)(Ze))}`,ve=(0,a._)`${ve} && ${Be}`);return ve;function He(Ze,bt){return`Cannot access ${Ze} ${bt} levels up, current level is ${Q}`}}return cp.getData=Ee,cp}var Rk={};Object.defineProperty(Rk,"__esModule",{value:!0});class J2t extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}Rk.default=J2t;var _S={};Object.defineProperty(_S,"__esModule",{value:!0});const t9=So;class Z2t extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,t9.resolveUrl)(t,n,r),this.missingSchema=(0,t9.normalizeId)((0,t9.getFullPath)(t,this.missingRef))}}_S.default=Z2t;var Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.resolveSchema=Tu.getCompilingSchema=Tu.resolveRef=Tu.compileSchema=Tu.SchemaEnv=void 0;const Xc=Nn,eAt=Rk,sv=Hh,_f=So,Wfe=Et,tAt=Z6();class e4{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,_f.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Tu.SchemaEnv=e4;function CQ(e){const t=sRe.call(this,e);if(t)return t;const n=(0,_f.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Xc.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:eAt.default,code:(0,Xc._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:sv.default.data,parentData:sv.default.parentData,parentDataProperty:sv.default.parentDataProperty,dataNames:[sv.default.data],dataPathArr:[Xc.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Xc.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Xc.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Xc._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,tAt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(sv.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${sv.default.self}`,`${sv.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof Xc.Name?void 0:p,items:m instanceof Xc.Name?void 0:m,dynamicProps:p instanceof Xc.Name,dynamicItems:m instanceof Xc.Name},h.source&&(h.source.evaluated=(0,Xc.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Tu.compileSchema=CQ;function nAt(e,t,n){var r;n=(0,_f.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=sAt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new e4({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=rAt.call(this,s)}Tu.resolveRef=nAt;function rAt(e){return(0,_f.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:CQ.call(this,e)}function sRe(e){for(const t of this._compilations)if(iAt(t,e))return t}Tu.getCompilingSchema=sRe;function iAt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function sAt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||t4.call(this,e,t)}function t4(e,t){const n=this.opts.uriResolver.parse(t),r=(0,_f._getFullPath)(this.opts.uriResolver,n);let i=(0,_f.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return n9.call(this,n,e);const s=(0,_f.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=t4.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:n9.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||CQ.call(this,o),s===(0,_f.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,_f.resolveUrl)(this.opts.uriResolver,i,l)),new e4({schema:a,schemaId:u,root:e,baseId:i})}return n9.call(this,n,o)}}Tu.resolveSchema=t4;const oAt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function n9(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,Wfe.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!oAt.has(a)&&l&&(t=(0,_f.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,Wfe.schemaHasRulesButRef)(n,this.RULES)){const a=(0,_f.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=t4.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new e4({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const aAt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",uAt="Meta-schema for $data reference (JSON AnySchema extension proposal)",lAt="object",cAt=["$data"],fAt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},dAt=!1,hAt={$id:aAt,description:uAt,type:lAt,required:cAt,properties:fAt,additionalProperties:dAt};var IQ={},rV={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Zs,function(n){function r(){for(var ue=arguments.length,ne=Array(ue),le=0;le<ue;le++)ne[le]=arguments[le];if(ne.length>1){ne[0]=ne[0].slice(0,-1);for(var ke=ne.length-1,Ce=1;Ce<ke;++Ce)ne[Ce]=ne[Ce].slice(1,-1);return ne[ke]=ne[ke].slice(1),ne.join("")}else return ne[0]}function i(ue){return"(?:"+ue+")"}function s(ue){return ue===void 0?"undefined":ue===null?"null":Object.prototype.toString.call(ue).split(" ").pop().split("]").shift().toLowerCase()}function o(ue){return ue.toUpperCase()}function a(ue){return ue!=null?ue instanceof Array?ue:typeof ue.length!="number"||ue.split||ue.setInterval||ue.call?[ue]:Array.prototype.slice.call(ue):[]}function u(ue,ne){var le=ue;if(ne)for(var ke in ne)le[ke]=ne[ke];return le}function l(ue){var ne="[A-Za-z]",le="[0-9]",ke=r(le,"[A-Fa-f]"),Ce=i(i("%[EFef]"+ke+"%"+ke+ke+"%"+ke+ke)+"|"+i("%[89A-Fa-f]"+ke+"%"+ke+ke)+"|"+i("%"+ke+ke)),ut="[\\:\\/\\?\\#\\[\\]\\@]",Tt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Vt=r(ut,Tt),Pn=ue?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Ln=ue?"[\\uE000-\\uF8FF]":"[]",dn=r(ne,le,"[\\-\\.\\_\\~]",Pn);i(ne+r(ne,le,"[\\+\\-\\.]")+"*"),i(i(Ce+"|"+r(dn,Tt,"[\\:]"))+"*");var nr=i(i("25[0-5]")+"|"+i("2[0-4]"+le)+"|"+i("1"+le+le)+"|"+i("0?[1-9]"+le)+"|0?0?"+le),Ar=i(nr+"\\."+nr+"\\."+nr+"\\."+nr),zt=i(ke+"{1,4}"),rr=i(i(zt+"\\:"+zt)+"|"+Ar),zr=i(i(zt+"\\:")+"{6}"+rr),Xn=i("\\:\\:"+i(zt+"\\:")+"{5}"+rr),Ci=i(i(zt)+"?\\:\\:"+i(zt+"\\:")+"{4}"+rr),zs=i(i(i(zt+"\\:")+"{0,1}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{3}"+rr),Xr=i(i(i(zt+"\\:")+"{0,2}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{2}"+rr),ho=i(i(i(zt+"\\:")+"{0,3}"+zt)+"?\\:\\:"+zt+"\\:"+rr),$i=i(i(i(zt+"\\:")+"{0,4}"+zt)+"?\\:\\:"+rr),Mi=i(i(i(zt+"\\:")+"{0,5}"+zt)+"?\\:\\:"+zt),Bo=i(i(i(zt+"\\:")+"{0,6}"+zt)+"?\\:\\:"),Aa=i([zr,Xn,Ci,zs,Xr,ho,$i,Mi,Bo].join("|")),Vs=i(i(dn+"|"+Ce)+"+");i("[vV]"+ke+"+\\."+r(dn,Tt,"[\\:]")+"+"),i(i(Ce+"|"+r(dn,Tt))+"*");var Xl=i(Ce+"|"+r(dn,Tt,"[\\:\\@]"));return i(i(Ce+"|"+r(dn,Tt,"[\\@]"))+"+"),i(i(Xl+"|"+r("[\\/\\?]",Ln))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ne,le,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",dn,Tt),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",dn,Tt),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",dn,Tt),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",dn,Tt),"g"),NOT_QUERY:new RegExp(r("[^\\%]",dn,Tt,"[\\:\\@\\/\\?]",Ln),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",dn,Tt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",dn,Tt),"g"),UNRESERVED:new RegExp(dn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",dn,Vt),"g"),PCT_ENCODED:new RegExp(Ce,"g"),IPV4ADDRESS:new RegExp("^("+Ar+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Aa+")"+i(i("\\%25|\\%(?!"+ke+"{2})")+"("+Vs+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function ue(ne,le){var ke=[],Ce=!0,ut=!1,Tt=void 0;try{for(var Vt=ne[Symbol.iterator](),Pn;!(Ce=(Pn=Vt.next()).done)&&(ke.push(Pn.value),!(le&&ke.length===le));Ce=!0);}catch(Ln){ut=!0,Tt=Ln}finally{try{!Ce&&Vt.return&&Vt.return()}finally{if(ut)throw Tt}}return ke}return function(ne,le){if(Array.isArray(ne))return ne;if(Symbol.iterator in Object(ne))return ue(ne,le);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(ue){if(Array.isArray(ue)){for(var ne=0,le=Array(ue.length);ne<ue.length;ne++)le[ne]=ue[ne];return le}else return Array.from(ue)},p=2147483647,m=36,g=1,y=26,v=38,b=700,w=72,E=128,T="-",S=/^xn--/,A=/[^\0-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=m-g,O=Math.floor,P=String.fromCharCode;function $(ue){throw new RangeError(k[ue])}function F(ue,ne){for(var le=[],ke=ue.length;ke--;)le[ke]=ne(ue[ke]);return le}function M(ue,ne){var le=ue.split("@"),ke="";le.length>1&&(ke=le[0]+"@",ue=le[1]),ue=ue.replace(C,".");var Ce=ue.split("."),ut=F(Ce,ne).join(".");return ke+ut}function B(ue){for(var ne=[],le=0,ke=ue.length;le<ke;){var Ce=ue.charCodeAt(le++);if(Ce>=55296&&Ce<=56319&&le<ke){var ut=ue.charCodeAt(le++);(ut&64512)==56320?ne.push(((Ce&1023)<<10)+(ut&1023)+65536):(ne.push(Ce),le--)}else ne.push(Ce)}return ne}var U=function(ne){return String.fromCodePoint.apply(String,h(ne))},H=function(ne){return ne-48<10?ne-22:ne-65<26?ne-65:ne-97<26?ne-97:m},D=function(ne,le){return ne+22+75*(ne<26)-((le!=0)<<5)},z=function(ne,le,ke){var Ce=0;for(ne=ke?O(ne/b):ne>>1,ne+=O(ne/le);ne>N*y>>1;Ce+=m)ne=O(ne/N);return O(Ce+(N+1)*ne/(ne+v))},W=function(ne){var le=[],ke=ne.length,Ce=0,ut=E,Tt=w,Vt=ne.lastIndexOf(T);Vt<0&&(Vt=0);for(var Pn=0;Pn<Vt;++Pn)ne.charCodeAt(Pn)>=128&&$("not-basic"),le.push(ne.charCodeAt(Pn));for(var Ln=Vt>0?Vt+1:0;Ln<ke;){for(var dn=Ce,nr=1,Ar=m;;Ar+=m){Ln>=ke&&$("invalid-input");var zt=H(ne.charCodeAt(Ln++));(zt>=m||zt>O((p-Ce)/nr))&&$("overflow"),Ce+=zt*nr;var rr=Ar<=Tt?g:Ar>=Tt+y?y:Ar-Tt;if(zt<rr)break;var zr=m-rr;nr>O(p/zr)&&$("overflow"),nr*=zr}var Xn=le.length+1;Tt=z(Ce-dn,Xn,dn==0),O(Ce/Xn)>p-ut&&$("overflow"),ut+=O(Ce/Xn),Ce%=Xn,le.splice(Ce++,0,ut)}return String.fromCodePoint.apply(String,le)},j=function(ne){var le=[];ne=B(ne);var ke=ne.length,Ce=E,ut=0,Tt=w,Vt=!0,Pn=!1,Ln=void 0;try{for(var dn=ne[Symbol.iterator](),nr;!(Vt=(nr=dn.next()).done);Vt=!0){var Ar=nr.value;Ar<128&&le.push(P(Ar))}}catch(Le){Pn=!0,Ln=Le}finally{try{!Vt&&dn.return&&dn.return()}finally{if(Pn)throw Ln}}var zt=le.length,rr=zt;for(zt&&le.push(T);rr<ke;){var zr=p,Xn=!0,Ci=!1,zs=void 0;try{for(var Xr=ne[Symbol.iterator](),ho;!(Xn=(ho=Xr.next()).done);Xn=!0){var $i=ho.value;$i>=Ce&&$i<zr&&(zr=$i)}}catch(Le){Ci=!0,zs=Le}finally{try{!Xn&&Xr.return&&Xr.return()}finally{if(Ci)throw zs}}var Mi=rr+1;zr-Ce>O((p-ut)/Mi)&&$("overflow"),ut+=(zr-Ce)*Mi,Ce=zr;var Bo=!0,Aa=!1,Vs=void 0;try{for(var Xl=ne[Symbol.iterator](),cd;!(Bo=(cd=Xl.next()).done);Bo=!0){var Y=cd.value;if(Y<Ce&&++ut>p&&$("overflow"),Y==Ce){for(var ae=ut,te=m;;te+=m){var me=te<=Tt?g:te>=Tt+y?y:te-Tt;if(ae<me)break;var xe=ae-me,he=m-me;le.push(P(D(me+xe%he,0))),ae=O(xe/he)}le.push(P(D(ae,0))),Tt=z(ut,Mi,rr==zt),ut=0,++rr}}}catch(Le){Aa=!0,Vs=Le}finally{try{!Bo&&Xl.return&&Xl.return()}finally{if(Aa)throw Vs}}++ut,++Ce}return le.join("")},q=function(ne){return M(ne,function(le){return S.test(le)?W(le.slice(4).toLowerCase()):le})},G=function(ne){return M(ne,function(le){return A.test(le)?"xn--"+j(le):le})},re={version:"2.1.0",ucs2:{decode:B,encode:U},decode:W,encode:j,toASCII:G,toUnicode:q},de={};function pe(ue){var ne=ue.charCodeAt(0),le=void 0;return ne<16?le="%0"+ne.toString(16).toUpperCase():ne<128?le="%"+ne.toString(16).toUpperCase():ne<2048?le="%"+(ne>>6|192).toString(16).toUpperCase()+"%"+(ne&63|128).toString(16).toUpperCase():le="%"+(ne>>12|224).toString(16).toUpperCase()+"%"+(ne>>6&63|128).toString(16).toUpperCase()+"%"+(ne&63|128).toString(16).toUpperCase(),le}function ge(ue){for(var ne="",le=0,ke=ue.length;le<ke;){var Ce=parseInt(ue.substr(le+1,2),16);if(Ce<128)ne+=String.fromCharCode(Ce),le+=3;else if(Ce>=194&&Ce<224){if(ke-le>=6){var ut=parseInt(ue.substr(le+4,2),16);ne+=String.fromCharCode((Ce&31)<<6|ut&63)}else ne+=ue.substr(le,6);le+=6}else if(Ce>=224){if(ke-le>=9){var Tt=parseInt(ue.substr(le+4,2),16),Vt=parseInt(ue.substr(le+7,2),16);ne+=String.fromCharCode((Ce&15)<<12|(Tt&63)<<6|Vt&63)}else ne+=ue.substr(le,9);le+=9}else ne+=ue.substr(le,3),le+=3}return ne}function Ee(ue,ne){function le(ke){var Ce=ge(ke);return Ce.match(ne.UNRESERVED)?Ce:ke}return ue.scheme&&(ue.scheme=String(ue.scheme).replace(ne.PCT_ENCODED,le).toLowerCase().replace(ne.NOT_SCHEME,"")),ue.userinfo!==void 0&&(ue.userinfo=String(ue.userinfo).replace(ne.PCT_ENCODED,le).replace(ne.NOT_USERINFO,pe).replace(ne.PCT_ENCODED,o)),ue.host!==void 0&&(ue.host=String(ue.host).replace(ne.PCT_ENCODED,le).toLowerCase().replace(ne.NOT_HOST,pe).replace(ne.PCT_ENCODED,o)),ue.path!==void 0&&(ue.path=String(ue.path).replace(ne.PCT_ENCODED,le).replace(ue.scheme?ne.NOT_PATH:ne.NOT_PATH_NOSCHEME,pe).replace(ne.PCT_ENCODED,o)),ue.query!==void 0&&(ue.query=String(ue.query).replace(ne.PCT_ENCODED,le).replace(ne.NOT_QUERY,pe).replace(ne.PCT_ENCODED,o)),ue.fragment!==void 0&&(ue.fragment=String(ue.fragment).replace(ne.PCT_ENCODED,le).replace(ne.NOT_FRAGMENT,pe).replace(ne.PCT_ENCODED,o)),ue}function Z(ue){return ue.replace(/^0*(.*)/,"$1")||"0"}function Q(ue,ne){var le=ue.match(ne.IPV4ADDRESS)||[],ke=d(le,2),Ce=ke[1];return Ce?Ce.split(".").map(Z).join("."):ue}function fe(ue,ne){var le=ue.match(ne.IPV6ADDRESS)||[],ke=d(le,3),Ce=ke[1],ut=ke[2];if(Ce){for(var Tt=Ce.toLowerCase().split("::").reverse(),Vt=d(Tt,2),Pn=Vt[0],Ln=Vt[1],dn=Ln?Ln.split(":").map(Z):[],nr=Pn.split(":").map(Z),Ar=ne.IPV4ADDRESS.test(nr[nr.length-1]),zt=Ar?7:8,rr=nr.length-zt,zr=Array(zt),Xn=0;Xn<zt;++Xn)zr[Xn]=dn[Xn]||nr[rr+Xn]||"";Ar&&(zr[zt-1]=Q(zr[zt-1],ne));var Ci=zr.reduce(function(Mi,Bo,Aa){if(!Bo||Bo==="0"){var Vs=Mi[Mi.length-1];Vs&&Vs.index+Vs.length===Aa?Vs.length++:Mi.push({index:Aa,length:1})}return Mi},[]),zs=Ci.sort(function(Mi,Bo){return Bo.length-Mi.length})[0],Xr=void 0;if(zs&&zs.length>1){var ho=zr.slice(0,zs.index),$i=zr.slice(zs.index+zs.length);Xr=ho.join(":")+"::"+$i.join(":")}else Xr=zr.join(":");return ut&&(Xr+="%"+ut),Xr}else return ue}var be=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Me="".match(/(){0}/)[1]===void 0;function Be(ue){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},le={},ke=ne.iri!==!1?f:c;ne.reference==="suffix"&&(ue=(ne.scheme?ne.scheme+":":"")+"//"+ue);var Ce=ue.match(be);if(Ce){Me?(le.scheme=Ce[1],le.userinfo=Ce[3],le.host=Ce[4],le.port=parseInt(Ce[5],10),le.path=Ce[6]||"",le.query=Ce[7],le.fragment=Ce[8],isNaN(le.port)&&(le.port=Ce[5])):(le.scheme=Ce[1]||void 0,le.userinfo=ue.indexOf("@")!==-1?Ce[3]:void 0,le.host=ue.indexOf("//")!==-1?Ce[4]:void 0,le.port=parseInt(Ce[5],10),le.path=Ce[6]||"",le.query=ue.indexOf("?")!==-1?Ce[7]:void 0,le.fragment=ue.indexOf("#")!==-1?Ce[8]:void 0,isNaN(le.port)&&(le.port=ue.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Ce[4]:void 0)),le.host&&(le.host=fe(Q(le.host,ke),ke)),le.scheme===void 0&&le.userinfo===void 0&&le.host===void 0&&le.port===void 0&&!le.path&&le.query===void 0?le.reference="same-document":le.scheme===void 0?le.reference="relative":le.fragment===void 0?le.reference="absolute":le.reference="uri",ne.reference&&ne.reference!=="suffix"&&ne.reference!==le.reference&&(le.error=le.error||"URI is not a "+ne.reference+" reference.");var ut=de[(ne.scheme||le.scheme||"").toLowerCase()];if(!ne.unicodeSupport&&(!ut||!ut.unicodeSupport)){if(le.host&&(ne.domainHost||ut&&ut.domainHost))try{le.host=re.toASCII(le.host.replace(ke.PCT_ENCODED,ge).toLowerCase())}catch(Tt){le.error=le.error||"Host's domain name can not be converted to ASCII via punycode: "+Tt}Ee(le,c)}else Ee(le,ke);ut&&ut.parse&&ut.parse(le,ne)}else le.error=le.error||"URI can not be parsed.";return le}function ve(ue,ne){var le=ne.iri!==!1?f:c,ke=[];return ue.userinfo!==void 0&&(ke.push(ue.userinfo),ke.push("@")),ue.host!==void 0&&ke.push(fe(Q(String(ue.host),le),le).replace(le.IPV6ADDRESS,function(Ce,ut,Tt){return"["+ut+(Tt?"%25"+Tt:"")+"]"})),(typeof ue.port=="number"||typeof ue.port=="string")&&(ke.push(":"),ke.push(String(ue.port))),ke.length?ke.join(""):void 0}var Re=/^\.\.?\//,He=/^\/\.(\/|$)/,Ze=/^\/\.\.(\/|$)/,bt=/^\/?(?:.|\n)*?(?=\/|$)/;function Ge(ue){for(var ne=[];ue.length;)if(ue.match(Re))ue=ue.replace(Re,"");else if(ue.match(He))ue=ue.replace(He,"/");else if(ue.match(Ze))ue=ue.replace(Ze,"/"),ne.pop();else if(ue==="."||ue==="..")ue="";else{var le=ue.match(bt);if(le){var ke=le[0];ue=ue.slice(ke.length),ne.push(ke)}else throw new Error("Unexpected dot segment condition")}return ne.join("")}function ye(ue){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},le=ne.iri?f:c,ke=[],Ce=de[(ne.scheme||ue.scheme||"").toLowerCase()];if(Ce&&Ce.serialize&&Ce.serialize(ue,ne),ue.host&&!le.IPV6ADDRESS.test(ue.host)){if(ne.domainHost||Ce&&Ce.domainHost)try{ue.host=ne.iri?re.toUnicode(ue.host):re.toASCII(ue.host.replace(le.PCT_ENCODED,ge).toLowerCase())}catch(Vt){ue.error=ue.error||"Host's domain name can not be converted to "+(ne.iri?"Unicode":"ASCII")+" via punycode: "+Vt}}Ee(ue,le),ne.reference!=="suffix"&&ue.scheme&&(ke.push(ue.scheme),ke.push(":"));var ut=ve(ue,ne);if(ut!==void 0&&(ne.reference!=="suffix"&&ke.push("//"),ke.push(ut),ue.path&&ue.path.charAt(0)!=="/"&&ke.push("/")),ue.path!==void 0){var Tt=ue.path;!ne.absolutePath&&(!Ce||!Ce.absolutePath)&&(Tt=Ge(Tt)),ut===void 0&&(Tt=Tt.replace(/^\/\//,"/%2F")),ke.push(Tt)}return ue.query!==void 0&&(ke.push("?"),ke.push(ue.query)),ue.fragment!==void 0&&(ke.push("#"),ke.push(ue.fragment)),ke.join("")}function pt(ue,ne){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ke=arguments[3],Ce={};return ke||(ue=Be(ye(ue,le),le),ne=Be(ye(ne,le),le)),le=le||{},!le.tolerant&&ne.scheme?(Ce.scheme=ne.scheme,Ce.userinfo=ne.userinfo,Ce.host=ne.host,Ce.port=ne.port,Ce.path=Ge(ne.path||""),Ce.query=ne.query):(ne.userinfo!==void 0||ne.host!==void 0||ne.port!==void 0?(Ce.userinfo=ne.userinfo,Ce.host=ne.host,Ce.port=ne.port,Ce.path=Ge(ne.path||""),Ce.query=ne.query):(ne.path?(ne.path.charAt(0)==="/"?Ce.path=Ge(ne.path):((ue.userinfo!==void 0||ue.host!==void 0||ue.port!==void 0)&&!ue.path?Ce.path="/"+ne.path:ue.path?Ce.path=ue.path.slice(0,ue.path.lastIndexOf("/")+1)+ne.path:Ce.path=ne.path,Ce.path=Ge(Ce.path)),Ce.query=ne.query):(Ce.path=ue.path,ne.query!==void 0?Ce.query=ne.query:Ce.query=ue.query),Ce.userinfo=ue.userinfo,Ce.host=ue.host,Ce.port=ue.port),Ce.scheme=ue.scheme),Ce.fragment=ne.fragment,Ce}function vt(ue,ne,le){var ke=u({scheme:"null"},le);return ye(pt(Be(ue,ke),Be(ne,ke),ke,!0),ke)}function _e(ue,ne){return typeof ue=="string"?ue=ye(Be(ue,ne),ne):s(ue)==="object"&&(ue=Be(ye(ue,ne),ne)),ue}function Ne(ue,ne,le){return typeof ue=="string"?ue=ye(Be(ue,le),le):s(ue)==="object"&&(ue=ye(ue,le)),typeof ne=="string"?ne=ye(Be(ne,le),le):s(ne)==="object"&&(ne=ye(ne,le)),ue===ne}function Ye(ue,ne){return ue&&ue.toString().replace(!ne||!ne.iri?c.ESCAPE:f.ESCAPE,pe)}function ct(ue,ne){return ue&&ue.toString().replace(!ne||!ne.iri?c.PCT_ENCODED:f.PCT_ENCODED,ge)}var wt={scheme:"http",domainHost:!0,parse:function(ne,le){return ne.host||(ne.error=ne.error||"HTTP URIs must have a host."),ne},serialize:function(ne,le){var ke=String(ne.scheme).toLowerCase()==="https";return(ne.port===(ke?443:80)||ne.port==="")&&(ne.port=void 0),ne.path||(ne.path="/"),ne}},$n={scheme:"https",domainHost:wt.domainHost,parse:wt.parse,serialize:wt.serialize};function Sr(ue){return typeof ue.secure=="boolean"?ue.secure:String(ue.scheme).toLowerCase()==="wss"}var Mn={scheme:"ws",domainHost:!0,parse:function(ne,le){var ke=ne;return ke.secure=Sr(ke),ke.resourceName=(ke.path||"/")+(ke.query?"?"+ke.query:""),ke.path=void 0,ke.query=void 0,ke},serialize:function(ne,le){if((ne.port===(Sr(ne)?443:80)||ne.port==="")&&(ne.port=void 0),typeof ne.secure=="boolean"&&(ne.scheme=ne.secure?"wss":"ws",ne.secure=void 0),ne.resourceName){var ke=ne.resourceName.split("?"),Ce=d(ke,2),ut=Ce[0],Tt=Ce[1];ne.path=ut&&ut!=="/"?ut:void 0,ne.query=Tt,ne.resourceName=void 0}return ne.fragment=void 0,ne}},ur={scheme:"wss",domainHost:Mn.domainHost,parse:Mn.parse,serialize:Mn.serialize},pn={},Tn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",er="[0-9A-Fa-f]",tr=i(i("%[EFef]"+er+"%"+er+er+"%"+er+er)+"|"+i("%[89A-Fa-f]"+er+"%"+er+er)+"|"+i("%"+er+er)),jo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Di="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",An=r(Di,'[\\"\\\\]'),Oi="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Tr=new RegExp(Tn,"g"),ds=new RegExp(tr,"g"),np=new RegExp(r("[^]",jo,"[\\.]",'[\\"]',An),"g"),sl=new RegExp(r("[^]",Tn,Oi),"g"),ld=sl;function wr(ue){var ne=ge(ue);return ne.match(Tr)?ne:ue}var Ai={scheme:"mailto",parse:function(ne,le){var ke=ne,Ce=ke.to=ke.path?ke.path.split(","):[];if(ke.path=void 0,ke.query){for(var ut=!1,Tt={},Vt=ke.query.split("&"),Pn=0,Ln=Vt.length;Pn<Ln;++Pn){var dn=Vt[Pn].split("=");switch(dn[0]){case"to":for(var nr=dn[1].split(","),Ar=0,zt=nr.length;Ar<zt;++Ar)Ce.push(nr[Ar]);break;case"subject":ke.subject=ct(dn[1],le);break;case"body":ke.body=ct(dn[1],le);break;default:ut=!0,Tt[ct(dn[0],le)]=ct(dn[1],le);break}}ut&&(ke.headers=Tt)}ke.query=void 0;for(var rr=0,zr=Ce.length;rr<zr;++rr){var Xn=Ce[rr].split("@");if(Xn[0]=ct(Xn[0]),le.unicodeSupport)Xn[1]=ct(Xn[1],le).toLowerCase();else try{Xn[1]=re.toASCII(ct(Xn[1],le).toLowerCase())}catch(Ci){ke.error=ke.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ci}Ce[rr]=Xn.join("@")}return ke},serialize:function(ne,le){var ke=ne,Ce=a(ne.to);if(Ce){for(var ut=0,Tt=Ce.length;ut<Tt;++ut){var Vt=String(Ce[ut]),Pn=Vt.lastIndexOf("@"),Ln=Vt.slice(0,Pn).replace(ds,wr).replace(ds,o).replace(np,pe),dn=Vt.slice(Pn+1);try{dn=le.iri?re.toUnicode(dn):re.toASCII(ct(dn,le).toLowerCase())}catch(rr){ke.error=ke.error||"Email address's domain name can not be converted to "+(le.iri?"Unicode":"ASCII")+" via punycode: "+rr}Ce[ut]=Ln+"@"+dn}ke.path=Ce.join(",")}var nr=ne.headers=ne.headers||{};ne.subject&&(nr.subject=ne.subject),ne.body&&(nr.body=ne.body);var Ar=[];for(var zt in nr)nr[zt]!==pn[zt]&&Ar.push(zt.replace(ds,wr).replace(ds,o).replace(sl,pe)+"="+nr[zt].replace(ds,wr).replace(ds,o).replace(ld,pe));return Ar.length&&(ke.query=Ar.join("&")),ke}},Kr=/^([^\:]+)\:(.*)/,su={scheme:"urn",parse:function(ne,le){var ke=ne.path&&ne.path.match(Kr),Ce=ne;if(ke){var ut=le.scheme||Ce.scheme||"urn",Tt=ke[1].toLowerCase(),Vt=ke[2],Pn=ut+":"+(le.nid||Tt),Ln=de[Pn];Ce.nid=Tt,Ce.nss=Vt,Ce.path=void 0,Ln&&(Ce=Ln.parse(Ce,le))}else Ce.error=Ce.error||"URN can not be parsed.";return Ce},serialize:function(ne,le){var ke=le.scheme||ne.scheme||"urn",Ce=ne.nid,ut=ke+":"+(le.nid||Ce),Tt=de[ut];Tt&&(ne=Tt.serialize(ne,le));var Vt=ne,Pn=ne.nss;return Vt.path=(Ce||le.nid)+":"+Pn,Vt}},Sa=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ta={scheme:"urn:uuid",parse:function(ne,le){var ke=ne;return ke.uuid=ke.nss,ke.nss=void 0,!le.tolerant&&(!ke.uuid||!ke.uuid.match(Sa))&&(ke.error=ke.error||"UUID is not valid."),ke},serialize:function(ne,le){var ke=ne;return ke.nss=(ne.uuid||"").toLowerCase(),ke}};de[wt.scheme]=wt,de[$n.scheme]=$n,de[Mn.scheme]=Mn,de[ur.scheme]=ur,de[Ai.scheme]=Ai,de[su.scheme]=su,de[Ta.scheme]=Ta,n.SCHEMES=de,n.pctEncChar=pe,n.pctDecChars=ge,n.parse=Be,n.removeDotSegments=Ge,n.serialize=ye,n.resolveComponents=pt,n.resolve=vt,n.normalize=_e,n.equal=Ne,n.escapeComponent=Ye,n.unescapeComponent=ct,Object.defineProperty(n,"__esModule",{value:!0})})})(rV,rV.exports);var pAt=rV.exports;Object.defineProperty(IQ,"__esModule",{value:!0});const oRe=pAt;oRe.code='require("ajv/dist/runtime/uri").default';IQ.default=oRe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Z6();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Nn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Rk,i=_S,s=Y1,o=Tu,a=Nn,u=So,l=Cs,c=Et,f=hAt,d=IQ,h=(D,z)=>new RegExp(D,z);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b(D){var z,W,j,q,G,re,de,pe,ge,Ee,Z,Q,fe,be,Me,Be,ve,Re,He,Ze,bt,Ge,ye,pt,vt;const _e=D.strict,Ne=(z=D.code)===null||z===void 0?void 0:z.optimize,Ye=Ne===!0||Ne===void 0?1:Ne||0,ct=(j=(W=D.code)===null||W===void 0?void 0:W.regExp)!==null&&j!==void 0?j:h,wt=(q=D.uriResolver)!==null&&q!==void 0?q:d.default;return{strictSchema:(re=(G=D.strictSchema)!==null&&G!==void 0?G:_e)!==null&&re!==void 0?re:!0,strictNumbers:(pe=(de=D.strictNumbers)!==null&&de!==void 0?de:_e)!==null&&pe!==void 0?pe:!0,strictTypes:(Ee=(ge=D.strictTypes)!==null&&ge!==void 0?ge:_e)!==null&&Ee!==void 0?Ee:"log",strictTuples:(Q=(Z=D.strictTuples)!==null&&Z!==void 0?Z:_e)!==null&&Q!==void 0?Q:"log",strictRequired:(be=(fe=D.strictRequired)!==null&&fe!==void 0?fe:_e)!==null&&be!==void 0?be:!1,code:D.code?{...D.code,optimize:Ye,regExp:ct}:{optimize:Ye,regExp:ct},loopRequired:(Me=D.loopRequired)!==null&&Me!==void 0?Me:v,loopEnum:(Be=D.loopEnum)!==null&&Be!==void 0?Be:v,meta:(ve=D.meta)!==null&&ve!==void 0?ve:!0,messages:(Re=D.messages)!==null&&Re!==void 0?Re:!0,inlineRefs:(He=D.inlineRefs)!==null&&He!==void 0?He:!0,schemaId:(Ze=D.schemaId)!==null&&Ze!==void 0?Ze:"$id",addUsedSchema:(bt=D.addUsedSchema)!==null&&bt!==void 0?bt:!0,validateSchema:(Ge=D.validateSchema)!==null&&Ge!==void 0?Ge:!0,validateFormats:(ye=D.validateFormats)!==null&&ye!==void 0?ye:!0,unicodeRegExp:(pt=D.unicodeRegExp)!==null&&pt!==void 0?pt:!0,int32range:(vt=D.int32range)!==null&&vt!==void 0?vt:!0,uriResolver:wt}}class w{constructor(z={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,z=this.opts={...z,...b(z)};const{es5:W,lines:j}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:j}),this.logger=O(z.logger);const q=z.validateFormats;z.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,z,"NOT SUPPORTED"),E.call(this,y,z,"DEPRECATED","warn"),this._metaOpts=k.call(this),z.formats&&A.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),z.keywords&&C.call(this,z.keywords),typeof z.meta=="object"&&this.addMetaSchema(z.meta),S.call(this),z.validateFormats=q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:z,meta:W,schemaId:j}=this.opts;let q=f;j==="id"&&(q={...f},q.id=q.$id,delete q.$id),W&&z&&this.addMetaSchema(q,q[j],!1)}defaultMeta(){const{meta:z,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof z=="object"?z[W]||z:void 0}validate(z,W){let j;if(typeof z=="string"){if(j=this.getSchema(z),!j)throw new Error(`no schema with key or ref "${z}"`)}else j=this.compile(z);const q=j(W);return"$async"in j||(this.errors=j.errors),q}compile(z,W){const j=this._addSchema(z,W);return j.validate||this._compileSchemaEnv(j)}compileAsync(z,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return q.call(this,z,W);async function q(Ee,Z){await G.call(this,Ee.$schema);const Q=this._addSchema(Ee,Z);return Q.validate||re.call(this,Q)}async function G(Ee){Ee&&!this.getSchema(Ee)&&await q.call(this,{$ref:Ee},!0)}async function re(Ee){try{return this._compileSchemaEnv(Ee)}catch(Z){if(!(Z instanceof i.default))throw Z;return de.call(this,Z),await pe.call(this,Z.missingSchema),re.call(this,Ee)}}function de({missingSchema:Ee,missingRef:Z}){if(this.refs[Ee])throw new Error(`AnySchema ${Ee} is loaded but ${Z} cannot be resolved`)}async function pe(Ee){const Z=await ge.call(this,Ee);this.refs[Ee]||await G.call(this,Z.$schema),this.refs[Ee]||this.addSchema(Z,Ee,W)}async function ge(Ee){const Z=this._loading[Ee];if(Z)return Z;try{return await(this._loading[Ee]=j(Ee))}finally{delete this._loading[Ee]}}}addSchema(z,W,j,q=this.opts.validateSchema){if(Array.isArray(z)){for(const re of z)this.addSchema(re,void 0,j,q);return this}let G;if(typeof z=="object"){const{schemaId:re}=this.opts;if(G=z[re],G!==void 0&&typeof G!="string")throw new Error(`schema ${re} must be string`)}return W=(0,u.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(z,j,W,q,!0),this}addMetaSchema(z,W,j=this.opts.validateSchema){return this.addSchema(z,W,!0,j),this}validateSchema(z,W){if(typeof z=="boolean")return!0;let j;if(j=z.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const q=this.validate(j,z);if(!q&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return q}getSchema(z){let W;for(;typeof(W=T.call(this,z))=="string";)z=W;if(W===void 0){const{schemaId:j}=this.opts,q=new o.SchemaEnv({schema:{},schemaId:j});if(W=o.resolveSchema.call(this,q,z),!W)return;this.refs[z]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(z){if(z instanceof RegExp)return this._removeAllSchemas(this.schemas,z),this._removeAllSchemas(this.refs,z),this;switch(typeof z){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=T.call(this,z);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[z],delete this.refs[z],this}case"object":{const W=z;this._cache.delete(W);let j=z[this.opts.schemaId];return j&&(j=(0,u.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(z){for(const W of z)this.addKeyword(W);return this}addKeyword(z,W){let j;if(typeof z=="string")j=z,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=j);else if(typeof z=="object"&&W===void 0){if(W=z,j=W.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($.call(this,j,W),!W)return(0,c.eachItem)(j,G=>F.call(this,G)),this;B.call(this,W);const q={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(j,q.type.length===0?G=>F.call(this,G,q):G=>q.type.forEach(re=>F.call(this,G,q,re))),this}getKeyword(z){const W=this.RULES.all[z];return typeof W=="object"?W.definition:!!W}removeKeyword(z){const{RULES:W}=this;delete W.keywords[z],delete W.all[z];for(const j of W.rules){const q=j.rules.findIndex(G=>G.keyword===z);q>=0&&j.rules.splice(q,1)}return this}addFormat(z,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[z]=W,this}errorsText(z=this.errors,{separator:W=", ",dataVar:j="data"}={}){return!z||z.length===0?"No errors":z.map(q=>`${j}${q.instancePath} ${q.message}`).reduce((q,G)=>q+W+G)}$dataMetaSchema(z,W){const j=this.RULES.all;z=JSON.parse(JSON.stringify(z));for(const q of W){const G=q.split("/").slice(1);let re=z;for(const de of G)re=re[de];for(const de in j){const pe=j[de];if(typeof pe!="object")continue;const{$data:ge}=pe.definition,Ee=re[de];ge&&Ee&&(re[de]=H(Ee))}}return z}_removeAllSchemas(z,W){for(const j in z){const q=z[j];(!W||W.test(j))&&(typeof q=="string"?delete z[j]:q&&!q.meta&&(this._cache.delete(q.schema),delete z[j]))}}_addSchema(z,W,j,q=this.opts.validateSchema,G=this.opts.addUsedSchema){let re;const{schemaId:de}=this.opts;if(typeof z=="object")re=z[de];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof z!="boolean")throw new Error("schema must be object or boolean")}let pe=this._cache.get(z);if(pe!==void 0)return pe;j=(0,u.normalizeId)(re||j);const ge=u.getSchemaRefs.call(this,z,j);return pe=new o.SchemaEnv({schema:z,schemaId:de,meta:W,baseId:j,localRefs:ge}),this._cache.set(pe.schema,pe),G&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=pe),q&&this.validateSchema(z,!0),pe}_checkUnique(z){if(this.schemas[z]||this.refs[z])throw new Error(`schema with key or id "${z}" already exists`)}_compileSchemaEnv(z){if(z.meta?this._compileMetaSchema(z):o.compileSchema.call(this,z),!z.validate)throw new Error("ajv implementation error");return z.validate}_compileMetaSchema(z){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,z)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function E(D,z,W,j="error"){for(const q in D){const G=q;G in z&&this.logger[j](`${W}: option ${q}. ${D[G]}`)}}function T(D){return D=(0,u.normalizeId)(D),this.schemas[D]||this.refs[D]}function S(){const D=this.opts.schemas;if(D)if(Array.isArray(D))this.addSchema(D);else for(const z in D)this.addSchema(D[z],z)}function A(){for(const D in this.opts.formats){const z=this.opts.formats[D];z&&this.addFormat(D,z)}}function C(D){if(Array.isArray(D)){this.addVocabulary(D);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const z in D){const W=D[z];W.keyword||(W.keyword=z),this.addKeyword(W)}}function k(){const D={...this.opts};for(const z of p)delete D[z];return D}const N={log(){},warn(){},error(){}};function O(D){if(D===!1)return N;if(D===void 0)return console;if(D.log&&D.warn&&D.error)return D;throw new Error("logger must implement log, warn and error methods")}const P=/^[a-z_$][a-z0-9_$:-]*$/i;function $(D,z){const{RULES:W}=this;if((0,c.eachItem)(D,j=>{if(W.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!P.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!z&&z.$data&&!("code"in z||"validate"in z))throw new Error('$data keyword must have "code" or "validate" function')}function F(D,z,W){var j;const q=z==null?void 0:z.post;if(W&&q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let re=q?G.post:G.rules.find(({type:pe})=>pe===W);if(re||(re={type:W,rules:[]},G.rules.push(re)),G.keywords[D]=!0,!z)return;const de={keyword:D,definition:{...z,type:(0,l.getJSONTypes)(z.type),schemaType:(0,l.getJSONTypes)(z.schemaType)}};z.before?M.call(this,re,de,z.before):re.rules.push(de),G.all[D]=de,(j=z.implements)===null||j===void 0||j.forEach(pe=>this.addKeyword(pe))}function M(D,z,W){const j=D.rules.findIndex(q=>q.keyword===W);j>=0?D.rules.splice(j,0,z):(D.rules.push(z),this.logger.warn(`rule ${W} is not defined`))}function B(D){let{metaSchema:z}=D;z!==void 0&&(D.$data&&this.opts.$data&&(z=H(z)),D.validateSchema=this.compile(z,!0))}const U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function H(D){return{anyOf:[D,U]}}})(zke);var kQ={},RQ={},NQ={};Object.defineProperty(NQ,"__esModule",{value:!0});const mAt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};NQ.default=mAt;var K1={};Object.defineProperty(K1,"__esModule",{value:!0});K1.callRef=K1.getValidate=void 0;const gAt=_S,Gfe=kn,pu=Nn,T_=Hh,Yfe=Tu,HN=Et,yAt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=Yfe.resolveRef.call(u,l,i,n);if(c===void 0)throw new gAt.default(r.opts.uriResolver,i,n);if(c instanceof Yfe.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return vD(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return vD(e,(0,pu._)`${p}.validate`,l,l.$async)}function d(p){const m=aRe(e,p);vD(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,pu.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:pu.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function aRe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,pu._)`${n.scopeValue("wrapper",{ref:t})}.validate`}K1.getValidate=aRe;function vD(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?T_.default.this:pu.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,pu._)`await ${(0,Gfe.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,pu._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,Gfe.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,pu._)`${p}.errors`;i.assign(T_.default.vErrors,(0,pu._)`${T_.default.vErrors} === null ? ${m} : ${T_.default.vErrors}.concat(${m})`),i.assign(T_.default.errors,(0,pu._)`${T_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=HN.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,pu._)`${p}.evaluated.props`);s.props=HN.mergeEvaluated.props(i,y,s.props,pu.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=HN.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,pu._)`${p}.evaluated.items`);s.items=HN.mergeEvaluated.items(i,y,s.items,pu.Name)}}}K1.callRef=vD;K1.default=yAt;Object.defineProperty(RQ,"__esModule",{value:!0});const vAt=NQ,bAt=K1,_At=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",vAt.default,bAt.default];RQ.default=_At;var PQ={},DQ={};Object.defineProperty(DQ,"__esModule",{value:!0});const _$=Nn,hg=_$.operators,w$={maximum:{okStr:"<=",ok:hg.LTE,fail:hg.GT},minimum:{okStr:">=",ok:hg.GTE,fail:hg.LT},exclusiveMaximum:{okStr:"<",ok:hg.LT,fail:hg.GTE},exclusiveMinimum:{okStr:">",ok:hg.GT,fail:hg.LTE}},wAt={message:({keyword:e,schemaCode:t})=>(0,_$.str)`must be ${w$[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,_$._)`{comparison: ${w$[e].okStr}, limit: ${t}}`},EAt={keyword:Object.keys(w$),type:"number",schemaType:"number",$data:!0,error:wAt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,_$._)`${n} ${w$[t].fail} ${r} || isNaN(${n})`)}};DQ.default=EAt;var OQ={};Object.defineProperty(OQ,"__esModule",{value:!0});const SA=Nn,xAt={message:({schemaCode:e})=>(0,SA.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,SA._)`{multipleOf: ${e}}`},SAt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:xAt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,SA._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,SA._)`${o} !== parseInt(${o})`;e.fail$data((0,SA._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};OQ.default=SAt;var $Q={},MQ={};Object.defineProperty(MQ,"__esModule",{value:!0});function uRe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}MQ.default=uRe;uRe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty($Q,"__esModule",{value:!0});const Fv=Nn,TAt=Et,AAt=MQ,CAt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Fv.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Fv._)`{limit: ${e}}`},IAt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:CAt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?Fv.operators.GT:Fv.operators.LT,o=i.opts.unicode===!1?(0,Fv._)`${n}.length`:(0,Fv._)`${(0,TAt.useFunc)(e.gen,AAt.default)}(${n})`;e.fail$data((0,Fv._)`${o} ${s} ${r}`)}};$Q.default=IAt;var LQ={};Object.defineProperty(LQ,"__esModule",{value:!0});const kAt=kn,E$=Nn,RAt={message:({schemaCode:e})=>(0,E$.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,E$._)`{pattern: ${e}}`},NAt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:RAt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,E$._)`(new RegExp(${i}, ${o}))`:(0,kAt.usePattern)(e,r);e.fail$data((0,E$._)`!${a}.test(${t})`)}};LQ.default=NAt;var FQ={};Object.defineProperty(FQ,"__esModule",{value:!0});const TA=Nn,PAt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,TA.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,TA._)`{limit: ${e}}`},DAt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:PAt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?TA.operators.GT:TA.operators.LT;e.fail$data((0,TA._)`Object.keys(${n}).length ${i} ${r}`)}};FQ.default=DAt;var jQ={};Object.defineProperty(jQ,"__esModule",{value:!0});const kT=kn,AA=Nn,OAt=Et,$At={message:({params:{missingProperty:e}})=>(0,AA.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,AA._)`{missingProperty: ${e}}`},MAt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:$At,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,OAt.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(AA.nil,f);else for(const h of n)(0,kT.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,kT.checkMissingProp)(e,n,h)),(0,kT.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,kT.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,kT.propertyInData)(t,i,h,a.ownProperties)),t.if((0,AA.not)(p),()=>{e.error(),t.break()})},AA.nil)}}};jQ.default=MAt;var BQ={};Object.defineProperty(BQ,"__esModule",{value:!0});const CA=Nn,LAt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,CA.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,CA._)`{limit: ${e}}`},FAt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:LAt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?CA.operators.GT:CA.operators.LT;e.fail$data((0,CA._)`${n}.length ${i} ${r}`)}};BQ.default=FAt;var UQ={},Nk={};Object.defineProperty(Nk,"__esModule",{value:!0});const lRe=BY;lRe.code='require("ajv/dist/runtime/equal").default';Nk.default=lRe;Object.defineProperty(UQ,"__esModule",{value:!0});const r9=Cs,vo=Nn,jAt=Et,BAt=Nk,UAt={message:({params:{i:e,j:t}})=>(0,vo.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,vo._)`{i: ${e}, j: ${t}}`},zAt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:UAt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,r9.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,vo._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,vo._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,vo._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,r9.checkDataTypes)(l,g,a.opts.strictNumbers,r9.DataType.Wrong),v=t.const("indices",(0,vo._)`{}`);t.for((0,vo._)`;${p}--;`,()=>{t.let(g,(0,vo._)`${n}[${p}]`),t.if(y,(0,vo._)`continue`),l.length>1&&t.if((0,vo._)`typeof ${g} == "string"`,(0,vo._)`${g} += "_"`),t.if((0,vo._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,vo._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,vo._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,jAt.useFunc)(t,BAt.default),y=t.name("outer");t.label(y).for((0,vo._)`;${p}--;`,()=>t.for((0,vo._)`${m} = ${p}; ${m}--;`,()=>t.if((0,vo._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};UQ.default=zAt;var zQ={};Object.defineProperty(zQ,"__esModule",{value:!0});const iV=Nn,VAt=Et,HAt=Nk,qAt={message:"must be equal to constant",params:({schemaCode:e})=>(0,iV._)`{allowedValue: ${e}}`},WAt={keyword:"const",$data:!0,error:qAt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,iV._)`!${(0,VAt.useFunc)(t,HAt.default)}(${n}, ${i})`):e.fail((0,iV._)`${s} !== ${n}`)}};zQ.default=WAt;var VQ={};Object.defineProperty(VQ,"__esModule",{value:!0});const A2=Nn,GAt=Et,YAt=Nk,KAt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,A2._)`{allowedValues: ${e}}`},XAt={keyword:"enum",schemaType:"array",$data:!0,error:KAt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,GAt.useFunc)(t,YAt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,A2.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,A2._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,A2._)`${l()}(${n}, ${h}[${p}])`:(0,A2._)`${n} === ${m}`}}};VQ.default=XAt;Object.defineProperty(PQ,"__esModule",{value:!0});const QAt=DQ,JAt=OQ,ZAt=$Q,eCt=LQ,tCt=FQ,nCt=jQ,rCt=BQ,iCt=UQ,sCt=zQ,oCt=VQ,aCt=[QAt.default,JAt.default,ZAt.default,eCt.default,tCt.default,nCt.default,rCt.default,iCt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},sCt.default,oCt.default];PQ.default=aCt;var HQ={},wS={};Object.defineProperty(wS,"__esModule",{value:!0});wS.validateAdditionalItems=void 0;const jv=Nn,sV=Et,uCt={message:({params:{len:e}})=>(0,jv.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,jv._)`{limit: ${e}}`},lCt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:uCt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,sV.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}cRe(e,r)}};function cRe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,jv._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,jv._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,sV.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,jv._)`${a} <= ${t.length}`);n.if((0,jv.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:sV.Type.Num},l),o.allErrors||n.if((0,jv.not)(l),()=>n.break())})}}wS.validateAdditionalItems=cRe;wS.default=lCt;var qQ={},ES={};Object.defineProperty(ES,"__esModule",{value:!0});ES.validateTuple=void 0;const Kfe=Nn,bD=Et,cCt=kn,fCt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return fRe(e,"additionalItems",t);n.items=!0,!(0,bD.alwaysValidSchema)(n,t)&&e.ok((0,cCt.validateArray)(e))}};function fRe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=bD.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,Kfe._)`${s}.length`);n.forEach((f,d)=>{(0,bD.alwaysValidSchema)(a,f)||(r.if((0,Kfe._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,bD.checkStrictMode)(a,g,d.strictTuples)}}}ES.validateTuple=fRe;ES.default=fCt;Object.defineProperty(qQ,"__esModule",{value:!0});const dCt=ES,hCt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,dCt.validateTuple)(e,"items")};qQ.default=hCt;var WQ={};Object.defineProperty(WQ,"__esModule",{value:!0});const Xfe=Nn,pCt=Et,mCt=kn,gCt=wS,yCt={message:({params:{len:e}})=>(0,Xfe.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Xfe._)`{limit: ${e}}`},vCt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:yCt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,pCt.alwaysValidSchema)(r,t)&&(i?(0,gCt.validateAdditionalItems)(e,i):e.ok((0,mCt.validateArray)(e)))}};WQ.default=vCt;var GQ={};Object.defineProperty(GQ,"__esModule",{value:!0});const ac=Nn,qN=Et,bCt={message:({params:{min:e,max:t}})=>t===void 0?(0,ac.str)`must contain at least ${e} valid item(s)`:(0,ac.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,ac._)`{minContains: ${e}}`:(0,ac._)`{minContains: ${e}, maxContains: ${t}}`},_Ct={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:bCt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,ac._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,qN.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,qN.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,qN.alwaysValidSchema)(s,n)){let m=(0,ac._)`${c} >= ${o}`;a!==void 0&&(m=(0,ac._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,ac._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:qN.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,ac._)`${m}++`),a===void 0?t.if((0,ac._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,ac._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,ac._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};GQ.default=_Ct;var dRe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Nn,n=Et,r=kn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(dRe);var YQ={};Object.defineProperty(YQ,"__esModule",{value:!0});const hRe=Nn,wCt=Et,ECt={message:"property name must be valid",params:({params:e})=>(0,hRe._)`{propertyName: ${e.propertyName}}`},xCt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:ECt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,wCt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,hRe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};YQ.default=xCt;var n4={};Object.defineProperty(n4,"__esModule",{value:!0});const WN=kn,tf=Nn,SCt=Hh,GN=Et,TCt={message:"must NOT have additional properties",params:({params:e})=>(0,tf._)`{additionalProperty: ${e.additionalProperty}}`},ACt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:TCt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,GN.alwaysValidSchema)(o,n))return;const l=(0,WN.allSchemaProperties)(r.properties),c=(0,WN.allSchemaProperties)(r.patternProperties);f(),e.ok((0,tf._)`${s} === ${SCt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,GN.schemaRefOrVal)(o,r.properties,"properties");y=(0,WN.isOwnProperty)(t,v,g)}else l.length?y=(0,tf.or)(...l.map(v=>(0,tf._)`${g} === ${v}`)):y=tf.nil;return c.length&&(y=(0,tf.or)(y,...c.map(v=>(0,tf._)`${(0,WN.usePattern)(e,v)}.test(${g})`))),(0,tf.not)(y)}function h(g){t.code((0,tf._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,GN.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,tf.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,tf.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:GN.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};n4.default=ACt;var KQ={};Object.defineProperty(KQ,"__esModule",{value:!0});const CCt=Z6(),Qfe=kn,i9=Et,Jfe=n4,ICt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Jfe.default.code(new CCt.KeywordCxt(s,Jfe.default,"additionalProperties"));const o=(0,Qfe.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=i9.mergeEvaluated.props(t,(0,i9.toHash)(o),s.props));const a=o.filter(f=>!(0,i9.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,Qfe.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};KQ.default=ICt;var XQ={};Object.defineProperty(XQ,"__esModule",{value:!0});const Zfe=kn,YN=Nn,ede=Et,tde=Et,kCt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,Zfe.allSchemaProperties)(n),u=a.filter(m=>(0,ede.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof YN.Name)&&(s.props=(0,tde.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,ede.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,YN._)`${(0,Zfe.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:tde.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,YN._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,YN.not)(c),()=>t.break())})})}}};XQ.default=kCt;var QQ={};Object.defineProperty(QQ,"__esModule",{value:!0});const RCt=Et,NCt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,RCt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};QQ.default=NCt;var JQ={};Object.defineProperty(JQ,"__esModule",{value:!0});const PCt=kn,DCt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:PCt.validateUnion,error:{message:"must match a schema in anyOf"}};JQ.default=DCt;var ZQ={};Object.defineProperty(ZQ,"__esModule",{value:!0});const _D=Nn,OCt=Et,$Ct={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,_D._)`{passingSchemas: ${e.passing}}`},MCt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:$Ct,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,OCt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,_D._)`${u} && ${o}`).assign(o,!1).assign(a,(0,_D._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,_D.Name)})})}}};ZQ.default=MCt;var eJ={};Object.defineProperty(eJ,"__esModule",{value:!0});const LCt=Et,FCt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,LCt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};eJ.default=FCt;var tJ={};Object.defineProperty(tJ,"__esModule",{value:!0});const x$=Nn,pRe=Et,jCt={message:({params:e})=>(0,x$.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,x$._)`{failingKeyword: ${e.ifClause}}`},BCt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:jCt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,pRe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=nde(r,"then"),s=nde(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,x$.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,x$._)`${c}`):e.setParams({ifClause:c})}}}};function nde(e,t){const n=e.schema[t];return n!==void 0&&!(0,pRe.alwaysValidSchema)(e,n)}tJ.default=BCt;var nJ={};Object.defineProperty(nJ,"__esModule",{value:!0});const UCt=Et,zCt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,UCt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};nJ.default=zCt;Object.defineProperty(HQ,"__esModule",{value:!0});const VCt=wS,HCt=qQ,qCt=ES,WCt=WQ,GCt=GQ,YCt=dRe,KCt=YQ,XCt=n4,QCt=KQ,JCt=XQ,ZCt=QQ,eIt=JQ,tIt=ZQ,nIt=eJ,rIt=tJ,iIt=nJ;function sIt(e=!1){const t=[ZCt.default,eIt.default,tIt.default,nIt.default,rIt.default,iIt.default,KCt.default,XCt.default,YCt.default,QCt.default,JCt.default];return e?t.push(HCt.default,WCt.default):t.push(VCt.default,qCt.default),t.push(GCt.default),t}HQ.default=sIt;var rJ={},iJ={};Object.defineProperty(iJ,"__esModule",{value:!0});const Zi=Nn,oIt={message:({schemaCode:e})=>(0,Zi.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,Zi._)`{format: ${e}}`},aIt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:oIt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,Zi._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,Zi._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,Zi._)`${m}.type || "string"`).assign(y,(0,Zi._)`${m}.validate`),()=>n.assign(g,(0,Zi._)`"string"`).assign(y,m)),e.fail$data((0,Zi.or)(v(),b()));function v(){return u.strictSchema===!1?Zi.nil:(0,Zi._)`${o} && !${y}`}function b(){const w=c.$async?(0,Zi._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,Zi._)`${y}(${r})`,E=(0,Zi._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,Zi._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(E){const T=E instanceof RegExp?(0,Zi.regexpCode)(E):u.code.formats?(0,Zi._)`${u.code.formats}${(0,Zi.getProperty)(s)}`:void 0,S=n.scopeValue("formats",{key:s,ref:E,code:T});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,Zi._)`${S}.validate`]:["string",E,S]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,Zi._)`await ${y}(${r})`}return typeof g=="function"?(0,Zi._)`${y}(${r})`:(0,Zi._)`${y}.test(${r})`}}}};iJ.default=aIt;Object.defineProperty(rJ,"__esModule",{value:!0});const uIt=iJ,lIt=[uIt.default];rJ.default=lIt;var JE={};Object.defineProperty(JE,"__esModule",{value:!0});JE.contentVocabulary=JE.metadataVocabulary=void 0;JE.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];JE.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(kQ,"__esModule",{value:!0});const cIt=RQ,fIt=PQ,dIt=HQ,hIt=rJ,rde=JE,pIt=[cIt.default,fIt.default,(0,dIt.default)(),hIt.default,rde.metadataVocabulary,rde.contentVocabulary];kQ.default=pIt;var sJ={},r4={};Object.defineProperty(r4,"__esModule",{value:!0});r4.DiscrError=void 0;var ide;(function(e){e.Tag="tag",e.Mapping="mapping"})(ide||(r4.DiscrError=ide={}));Object.defineProperty(sJ,"__esModule",{value:!0});const G_=Nn,oV=r4,sde=Tu,mIt=_S,gIt=Et,yIt={message:({params:{discrError:e,tagName:t}})=>e===oV.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,G_._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},vIt={keyword:"discriminator",type:"object",schemaType:"object",error:yIt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,G_._)`${n}${(0,G_.getProperty)(a)}`);t.if((0,G_._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:oV.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,G_._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:oV.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,G_.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let E=o[w];if(E!=null&&E.$ref&&!(0,gIt.schemaHasRulesButRef)(E,s.self.RULES)){const S=E.$ref;if(E=sde.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,S),E instanceof sde.SchemaEnv&&(E=E.schema),E===void 0)throw new mIt.default(s.opts.uriResolver,s.baseId,S)}const T=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof T!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(T,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,E){if(w.const)b(w.const,E);else if(w.enum)for(const T of w.enum)b(T,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(w,E){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=E}}}};sJ.default=vIt;const bIt="http://json-schema.org/draft-07/schema#",_It="http://json-schema.org/draft-07/schema#",wIt="Core schema meta-schema",EIt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},xIt=["object","boolean"],SIt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},TIt={$schema:bIt,$id:_It,title:wIt,definitions:EIt,type:xIt,properties:SIt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=zke,r=kQ,i=sJ,s=TIt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=Z6();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Nn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=Rk;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=_S;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(Jz,Jz.exports);var AIt=Jz.exports;const mRe=Hl(AIt),CIt="#/definitions/StudyConfig",IIt="http://json-schema.org/draft-07/schema#",kIt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": [       {         "label": "Europe",         "value": "Europe"       },       {         "label": "Japan",         "value": "Japan"       },       {         "label": "USA",         "value": "USA"       }     ],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  },  {    "label": "Option 3",    "value": "opt-3"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": [  {    "label": "Red",    "value": "red"  },  {    "label": "Blue",    "value": "blue"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": [      {        "label": "Man",        "value": "Man"      },      {        "label": "Woman",        "value": "Woman"      },      {        "label": "Genderqueer",        "value": "Genderqueer"      },      {        "label": "Third-gender",        "value": "Third-gender"      },      ... etc.    ]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.2/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.2/src/public/demo-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.2/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},RIt={$ref:CIt,$schema:IIt,definitions:kIt},NIt="#/definitions/GlobalConfig",PIt="http://json-schema.org/draft-07/schema#",DIt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},OIt={$ref:NIt,$schema:PIt,definitions:DIt},gRe=new mRe;gRe.addSchema(OIt);const ode=gRe.getSchema("#/definitions/GlobalConfig"),yRe=new mRe;yRe.addSchema(RIt);const s9=yRe.getSchema("#/definitions/StudyConfig");function $It(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function i4(e){return e.baseComponent!==void 0}function MIt(e){const t=bQ.parse(e),n=ode(t),r=$It(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...ode.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function vRe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):vRe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function LIt(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;i4(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=ZEe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return vRe(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function FIt(e){let t=!1,n;try{n=bQ.parse(e),t=s9(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=LIt(n);r=[...s9.errors||[],...s],i=o}else r=s9.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function bRe(){const e=qm(),{setAlertModal:t}=Fh(),n=jh();I.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var ade=Object.prototype.hasOwnProperty;function ude(e,t,n){for(n of e.keys())if(IA(n,t))return n}function IA(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&IA(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=ude(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=ude(t,i),!i)||!IA(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(ade.call(e,n)&&++r&&!ade.call(t,n)||!(n in t)||!IA(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function jIt(e){var t=I.useRef(e),n=I.useRef(0);return IA(e,t.current)||(t.current=e,n.current+=1),I.useMemo(function(){return t.current},[n.current])}function BIt(e,t){return I.useEffect(e,jIt(t))}const UIt=(e,t=null)=>{const[n,r]=I.useState("idle"),[i,s]=I.useState(null),[o,a]=I.useState(null),u=I.useRef(),l=I.useRef(!1);I.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=I.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return BIt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},lde=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta","configHash"],_Re=["participantId","trialId","trialOrder","responseId"];function oJ(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function zIt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(mm(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=i4(u)&&u.baseComponent&&n.baseComponents?FY({},n.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=l.description),t.includes("instruction")&&(p.instruction=l.instruction),t.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),t.includes("answer")&&(p.answer=h),t.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(b=>b.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return t.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),t.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),t.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}async function VIt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[..._Re,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await zIt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function HIt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=I.useState([...lde].filter(h=>h!=="meta")),a=Ss(),{value:u,status:l,error:c}=UIt(VIt,[s,r,a.storageEngine,i]),f=I.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(m=>`"${`${p[m]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);oJ(h,n)},[n,u]),d=I.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return _.jsxs(Wi,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[_.jsx($G,{searchable:!0,nothingFoundMessage:"Property not found",data:[...lde],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:_.jsx(kXe,{}),variant:"filled"}),_.jsx(Al,{h:"md"}),_.jsxs(we,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?_.jsxs(Ht,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[_.jsx(Ht.Thead,{children:_.jsx(Ht.Tr,{children:u.header.map(h=>_.jsx(Ht.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:_.jsxs(Pt,{direction:"row",justify:"space-between",align:"center",children:[h,!_Re.includes(h)&&_.jsx(Ab,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:_.jsx(cY,{size:16})})]})},h))})}),_.jsx(Ht.Tbody,{children:u.rows.slice(0,5).map((h,p)=>_.jsx(Ht.Tr,{children:u.header.map(m=>_.jsx(Ht.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):l==="error"&&c?_.jsx(jx,{variant:"light",children:c.message}):null,_.jsx(Pl,{visible:l==="pending"||l==="idle"})]}),_.jsx(Al,{h:"sm"}),_.jsx(Pt,{justify:"center",fz:"sm",c:"dimmed",children:_.jsx(it,{children:d})}),_.jsx(Al,{h:"md"}),_.jsxs(Es,{justify:"right",children:[_.jsx(ln,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),_.jsx(ln,{leftSection:_.jsx(swe,{}),onClick:()=>f(),"data-autofocus":!0,children:"Download"})]})]})}function qIt(){const e=M0(),{storageEngine:t}=Ss(),{answers:n}=Uc(v=>v),[r,i]=I.useState(!1);I.useEffect(()=>{const v=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(v))},1e3)},[]),bRe();const[s,o]=I.useState(),[a,u]=I.useState(""),l=e.studyMetadata.title.replace(" ","_");I.useEffect(()=>{async function v(){if(t){const b=await t.getCurrentParticipantId(),w=await t.getParticipantData();u(b),o(w)}}v()},[t]);const c=I.useCallback(async()=>{oJ(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=I.useState(Math.floor(d/1e3));I.useEffect(()=>{if(r){const v=setInterval(()=>{p(b=>b-1)},1e3);return h<=0?(f&&c(),clearInterval(v),()=>clearInterval(v)):()=>clearInterval(v)}return()=>{}},[f,r,h,c]);const m=Ob(),[g,y]=I.useState(!1);return I.useEffect(()=>{(async()=>{if(t){const b=await t.getModes(m);y(b.dataCollectionEnabled)}})()},[t,m]),_.jsx(fm,{style:{height:"100%"},children:_.jsx(Pt,{direction:"column",children:r||!g?_.jsx(it,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?_.jsx(Wa,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):_.jsxs(_.Fragment,{children:[_.jsx(it,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),_.jsx(Al,{h:"lg"}),_.jsx(fm,{children:_.jsx(Oh,{color:"blue"})})]})})})}function WIt(){var d;const e=M0(),t=qm(),n=ky()||"Notfound",r=e.components[n],i=jY();bRe();const{storageEngine:s}=Ss(),o=jh(),{setAlertModal:a}=Fh();if(I.useEffect(()=>{(s==null?void 0:s.getEngine())!=="localStorage"&&o(a({show:!0,message:"There was an issue connecting to the localStorage database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return _.jsx(qIt,{});if(n==="Notfound")return _.jsx(M1,{email:e.uiConfig.contactEmail});const u=i4(r)&&e.baseComponents?FY({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return _.jsxs(_.Fragment,{children:[c==="aboveStimulus"&&_.jsx(Wa,{text:l}),_.jsx(WO,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),_.jsxs(I.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&_.jsx(NTt,{currentConfig:u}),u.type==="website"&&_.jsx(Mot,{currentConfig:u}),u.type==="image"&&_.jsx(Fot,{currentConfig:u}),u.type==="react-component"&&_.jsx(RTt,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&_.jsx(Wa,{text:l}),_.jsx(WO,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function aV(e){const[t]=aY();return _.jsx(oY,{...e,to:{pathname:e.to,search:t.toString()}})}function wRe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=wRe(o,t,n,r),r.includes(o.orderPath))break}return i}function ERe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=ERe(s,r)}}),n}function GIt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function YIt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=Ob(),c=Hm(),f=qm(),[d,{close:h,open:p}]=nL(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?wRe(n,e,r,a.orderPath):-1,{trialId:y}=dm(),v=y===e,b=s?f===g:f===`reviewer-${e}`,w=u?v:b,E=I.useCallback(()=>c(y?`./../${e}`:`./${e}`),[c,e,y]),S=u?E:()=>c(s?`/${l}/${g}`:`/${l}/reviewer-${e}`);return _.jsxs(ko,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[_.jsx(ko.Target,{children:_.jsx(we,{onMouseEnter:p,onMouseLeave:h,children:_.jsx(RL,{active:w,style:{lineHeight:"32px",height:"32px"},label:_.jsxs(we,{children:[i&&_.jsx(gXe,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),w?_.jsx(it,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):_.jsx(it,{size:"sm",display:"inline",children:e})]}),onClick:S,disabled:t})})}),m&&(m.description||m.meta)&&_.jsx(ko.Dropdown,{onMouseLeave:h,children:_.jsx(it,{size:"sm",children:_.jsxs(we,{children:[m.description&&_.jsxs(we,{children:[_.jsx(it,{fw:900,display:"inline-block",mr:2,children:"Description:"}),_.jsx(it,{fw:400,component:"span",children:m.description})]}),m.meta&&_.jsxs(it,{children:[_.jsx(it,{fw:"900",component:"span",children:"Task Meta: "}),_.jsx(it,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})})]})}function S$({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=m0(e.components);return n&&r&&(o=GIt(m0(e.components),m0(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),_.jsx(_.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return _.jsx(YIt,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?mm(c).length-ERe(u,c):0,d=mm(u);return _.jsx(RL,{label:_.jsxs(we,{style:{opacity:f>0?1:.5},children:[_.jsx(it,{size:"sm",display:"inline",children:u.order}),u.order==="random"||u.order==="latinSquare"?_.jsx(pXe,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&_.jsxs(d0,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&_.jsx(d0,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:_.jsx(we,{style:{borderLeft:"1px solid #e9ecef"},children:_.jsx(S$,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function xRe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function cde({text:e}){return _.jsx(wi,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:_.jsx(nwe,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function KIt(){const{sequence:e,metadata:t}=Uc(f=>f),{toggleStudyBrowser:n}=Fh(),r=M0(),i=jh(),s=Ob(),o=X_e(`/${s}`),{storageEngine:a}=Ss(),u=I.useMemo(()=>{let f=m0(r.sequence);return f=MY(f,"root"),f.components.push("end"),f},[r.sequence]),[l,c]=I.useState("participant");return _.jsxs(ci.Aside,{p:"0",children:[_.jsx(ci.Section,{children:_.jsxs(Pt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[_.jsx(it,{size:"md",fw:700,pt:3,children:"Study Browser"}),_.jsx(ln,{variant:"light",leftSection:_.jsx(lY,{size:14}),onClick:()=>xRe(a,r,t,o),size:"xs",disabled:l==="allTrials",children:"Next Participant"}),_.jsx(Fm,{onClick:()=>i(n()),mt:1})]})}),_.jsx(ci.Section,{grow:!0,component:um,p:"xs",pt:0,children:_.jsxs(es,{value:l,onChange:c,children:[_.jsx(we,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:_.jsxs(es.List,{grow:!0,children:[_.jsxs(es.Tab,{value:"participant",children:["Participant View",_.jsx(cde,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),_.jsxs(es.Tab,{value:"allTrials",children:["All Trials View",_.jsx(cde,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),_.jsx(es.Panel,{value:"participant",children:_.jsx(S$,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),_.jsx(es.Panel,{value:"allTrials",children:_.jsx(S$,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function XIt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const{config:n,metadata:r}=Uc(E=>E),i=LY(),s=jh(),{toggleShowHelpText:o,toggleStudyBrowser:a}=Fh(),{storageEngine:u}=Ss(),l=qm(),c=i.length-1,f=typeof l=="number"?l/c*100:0,[d,h]=I.useState(!1),p=n==null?void 0:n.uiConfig.logoPath,m=n==null?void 0:n.uiConfig.withProgressBar,g=Ob(),y=X_e(`/${g}`),v=I.useRef(null),[b,w]=I.useState(!1);return I.useEffect(()=>{const E=v.current;E&&w(E.scrollWidth>E.offsetWidth)},[n]),_.jsx(ci.Header,{p:"md",children:_.jsxs(ja,{mt:-7,align:"center",children:[_.jsx(ja.Col,{span:4,children:_.jsxs(Pt,{align:"center",children:[_.jsx(Ty,{w:40,src:`${Fu}${p}`,alt:"Study Logo"}),_.jsx(Al,{w:"md"}),_.jsx(Ei,{ref:v,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:b?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),_.jsx(ja.Col,{span:4,children:m&&_.jsx(qx,{radius:"md",size:"lg",value:f})}),_.jsx(ja.Col,{span:4,children:_.jsxs(Es,{wrap:"nowrap",justify:"right",children:[!t&&_.jsx(wi,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:_.jsx(d0,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&_.jsx(ln,{variant:"outline",onClick:()=>s(o()),children:"Help"}),_.jsxs(wu,{shadow:"md",width:200,withinPortal:!0,opened:d,onChange:h,children:[_.jsx(wu.Target,{children:_.jsx(Ab,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:_.jsx(SXe,{})})}),_.jsxs(wu.Dropdown,{children:[e&&_.jsx(wu.Item,{leftSection:_.jsx(MXe,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),_.jsx(wu.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:_.jsx(RXe,{size:14}),children:"Contact"}),e&&_.jsx(wu.Item,{leftSection:_.jsx(lY,{size:14}),onClick:()=>xRe(u,n,r,y),children:"Next Participant"})]})]})]})})]})})}function SRe(e,t){var n;return i4(e)&&t.baseComponents?FY({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function QIt(){var u;const e=(u=M0())==null?void 0:u.uiConfig.sidebar,t=M0(),n=ky(),r=t.components[n],i=I.useMemo(()=>r?SRe(r,t):null,[r,t]),s=jY(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?_.jsxs(ci.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&_.jsx(ci.Section,{bg:"gray.3",p:"md",children:_.jsxs(it,{c:"gray.9",children:[_.jsx(it,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),_.jsx(Wa,{text:o})]})}),_.jsx(ci.Section,{p:"md",children:_.jsx(WO,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):_.jsx(ci.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:_.jsx(WO,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function JIt(){const{showHelpText:e,config:t}=Uc(u=>u),n=jh(),{toggleShowHelpText:r}=Fh(),[i,s]=I.useState(""),[o,a]=I.useState(!0);return I.useEffect(()=>{async function u(){const l=await UY(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),_.jsx(Wi,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?_.jsx(Wa,{text:i}):_.jsx(M1,{path:t.uiConfig.helpTextPath})})}function ZIt(){const{alertModal:e}=Uc(o=>o),{setAlertModal:t}=Fh(),n=jh(),[r,i]=I.useState(e.show),s=I.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return I.useEffect(()=>i(e.show),[e.show]),_.jsx(Wi,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:_.jsxs(jx,{color:"red",radius:"xs",title:"Alert",icon:_.jsx(hXe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[_.jsx(it,{my:"md",children:e.message}),_.jsx(Es,{w:"100%",justify:"end",children:_.jsx(ln,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function ekt(){const e=I.useRef([]),t=M0(),n=t.uiConfig.windowEventDebounceTime??100,r=Uc(d=>d.showStudyBrowser);I.useEffect(()=>{const d=yd(E=>{e.current.push([Date.now(),"focus",E.target instanceof HTMLElement?E.target.tagName:""])},n,{maxWait:n}),h=yd(E=>{e.current.push([Date.now(),"input",E.data??""])},n,{maxWait:n}),p=yd(E=>{e.current.push([Date.now(),"keypress",E.key])},n,{maxWait:n}),m=yd(E=>{e.current.push([Date.now(),"mousedown",[E.clientX,E.clientY]])},n,{maxWait:n}),g=yd(E=>{e.current.push([Date.now(),"mouseup",[E.clientX,E.clientY]])},n,{maxWait:n}),y=yd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=yd(E=>{e.current.push([Date.now(),"mousemove",[E.clientX,E.clientY]])},n,{maxWait:n}),b=yd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=yd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",b),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",b),document.removeEventListener("visibilitychange",w)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:s}=Ss(),o=Ob(),[a,u]=I.useState(!1),[l,c]=I.useState(!1);I.useEffect(()=>{(async()=>{if(s){const h=await s.getModes(o);u(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[s,o]);const f=I.useMemo(()=>a&&r,[a,r]);return _.jsx(sxe.Provider,{value:e,children:_.jsxs(ci,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!f,mobile:!f}},children:[_.jsx(QIt,{}),_.jsx(KIt,{}),_.jsx(XIt,{studyNavigatorEnabled:a,dataCollectionEnabled:l}),_.jsx(JIt,{}),_.jsx(ZIt,{}),_.jsx(ci.Main,{children:_.jsx(JKe,{})})]})})}function tkt(e,t=!1){return typeof e=="number"?fde(e,t):fde(e.length,t).map(r=>r.map(i=>e[i]))}function fde(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function TRe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=TRe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function nkt(e,t){const n=m0(e);return TRe(n,t,"root")}function ARe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&ARe(s,t,i,o)})}function rkt(e){const t=[];return ARe(e,t,"",0),t}function dde(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return tkt(i.sort(()=>.5-Math.random()),!0)}function ikt(e){const n=rkt(e.sequence).map(s=>({[s]:dde(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=nkt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=dde(e,o))})}),i}var skt={VITE_BASE_PATH:"/study/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`,VITE_STORAGE_ENGINE:"localStorage",VITE_RECAPTCHAV3TOKEN:"6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth",BASE_URL:"/study/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function okt(e){const t=await(await fetch(`${Fu}${e}`)).text();return FIt(t)}async function s4(e,t){const n=t.configsList.find(r=>awe(r)===e);if(n){const r=t.configs[n];return await okt(`${r.path}`)}return null}async function akt(e){const t={},n=e.configsList.filter(i=>skt.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>s4(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function ukt({globalConfig:e}){const t=Ob(),[n,r]=I.useState(null),i=e.configsList.includes(t);I.useEffect(()=>{s4(t,e).then(h=>{r(h)})},[e,t]);const[s,o]=I.useState([]),[a,u]=I.useState(null),{storageEngine:l}=Ss(),[c]=aY();I.useEffect(()=>{async function h(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await ikt(n));const m=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,g=Object.fromEntries(c.entries()),y=await fetch("https://api.ipify.org?format=json").catch(T=>""),v=y instanceof Response?await y.json():{ip:""},b={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:v.ip},w=await l.initializeParticipantSession(t,g,n,b,m),E=await tot(t,n,w.sequence,b,w.answers);u(E),o([{element:_.jsx(ekt,{}),children:[{path:"/",element:_.jsx(aV,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(Ei,{order:2,mb:8,children:"Error loading config"}),_.jsx(s7,{issues:n.errors,type:"error"})]}):_.jsx(WIt,{})}]}])}h()},[l,n,t,c]);const f=J_e(s);let d=null;return i?s.length===0?d=_.jsx(Pl,{visible:!0}):d=f&&a?_.jsx(ixe.Provider,{value:a,children:_.jsx(Kit,{store:a.store,children:f})}):_.jsx(M1,{}):d=_.jsx(M1,{}),d}var hde={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CRe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},lkt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},aJ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(CRe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):lkt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new ckt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ckt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fkt=function(e){const t=CRe(e);return aJ.encodeByteArray(t,!0)},T$=function(e){return fkt(e).replace(/\./g,"")},IRe=function(e){try{return aJ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kRe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dkt=()=>kRe().__FIREBASE_DEFAULTS__,hkt=()=>{if(typeof process>"u"||typeof hde>"u")return;const e=hde.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},pkt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&IRe(e[1]);return t&&JSON.parse(t)},o4=()=>{try{return dkt()||hkt()||pkt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},RRe=e=>{var t,n;return(n=(t=o4())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},mkt=e=>{const t=RRe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},NRe=()=>{var e;return(e=o4())===null||e===void 0?void 0:e.config},PRe=e=>{var t;return(t=o4())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gkt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[T$(JSON.stringify(n)),T$(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ykt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($o())}function vkt(){var e;const t=(e=o4())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bkt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function _kt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wkt(){const e=$o();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ekt(){return!vkt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uJ(){try{return typeof indexedDB=="object"}catch{return!1}}function xkt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Skt="FirebaseError";class qh extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Skt,Object.setPrototypeOf(this,qh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xS.prototype.create)}}class xS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?Tkt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new qh(i,a,r)}}function Tkt(e,t){return e.replace(Akt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const Akt=/\{\$([^}]+)}/g;function Ckt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ZC(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(pde(s)&&pde(o)){if(!ZC(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function pde(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Ikt(e,t){const n=new kkt(e,t);return n.subscribe.bind(n)}class kkt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Rkt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=o9),i.error===void 0&&(i.error=o9),i.complete===void 0&&(i.complete=o9);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rkt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function o9(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nkt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pkt=1e3,Dkt=2,Okt=4*60*60*1e3,$kt=.5;function Mkt(e,t=Pkt,n=Dkt){const r=t*Math.pow(n,e),i=Math.round($kt*r*(Math.random()-.5)*2);return Math.min(Okt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(e){return e&&e._delegate?e._delegate:e}class xh{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lkt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new JC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(jkt(t))try{this.getOrInitializeService({instanceIdentifier:Rv})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Rv){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Rv){return this.instances.has(t)}getOptions(t=Rv){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Fkt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Rv){return this.component?this.component.multipleInstances?t:Rv:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Fkt(e){return e===Rv?void 0:e}function jkt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bkt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Lkt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(qn||(qn={}));const Ukt={debug:qn.DEBUG,verbose:qn.VERBOSE,info:qn.INFO,warn:qn.WARN,error:qn.ERROR,silent:qn.SILENT},zkt=qn.INFO,Vkt={[qn.DEBUG]:"log",[qn.VERBOSE]:"log",[qn.INFO]:"info",[qn.WARN]:"warn",[qn.ERROR]:"error"},Hkt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=Vkt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class a4{constructor(t){this.name=t,this._logLevel=zkt,this._logHandler=Hkt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in qn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Ukt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,qn.DEBUG,...t),this._logHandler(this,qn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,qn.VERBOSE,...t),this._logHandler(this,qn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,qn.INFO,...t),this._logHandler(this,qn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,qn.WARN,...t),this._logHandler(this,qn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,qn.ERROR,...t),this._logHandler(this,qn.ERROR,...t)}}const qkt=(e,t)=>t.some(n=>e instanceof n);let mde,gde;function Wkt(){return mde||(mde=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Gkt(){return gde||(gde=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DRe=new WeakMap,uV=new WeakMap,ORe=new WeakMap,a9=new WeakMap,lJ=new WeakMap;function Ykt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(_0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&DRe.set(n,e)}).catch(()=>{}),lJ.set(t,e),t}function Kkt(e){if(uV.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});uV.set(e,t)}let lV={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return uV.get(e);if(t==="objectStoreNames")return e.objectStoreNames||ORe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Xkt(e){lV=e(lV)}function Qkt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(u9(this),t,...n);return ORe.set(r,t.sort?t.sort():[t]),_0(r)}:Gkt().includes(e)?function(...t){return e.apply(u9(this),t),_0(DRe.get(this))}:function(...t){return _0(e.apply(u9(this),t))}}function Jkt(e){return typeof e=="function"?Qkt(e):(e instanceof IDBTransaction&&Kkt(e),qkt(e,Wkt())?new Proxy(e,lV):e)}function _0(e){if(e instanceof IDBRequest)return Ykt(e);if(a9.has(e))return a9.get(e);const t=Jkt(e);return t!==e&&(a9.set(e,t),lJ.set(t,e)),t}const u9=e=>lJ.get(e);function Zkt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=_0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(_0(o.result),u.oldVersion,u.newVersion,_0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const eRt=["get","getKey","getAll","getAllKeys","count"],tRt=["put","add","delete","clear"],l9=new Map;function yde(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(l9.get(t))return l9.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=tRt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||eRt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return l9.set(t,s),s}Xkt(e=>({...e,get:(t,n,r)=>yde(t,n)||e.get(t,n,r),has:(t,n)=>!!yde(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nRt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rRt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function rRt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const cV="@firebase/app",vde="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=new a4("@firebase/app"),iRt="@firebase/app-compat",sRt="@firebase/analytics-compat",oRt="@firebase/analytics",aRt="@firebase/app-check-compat",uRt="@firebase/app-check",lRt="@firebase/auth",cRt="@firebase/auth-compat",fRt="@firebase/database",dRt="@firebase/database-compat",hRt="@firebase/functions",pRt="@firebase/functions-compat",mRt="@firebase/installations",gRt="@firebase/installations-compat",yRt="@firebase/messaging",vRt="@firebase/messaging-compat",bRt="@firebase/performance",_Rt="@firebase/performance-compat",wRt="@firebase/remote-config",ERt="@firebase/remote-config-compat",xRt="@firebase/storage",SRt="@firebase/storage-compat",TRt="@firebase/firestore",ARt="@firebase/vertexai-preview",CRt="@firebase/firestore-compat",IRt="firebase",kRt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV="[DEFAULT]",RRt={[cV]:"fire-core",[iRt]:"fire-core-compat",[oRt]:"fire-analytics",[sRt]:"fire-analytics-compat",[uRt]:"fire-app-check",[aRt]:"fire-app-check-compat",[lRt]:"fire-auth",[cRt]:"fire-auth-compat",[fRt]:"fire-rtdb",[dRt]:"fire-rtdb-compat",[hRt]:"fire-fn",[pRt]:"fire-fn-compat",[mRt]:"fire-iid",[gRt]:"fire-iid-compat",[yRt]:"fire-fcm",[vRt]:"fire-fcm-compat",[bRt]:"fire-perf",[_Rt]:"fire-perf-compat",[wRt]:"fire-rc",[ERt]:"fire-rc-compat",[xRt]:"fire-gcs",[SRt]:"fire-gcs-compat",[TRt]:"fire-fst",[CRt]:"fire-fst-compat",[ARt]:"fire-vertex","fire-js":"fire-js",[IRt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A$=new Map,NRt=new Map,dV=new Map;function bde(e,t){try{e.container.addComponent(t)}catch(n){X1.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Cm(e){const t=e.name;if(dV.has(t))return X1.debug(`There were multiple attempts to register component ${t}.`),!1;dV.set(t,e);for(const n of A$.values())bde(n,e);for(const n of NRt.values())bde(n,e);return!0}function SS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Gd(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PRt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},w0=new xS("app","Firebase",PRt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DRt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw w0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=kRt;function $Re(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:fV,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw w0.create("bad-app-name",{appName:String(i)});if(n||(n=NRe()),!n)throw w0.create("no-options");const s=A$.get(i);if(s){if(ZC(n,s.options)&&ZC(r,s.config))return s;throw w0.create("duplicate-app",{appName:i})}const o=new Bkt(i);for(const u of dV.values())o.addComponent(u);const a=new DRt(n,r,o);return A$.set(i,a),a}function cJ(e=fV){const t=A$.get(e);if(!t&&e===fV&&NRe())return $Re();if(!t)throw w0.create("no-app",{appName:e});return t}function Of(e,t,n){var r;let i=(r=RRt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),X1.warn(a.join(" "));return}Cm(new xh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ORt="firebase-heartbeat-database",$Rt=1,eI="firebase-heartbeat-store";let c9=null;function MRe(){return c9||(c9=Zkt(ORt,$Rt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(eI)}catch(n){console.warn(n)}}}}).catch(e=>{throw w0.create("idb-open",{originalErrorMessage:e.message})})),c9}async function MRt(e){try{const n=(await MRe()).transaction(eI),r=await n.objectStore(eI).get(LRe(e));return await n.done,r}catch(t){if(t instanceof qh)X1.warn(t.message);else{const n=w0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});X1.warn(n.message)}}}async function _de(e,t){try{const r=(await MRe()).transaction(eI,"readwrite");await r.objectStore(eI).put(t,LRe(e)),await r.done}catch(n){if(n instanceof qh)X1.warn(n.message);else{const r=w0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});X1.warn(r.message)}}}function LRe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LRt=1024,FRt=30*24*60*60*1e3;class jRt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new URt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=wde();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=FRt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wde(),{heartbeatsToSend:r,unsentEntries:i}=BRt(this._heartbeatsCache.heartbeats),s=T$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function wde(){return new Date().toISOString().substring(0,10)}function BRt(e,t=LRt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Ede(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ede(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class URt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uJ()?xkt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await MRt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return _de(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return _de(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Ede(e){return T$(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zRt(e){Cm(new xh("platform-logger",t=>new nRt(t),"PRIVATE")),Cm(new xh("heartbeat",t=>new jRt(t),"PRIVATE")),Of(cV,vde,e),Of(cV,vde,"esm2017"),Of("fire-js","")}zRt("");function FRe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VRt=FRe,jRe=new xS("auth","Firebase",FRe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C$=new a4("@firebase/auth");function HRt(e,...t){C$.logLevel<=qn.WARN&&C$.warn(`Auth (${Bb}): ${e}`,...t)}function wD(e,...t){C$.logLevel<=qn.ERROR&&C$.error(`Auth (${Bb}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(e,...t){throw dJ(e,...t)}function $f(e,...t){return dJ(e,...t)}function fJ(e,t,n){const r=Object.assign(Object.assign({},VRt()),{[t]:n});return new xS("auth","Firebase",r).create(t,{appName:e.name})}function E0(e){return fJ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qRt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Sh(e,"argument-error"),fJ(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dJ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return jRe.create(e,...t)}function rn(e,t,...n){if(!e)throw dJ(t,...n)}function zp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw wD(t),new Error(t)}function Im(e,t){e||zp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function WRt(){return xde()==="http:"||xde()==="https:"}function xde(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GRt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WRt()||bkt()||"connection"in navigator)?navigator.onLine:!0}function YRt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(t,n){this.shortDelay=t,this.longDelay=n,Im(n>t,"Short delay should be less than long delay!"),this.isMobile=ykt()||_kt()}get(){return GRt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hJ(e,t){Im(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BRe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KRt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XRt=new Dk(3e4,6e4);function u4(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function TS(e,t,n,r,i={}){return URe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=Pk(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),BRe.fetch()(VRe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function URe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},KRt),t);try{const i=new QRt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw KN(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw KN(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw KN(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw KN(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw fJ(e,c,l);Sh(e,c)}}catch(i){if(i instanceof qh)throw i;Sh(e,"network-request-failed",{message:String(i)})}}async function zRe(e,t,n,r,i={}){const s=await TS(e,t,n,r,i);return"mfaPendingCredential"in s&&Sh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function VRe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?hJ(e.config,i):`${e.config.apiScheme}://${i}`}class QRt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($f(this.auth,"network-request-failed")),XRt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function KN(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=$f(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JRt(e,t){return TS(e,"POST","/v1/accounts:delete",t)}async function HRe(e,t){return TS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function ZRt(e,t=!1){const n=ni(e),r=await n.getIdToken(t),i=pJ(r);rn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:kA(f9(i.auth_time)),issuedAtTime:kA(f9(i.iat)),expirationTime:kA(f9(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function f9(e){return Number(e)*1e3}function pJ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return wD("JWT malformed, contained fewer than 3 sections"),null;try{const i=IRe(n);return i?JSON.parse(i):(wD("Failed to decode base64 JWT payload"),null)}catch(i){return wD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Sde(e){const t=pJ(e);return rn(t,"internal-error"),rn(typeof t.exp<"u","internal-error"),rn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tI(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof qh&&eNt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function eNt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tNt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=kA(this.lastLoginAt),this.creationTime=kA(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I$(e){var t;const n=e.auth,r=await e.getIdToken(),i=await tI(e,HRe(n,{idToken:r}));rn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?qRe(s.providerUserInfo):[],a=rNt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new pV(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function nNt(e){const t=ni(e);await I$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function rNt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function qRe(e){return e.map(t=>{var{providerId:n}=t,r=zI(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iNt(e,t){const n=await URe(e,{},async()=>{const r=Pk({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=VRe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",BRe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sNt(e,t){return TS(e,"POST","/v2/accounts:revokeToken",u4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){rn(t.idToken,"internal-error"),rn(typeof t.idToken<"u","internal-error"),rn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Sde(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){rn(t.length!==0,"internal-error");const n=Sde(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(rn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await iNt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Zw;return r&&(rn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(rn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(rn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Zw,this.toJSON())}_performRefresh(){return zp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(e,t){rn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Vp{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=zI(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tNt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new pV(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await tI(this,this.stsTokenManager.getToken(this.auth,t));return rn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return ZRt(this,t)}reload(){return nNt(this)}_assign(t){this!==t&&(rn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Vp(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){rn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await I$(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gd(this.auth.app))return Promise.reject(E0(this.auth));const t=await this.getIdToken();return await tI(this,JRt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:w,isAnonymous:E,providerData:T,stsTokenManager:S}=n;rn(b&&S,t,"internal-error");const A=Zw.fromJSON(this.name,S);rn(typeof b=="string",t,"internal-error"),pg(f,t.name),pg(d,t.name),rn(typeof w=="boolean",t,"internal-error"),rn(typeof E=="boolean",t,"internal-error"),pg(h,t.name),pg(p,t.name),pg(m,t.name),pg(g,t.name),pg(y,t.name),pg(v,t.name);const C=new Vp({uid:b,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:A,createdAt:y,lastLoginAt:v});return T&&Array.isArray(T)&&(C.providerData=T.map(k=>Object.assign({},k))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(t,n,r=!1){const i=new Zw;i.updateFromServerResponse(n);const s=new Vp({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await I$(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];rn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?qRe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Zw;a.updateFromIdToken(r);const u=new Vp({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new pV(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tde=new Map;function Hp(e){Im(e instanceof Function,"Expected a class definition");let t=Tde.get(e);return t?(Im(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Tde.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WRe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}WRe.type="NONE";const Ade=WRe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(e,t,n){return`firebase:${e}:${t}:${n}`}class eE{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ED(this.userKey,i.apiKey,s),this.fullPersistenceKey=ED("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Vp._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new eE(Hp(Ade),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Hp(Ade);const o=ED(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Vp._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new eE(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new eE(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cde(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(KRe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(GRe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(QRe(t))return"Blackberry";if(JRe(t))return"Webos";if(mJ(t))return"Safari";if((t.includes("chrome/")||YRe(t))&&!t.includes("edge/"))return"Chrome";if(XRe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function GRe(e=$o()){return/firefox\//i.test(e)}function mJ(e=$o()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function YRe(e=$o()){return/crios\//i.test(e)}function KRe(e=$o()){return/iemobile/i.test(e)}function XRe(e=$o()){return/android/i.test(e)}function QRe(e=$o()){return/blackberry/i.test(e)}function JRe(e=$o()){return/webos/i.test(e)}function l4(e=$o()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function oNt(e=$o()){var t;return l4(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function aNt(){return wkt()&&document.documentMode===10}function ZRe(e=$o()){return l4(e)||XRe(e)||JRe(e)||QRe(e)||/windows phone/i.test(e)||KRe(e)}function uNt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eNe(e,t=[]){let n;switch(e){case"Browser":n=Cde($o());break;case"Worker":n=`${Cde($o())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Bb}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lNt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cNt(e,t={}){return TS(e,"GET","/v2/passwordPolicy",u4(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fNt=6;class dNt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:fNt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hNt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ide(this),this.idTokenSubscription=new Ide(this),this.beforeStateQueue=new lNt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jRe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Hp(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await eE.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await HRe(this,{idToken:t}),r=await Vp._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Gd(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return rn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await I$(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=YRt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Gd(this.app))return Promise.reject(E0(this));const n=t?ni(t):null;return n&&rn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&rn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Gd(this.app)?Promise.reject(E0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Gd(this.app)?Promise.reject(E0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hp(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await cNt(this),n=new dNt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new xS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sNt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Hp(t)||this._popupRedirectResolver;rn(n,this,"argument-error"),this.redirectPersistenceManager=await eE.create(this,[Hp(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(rn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return rn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=eNe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&HRt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ok(e){return ni(e)}class Ide{constructor(t){this.auth=t,this.observer=null,this.addObserver=Ikt(n=>this.observer=n)}get next(){return rn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gJ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pNt(e){gJ=e}function mNt(e){return gJ.loadJS(e)}function gNt(){return gJ.gapiScript}function yNt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vNt(e,t){const n=SS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ZC(s,t??{}))return i;Sh(i,"already-initialized")}return n.initialize({options:t})}function bNt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hp);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function _Nt(e,t,n){const r=Ok(e);rn(r._canInitEmulator,r,"emulator-config-failed"),rn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=tNe(t),{host:o,port:a}=wNt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),ENt()}function tNe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function wNt(e){const t=tNe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:kde(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:kde(o)}}}function kde(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function ENt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nNe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return zp("not implemented")}_getIdTokenResponse(t){return zp("not implemented")}_linkToIdToken(t,n){return zp("not implemented")}_getReauthenticationResolver(t){return zp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tE(e,t){return zRe(e,"POST","/v1/accounts:signInWithIdp",u4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xNt="http://localhost";class Q1 extends nNe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Q1(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Sh("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=zI(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Q1(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return tE(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,tE(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,tE(t,n)}buildRequest(){const t={requestUri:xNt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Pk(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yJ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k extends yJ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg extends $k{constructor(){super("facebook.com")}static credential(t){return Q1._fromParams({providerId:Lg.PROVIDER_ID,signInMethod:Lg.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Lg.credentialFromTaggedObject(t)}static credentialFromError(t){return Lg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Lg.credential(t.oauthAccessToken)}catch{return null}}}Lg.FACEBOOK_SIGN_IN_METHOD="facebook.com";Lg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op extends $k{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Q1._fromParams({providerId:Op.PROVIDER_ID,signInMethod:Op.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Op.credentialFromTaggedObject(t)}static credentialFromError(t){return Op.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Op.credential(n,r)}catch{return null}}}Op.GOOGLE_SIGN_IN_METHOD="google.com";Op.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg extends $k{constructor(){super("github.com")}static credential(t){return Q1._fromParams({providerId:Fg.PROVIDER_ID,signInMethod:Fg.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Fg.credentialFromTaggedObject(t)}static credentialFromError(t){return Fg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Fg.credential(t.oauthAccessToken)}catch{return null}}}Fg.GITHUB_SIGN_IN_METHOD="github.com";Fg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg extends $k{constructor(){super("twitter.com")}static credential(t,n){return Q1._fromParams({providerId:jg.PROVIDER_ID,signInMethod:jg.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return jg.credentialFromTaggedObject(t)}static credentialFromError(t){return jg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return jg.credential(n,r)}catch{return null}}}jg.TWITTER_SIGN_IN_METHOD="twitter.com";jg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SNt(e,t){return zRe(e,"POST","/v1/accounts:signUp",u4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Vp._fromIdTokenResponse(t,r,i),o=Rde(r);return new ey({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Rde(r);return new ey({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Rde(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TNt(e){var t;if(Gd(e.app))return Promise.reject(E0(e));const n=Ok(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new ey({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await SNt(n,{returnSecureToken:!0}),i=await ey._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k$ extends qh{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,k$.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new k$(t,n,r,i)}}function rNe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?k$._fromErrorAndOperation(e,s,t,r):s})}async function ANt(e,t,n=!1){const r=await tI(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ey._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CNt(e,t,n=!1){const{auth:r}=e;if(Gd(r.app))return Promise.reject(E0(r));const i="reauthenticate";try{const s=await tI(e,rNe(r,i,t,e),n);rn(s.idToken,r,"internal-error");const o=pJ(s.idToken);rn(o,r,"internal-error");const{sub:a}=o;return rn(e.uid===a,r,"user-mismatch"),ey._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Sh(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function INt(e,t,n=!1){if(Gd(e.app))return Promise.reject(E0(e));const r="signIn",i=await rNe(e,r,t),s=await ey._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function kNt(e,t,n,r){return ni(e).onIdTokenChanged(t,n,r)}function RNt(e,t,n){return ni(e).beforeAuthStateChanged(t,n)}function NNt(e,t,n,r){return ni(e).onAuthStateChanged(t,n,r)}function PNt(e){return ni(e).signOut()}const R$="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iNe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(R$,"1"),this.storage.removeItem(R$),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DNt(){const e=$o();return mJ(e)||l4(e)}const ONt=1e3,$Nt=10;class sNe extends iNe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=DNt()&&uNt(),this.fallbackToPolling=ZRe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);aNt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,$Nt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},ONt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}sNe.type="LOCAL";const MNt=sNe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oNe extends iNe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}oNe.type="SESSION";const aNe=oNe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LNt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new c4(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await LNt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}c4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vJ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FNt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=vJ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(){return window}function jNt(e){oh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uNe(){return typeof oh().WorkerGlobalScope<"u"&&typeof oh().importScripts=="function"}async function BNt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UNt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function zNt(){return uNe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lNe="firebaseLocalStorageDb",VNt=1,N$="firebaseLocalStorage",cNe="fbase_key";class Mk{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function f4(e,t){return e.transaction([N$],t?"readwrite":"readonly").objectStore(N$)}function HNt(){const e=indexedDB.deleteDatabase(lNe);return new Mk(e).toPromise()}function mV(){const e=indexedDB.open(lNe,VNt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(N$,{keyPath:cNe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(N$)?t(r):(r.close(),await HNt(),t(await mV()))})})}async function Nde(e,t,n){const r=f4(e,!0).put({[cNe]:t,value:n});return new Mk(r).toPromise()}async function qNt(e,t){const n=f4(e,!1).get(t),r=await new Mk(n).toPromise();return r===void 0?null:r.value}function Pde(e,t){const n=f4(e,!0).delete(t);return new Mk(n).toPromise()}const WNt=800,GNt=3;class fNe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mV(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>GNt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uNe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=c4._getInstance(zNt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await BNt(),!this.activeServiceWorker)return;this.sender=new FNt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||UNt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await mV();return await Nde(t,R$,"1"),await Pde(t,R$),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Nde(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>qNt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Pde(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=f4(i,!1).getAll();return new Mk(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WNt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fNe.type="LOCAL";const YNt=fNe;new Dk(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dNe(e,t){return t?Hp(t):(rn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bJ extends nNe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return tE(t,this._buildIdpRequest())}_linkToIdToken(t,n){return tE(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return tE(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function KNt(e){return INt(e.auth,new bJ(e),e.bypassAuthState)}function XNt(e){const{auth:t,user:n}=e;return rn(n,t,"internal-error"),CNt(n,new bJ(e),e.bypassAuthState)}async function QNt(e){const{auth:t,user:n}=e;return rn(n,t,"internal-error"),ANt(n,new bJ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hNe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return KNt;case"linkViaPopup":case"linkViaRedirect":return QNt;case"reauthViaPopup":case"reauthViaRedirect":return XNt;default:Sh(this.auth,"internal-error")}}resolve(t){Im(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Im(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JNt=new Dk(2e3,1e4);async function ZNt(e,t,n){if(Gd(e.app))return Promise.reject($f(e,"operation-not-supported-in-this-environment"));const r=Ok(e);qRt(e,t,yJ);const i=dNe(r,n);return new u1(r,"signInViaPopup",t,i).executeNotNull()}class u1 extends hNe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,u1.currentPopupAction&&u1.currentPopupAction.cancel(),u1.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return rn(t,this.auth,"internal-error"),t}async onExecution(){Im(this.filter.length===1,"Popup operations only handle one event");const t=vJ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($f(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject($f(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,u1.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($f(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,JNt.get())};t()}}u1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ePt="pendingRedirect",xD=new Map;class tPt extends hNe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=xD.get(this.auth._key());if(!t){try{const r=await nPt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}xD.set(this.auth._key(),t)}return this.bypassAuthState||xD.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nPt(e,t){const n=sPt(t),r=iPt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function rPt(e,t){xD.set(e._key(),t)}function iPt(e){return Hp(e._redirectPersistence)}function sPt(e){return ED(ePt,e.config.apiKey,e.name)}async function oPt(e,t,n=!1){if(Gd(e.app))return Promise.reject(E0(e));const r=Ok(e),i=dNe(r,t),o=await new tPt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aPt=10*60*1e3;class uPt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!lPt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!pNe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError($f(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=aPt&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dde(t))}saveEventToCache(t){this.cachedEventUids.add(Dde(t)),this.lastProcessedEventTime=Date.now()}}function Dde(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function pNe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function lPt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pNe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cPt(e,t={}){return TS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fPt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dPt=/^https?/;async function hPt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await cPt(e);for(const n of t)try{if(pPt(n))return}catch{}Sh(e,"unauthorized-domain")}function pPt(e){const t=hV(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!dPt.test(n))return!1;if(fPt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mPt=new Dk(3e4,6e4);function Ode(){const e=oh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function gPt(e){return new Promise((t,n)=>{var r,i,s;function o(){Ode(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ode(),n($f(e,"network-request-failed"))},timeout:mPt.get()})}if(!((i=(r=oh().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=oh().gapi)===null||s===void 0)&&s.load)o();else{const a=yNt("iframefcb");return oh()[a]=()=>{gapi.load?o():n($f(e,"network-request-failed"))},mNt(`${gNt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw SD=null,t})}let SD=null;function yPt(e){return SD=SD||gPt(e),SD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vPt=new Dk(5e3,15e3),bPt="__/auth/iframe",_Pt="emulator/auth/iframe",wPt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EPt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xPt(e){const t=e.config;rn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?hJ(t,_Pt):`https://${e.config.authDomain}/${bPt}`,r={apiKey:t.apiKey,appName:e.name,v:Bb},i=EPt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Pk(r).slice(1)}`}async function SPt(e){const t=await yPt(e),n=oh().gapi;return rn(n,e,"internal-error"),t.open({where:document.body,url:xPt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wPt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=$f(e,"network-request-failed"),a=oh().setTimeout(()=>{s(o)},vPt.get());function u(){oh().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TPt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},APt=500,CPt=600,IPt="_blank",kPt="http://localhost";class $de{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RPt(e,t,n,r=APt,i=CPt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},TPt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=$o().toLowerCase();n&&(a=YRe(l)?IPt:n),GRe(l)&&(t=t||kPt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(oNt(l)&&a!=="_self")return NPt(t||"",a),new $de(null);const f=window.open(t||"",a,c);rn(f,e,"popup-blocked");try{f.focus()}catch{}return new $de(f)}function NPt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PPt="__/auth/handler",DPt="emulator/auth/handler",OPt=encodeURIComponent("fac");async function Mde(e,t,n,r,i,s){rn(e.config.authDomain,e,"auth-domain-config-required"),rn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Bb,eventId:i};if(t instanceof yJ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Ckt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof $k){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${OPt}=${encodeURIComponent(u)}`:"";return`${$Pt(e)}?${Pk(a).slice(1)}${l}`}function $Pt({config:e}){return e.emulator?hJ(e,DPt):`https://${e.authDomain}/${PPt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9="webStorageSupport";class MPt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aNe,this._completeRedirectFn=oPt,this._overrideRedirectResult=rPt}async _openPopup(t,n,r,i){var s;Im((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Mde(t,n,r,hV(),i);return RPt(t,o,vJ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Mde(t,n,r,hV(),i);return jNt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Im(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await SPt(t),r=new uPt(t);return n.register("authEvent",i=>(rn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(d9,{type:d9},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[d9];o!==void 0&&n(!!o),Sh(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=hPt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return ZRe()||mJ()||l4()}}const mNe=MPt;var Lde="@firebase/auth",Fde="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LPt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){rn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FPt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jPt(e){Cm(new xh("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;rn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eNe(e)},l=new hNt(r,i,s,u);return bNt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Cm(new xh("auth-internal",t=>{const n=Ok(t.getProvider("auth").getImmediate());return(r=>new LPt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Of(Lde,Fde,FPt(e)),Of(Lde,Fde,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BPt=5*60,UPt=PRe("authIdTokenMaxAge")||BPt;let jde=null;const zPt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>UPt)return;const i=n==null?void 0:n.token;jde!==i&&(jde=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function P$(e=cJ()){const t=SS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=vNt(e,{popupRedirectResolver:mNe,persistence:[YNt,MNt,aNe]}),r=PRe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=zPt(s.toString());RNt(n,o,()=>o(n.currentUser)),kNt(n,a=>o(a))}}const i=RRe("auth");return i&&_Nt(n,`http://${i}`),n}function VPt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}pNt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=$f("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",VPt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jPt("Browser");var HPt="firebase",qPt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Of(HPt,qPt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gNe="firebasestorage.googleapis.com",yNe="storageBucket",WPt=2*60*1e3,GPt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends qh{constructor(t,n,r=0){super(h9(t),`Firebase Storage: ${n} (${h9(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return h9(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ki;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ki||(Ki={}));function h9(e){return"storage/"+e}function _J(){const e="An unknown error occurred, please check the error payload for server response.";return new Xi(Ki.UNKNOWN,e)}function YPt(e){return new Xi(Ki.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function KPt(e){return new Xi(Ki.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function XPt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Xi(Ki.UNAUTHENTICATED,e)}function QPt(){return new Xi(Ki.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function JPt(e){return new Xi(Ki.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function ZPt(){return new Xi(Ki.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function eDt(){return new Xi(Ki.CANCELED,"User canceled the upload/download.")}function tDt(e){return new Xi(Ki.INVALID_URL,"Invalid URL '"+e+"'.")}function nDt(e){return new Xi(Ki.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function rDt(){return new Xi(Ki.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yNe+"' property when initializing the app?")}function iDt(){return new Xi(Ki.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function sDt(){return new Xi(Ki.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function oDt(e){return new Xi(Ki.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function gV(e){return new Xi(Ki.INVALID_ARGUMENT,e)}function vNe(){return new Xi(Ki.APP_DELETED,"The Firebase app was deleted.")}function aDt(e){return new Xi(Ki.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function RA(e,t){return new Xi(Ki.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function RT(e){throw new Xi(Ki.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Ua.makeFromUrl(t,n)}catch{return new Ua(t,"")}if(r.path==="")return r;throw nDt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===gNe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<b.length;w++){const E=b[w],T=E.regex.exec(t);if(T){const S=T[E.indices.bucket];let A=T[E.indices.path];A||(A=""),r=new Ua(S,A),E.postModify(r);break}}if(r==null)throw tDt(t);return r}}class uDt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lDt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function cDt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fDt(e){return e!==void 0}function dDt(e){return typeof e=="object"&&!Array.isArray(e)}function wJ(e){return typeof e=="string"||e instanceof String}function Bde(e){return EJ()&&e instanceof Blob}function EJ(){return typeof Blob<"u"}function yV(e,t,n,r){if(r<t)throw gV(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw gV(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function bNe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(b1||(b1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hDt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pDt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new XN(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===b1.NO_ERROR,u=s.getStatus();if(!a||hDt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===b1.ABORT;r(!1,new XN(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new XN(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());fDt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=_J();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?vNe():eDt();o(u)}else{const u=ZPt();o(u)}};this.canceled_?n(!1,new XN(!1,null,!0)):this.backoffId_=lDt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&cDt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class XN{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function mDt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function gDt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function yDt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function vDt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function bDt(e,t,n,r,i,s,o=!0){const a=bNe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return yDt(l,t),mDt(l,n),gDt(l,s),vDt(l,r),new pDt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Dt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function wDt(...e){const t=_Dt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(EJ())return new Blob(e);throw new Xi(Ki.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function EDt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xDt(e){if(typeof atob>"u")throw oDt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class p9{constructor(t,n){this.data=t,this.contentType=n||null}}function SDt(e,t){switch(e){case Yd.RAW:return new p9(_Ne(t));case Yd.BASE64:case Yd.BASE64URL:return new p9(wNe(e,t));case Yd.DATA_URL:return new p9(ADt(t),CDt(t))}throw _J()}function _Ne(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function TDt(e){let t;try{t=decodeURIComponent(e)}catch{throw RA(Yd.DATA_URL,"Malformed data URL.")}return _Ne(t)}function wNe(e,t){switch(e){case Yd.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw RA(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Yd.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw RA(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=xDt(t)}catch(i){throw i.message.includes("polyfill")?i:RA(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class ENe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw RA(Yd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=IDt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function ADt(e){const t=new ENe(e);return t.base64?wNe(Yd.BASE64,t.rest):TDt(t.rest)}function CDt(e){return new ENe(e).contentType}function IDt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(t,n){let r=0,i="";Bde(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(Bde(this.data_)){const r=this.data_,i=EDt(r,t,n);return i===null?null:new Bg(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Bg(r,!0)}}static getBlob(...t){if(EJ()){const n=t.map(r=>r instanceof Bg?r.data_:r);return new Bg(wDt.apply(null,n))}else{const n=t.map(o=>wJ(o)?SDt(Yd.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Bg(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xJ(e){let t;try{t=JSON.parse(e)}catch{return null}return dDt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kDt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function RDt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function xNe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NDt(e,t){return t}class ka{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||NDt}}let QN=null;function PDt(e){return!wJ(e)||e.length<2?e:xNe(e)}function SNe(){if(QN)return QN;const e=[];e.push(new ka("bucket")),e.push(new ka("generation")),e.push(new ka("metageneration")),e.push(new ka("name","fullPath",!0));function t(s,o){return PDt(o)}const n=new ka("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new ka("size");return i.xform=r,e.push(i),e.push(new ka("timeCreated")),e.push(new ka("updated")),e.push(new ka("md5Hash",null,!0)),e.push(new ka("cacheControl",null,!0)),e.push(new ka("contentDisposition",null,!0)),e.push(new ka("contentEncoding",null,!0)),e.push(new ka("contentLanguage",null,!0)),e.push(new ka("contentType",null,!0)),e.push(new ka("metadata","customMetadata",!0)),QN=e,QN}function DDt(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Ua(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function ODt(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return DDt(r,e),r}function TNe(e,t,n){const r=xJ(t);return r===null?null:ODt(e,r,n)}function $Dt(e,t,n,r){const i=xJ(t);if(i===null||!wJ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=Lk(d,n,r),p=bNe({alt:"media",token:l});return h+p})[0]}function MDt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ude="prefixes",zde="items";function LDt(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Ude])for(const i of n[Ude]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Ua(t,s));r.prefixes.push(o)}if(n[zde])for(const i of n[zde]){const s=e._makeStorageReference(new Ua(t,i.name));r.items.push(s)}return r}function FDt(e,t,n){const r=xJ(n);return r===null?null:LDt(e,t,r)}class d4{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SJ(e){if(!e)throw _J()}function jDt(e,t){function n(r,i){const s=TNe(e,i,t);return SJ(s!==null),s}return n}function BDt(e,t){function n(r,i){const s=FDt(e,t,i);return SJ(s!==null),s}return n}function UDt(e,t){function n(r,i){const s=TNe(e,i,t);return SJ(s!==null),$Dt(s,i,e.host,e._protocol)}return n}function TJ(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=QPt():i=XPt():n.getStatus()===402?i=KPt(e.bucket):n.getStatus()===403?i=JPt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function ANe(e){const t=TJ(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=YPt(e.path)),s.serverResponse=i.serverResponse,s}return n}function zDt(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=Lk(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new d4(a,u,BDt(e,t.bucket),l);return c.urlParams=s,c.errorHandler=TJ(t),c}function VDt(e,t,n){const r=t.fullServerUrl(),i=Lk(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new d4(i,s,UDt(e,n),o);return a.errorHandler=ANe(t),a}function HDt(e,t){const n=t.fullServerUrl(),r=Lk(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new d4(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=ANe(t),a}function qDt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function WDt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=qDt(null,t)),r}function GDt(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let w=0;w<2;w++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=WDt(t,r,i),c=MDt(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Bg.getBlob(f,r,d);if(h===null)throw iDt();const p={name:l.fullPath},m=Lk(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new d4(m,g,jDt(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=TJ(t),v}class YDt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=b1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=b1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=b1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw RT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw RT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw RT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw RT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw RT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class KDt extends YDt{initXhr(){this.xhr_.responseType="text"}}function h4(){return new KDt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(t,n){this._service=t,n instanceof Ua?this._location=n:this._location=Ua.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new J1(t,n)}get root(){const t=new Ua(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xNe(this._location.path)}get storage(){return this._service}get parent(){const t=kDt(this._location.path);if(t===null)return null;const n=new Ua(this._location.bucket,t);return new J1(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw aDt(t)}}function XDt(e,t,n){e._throwIfRoot("uploadBytes");const r=GDt(e.storage,e._location,SNe(),new Bg(t,!0),n);return e.storage.makeRequestWithTokens(r,h4).then(i=>({metadata:i,ref:e}))}function QDt(e){const t={prefixes:[],items:[]};return CNe(e,t).then(()=>t)}async function CNe(e,t,n){const i=await JDt(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await CNe(e,t,i.nextPageToken)}function JDt(e,t){t!=null&&typeof t.maxResults=="number"&&yV("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=zDt(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,h4)}function ZDt(e){e._throwIfRoot("getDownloadURL");const t=VDt(e.storage,e._location,SNe());return e.storage.makeRequestWithTokens(t,h4).then(n=>{if(n===null)throw sDt();return n})}function eOt(e){e._throwIfRoot("deleteObject");const t=HDt(e.storage,e._location);return e.storage.makeRequestWithTokens(t,h4)}function tOt(e,t){const n=RDt(e._location.path,t),r=new Ua(e._location.bucket,n);return new J1(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nOt(e){return/^[A-Za-z]+:\/\//.test(e)}function rOt(e,t){return new J1(e,t)}function INe(e,t){if(e instanceof AJ){const n=e;if(n._bucket==null)throw rDt();const r=new J1(n,n._bucket);return t!=null?INe(r,t):r}else return t!==void 0?tOt(e,t):e}function iOt(e,t){if(t&&nOt(t)){if(e instanceof AJ)return rOt(e,t);throw gV("To use ref(service, url), the first argument must be a Storage instance.")}else return INe(e,t)}function Vde(e,t){const n=t==null?void 0:t[yNe];return n==null?null:Ua.makeFromBucketSpec(n,e)}function sOt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:gkt(i,e.app.options.projectId))}class AJ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=gNe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=WPt,this._maxUploadRetryTime=GPt,this._requests=new Set,i!=null?this._bucket=Ua.makeFromBucketSpec(i,this._host):this._bucket=Vde(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ua.makeFromBucketSpec(this._url,t):this._bucket=Vde(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){yV("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){yV("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new J1(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new uDt(vNe());{const o=bDt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const Hde="@firebase/storage",qde="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kNe="storage";function m9(e,t,n){return e=ni(e),XDt(e,t,n)}function NT(e){return e=ni(e),QDt(e)}function g9(e){return e=ni(e),ZDt(e)}function Wde(e){return e=ni(e),eOt(e)}function tc(e,t){return e=ni(e),iOt(e,t)}function oOt(e=cJ(),t){e=ni(e);const r=SS(e,kNe).getImmediate({identifier:t}),i=mkt("storage");return i&&aOt(r,...i),r}function aOt(e,t,n,r={}){sOt(e,t,n,r)}function uOt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new AJ(n,r,i,t,Bb)}function lOt(){Cm(new xh(kNe,uOt,"PUBLIC").setMultipleInstances(!0)),Of(Hde,qde,""),Of(Hde,qde,"esm2017")}lOt();var Gde=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _1,RNe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,A){function C(){}C.prototype=A.prototype,S.D=A.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(k,N,O){for(var P=Array(arguments.length-2),$=2;$<arguments.length;$++)P[$-2]=arguments[$];return A.prototype[N].apply(k,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,A,C){C||(C=0);var k=Array(16);if(typeof A=="string")for(var N=0;16>N;++N)k[N]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(N=0;16>N;++N)k[N]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=S.g[0],C=S.g[1],N=S.g[2];var O=S.g[3],P=A+(O^C&(N^O))+k[0]+3614090360&4294967295;A=C+(P<<7&4294967295|P>>>25),P=O+(N^A&(C^N))+k[1]+3905402710&4294967295,O=A+(P<<12&4294967295|P>>>20),P=N+(C^O&(A^C))+k[2]+606105819&4294967295,N=O+(P<<17&4294967295|P>>>15),P=C+(A^N&(O^A))+k[3]+3250441966&4294967295,C=N+(P<<22&4294967295|P>>>10),P=A+(O^C&(N^O))+k[4]+4118548399&4294967295,A=C+(P<<7&4294967295|P>>>25),P=O+(N^A&(C^N))+k[5]+1200080426&4294967295,O=A+(P<<12&4294967295|P>>>20),P=N+(C^O&(A^C))+k[6]+2821735955&4294967295,N=O+(P<<17&4294967295|P>>>15),P=C+(A^N&(O^A))+k[7]+4249261313&4294967295,C=N+(P<<22&4294967295|P>>>10),P=A+(O^C&(N^O))+k[8]+1770035416&4294967295,A=C+(P<<7&4294967295|P>>>25),P=O+(N^A&(C^N))+k[9]+2336552879&4294967295,O=A+(P<<12&4294967295|P>>>20),P=N+(C^O&(A^C))+k[10]+4294925233&4294967295,N=O+(P<<17&4294967295|P>>>15),P=C+(A^N&(O^A))+k[11]+2304563134&4294967295,C=N+(P<<22&4294967295|P>>>10),P=A+(O^C&(N^O))+k[12]+1804603682&4294967295,A=C+(P<<7&4294967295|P>>>25),P=O+(N^A&(C^N))+k[13]+4254626195&4294967295,O=A+(P<<12&4294967295|P>>>20),P=N+(C^O&(A^C))+k[14]+2792965006&4294967295,N=O+(P<<17&4294967295|P>>>15),P=C+(A^N&(O^A))+k[15]+1236535329&4294967295,C=N+(P<<22&4294967295|P>>>10),P=A+(N^O&(C^N))+k[1]+4129170786&4294967295,A=C+(P<<5&4294967295|P>>>27),P=O+(C^N&(A^C))+k[6]+3225465664&4294967295,O=A+(P<<9&4294967295|P>>>23),P=N+(A^C&(O^A))+k[11]+643717713&4294967295,N=O+(P<<14&4294967295|P>>>18),P=C+(O^A&(N^O))+k[0]+3921069994&4294967295,C=N+(P<<20&4294967295|P>>>12),P=A+(N^O&(C^N))+k[5]+3593408605&4294967295,A=C+(P<<5&4294967295|P>>>27),P=O+(C^N&(A^C))+k[10]+38016083&4294967295,O=A+(P<<9&4294967295|P>>>23),P=N+(A^C&(O^A))+k[15]+3634488961&4294967295,N=O+(P<<14&4294967295|P>>>18),P=C+(O^A&(N^O))+k[4]+3889429448&4294967295,C=N+(P<<20&4294967295|P>>>12),P=A+(N^O&(C^N))+k[9]+568446438&4294967295,A=C+(P<<5&4294967295|P>>>27),P=O+(C^N&(A^C))+k[14]+3275163606&4294967295,O=A+(P<<9&4294967295|P>>>23),P=N+(A^C&(O^A))+k[3]+4107603335&4294967295,N=O+(P<<14&4294967295|P>>>18),P=C+(O^A&(N^O))+k[8]+1163531501&4294967295,C=N+(P<<20&4294967295|P>>>12),P=A+(N^O&(C^N))+k[13]+2850285829&4294967295,A=C+(P<<5&4294967295|P>>>27),P=O+(C^N&(A^C))+k[2]+4243563512&4294967295,O=A+(P<<9&4294967295|P>>>23),P=N+(A^C&(O^A))+k[7]+1735328473&4294967295,N=O+(P<<14&4294967295|P>>>18),P=C+(O^A&(N^O))+k[12]+2368359562&4294967295,C=N+(P<<20&4294967295|P>>>12),P=A+(C^N^O)+k[5]+4294588738&4294967295,A=C+(P<<4&4294967295|P>>>28),P=O+(A^C^N)+k[8]+2272392833&4294967295,O=A+(P<<11&4294967295|P>>>21),P=N+(O^A^C)+k[11]+1839030562&4294967295,N=O+(P<<16&4294967295|P>>>16),P=C+(N^O^A)+k[14]+4259657740&4294967295,C=N+(P<<23&4294967295|P>>>9),P=A+(C^N^O)+k[1]+2763975236&4294967295,A=C+(P<<4&4294967295|P>>>28),P=O+(A^C^N)+k[4]+1272893353&4294967295,O=A+(P<<11&4294967295|P>>>21),P=N+(O^A^C)+k[7]+4139469664&4294967295,N=O+(P<<16&4294967295|P>>>16),P=C+(N^O^A)+k[10]+3200236656&4294967295,C=N+(P<<23&4294967295|P>>>9),P=A+(C^N^O)+k[13]+681279174&4294967295,A=C+(P<<4&4294967295|P>>>28),P=O+(A^C^N)+k[0]+3936430074&4294967295,O=A+(P<<11&4294967295|P>>>21),P=N+(O^A^C)+k[3]+3572445317&4294967295,N=O+(P<<16&4294967295|P>>>16),P=C+(N^O^A)+k[6]+76029189&4294967295,C=N+(P<<23&4294967295|P>>>9),P=A+(C^N^O)+k[9]+3654602809&4294967295,A=C+(P<<4&4294967295|P>>>28),P=O+(A^C^N)+k[12]+3873151461&4294967295,O=A+(P<<11&4294967295|P>>>21),P=N+(O^A^C)+k[15]+530742520&4294967295,N=O+(P<<16&4294967295|P>>>16),P=C+(N^O^A)+k[2]+3299628645&4294967295,C=N+(P<<23&4294967295|P>>>9),P=A+(N^(C|~O))+k[0]+4096336452&4294967295,A=C+(P<<6&4294967295|P>>>26),P=O+(C^(A|~N))+k[7]+1126891415&4294967295,O=A+(P<<10&4294967295|P>>>22),P=N+(A^(O|~C))+k[14]+2878612391&4294967295,N=O+(P<<15&4294967295|P>>>17),P=C+(O^(N|~A))+k[5]+4237533241&4294967295,C=N+(P<<21&4294967295|P>>>11),P=A+(N^(C|~O))+k[12]+1700485571&4294967295,A=C+(P<<6&4294967295|P>>>26),P=O+(C^(A|~N))+k[3]+2399980690&4294967295,O=A+(P<<10&4294967295|P>>>22),P=N+(A^(O|~C))+k[10]+4293915773&4294967295,N=O+(P<<15&4294967295|P>>>17),P=C+(O^(N|~A))+k[1]+2240044497&4294967295,C=N+(P<<21&4294967295|P>>>11),P=A+(N^(C|~O))+k[8]+1873313359&4294967295,A=C+(P<<6&4294967295|P>>>26),P=O+(C^(A|~N))+k[15]+4264355552&4294967295,O=A+(P<<10&4294967295|P>>>22),P=N+(A^(O|~C))+k[6]+2734768916&4294967295,N=O+(P<<15&4294967295|P>>>17),P=C+(O^(N|~A))+k[13]+1309151649&4294967295,C=N+(P<<21&4294967295|P>>>11),P=A+(N^(C|~O))+k[4]+4149444226&4294967295,A=C+(P<<6&4294967295|P>>>26),P=O+(C^(A|~N))+k[11]+3174756917&4294967295,O=A+(P<<10&4294967295|P>>>22),P=N+(A^(O|~C))+k[2]+718787259&4294967295,N=O+(P<<15&4294967295|P>>>17),P=C+(O^(N|~A))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+A&4294967295,S.g[1]=S.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+O&4294967295}r.prototype.u=function(S,A){A===void 0&&(A=S.length);for(var C=A-this.blockSize,k=this.B,N=this.h,O=0;O<A;){if(N==0)for(;O<=C;)i(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<A;)if(k[N++]=S.charCodeAt(O++),N==this.blockSize){i(this,k),N=0;break}}else for(;O<A;)if(k[N++]=S[O++],N==this.blockSize){i(this,k),N=0;break}}this.h=N,this.o+=A},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var A=1;A<S.length-8;++A)S[A]=0;var C=8*this.o;for(A=S.length-8;A<S.length;++A)S[A]=C&255,C/=256;for(this.u(S),S=Array(16),A=C=0;4>A;++A)for(var k=0;32>k;k+=8)S[C++]=this.g[A]>>>k&255;return S};function s(S,A){var C=a;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=A(S)}function o(S,A){this.h=A;for(var C=[],k=!0,N=S.length-1;0<=N;N--){var O=S[N]|0;k&&O==A||(C[N]=O,k=!1)}this.g=C}var a={};function u(S){return-128<=S&&128>S?s(S,function(A){return new o([A|0],0>A?-1:0)}):new o([S|0],0>S?-1:0)}function l(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return g(l(-S));for(var A=[],C=1,k=0;S>=C;k++)A[k]=S/C|0,C*=4294967296;return new o(A,0)}function c(S,A){if(S.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(S.charAt(0)=="-")return g(c(S.substring(1),A));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(A,8)),k=f,N=0;N<S.length;N+=8){var O=Math.min(8,S.length-N),P=parseInt(S.substring(N,N+O),A);8>O?(O=l(Math.pow(A,O)),k=k.j(O).add(l(P))):(k=k.j(C),k=k.add(l(P)))}return k}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var S=0,A=1,C=0;C<this.g.length;C++){var k=this.i(C);S+=(0<=k?k:4294967296+k)*A,A*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(p(this))return"0";if(m(this))return"-"+g(this).toString(S);for(var A=l(Math.pow(S,6)),C=this,k="";;){var N=w(C,A).g;C=y(C,N.j(A));var O=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=N,p(C))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function p(S){if(S.h!=0)return!1;for(var A=0;A<S.g.length;A++)if(S.g[A]!=0)return!1;return!0}function m(S){return S.h==-1}e.l=function(S){return S=y(this,S),m(S)?-1:p(S)?0:1};function g(S){for(var A=S.g.length,C=[],k=0;k<A;k++)C[k]=~S.g[k];return new o(C,~S.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(S){for(var A=Math.max(this.g.length,S.g.length),C=[],k=0,N=0;N<=A;N++){var O=k+(this.i(N)&65535)+(S.i(N)&65535),P=(O>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);k=P>>>16,O&=65535,P&=65535,C[N]=P<<16|O}return new o(C,C[C.length-1]&-2147483648?-1:0)};function y(S,A){return S.add(g(A))}e.j=function(S){if(p(this)||p(S))return f;if(m(this))return m(S)?g(this).j(g(S)):g(g(this).j(S));if(m(S))return g(this.j(g(S)));if(0>this.l(h)&&0>S.l(h))return l(this.m()*S.m());for(var A=this.g.length+S.g.length,C=[],k=0;k<2*A;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<S.g.length;N++){var O=this.i(k)>>>16,P=this.i(k)&65535,$=S.i(N)>>>16,F=S.i(N)&65535;C[2*k+2*N]+=P*F,v(C,2*k+2*N),C[2*k+2*N+1]+=O*F,v(C,2*k+2*N+1),C[2*k+2*N+1]+=P*$,v(C,2*k+2*N+1),C[2*k+2*N+2]+=O*$,v(C,2*k+2*N+2)}for(k=0;k<A;k++)C[k]=C[2*k+1]<<16|C[2*k];for(k=A;k<2*A;k++)C[k]=0;return new o(C,0)};function v(S,A){for(;(S[A]&65535)!=S[A];)S[A+1]+=S[A]>>>16,S[A]&=65535,A++}function b(S,A){this.g=S,this.h=A}function w(S,A){if(p(A))throw Error("division by zero");if(p(S))return new b(f,f);if(m(S))return A=w(g(S),A),new b(g(A.g),g(A.h));if(m(A))return A=w(S,g(A)),new b(g(A.g),A.h);if(30<S.g.length){if(m(S)||m(A))throw Error("slowDivide_ only works with positive integers.");for(var C=d,k=A;0>=k.l(S);)C=E(C),k=E(k);var N=T(C,1),O=T(k,1);for(k=T(k,2),C=T(C,2);!p(k);){var P=O.add(k);0>=P.l(S)&&(N=N.add(C),O=P),k=T(k,1),C=T(C,1)}return A=y(S,N.j(A)),new b(N,A)}for(N=f;0<=S.l(A);){for(C=Math.max(1,Math.floor(S.m()/A.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=l(C),P=O.j(A);m(P)||0<P.l(S);)C-=k,O=l(C),P=O.j(A);p(O)&&(O=d),N=N.add(O),S=y(S,P)}return new b(N,S)}e.A=function(S){return w(this,S).h},e.and=function(S){for(var A=Math.max(this.g.length,S.g.length),C=[],k=0;k<A;k++)C[k]=this.i(k)&S.i(k);return new o(C,this.h&S.h)},e.or=function(S){for(var A=Math.max(this.g.length,S.g.length),C=[],k=0;k<A;k++)C[k]=this.i(k)|S.i(k);return new o(C,this.h|S.h)},e.xor=function(S){for(var A=Math.max(this.g.length,S.g.length),C=[],k=0;k<A;k++)C[k]=this.i(k)^S.i(k);return new o(C,this.h^S.h)};function E(S){for(var A=S.g.length+1,C=[],k=0;k<A;k++)C[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(C,S.h)}function T(S,A){var C=A>>5;A%=32;for(var k=S.g.length-C,N=[],O=0;O<k;O++)N[O]=0<A?S.i(O+C)>>>A|S.i(O+C+1)<<32-A:S.i(O+C);return new o(N,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,RNe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,_1=o}).apply(typeof Gde<"u"?Gde:typeof self<"u"?self:typeof window<"u"?window:{});var JN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var NNe,PNe,C2,DNe,TD,vV,ONe,$Ne,MNe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,L,V){return x==Array.prototype||x==Object.prototype||(x[L]=V.value),x};function n(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof JN=="object"&&JN];for(var L=0;L<x.length;++L){var V=x[L];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function i(x,L){if(L)e:{var V=r;x=x.split(".");for(var J=0;J<x.length-1;J++){var Se=x[J];if(!(Se in V))break e;V=V[Se]}x=x[x.length-1],J=V[x],L=L(J),L!=J&&L!=null&&t(V,x,{configurable:!0,writable:!0,value:L})}}function s(x,L){x instanceof String&&(x+="");var V=0,J=!1,Se={next:function(){if(!J&&V<x.length){var $e=V++;return{value:L($e,x[$e]),done:!1}}return J=!0,{done:!0,value:void 0}}};return Se[Symbol.iterator]=function(){return Se},Se}i("Array.prototype.values",function(x){return x||function(){return s(this,function(L,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(x){var L=typeof x;return L=L!="object"?L:x?Array.isArray(x)?"array":L:"null",L=="array"||L=="object"&&typeof x.length=="number"}function l(x){var L=typeof x;return L=="object"&&x!=null||L=="function"}function c(x,L,V){return x.call.apply(x.bind,arguments)}function f(x,L,V){if(!x)throw Error();if(2<arguments.length){var J=Array.prototype.slice.call(arguments,2);return function(){var Se=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Se,J),x.apply(L,Se)}}return function(){return x.apply(L,arguments)}}function d(x,L,V){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(x,L){var V=Array.prototype.slice.call(arguments,1);return function(){var J=V.slice();return J.push.apply(J,arguments),x.apply(this,J)}}function p(x,L){function V(){}V.prototype=L.prototype,x.aa=L.prototype,x.prototype=new V,x.prototype.constructor=x,x.Qb=function(J,Se,$e){for(var dt=Array(arguments.length-2),qr=2;qr<arguments.length;qr++)dt[qr-2]=arguments[qr];return L.prototype[Se].apply(J,dt)}}function m(x){const L=x.length;if(0<L){const V=Array(L);for(let J=0;J<L;J++)V[J]=x[J];return V}return[]}function g(x,L){for(let V=1;V<arguments.length;V++){const J=arguments[V];if(u(J)){const Se=x.length||0,$e=J.length||0;x.length=Se+$e;for(let dt=0;dt<$e;dt++)x[Se+dt]=J[dt]}else x.push(J)}}class y{constructor(L,V){this.i=L,this.j=V,this.h=0,this.g=null}get(){let L;return 0<this.h?(this.h--,L=this.g,this.g=L.next,L.next=null):L=this.i(),L}}function v(x){return/^[\s\xa0]*$/.test(x)}function b(){var x=a.navigator;return x&&(x=x.userAgent)?x:""}function w(x){return w[" "](x),x}w[" "]=function(){};var E=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function T(x,L,V){for(const J in x)L.call(V,x[J],J,x)}function S(x,L){for(const V in x)L.call(void 0,x[V],V,x)}function A(x){const L={};for(const V in x)L[V]=x[V];return L}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(x,L){let V,J;for(let Se=1;Se<arguments.length;Se++){J=arguments[Se];for(V in J)x[V]=J[V];for(let $e=0;$e<C.length;$e++)V=C[$e],Object.prototype.hasOwnProperty.call(J,V)&&(x[V]=J[V])}}function N(x){var L=1;x=x.split(":");const V=[];for(;0<L&&x.length;)V.push(x.shift()),L--;return x.length&&V.push(x.join(":")),V}function O(x){a.setTimeout(()=>{throw x},0)}function P(){var x=H;let L=null;return x.g&&(L=x.g,x.g=x.g.next,x.g||(x.h=null),L.next=null),L}class ${constructor(){this.h=this.g=null}add(L,V){const J=F.get();J.set(L,V),this.h?this.h.next=J:this.g=J,this.h=J}}var F=new y(()=>new M,x=>x.reset());class M{constructor(){this.next=this.g=this.h=null}set(L,V){this.h=L,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let B,U=!1,H=new $,D=()=>{const x=a.Promise.resolve(void 0);B=()=>{x.then(z)}};var z=()=>{for(var x;x=P();){try{x.h.call(x.g)}catch(V){O(V)}var L=F;L.j(x),100>L.h&&(L.h++,x.next=L.g,L.g=x)}U=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(x,L){this.type=x,this.g=this.target=L,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var x=!1,L=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const V=()=>{};a.addEventListener("test",V,L),a.removeEventListener("test",V,L)}catch{}return x}();function G(x,L){if(j.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var V=this.type=x.type,J=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=L,L=x.relatedTarget){if(E){e:{try{w(L.nodeName);var Se=!0;break e}catch{}Se=!1}Se||(L=null)}}else V=="mouseover"?L=x.fromElement:V=="mouseout"&&(L=x.toElement);this.relatedTarget=L,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:re[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&G.aa.h.call(this)}}p(G,j);var re={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var de="closure_listenable_"+(1e6*Math.random()|0),pe=0;function ge(x,L,V,J,Se){this.listener=x,this.proxy=null,this.src=L,this.type=V,this.capture=!!J,this.ha=Se,this.key=++pe,this.da=this.fa=!1}function Ee(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Z(x){this.src=x,this.g={},this.h=0}Z.prototype.add=function(x,L,V,J,Se){var $e=x.toString();x=this.g[$e],x||(x=this.g[$e]=[],this.h++);var dt=fe(x,L,J,Se);return-1<dt?(L=x[dt],V||(L.fa=!1)):(L=new ge(L,this.src,$e,!!J,Se),L.fa=V,x.push(L)),L};function Q(x,L){var V=L.type;if(V in x.g){var J=x.g[V],Se=Array.prototype.indexOf.call(J,L,void 0),$e;($e=0<=Se)&&Array.prototype.splice.call(J,Se,1),$e&&(Ee(L),x.g[V].length==0&&(delete x.g[V],x.h--))}}function fe(x,L,V,J){for(var Se=0;Se<x.length;++Se){var $e=x[Se];if(!$e.da&&$e.listener==L&&$e.capture==!!V&&$e.ha==J)return Se}return-1}var be="closure_lm_"+(1e6*Math.random()|0),Me={};function Be(x,L,V,J,Se){if(Array.isArray(L)){for(var $e=0;$e<L.length;$e++)Be(x,L[$e],V,J,Se);return null}return V=vt(V),x&&x[de]?x.K(L,V,l(J)?!!J.capture:!!J,Se):ve(x,L,V,!1,J,Se)}function ve(x,L,V,J,Se,$e){if(!L)throw Error("Invalid event type");var dt=l(Se)?!!Se.capture:!!Se,qr=ye(x);if(qr||(x[be]=qr=new Z(x)),V=qr.add(L,V,J,dt,$e),V.proxy)return V;if(J=Re(),V.proxy=J,J.src=x,J.listener=V,x.addEventListener)q||(Se=dt),Se===void 0&&(Se=!1),x.addEventListener(L.toString(),J,Se);else if(x.attachEvent)x.attachEvent(bt(L.toString()),J);else if(x.addListener&&x.removeListener)x.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return V}function Re(){function x(V){return L.call(x.src,x.listener,V)}const L=Ge;return x}function He(x,L,V,J,Se){if(Array.isArray(L))for(var $e=0;$e<L.length;$e++)He(x,L[$e],V,J,Se);else J=l(J)?!!J.capture:!!J,V=vt(V),x&&x[de]?(x=x.i,L=String(L).toString(),L in x.g&&($e=x.g[L],V=fe($e,V,J,Se),-1<V&&(Ee($e[V]),Array.prototype.splice.call($e,V,1),$e.length==0&&(delete x.g[L],x.h--)))):x&&(x=ye(x))&&(L=x.g[L.toString()],x=-1,L&&(x=fe(L,V,J,Se)),(V=-1<x?L[x]:null)&&Ze(V))}function Ze(x){if(typeof x!="number"&&x&&!x.da){var L=x.src;if(L&&L[de])Q(L.i,x);else{var V=x.type,J=x.proxy;L.removeEventListener?L.removeEventListener(V,J,x.capture):L.detachEvent?L.detachEvent(bt(V),J):L.addListener&&L.removeListener&&L.removeListener(J),(V=ye(L))?(Q(V,x),V.h==0&&(V.src=null,L[be]=null)):Ee(x)}}}function bt(x){return x in Me?Me[x]:Me[x]="on"+x}function Ge(x,L){if(x.da)x=!0;else{L=new G(L,this);var V=x.listener,J=x.ha||x.src;x.fa&&Ze(x),x=V.call(J,L)}return x}function ye(x){return x=x[be],x instanceof Z?x:null}var pt="__closure_events_fn_"+(1e9*Math.random()>>>0);function vt(x){return typeof x=="function"?x:(x[pt]||(x[pt]=function(L){return x.handleEvent(L)}),x[pt])}function _e(){W.call(this),this.i=new Z(this),this.M=this,this.F=null}p(_e,W),_e.prototype[de]=!0,_e.prototype.removeEventListener=function(x,L,V,J){He(this,x,L,V,J)};function Ne(x,L){var V,J=x.F;if(J)for(V=[];J;J=J.F)V.push(J);if(x=x.M,J=L.type||L,typeof L=="string")L=new j(L,x);else if(L instanceof j)L.target=L.target||x;else{var Se=L;L=new j(J,x),k(L,Se)}if(Se=!0,V)for(var $e=V.length-1;0<=$e;$e--){var dt=L.g=V[$e];Se=Ye(dt,J,!0,L)&&Se}if(dt=L.g=x,Se=Ye(dt,J,!0,L)&&Se,Se=Ye(dt,J,!1,L)&&Se,V)for($e=0;$e<V.length;$e++)dt=L.g=V[$e],Se=Ye(dt,J,!1,L)&&Se}_e.prototype.N=function(){if(_e.aa.N.call(this),this.i){var x=this.i,L;for(L in x.g){for(var V=x.g[L],J=0;J<V.length;J++)Ee(V[J]);delete x.g[L],x.h--}}this.F=null},_e.prototype.K=function(x,L,V,J){return this.i.add(String(x),L,!1,V,J)},_e.prototype.L=function(x,L,V,J){return this.i.add(String(x),L,!0,V,J)};function Ye(x,L,V,J){if(L=x.i.g[String(L)],!L)return!0;L=L.concat();for(var Se=!0,$e=0;$e<L.length;++$e){var dt=L[$e];if(dt&&!dt.da&&dt.capture==V){var qr=dt.listener,po=dt.ha||dt.src;dt.fa&&Q(x.i,dt),Se=qr.call(po,J)!==!1&&Se}}return Se&&!J.defaultPrevented}function ct(x,L,V){if(typeof x=="function")V&&(x=d(x,V));else if(x&&typeof x.handleEvent=="function")x=d(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(L)?-1:a.setTimeout(x,L||0)}function wt(x){x.g=ct(()=>{x.g=null,x.i&&(x.i=!1,wt(x))},x.l);const L=x.h;x.h=null,x.m.apply(null,L)}class $n extends W{constructor(L,V){super(),this.m=L,this.l=V,this.h=null,this.i=!1,this.g=null}j(L){this.h=arguments,this.g?this.i=!0:wt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sr(x){W.call(this),this.h=x,this.g={}}p(Sr,W);var Mn=[];function ur(x){T(x.g,function(L,V){this.g.hasOwnProperty(V)&&Ze(L)},x),x.g={}}Sr.prototype.N=function(){Sr.aa.N.call(this),ur(this)},Sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pn=a.JSON.stringify,Tn=a.JSON.parse,er=class{stringify(x){return a.JSON.stringify(x,void 0)}parse(x){return a.JSON.parse(x,void 0)}};function tr(){}tr.prototype.h=null;function jo(x){return x.h||(x.h=x.i())}function Di(){}var An={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Oi(){j.call(this,"d")}p(Oi,j);function Tr(){j.call(this,"c")}p(Tr,j);var ds={},np=null;function sl(){return np=np||new _e}ds.La="serverreachability";function ld(x){j.call(this,ds.La,x)}p(ld,j);function wr(x){const L=sl();Ne(L,new ld(L))}ds.STAT_EVENT="statevent";function Ai(x,L){j.call(this,ds.STAT_EVENT,x),this.stat=L}p(Ai,j);function Kr(x){const L=sl();Ne(L,new Ai(L,x))}ds.Ma="timingevent";function su(x,L){j.call(this,ds.Ma,x),this.size=L}p(su,j);function Sa(x,L){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){x()},L)}function Ta(){this.g=!0}Ta.prototype.xa=function(){this.g=!1};function ue(x,L,V,J,Se,$e){x.info(function(){if(x.g)if($e)for(var dt="",qr=$e.split("&"),po=0;po<qr.length;po++){var lr=qr[po].split("=");if(1<lr.length){var Vo=lr[0];lr=lr[1];var Ho=Vo.split("_");dt=2<=Ho.length&&Ho[1]=="type"?dt+(Vo+"="+lr+"&"):dt+(Vo+"=redacted&")}}else dt=null;else dt=$e;return"XMLHTTP REQ ("+J+") [attempt "+Se+"]: "+L+`
`+V+`
`+dt})}function ne(x,L,V,J,Se,$e,dt){x.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+Se+"]: "+L+`
`+V+`
`+$e+" "+dt})}function le(x,L,V,J){x.info(function(){return"XMLHTTP TEXT ("+L+"): "+Ce(x,V)+(J?" "+J:"")})}function ke(x,L){x.info(function(){return"TIMEOUT: "+L})}Ta.prototype.info=function(){};function Ce(x,L){if(!x.g)return L;if(!L)return null;try{var V=JSON.parse(L);if(V){for(x=0;x<V.length;x++)if(Array.isArray(V[x])){var J=V[x];if(!(2>J.length)){var Se=J[1];if(Array.isArray(Se)&&!(1>Se.length)){var $e=Se[0];if($e!="noop"&&$e!="stop"&&$e!="close")for(var dt=1;dt<Se.length;dt++)Se[dt]=""}}}}return pn(V)}catch{return L}}var ut={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vt;function Pn(){}p(Pn,tr),Pn.prototype.g=function(){return new XMLHttpRequest},Pn.prototype.i=function(){return{}},Vt=new Pn;function Ln(x,L,V,J){this.j=x,this.i=L,this.l=V,this.R=J||1,this.U=new Sr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dn}function dn(){this.i=null,this.g="",this.h=!1}var nr={},Ar={};function zt(x,L,V){x.L=1,x.v=Fn(Xe(L)),x.m=V,x.P=!0,rr(x,null)}function rr(x,L){x.F=Date.now(),Ci(x),x.A=Xe(x.v);var V=x.A,J=x.R;Array.isArray(J)||(J=[String(J)]),DR(V.i,"t",J),x.C=0,V=x.j.J,x.h=new dn,x.g=cie(x.j,V?L:null,!x.m),0<x.O&&(x.M=new $n(d(x.Y,x,x.g),x.O)),L=x.U,V=x.g,J=x.ca;var Se="readystatechange";Array.isArray(Se)||(Se&&(Mn[0]=Se.toString()),Se=Mn);for(var $e=0;$e<Se.length;$e++){var dt=Be(V,Se[$e],J||L.handleEvent,!1,L.h||L);if(!dt)break;L.g[dt.key]=dt}L=x.H?A(x.H):{},x.m?(x.u||(x.u="POST"),L["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,L)):(x.u="GET",x.g.ea(x.A,x.u,null,L)),wr(),ue(x.i,x.u,x.A,x.l,x.R,x.m)}Ln.prototype.ca=function(x){x=x.target;const L=this.M;L&&Qi(x)==3?L.j():this.Y(x)},Ln.prototype.Y=function(x){try{if(x==this.g)e:{const Ho=Qi(this.g);var L=this.g.Ba();const c_=this.g.Z();if(!(3>Ho)&&(Ho!=3||this.g&&(this.h.h||this.g.oa()||zo(this.g)))){this.J||Ho!=4||L==7||(L==8||0>=c_?wr(3):wr(2)),Xr(this);var V=this.g.Z();this.X=V;t:if(zr(this)){var J=zo(this.g);x="";var Se=J.length,$e=Qi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$i(this),ho(this);var dt="";break t}this.h.i=new a.TextDecoder}for(L=0;L<Se;L++)this.h.h=!0,x+=this.h.i.decode(J[L],{stream:!($e&&L==Se-1)});J.length=0,this.h.g+=x,this.C=0,dt=this.h.g}else dt=this.g.oa();if(this.o=V==200,ne(this.i,this.u,this.A,this.l,this.R,Ho,V),this.o){if(this.T&&!this.K){t:{if(this.g){var qr,po=this.g;if((qr=po.g?po.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(qr)){var lr=qr;break t}}lr=null}if(V=lr)le(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mi(this,V);else{this.o=!1,this.s=3,Kr(12),$i(this),ho(this);break e}}if(this.P){V=!0;let Gc;for(;!this.J&&this.C<dt.length;)if(Gc=Xn(this,dt),Gc==Ar){Ho==4&&(this.s=4,Kr(14),V=!1),le(this.i,this.l,null,"[Incomplete Response]");break}else if(Gc==nr){this.s=4,Kr(15),le(this.i,this.l,dt,"[Invalid Chunk]"),V=!1;break}else le(this.i,this.l,Gc,null),Mi(this,Gc);if(zr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ho!=4||dt.length!=0||this.h.h||(this.s=1,Kr(16),V=!1),this.o=this.o&&V,!V)le(this.i,this.l,dt,"[Invalid Chunked Response]"),$i(this),ho(this);else if(0<dt.length&&!this.W){this.W=!0;var Vo=this.j;Vo.g==this&&Vo.ba&&!Vo.M&&(Vo.j.info("Great, no buffering proxy detected. Bytes received: "+dt.length),P5(Vo),Vo.M=!0,Kr(11))}}else le(this.i,this.l,dt,null),Mi(this,dt);Ho==4&&$i(this),this.o&&!this.J&&(Ho==4?oie(this.j,this):(this.o=!1,Ci(this)))}else tv(this.g),V==400&&0<dt.indexOf("Unknown SID")?(this.s=3,Kr(12)):(this.s=0,Kr(13)),$i(this),ho(this)}}}catch{}finally{}};function zr(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function Xn(x,L){var V=x.C,J=L.indexOf(`
`,V);return J==-1?Ar:(V=Number(L.substring(V,J)),isNaN(V)?nr:(J+=1,J+V>L.length?Ar:(L=L.slice(J,J+V),x.C=J+V,L)))}Ln.prototype.cancel=function(){this.J=!0,$i(this)};function Ci(x){x.S=Date.now()+x.I,zs(x,x.I)}function zs(x,L){if(x.B!=null)throw Error("WatchDog timer not null");x.B=Sa(d(x.ba,x),L)}function Xr(x){x.B&&(a.clearTimeout(x.B),x.B=null)}Ln.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(ke(this.i,this.A),this.L!=2&&(wr(),Kr(17)),$i(this),this.s=2,ho(this)):zs(this,this.S-x)};function ho(x){x.j.G==0||x.J||oie(x.j,x)}function $i(x){Xr(x);var L=x.M;L&&typeof L.ma=="function"&&L.ma(),x.M=null,ur(x.U),x.g&&(L=x.g,x.g=null,L.abort(),L.ma())}function Mi(x,L){try{var V=x.j;if(V.G!=0&&(V.g==x||cd(V.h,x))){if(!x.K&&cd(V.h,x)&&V.G==3){try{var J=V.Da.g.parse(L)}catch{J=null}if(Array.isArray(J)&&J.length==3){var Se=J;if(Se[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<x.F)BR(V),FR(V);else break e;N5(V),Kr(18)}}else V.za=Se[1],0<V.za-V.T&&37500>Se[2]&&V.F&&V.v==0&&!V.C&&(V.C=Sa(d(V.Za,V),6e3));if(1>=Xl(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else nv(V,11)}else if((x.K||V.g==x)&&BR(V),!v(L))for(Se=V.Da.g.parse(L),L=0;L<Se.length;L++){let lr=Se[L];if(V.T=lr[0],lr=lr[1],V.G==2)if(lr[0]=="c"){V.K=lr[1],V.ia=lr[2];const Vo=lr[3];Vo!=null&&(V.la=Vo,V.j.info("VER="+V.la));const Ho=lr[4];Ho!=null&&(V.Aa=Ho,V.j.info("SVER="+V.Aa));const c_=lr[5];c_!=null&&typeof c_=="number"&&0<c_&&(J=1.5*c_,V.L=J,V.j.info("backChannelRequestTimeoutMs_="+J)),J=V;const Gc=x.g;if(Gc){const zR=Gc.g?Gc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zR){var $e=J.h;$e.g||zR.indexOf("spdy")==-1&&zR.indexOf("quic")==-1&&zR.indexOf("h2")==-1||($e.j=$e.l,$e.g=new Set,$e.h&&(Y($e,$e.h),$e.h=null))}if(J.D){const D5=Gc.g?Gc.g.getResponseHeader("X-HTTP-Session-Id"):null;D5&&(J.ya=D5,Dt(J.I,J.D,D5))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-x.F,V.j.info("Handshake RTT: "+V.R+"ms")),J=V;var dt=x;if(J.qa=lie(J,J.J?J.ia:null,J.W),dt.K){ae(J.h,dt);var qr=dt,po=J.L;po&&(qr.I=po),qr.B&&(Xr(qr),Ci(qr)),J.g=dt}else iie(J);0<V.i.length&&jR(V)}else lr[0]!="stop"&&lr[0]!="close"||nv(V,7);else V.G==3&&(lr[0]=="stop"||lr[0]=="close"?lr[0]=="stop"?nv(V,7):u_(V):lr[0]!="noop"&&V.l&&V.l.ta(lr),V.v=0)}}wr(4)}catch{}}var Bo=class{constructor(x,L){this.g=x,this.map=L}};function Aa(x){this.l=x||10,a.PerformanceNavigationTiming?(x=a.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vs(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Xl(x){return x.h?1:x.g?x.g.size:0}function cd(x,L){return x.h?x.h==L:x.g?x.g.has(L):!1}function Y(x,L){x.g?x.g.add(L):x.h=L}function ae(x,L){x.h&&x.h==L?x.h=null:x.g&&x.g.has(L)&&x.g.delete(L)}Aa.prototype.cancel=function(){if(this.i=te(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function te(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let L=x.i;for(const V of x.g.values())L=L.concat(V.D);return L}return m(x.i)}function me(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(u(x)){for(var L=[],V=x.length,J=0;J<V;J++)L.push(x[J]);return L}L=[],V=0;for(J in x)L[V++]=x[J];return L}function xe(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(u(x)||typeof x=="string"){var L=[];x=x.length;for(var V=0;V<x;V++)L.push(V);return L}L=[],V=0;for(const J in x)L[V++]=J;return L}}}function he(x,L){if(x.forEach&&typeof x.forEach=="function")x.forEach(L,void 0);else if(u(x)||typeof x=="string")Array.prototype.forEach.call(x,L,void 0);else for(var V=xe(x),J=me(x),Se=J.length,$e=0;$e<Se;$e++)L.call(void 0,J[$e],V&&V[$e],x)}var Le=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function We(x,L){if(x){x=x.split("&");for(var V=0;V<x.length;V++){var J=x[V].indexOf("="),Se=null;if(0<=J){var $e=x[V].substring(0,J);Se=x[V].substring(J+1)}else $e=x[V];L($e,Se?decodeURIComponent(Se.replace(/\+/g," ")):"")}}}function Ke(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof Ke){this.h=x.h,at(this,x.j),this.o=x.o,this.g=x.g,xt(this,x.s),this.l=x.l;var L=x.i,V=new Ql;V.i=L.i,L.g&&(V.g=new Map(L.g),V.h=L.h),hn(this,V),this.m=x.m}else x&&(L=String(x).match(Le))?(this.h=!1,at(this,L[1]||"",!0),this.o=Cr(L[2]||""),this.g=Cr(L[3]||"",!0),xt(this,L[4]),this.l=Cr(L[5]||"",!0),hn(this,L[6]||"",!0),this.m=Cr(L[7]||"")):(this.h=!1,this.i=new Ql(null,this.h))}Ke.prototype.toString=function(){var x=[],L=this.j;L&&x.push(Ir(L,fd,!0),":");var V=this.g;return(V||L=="file")&&(x.push("//"),(L=this.o)&&x.push(Ir(L,fd,!0),"@"),x.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&x.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&x.push("/"),x.push(Ir(V,V.charAt(0)=="/"?QS:rp,!0))),(V=this.i.toString())&&x.push("?",V),(V=this.m)&&x.push("#",Ir(V,PR)),x.join("")};function Xe(x){return new Ke(x)}function at(x,L,V){x.j=V?Cr(L,!0):L,x.j&&(x.j=x.j.replace(/:$/,""))}function xt(x,L){if(L){if(L=Number(L),isNaN(L)||0>L)throw Error("Bad port number "+L);x.s=L}else x.s=null}function hn(x,L,V){L instanceof Ql?(x.i=L,JS(x.i,x.h)):(V||(L=Ir(L,Qy)),x.i=new Ql(L,x.h))}function Dt(x,L,V){x.i.set(L,V)}function Fn(x){return Dt(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function Cr(x,L){return x?L?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Ir(x,L,V){return typeof x=="string"?(x=encodeURI(x).replace(L,Uo),V&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Uo(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var fd=/[#\/\?@]/g,rp=/[#\?:]/g,QS=/[#\?]/g,Qy=/[#\?@]/g,PR=/#/g;function Ql(x,L){this.h=this.g=null,this.i=x||null,this.j=!!L}function ou(x){x.g||(x.g=new Map,x.h=0,x.i&&We(x.i,function(L,V){x.add(decodeURIComponent(L.replace(/\+/g," ")),V)}))}e=Ql.prototype,e.add=function(x,L){ou(this),this.i=null,x=sp(this,x);var V=this.g.get(x);return V||this.g.set(x,V=[]),V.push(L),this.h+=1,this};function ip(x,L){ou(x),L=sp(x,L),x.g.has(L)&&(x.i=null,x.h-=x.g.get(L).length,x.g.delete(L))}function o_(x,L){return ou(x),L=sp(x,L),x.g.has(L)}e.forEach=function(x,L){ou(this),this.g.forEach(function(V,J){V.forEach(function(Se){x.call(L,Se,J,this)},this)},this)},e.na=function(){ou(this);const x=Array.from(this.g.values()),L=Array.from(this.g.keys()),V=[];for(let J=0;J<L.length;J++){const Se=x[J];for(let $e=0;$e<Se.length;$e++)V.push(L[J])}return V},e.V=function(x){ou(this);let L=[];if(typeof x=="string")o_(this,x)&&(L=L.concat(this.g.get(sp(this,x))));else{x=Array.from(this.g.values());for(let V=0;V<x.length;V++)L=L.concat(x[V])}return L},e.set=function(x,L){return ou(this),this.i=null,x=sp(this,x),o_(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[L]),this.h+=1,this},e.get=function(x,L){return x?(x=this.V(x),0<x.length?String(x[0]):L):L};function DR(x,L,V){ip(x,L),0<V.length&&(x.i=null,x.g.set(sp(x,L),m(V)),x.h+=V.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],L=Array.from(this.g.keys());for(var V=0;V<L.length;V++){var J=L[V];const $e=encodeURIComponent(String(J)),dt=this.V(J);for(J=0;J<dt.length;J++){var Se=$e;dt[J]!==""&&(Se+="="+encodeURIComponent(String(dt[J]))),x.push(Se)}}return this.i=x.join("&")};function sp(x,L){return L=String(L),x.j&&(L=L.toLowerCase()),L}function JS(x,L){L&&!x.j&&(ou(x),x.i=null,x.g.forEach(function(V,J){var Se=J.toLowerCase();J!=Se&&(ip(this,J),DR(this,Se,V))},x)),x.j=L}function OR(x,L){const V=new Ta;if(a.Image){const J=new Image;J.onload=h(au,V,"TestLoadImage: loaded",!0,L,J),J.onerror=h(au,V,"TestLoadImage: error",!1,L,J),J.onabort=h(au,V,"TestLoadImage: abort",!1,L,J),J.ontimeout=h(au,V,"TestLoadImage: timeout",!1,L,J),a.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=x}else L(!1)}function op(x,L){const V=new Ta,J=new AbortController,Se=setTimeout(()=>{J.abort(),au(V,"TestPingServer: timeout",!1,L)},1e4);fetch(x,{signal:J.signal}).then($e=>{clearTimeout(Se),$e.ok?au(V,"TestPingServer: ok",!0,L):au(V,"TestPingServer: server error",!1,L)}).catch(()=>{clearTimeout(Se),au(V,"TestPingServer: error",!1,L)})}function au(x,L,V,J,Se){try{Se&&(Se.onload=null,Se.onerror=null,Se.onabort=null,Se.ontimeout=null),J(V)}catch{}}function R5(){this.g=new er}function $R(x,L,V){const J=V||"";try{he(x,function(Se,$e){let dt=Se;l(Se)&&(dt=pn(Se)),L.push(J+$e+"="+encodeURIComponent(dt))})}catch(Se){throw L.push(J+"type="+encodeURIComponent("_badmap")),Se}}function Jy(x){this.l=x.Ub||null,this.j=x.eb||!1}p(Jy,tr),Jy.prototype.g=function(){return new Zy(this.l,this.j)},Jy.prototype.i=function(x){return function(){return x}}({});function Zy(x,L){_e.call(this),this.D=x,this.o=L,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Zy,_e),e=Zy.prototype,e.open=function(x,L){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=L,this.readyState=1,ug(this)},e.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const L={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(L.body=x),(this.D||a).fetch(new Request(this.A,L)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ev(this)),this.readyState=0},e.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,ug(this)),this.g&&(this.readyState=3,ug(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;MR(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function MR(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}e.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var L=x.value?x.value:new Uint8Array(0);(L=this.v.decode(L,{stream:!x.done}))&&(this.response=this.responseText+=L)}x.done?ev(this):ug(this),this.readyState==3&&MR(this)}},e.Ra=function(x){this.g&&(this.response=this.responseText=x,ev(this))},e.Qa=function(x){this.g&&(this.response=x,ev(this))},e.ga=function(){this.g&&ev(this)};function ev(x){x.readyState=4,x.l=null,x.j=null,x.v=null,ug(x)}e.setRequestHeader=function(x,L){this.u.append(x,L)},e.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],L=this.h.entries();for(var V=L.next();!V.done;)V=V.value,x.push(V[0]+": "+V[1]),V=L.next();return x.join(`\r
`)};function ug(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(Zy.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function LR(x){let L="";return T(x,function(V,J){L+=J,L+=":",L+=V,L+=`\r
`}),L}function ie(x,L,V){e:{for(J in V){var J=!1;break e}J=!0}J||(V=LR(V),typeof x=="string"?V!=null&&encodeURIComponent(String(V)):Dt(x,L,V))}function ce(x){_e.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ce,_e);var Pe=/^https?$/i,It=["POST","PUT"];e=ce.prototype,e.Ha=function(x){this.J=x},e.ea=function(x,L,V,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);L=L?L.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vt.g(),this.v=this.o?jo(this.o):jo(Vt),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(L,String(x),!0),this.B=!1}catch($e){Dn(this,$e);return}if(x=V||"",V=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var Se in J)V.set(Se,J[Se]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const $e of J.keys())V.set($e,J.get($e));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(V.keys()).find($e=>$e.toLowerCase()=="content-type"),Se=a.FormData&&x instanceof a.FormData,!(0<=Array.prototype.indexOf.call(It,L,void 0))||J||Se||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$e,dt]of V)this.g.setRequestHeader($e,dt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hr(this),this.u=!0,this.g.send(x),this.u=!1}catch($e){Dn(this,$e)}};function Dn(x,L){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=L,x.m=5,Er(x),jn(x)}function Er(x){x.A||(x.A=!0,Ne(x,"complete"),Ne(x,"error"))}e.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,Ne(this,"complete"),Ne(this,"abort"),jn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jn(this,!0)),ce.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Vr(this):this.bb())},e.bb=function(){Vr(this)};function Vr(x){if(x.h&&typeof o<"u"&&(!x.v[1]||Qi(x)!=4||x.Z()!=2)){if(x.u&&Qi(x)==4)ct(x.Ea,0,x);else if(Ne(x,"readystatechange"),Qi(x)==4){x.h=!1;try{const dt=x.Z();e:switch(dt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var L=!0;break e;default:L=!1}var V;if(!(V=L)){var J;if(J=dt===0){var Se=String(x.D).match(Le)[1]||null;!Se&&a.self&&a.self.location&&(Se=a.self.location.protocol.slice(0,-1)),J=!Pe.test(Se?Se.toLowerCase():"")}V=J}if(V)Ne(x,"complete"),Ne(x,"success");else{x.m=6;try{var $e=2<Qi(x)?x.g.statusText:""}catch{$e=""}x.l=$e+" ["+x.Z()+"]",Er(x)}}finally{jn(x)}}}}function jn(x,L){if(x.g){Hr(x);const V=x.g,J=x.v[0]?()=>{}:null;x.g=null,x.v=null,L||Ne(x,"ready");try{V.onreadystatechange=J}catch{}}}function Hr(x){x.I&&(a.clearTimeout(x.I),x.I=null)}e.isActive=function(){return!!this.g};function Qi(x){return x.g?x.g.readyState:0}e.Z=function(){try{return 2<Qi(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(x){if(this.g){var L=this.g.responseText;return x&&L.indexOf(x)==0&&(L=L.substring(x.length)),Tn(L)}};function zo(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function tv(x){const L={};x=(x.g&&2<=Qi(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<x.length;J++){if(v(x[J]))continue;var V=N(x[J]);const Se=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const $e=L[Se]||[];L[Se]=$e,$e.push(V)}S(L,function(J){return J.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ap(x,L,V){return V&&V.internalChannelParams&&V.internalChannelParams[x]||L}function a_(x){this.Aa=0,this.i=[],this.j=new Ta,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ap("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ap("baseRetryDelayMs",5e3,x),this.cb=ap("retryDelaySeedMs",1e4,x),this.Wa=ap("forwardChannelMaxRetries",2,x),this.wa=ap("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new Aa(x&&x.concurrentRequestLimit),this.Da=new R5,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=a_.prototype,e.la=8,e.G=1,e.connect=function(x,L,V,J){Kr(0),this.W=x,this.H=L||{},V&&J!==void 0&&(this.H.OSID=V,this.H.OAID=J),this.F=this.X,this.I=lie(this,null,this.W),jR(this)};function u_(x){if(tie(x),x.G==3){var L=x.U++,V=Xe(x.I);if(Dt(V,"SID",x.K),Dt(V,"RID",L),Dt(V,"TYPE","terminate"),ZS(x,V),L=new Ln(x,x.j,L),L.L=2,L.v=Fn(Xe(V)),V=!1,a.navigator&&a.navigator.sendBeacon)try{V=a.navigator.sendBeacon(L.v.toString(),"")}catch{}!V&&a.Image&&(new Image().src=L.v,V=!0),V||(L.g=cie(L.j,null),L.g.ea(L.v)),L.F=Date.now(),Ci(L)}uie(x)}function FR(x){x.g&&(P5(x),x.g.cancel(),x.g=null)}function tie(x){FR(x),x.u&&(a.clearTimeout(x.u),x.u=null),BR(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&a.clearTimeout(x.s),x.s=null)}function jR(x){if(!Vs(x.h)&&!x.s){x.s=!0;var L=x.Ga;B||D(),U||(B(),U=!0),H.add(L,x),x.B=0}}function rje(x,L){return Xl(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=L.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=Sa(d(x.Ga,x,L),aie(x,x.B)),x.B++,!0)}e.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const Se=new Ln(this,this.j,x);let $e=this.o;if(this.S&&($e?($e=A($e),k($e,this.S)):$e=this.S),this.m!==null||this.O||(Se.H=$e,$e=null),this.P)e:{for(var L=0,V=0;V<this.i.length;V++){t:{var J=this.i[V];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(L+=J,4096<L){L=V;break e}if(L===4096||V===this.i.length-1){L=V+1;break e}}L=1e3}else L=1e3;L=rie(this,Se,L),V=Xe(this.I),Dt(V,"RID",x),Dt(V,"CVER",22),this.D&&Dt(V,"X-HTTP-Session-Id",this.D),ZS(this,V),$e&&(this.O?L="headers="+encodeURIComponent(String(LR($e)))+"&"+L:this.m&&ie(V,this.m,$e)),Y(this.h,Se),this.Ua&&Dt(V,"TYPE","init"),this.P?(Dt(V,"$req",L),Dt(V,"SID","null"),Se.T=!0,zt(Se,V,null)):zt(Se,V,L),this.G=2}}else this.G==3&&(x?nie(this,x):this.i.length==0||Vs(this.h)||nie(this))};function nie(x,L){var V;L?V=L.l:V=x.U++;const J=Xe(x.I);Dt(J,"SID",x.K),Dt(J,"RID",V),Dt(J,"AID",x.T),ZS(x,J),x.m&&x.o&&ie(J,x.m,x.o),V=new Ln(x,x.j,V,x.B+1),x.m===null&&(V.H=x.o),L&&(x.i=L.D.concat(x.i)),L=rie(x,V,1e3),V.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),Y(x.h,V),zt(V,J,L)}function ZS(x,L){x.H&&T(x.H,function(V,J){Dt(L,J,V)}),x.l&&he({},function(V,J){Dt(L,J,V)})}function rie(x,L,V){V=Math.min(x.i.length,V);var J=x.l?d(x.l.Na,x.l,x):null;e:{var Se=x.i;let $e=-1;for(;;){const dt=["count="+V];$e==-1?0<V?($e=Se[0].g,dt.push("ofs="+$e)):$e=0:dt.push("ofs="+$e);let qr=!0;for(let po=0;po<V;po++){let lr=Se[po].g;const Vo=Se[po].map;if(lr-=$e,0>lr)$e=Math.max(0,Se[po].g-100),qr=!1;else try{$R(Vo,dt,"req"+lr+"_")}catch{J&&J(Vo)}}if(qr){J=dt.join("&");break e}}}return x=x.i.splice(0,V),L.D=x,J}function iie(x){if(!x.g&&!x.u){x.Y=1;var L=x.Fa;B||D(),U||(B(),U=!0),H.add(L,x),x.v=0}}function N5(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=Sa(d(x.Fa,x),aie(x,x.v)),x.v++,!0)}e.Fa=function(){if(this.u=null,sie(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=Sa(d(this.ab,this),x)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kr(10),FR(this),sie(this))};function P5(x){x.A!=null&&(a.clearTimeout(x.A),x.A=null)}function sie(x){x.g=new Ln(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var L=Xe(x.qa);Dt(L,"RID","rpc"),Dt(L,"SID",x.K),Dt(L,"AID",x.T),Dt(L,"CI",x.F?"0":"1"),!x.F&&x.ja&&Dt(L,"TO",x.ja),Dt(L,"TYPE","xmlhttp"),ZS(x,L),x.m&&x.o&&ie(L,x.m,x.o),x.L&&(x.g.I=x.L);var V=x.g;x=x.ia,V.L=1,V.v=Fn(Xe(L)),V.m=null,V.P=!0,rr(V,x)}e.Za=function(){this.C!=null&&(this.C=null,FR(this),N5(this),Kr(19))};function BR(x){x.C!=null&&(a.clearTimeout(x.C),x.C=null)}function oie(x,L){var V=null;if(x.g==L){BR(x),P5(x),x.g=null;var J=2}else if(cd(x.h,L))V=L.D,ae(x.h,L),J=1;else return;if(x.G!=0){if(L.o)if(J==1){V=L.m?L.m.length:0,L=Date.now()-L.F;var Se=x.B;J=sl(),Ne(J,new su(J,V)),jR(x)}else iie(x);else if(Se=L.s,Se==3||Se==0&&0<L.X||!(J==1&&rje(x,L)||J==2&&N5(x)))switch(V&&0<V.length&&(L=x.h,L.i=L.i.concat(V)),Se){case 1:nv(x,5);break;case 4:nv(x,10);break;case 3:nv(x,6);break;default:nv(x,2)}}}function aie(x,L){let V=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(V*=2),V*L}function nv(x,L){if(x.j.info("Error code "+L),L==2){var V=d(x.fb,x),J=x.Xa;const Se=!J;J=new Ke(J||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||at(J,"https"),Fn(J),Se?OR(J.toString(),V):op(J.toString(),V)}else Kr(2);x.G=0,x.l&&x.l.sa(L),uie(x),tie(x)}e.fb=function(x){x?(this.j.info("Successfully pinged google.com"),Kr(2)):(this.j.info("Failed to ping google.com"),Kr(1))};function uie(x){if(x.G=0,x.ka=[],x.l){const L=te(x.h);(L.length!=0||x.i.length!=0)&&(g(x.ka,L),g(x.ka,x.i),x.h.i.length=0,m(x.i),x.i.length=0),x.l.ra()}}function lie(x,L,V){var J=V instanceof Ke?Xe(V):new Ke(V);if(J.g!="")L&&(J.g=L+"."+J.g),xt(J,J.s);else{var Se=a.location;J=Se.protocol,L=L?L+"."+Se.hostname:Se.hostname,Se=+Se.port;var $e=new Ke(null);J&&at($e,J),L&&($e.g=L),Se&&xt($e,Se),V&&($e.l=V),J=$e}return V=x.D,L=x.ya,V&&L&&Dt(J,V,L),Dt(J,"VER",x.la),ZS(x,J),J}function cie(x,L,V){if(L&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return L=x.Ca&&!x.pa?new ce(new Jy({eb:V})):new ce(x.pa),L.Ha(x.J),L}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function fie(){}e=fie.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function UR(){}UR.prototype.g=function(x,L){return new ol(x,L)};function ol(x,L){_e.call(this),this.g=new a_(L),this.l=x,this.h=L&&L.messageUrlParams||null,x=L&&L.messageHeaders||null,L&&L.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=L&&L.initMessageHeaders||null,L&&L.messageContentType&&(x?x["X-WebChannel-Content-Type"]=L.messageContentType:x={"X-WebChannel-Content-Type":L.messageContentType}),L&&L.va&&(x?x["X-WebChannel-Client-Profile"]=L.va:x={"X-WebChannel-Client-Profile":L.va}),this.g.S=x,(x=L&&L.Sb)&&!v(x)&&(this.g.m=x),this.v=L&&L.supportsCrossDomainXhr||!1,this.u=L&&L.sendRawJson||!1,(L=L&&L.httpSessionIdParam)&&!v(L)&&(this.g.D=L,x=this.h,x!==null&&L in x&&(x=this.h,L in x&&delete x[L])),this.j=new l_(this)}p(ol,_e),ol.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ol.prototype.close=function(){u_(this.g)},ol.prototype.o=function(x){var L=this.g;if(typeof x=="string"){var V={};V.__data__=x,x=V}else this.u&&(V={},V.__data__=pn(x),x=V);L.i.push(new Bo(L.Ya++,x)),L.G==3&&jR(L)},ol.prototype.N=function(){this.g.l=null,delete this.j,u_(this.g),delete this.g,ol.aa.N.call(this)};function die(x){Oi.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var L=x.__sm__;if(L){e:{for(const V in L){x=V;break e}x=void 0}(this.i=x)&&(x=this.i,L=L!==null&&x in L?L[x]:void 0),this.data=L}else this.data=x}p(die,Oi);function hie(){Tr.call(this),this.status=1}p(hie,Tr);function l_(x){this.g=x}p(l_,fie),l_.prototype.ua=function(){Ne(this.g,"a")},l_.prototype.ta=function(x){Ne(this.g,new die(x))},l_.prototype.sa=function(x){Ne(this.g,new hie)},l_.prototype.ra=function(){Ne(this.g,"b")},UR.prototype.createWebChannel=UR.prototype.g,ol.prototype.send=ol.prototype.o,ol.prototype.open=ol.prototype.m,ol.prototype.close=ol.prototype.close,MNe=function(){return new UR},$Ne=function(){return sl()},ONe=ds,vV={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ut.NO_ERROR=0,ut.TIMEOUT=8,ut.HTTP_ERROR=6,TD=ut,Tt.COMPLETE="complete",DNe=Tt,Di.EventType=An,An.OPEN="a",An.CLOSE="b",An.ERROR="c",An.MESSAGE="d",_e.prototype.listen=_e.prototype.K,C2=Di,PNe=Jy,ce.prototype.listenOnce=ce.prototype.L,ce.prototype.getLastError=ce.prototype.Ka,ce.prototype.getLastErrorCode=ce.prototype.Ba,ce.prototype.getStatus=ce.prototype.Z,ce.prototype.getResponseJson=ce.prototype.Oa,ce.prototype.getResponseText=ce.prototype.oa,ce.prototype.send=ce.prototype.ea,ce.prototype.setWithCredentials=ce.prototype.Ha,NNe=ce}).apply(typeof JN<"u"?JN:typeof self<"u"?self:typeof window<"u"?window:{});const Yde="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}mu.UNAUTHENTICATED=new mu(null),mu.GOOGLE_CREDENTIALS=new mu("google-credentials-uid"),mu.FIRST_PARTY=new mu("first-party-uid"),mu.MOCK_USER=new mu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AS="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=new a4("@firebase/firestore");function PT(){return Z1.logLevel}function kt(e,...t){if(Z1.logLevel<=qn.DEBUG){const n=t.map(CJ);Z1.debug(`Firestore (${AS}): ${e}`,...n)}}function km(e,...t){if(Z1.logLevel<=qn.ERROR){const n=t.map(CJ);Z1.error(`Firestore (${AS}): ${e}`,...n)}}function nI(e,...t){if(Z1.logLevel<=qn.WARN){const n=t.map(CJ);Z1.warn(`Firestore (${AS}): ${e}`,...n)}}function CJ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(e="Unexpected state"){const t=`FIRESTORE (${AS}) INTERNAL ASSERTION FAILED: `+e;throw km(t),new Error(t)}function ti(e,t){e||sn()}function fn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _t extends qh{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cOt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class fOt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(mu.UNAUTHENTICATED))}shutdown(){}}class dOt{constructor(t){this.t=t,this.currentUser=mu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Zp;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Zp,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{kt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(kt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Zp)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(kt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ti(typeof r.accessToken=="string"),new cOt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ti(t===null||typeof t=="string"),new mu(t)}}class hOt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=mu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pOt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new hOt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(mu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mOt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gOt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&kt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,kt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{kt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):kt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ti(typeof n.token=="string"),this.R=n.token,new mOt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yOt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LNe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=yOt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function gr(e,t){return e<t?-1:e>t?1:0}function ZE(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new _t(qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _t(qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new _t(qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _t(qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return $s.fromMillis(Date.now())}static fromDate(t){return $s.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new $s(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?gr(this.nanoseconds,t.nanoseconds):gr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new cn(t)}static min(){return new cn(new $s(0,0))}static max(){return new cn(new $s(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(t,n,r){n===void 0?n=0:n>t.length&&sn(),r===void 0?r=t.length-n:r>t.length-n&&sn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return rI.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof rI?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class oi extends rI{construct(t,n,r){return new oi(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new _t(qe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new oi(n)}static emptyPath(){return new oi([])}}const vOt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class To extends rI{construct(t,n,r){return new To(t,n,r)}static isValidIdentifier(t){return vOt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),To.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new To(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new _t(qe.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new _t(qe.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new _t(qe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new _t(qe.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new To(n)}static emptyPath(){return new To([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(t){this.path=t}static fromPath(t){return new Bt(oi.fromString(t))}static fromName(t){return new Bt(oi.fromString(t).popFirst(5))}static empty(){return new Bt(oi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&oi.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return oi.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Bt(new oi(t.slice()))}}function bOt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=cn.fromTimestamp(r===1e9?new $s(n+1,0):new $s(n,r));return new ty(i,Bt.empty(),t)}function _Ot(e){return new ty(e.readTime,e.key,-1)}class ty{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new ty(cn.min(),Bt.empty(),-1)}static max(){return new ty(cn.max(),Bt.empty(),-1)}}function wOt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Bt.comparator(e.documentKey,t.documentKey),n!==0?n:gr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EOt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xOt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk(e){if(e.code!==qe.FAILED_PRECONDITION||e.message!==EOt)throw e;kt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&sn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Je((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Je?n:Je.resolve(n)}catch(n){return Je.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Je.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Je.reject(n)}static resolve(t){return new Je((n,r)=>{n(t)})}static reject(t){return new Je((n,r)=>{r(t)})}static waitFor(t){return new Je((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Je.resolve(!1);for(const r of t)n=n.next(i=>i?Je.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Je((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Je((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function SOt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jk(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IJ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}IJ.oe=-1;function p4(e){return e==null}function D$(e){return e===0&&1/e==-1/0}function TOt(e){return typeof e=="number"&&Number.isInteger(e)&&!D$(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kde(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ub(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function FNe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(t,n){this.comparator=t,this.root=n||Eo.EMPTY}insert(t,n){return new Pi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Eo.BLACK,null,null))}remove(t){return new Pi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Eo.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ZN(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ZN(this.root,t,this.comparator,!1)}getReverseIterator(){return new ZN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ZN(this.root,t,this.comparator,!0)}}class ZN{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Eo{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??Eo.RED,this.left=i??Eo.EMPTY,this.right=s??Eo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new Eo(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Eo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Eo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Eo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Eo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw sn();const t=this.left.check();if(t!==this.right.check())throw sn();return t+(this.isRed()?0:1)}}Eo.EMPTY=null,Eo.RED=!0,Eo.BLACK=!1;Eo.EMPTY=new class{constructor(){this.size=0}get key(){throw sn()}get value(){throw sn()}get color(){throw sn()}get left(){throw sn()}get right(){throw sn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new Eo(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(t){this.comparator=t,this.data=new Pi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xde(this.data.getIterator())}getIteratorFrom(t){return new Xde(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof No)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new No(this.comparator);return n.data=t,n}}class Xde{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(t){this.fields=t,t.sort(To.comparator)}static empty(){return new El([])}unionWith(t){let n=new No(To.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new El(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ZE(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jNe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new jNe("Invalid base64 string: "+s):s}}(t);return new va(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new va(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return gr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}va.EMPTY_BYTE_STRING=new va("");const AOt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ny(e){if(ti(!!e),typeof e=="string"){let t=0;const n=AOt.exec(e);if(ti(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ys(e.seconds),nanos:ys(e.nanos)}}function ys(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function eb(e){return typeof e=="string"?va.fromBase64String(e):va.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kJ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function RJ(e){const t=e.mapValue.fields.__previous_value__;return kJ(t)?RJ(t):t}function iI(e){const t=ny(e.mapValue.fields.__local_write_time__.timestampValue);return new $s(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class COt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class sI{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new sI("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof sI&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function tb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?kJ(e)?4:IOt(e)?9007199254740991:10:sn()}function Th(e,t){if(e===t)return!0;const n=tb(e);if(n!==tb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return iI(e).isEqual(iI(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ny(i.timestampValue),a=ny(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return eb(i.bytesValue).isEqual(eb(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return ys(i.geoPointValue.latitude)===ys(s.geoPointValue.latitude)&&ys(i.geoPointValue.longitude)===ys(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ys(i.integerValue)===ys(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ys(i.doubleValue),a=ys(s.doubleValue);return o===a?D$(o)===D$(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return ZE(e.arrayValue.values||[],t.arrayValue.values||[],Th);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Kde(o)!==Kde(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Th(o[u],a[u])))return!1;return!0}(e,t);default:return sn()}}function oI(e,t){return(e.values||[]).find(n=>Th(n,t))!==void 0}function ex(e,t){if(e===t)return 0;const n=tb(e),r=tb(t);if(n!==r)return gr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return gr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=ys(s.integerValue||s.doubleValue),u=ys(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Qde(e.timestampValue,t.timestampValue);case 4:return Qde(iI(e),iI(t));case 5:return gr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=eb(s),u=eb(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=gr(a[l],u[l]);if(c!==0)return c}return gr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=gr(ys(s.latitude),ys(o.latitude));return a!==0?a:gr(ys(s.longitude),ys(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=ex(a[l],u[l]);if(c)return c}return gr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===eP.mapValue&&o===eP.mapValue)return 0;if(s===eP.mapValue)return 1;if(o===eP.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=gr(u[f],c[f]);if(d!==0)return d;const h=ex(a[u[f]],l[c[f]]);if(h!==0)return h}return gr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw sn()}}function Qde(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return gr(e,t);const n=ny(e),r=ny(t),i=gr(n.seconds,r.seconds);return i!==0?i:gr(n.nanos,r.nanos)}function tx(e){return bV(e)}function bV(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=ny(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return eb(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Bt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=bV(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${bV(n.fields[o])}`;return i+"}"}(e.mapValue):sn()}function Jde(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function _V(e){return!!e&&"integerValue"in e}function NJ(e){return!!e&&"arrayValue"in e}function Zde(e){return!!e&&"nullValue"in e}function ehe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function AD(e){return!!e&&"mapValue"in e}function NA(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ub(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=NA(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=NA(e.arrayValue.values[n]);return t}return Object.assign({},e)}function IOt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(t){this.value=t}static empty(){return new Au({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!AD(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=NA(n)}setAll(t){let n=To.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=NA(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());AD(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Th(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];AD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Ub(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Au(NA(this.value))}}function BNe(e){const t=[];return Ub(e.fields,(n,r)=>{const i=new To([n]);if(AD(r)){const s=BNe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new El(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new oa(t,0,cn.min(),cn.min(),cn.min(),Au.empty(),0)}static newFoundDocument(t,n,r,i){return new oa(t,1,n,cn.min(),r,i,0)}static newNoDocument(t,n){return new oa(t,2,n,cn.min(),cn.min(),Au.empty(),0)}static newUnknownDocument(t,n){return new oa(t,3,n,cn.min(),cn.min(),Au.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(cn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Au.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Au.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=cn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof oa&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new oa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let O$=class{constructor(t,n){this.position=t,this.inclusive=n}};function the(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Bt.comparator(Bt.fromName(o.referenceValue),n.key):r=ex(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function nhe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Th(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(t,n="asc"){this.field=t,this.dir=n}}function kOt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UNe=class{};class bs extends UNe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new NOt(t,n,r):n==="array-contains"?new OOt(t,r):n==="in"?new $Ot(t,r):n==="not-in"?new MOt(t,r):n==="array-contains-any"?new LOt(t,r):new bs(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new POt(t,r):new DOt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ex(n,this.value)):n!==null&&tb(this.value)===tb(n)&&this.matchesComparison(ex(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return sn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vf extends UNe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Vf(t,n)}matches(t){return zNe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function zNe(e){return e.op==="and"}function VNe(e){return ROt(e)&&zNe(e)}function ROt(e){for(const t of e.filters)if(t instanceof Vf)return!1;return!0}function wV(e){if(e instanceof bs)return e.field.canonicalString()+e.op.toString()+tx(e.value);if(VNe(e))return e.filters.map(t=>wV(t)).join(",");{const t=e.filters.map(n=>wV(n)).join(",");return`${e.op}(${t})`}}function HNe(e,t){return e instanceof bs?function(r,i){return i instanceof bs&&r.op===i.op&&r.field.isEqual(i.field)&&Th(r.value,i.value)}(e,t):e instanceof Vf?function(r,i){return i instanceof Vf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&HNe(o,i.filters[a]),!0):!1}(e,t):void sn()}function qNe(e){return e instanceof bs?function(n){return`${n.field.canonicalString()} ${n.op} ${tx(n.value)}`}(e):e instanceof Vf?function(n){return n.op.toString()+" {"+n.getFilters().map(qNe).join(" ,")+"}"}(e):"Filter"}class NOt extends bs{constructor(t,n,r){super(t,n,r),this.key=Bt.fromName(r.referenceValue)}matches(t){const n=Bt.comparator(t.key,this.key);return this.matchesComparison(n)}}class POt extends bs{constructor(t,n){super(t,"in",n),this.keys=WNe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class DOt extends bs{constructor(t,n){super(t,"not-in",n),this.keys=WNe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function WNe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Bt.fromName(r.referenceValue))}class OOt extends bs{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return NJ(n)&&oI(n.arrayValue,this.value)}}class $Ot extends bs{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&oI(this.value.arrayValue,n)}}class MOt extends bs{constructor(t,n){super(t,"not-in",n)}matches(t){if(oI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!oI(this.value.arrayValue,n)}}class LOt extends bs{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!NJ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>oI(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FOt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function rhe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new FOt(e,t,n,r,i,s,o)}function PJ(e){const t=fn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>wV(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),p4(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>tx(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>tx(r)).join(",")),t.ue=n}return t.ue}function DJ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!kOt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!HNe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!nhe(e.startAt,t.startAt)&&nhe(e.endAt,t.endAt)}function EV(e){return Bt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function jOt(e,t,n,r,i,s,o,a){return new CS(e,t,n,r,i,s,o,a)}function OJ(e){return new CS(e)}function ihe(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function GNe(e){return e.collectionGroup!==null}function PA(e){const t=fn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new No(To.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new aI(s,r))}),n.has(To.keyField().canonicalString())||t.ce.push(new aI(To.keyField(),r))}return t.ce}function ah(e){const t=fn(e);return t.le||(t.le=BOt(t,PA(e))),t.le}function BOt(e,t){if(e.limitType==="F")return rhe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new aI(i.field,s)});const n=e.endAt?new O$(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new O$(e.startAt.position,e.startAt.inclusive):null;return rhe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function xV(e,t){const n=e.filters.concat([t]);return new CS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function SV(e,t,n){return new CS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function m4(e,t){return DJ(ah(e),ah(t))&&e.limitType===t.limitType}function YNe(e){return`${PJ(ah(e))}|lt:${e.limitType}`}function Y_(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>qNe(i)).join(", ")}]`),p4(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>tx(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>tx(i)).join(",")),`Target(${r})`}(ah(e))}; limitType=${e.limitType})`}function g4(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Bt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of PA(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=the(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,PA(r),i)||r.endAt&&!function(o,a,u){const l=the(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,PA(r),i))}(e,t)}function UOt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function KNe(e){return(t,n)=>{let r=!1;for(const i of PA(e)){const s=zOt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function zOt(e,t,n){const r=e.field.isKeyField()?Bt.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?ex(u,l):sn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return sn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Ub(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return FNe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VOt=new Pi(Bt.comparator);function Rm(){return VOt}const XNe=new Pi(Bt.comparator);function I2(...e){let t=XNe;for(const n of e)t=t.insert(n.key,n);return t}function QNe(e){let t=XNe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function l1(){return DA()}function JNe(){return DA()}function DA(){return new IS(e=>e.toString(),(e,t)=>e.isEqual(t))}const HOt=new Pi(Bt.comparator),qOt=new No(Bt.comparator);function Bn(...e){let t=qOt;for(const n of e)t=t.add(n);return t}const WOt=new No(gr);function GOt(){return WOt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZNe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:D$(t)?"-0":t}}function ePe(e){return{integerValue:""+e}}function YOt(e,t){return TOt(t)?ePe(t):ZNe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(){this._=void 0}}function KOt(e,t,n){return e instanceof uI?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&kJ(s)&&(s=RJ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof lI?nPe(e,t):e instanceof cI?rPe(e,t):function(i,s){const o=tPe(i,s),a=she(o)+she(i.Pe);return _V(o)&&_V(i.Pe)?ePe(a):ZNe(i.serializer,a)}(e,t)}function XOt(e,t,n){return e instanceof lI?nPe(e,t):e instanceof cI?rPe(e,t):n}function tPe(e,t){return e instanceof $$?function(r){return _V(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class uI extends y4{}class lI extends y4{constructor(t){super(),this.elements=t}}function nPe(e,t){const n=iPe(t);for(const r of e.elements)n.some(i=>Th(i,r))||n.push(r);return{arrayValue:{values:n}}}class cI extends y4{constructor(t){super(),this.elements=t}}function rPe(e,t){let n=iPe(t);for(const r of e.elements)n=n.filter(i=>!Th(i,r));return{arrayValue:{values:n}}}class $$ extends y4{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function she(e){return ys(e.integerValue||e.doubleValue)}function iPe(e){return NJ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QOt{constructor(t,n){this.field=t,this.transform=n}}function JOt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof lI&&i instanceof lI||r instanceof cI&&i instanceof cI?ZE(r.elements,i.elements,Th):r instanceof $$&&i instanceof $$?Th(r.Pe,i.Pe):r instanceof uI&&i instanceof uI}(e.transform,t.transform)}class ZOt{constructor(t,n){this.version=t,this.transformResults=n}}class Uu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Uu}static exists(t){return new Uu(void 0,t)}static updateTime(t){return new Uu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function CD(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class v4{}function sPe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new b4(e.key,Uu.none()):new Bk(e.key,e.data,Uu.none());{const n=e.data,r=Au.empty();let i=new No(To.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ly(e.key,r,new El(i.toArray()),Uu.none())}}function e3t(e,t,n){e instanceof Bk?function(i,s,o){const a=i.value.clone(),u=ahe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Ly?function(i,s,o){if(!CD(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=ahe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(oPe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function OA(e,t,n,r){return e instanceof Bk?function(s,o,a,u){if(!CD(s.precondition,o))return a;const l=s.value.clone(),c=uhe(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ly?function(s,o,a,u){if(!CD(s.precondition,o))return a;const l=uhe(s.fieldTransforms,u,o),c=o.data;return c.setAll(oPe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return CD(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function t3t(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=tPe(r.transform,i||null);s!=null&&(n===null&&(n=Au.empty()),n.set(r.field,s))}return n||null}function ohe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ZE(r,i,(s,o)=>JOt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Bk extends v4{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ly extends v4{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function oPe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function ahe(e,t,n){const r=new Map;ti(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,XOt(o,a,n[i]))}return r}function uhe(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,KOt(s,o,t))}return r}class b4 extends v4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n3t extends v4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3t{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&e3t(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=OA(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=OA(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=JNe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=sPe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(cn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Bn())}isEqual(t){return this.batchId===t.batchId&&ZE(this.mutations,t.mutations,(n,r)=>ohe(n,r))&&ZE(this.baseMutations,t.baseMutations,(n,r)=>ohe(n,r))}}class $J{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ti(t.mutations.length===r.length);let i=function(){return HOt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new $J(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3t{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3t{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ps,Qn;function o3t(e){switch(e){default:return sn();case qe.CANCELLED:case qe.UNKNOWN:case qe.DEADLINE_EXCEEDED:case qe.RESOURCE_EXHAUSTED:case qe.INTERNAL:case qe.UNAVAILABLE:case qe.UNAUTHENTICATED:return!1;case qe.INVALID_ARGUMENT:case qe.NOT_FOUND:case qe.ALREADY_EXISTS:case qe.PERMISSION_DENIED:case qe.FAILED_PRECONDITION:case qe.ABORTED:case qe.OUT_OF_RANGE:case qe.UNIMPLEMENTED:case qe.DATA_LOSS:return!0}}function aPe(e){if(e===void 0)return km("GRPC error has no .code"),qe.UNKNOWN;switch(e){case ps.OK:return qe.OK;case ps.CANCELLED:return qe.CANCELLED;case ps.UNKNOWN:return qe.UNKNOWN;case ps.DEADLINE_EXCEEDED:return qe.DEADLINE_EXCEEDED;case ps.RESOURCE_EXHAUSTED:return qe.RESOURCE_EXHAUSTED;case ps.INTERNAL:return qe.INTERNAL;case ps.UNAVAILABLE:return qe.UNAVAILABLE;case ps.UNAUTHENTICATED:return qe.UNAUTHENTICATED;case ps.INVALID_ARGUMENT:return qe.INVALID_ARGUMENT;case ps.NOT_FOUND:return qe.NOT_FOUND;case ps.ALREADY_EXISTS:return qe.ALREADY_EXISTS;case ps.PERMISSION_DENIED:return qe.PERMISSION_DENIED;case ps.FAILED_PRECONDITION:return qe.FAILED_PRECONDITION;case ps.ABORTED:return qe.ABORTED;case ps.OUT_OF_RANGE:return qe.OUT_OF_RANGE;case ps.UNIMPLEMENTED:return qe.UNIMPLEMENTED;case ps.DATA_LOSS:return qe.DATA_LOSS;default:return sn()}}(Qn=ps||(ps={}))[Qn.OK=0]="OK",Qn[Qn.CANCELLED=1]="CANCELLED",Qn[Qn.UNKNOWN=2]="UNKNOWN",Qn[Qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qn[Qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qn[Qn.NOT_FOUND=5]="NOT_FOUND",Qn[Qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qn[Qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qn[Qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qn[Qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qn[Qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qn[Qn.ABORTED=10]="ABORTED",Qn[Qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qn[Qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qn[Qn.INTERNAL=13]="INTERNAL",Qn[Qn.UNAVAILABLE=14]="UNAVAILABLE",Qn[Qn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3t(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3t=new _1([4294967295,4294967295],0);function lhe(e){const t=a3t().encode(e),n=new RNe;return n.update(t),new Uint8Array(n.digest())}function che(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new _1([n,r],0),new _1([i,s],0)]}class MJ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new k2(`Invalid padding: ${n}`);if(r<0)throw new k2(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new k2(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new k2(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=_1.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(_1.fromNumber(r)));return i.compare(u3t)===1&&(i=new _1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=lhe(t),[r,i]=che(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new MJ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=lhe(t),[r,i]=che(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class k2 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,Uk.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new _4(cn.min(),i,new Pi(gr),Rm(),Bn())}}class Uk{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Uk(r,n,Bn(),Bn(),Bn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class uPe{constructor(t,n){this.targetId=t,this.me=n}}class lPe{constructor(t,n,r=va.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class fhe{constructor(){this.fe=0,this.ge=hhe(),this.pe=va.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Bn(),n=Bn(),r=Bn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:sn()}}),new Uk(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=hhe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ti(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class l3t{constructor(t){this.Le=t,this.Be=new Map,this.ke=Rm(),this.qe=dhe(),this.Qe=new Pi(gr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:sn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(EV(s))if(r===0){const o=new Bt(s.path);this.Ue(n,o,oa.newNoDocument(o,cn.min()))}else ti(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=eb(r).toUint8Array()}catch(u){if(u instanceof jNe)return nI("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new MJ(o,i,s)}catch(u){return nI(u instanceof k2?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&EV(a.target)){const u=new Bt(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,oa.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Bn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new _4(t,n,this.Qe,this.ke,r);return this.ke=Rm(),this.qe=dhe(),this.Qe=new Pi(gr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new fhe,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new No(gr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||kt("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new fhe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function dhe(){return new Pi(Bt.comparator)}function hhe(){return new Pi(Bt.comparator)}const c3t={asc:"ASCENDING",desc:"DESCENDING"},f3t={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},d3t={and:"AND",or:"OR"};class h3t{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function TV(e,t){return e.useProto3Json||p4(t)?t:{value:t}}function M$(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function cPe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function p3t(e,t){return M$(e,t.toTimestamp())}function uh(e){return ti(!!e),cn.fromTimestamp(function(n){const r=ny(n);return new $s(r.seconds,r.nanos)}(e))}function LJ(e,t){return AV(e,t).canonicalString()}function AV(e,t){const n=function(i){return new oi(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function fPe(e){const t=oi.fromString(e);return ti(gPe(t)),t}function CV(e,t){return LJ(e.databaseId,t.path)}function y9(e,t){const n=fPe(t);if(n.get(1)!==e.databaseId.projectId)throw new _t(qe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new _t(qe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Bt(hPe(n))}function dPe(e,t){return LJ(e.databaseId,t)}function m3t(e){const t=fPe(e);return t.length===4?oi.emptyPath():hPe(t)}function IV(e){return new oi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function hPe(e){return ti(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function phe(e,t,n){return{name:CV(e,t),fields:n.value.mapValue.fields}}function g3t(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:sn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ti(c===void 0||typeof c=="string"),va.fromBase64String(c||"")):(ti(c===void 0||c instanceof Buffer||c instanceof Uint8Array),va.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?qe.UNKNOWN:aPe(l.code);return new _t(c,l.message||"")}(o);n=new lPe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=y9(e,r.document.name),s=uh(r.document.updateTime),o=r.document.createTime?uh(r.document.createTime):cn.min(),a=new Au({mapValue:{fields:r.document.fields}}),u=oa.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new ID(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=y9(e,r.document),s=r.readTime?uh(r.readTime):cn.min(),o=oa.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ID([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=y9(e,r.document),s=r.removedTargetIds||[];n=new ID([],s,i,null)}else{if(!("filter"in t))return sn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new s3t(i,s),a=r.targetId;n=new uPe(a,o)}}return n}function y3t(e,t){let n;if(t instanceof Bk)n={update:phe(e,t.key,t.value)};else if(t instanceof b4)n={delete:CV(e,t.key)};else if(t instanceof Ly)n={update:phe(e,t.key,t.data),updateMask:A3t(t.fieldMask)};else{if(!(t instanceof n3t))return sn();n={verify:CV(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof uI)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof lI)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof cI)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $$)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw sn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:p3t(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:sn()}(e,t.precondition)),n}function v3t(e,t){return e&&e.length>0?(ti(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?uh(i.updateTime):uh(s);return o.isEqual(cn.min())&&(o=uh(s)),new ZOt(o,i.transformResults||[])}(n,t))):[]}function b3t(e,t){return{documents:[dPe(e,t.path)]}}function _3t(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=dPe(e,i);const s=function(l){if(l.length!==0)return mPe(Vf.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:K_(d.field),direction:x3t(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=TV(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function w3t(e){let t=m3t(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ti(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=pPe(f);return d instanceof Vf&&VNe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new aI(X_(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,p4(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new O$(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new O$(h,d)}(n.endAt)),jOt(t,i,o,s,a,"F",u,l)}function E3t(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return sn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function pPe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=X_(n.unaryFilter.field);return bs.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=X_(n.unaryFilter.field);return bs.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=X_(n.unaryFilter.field);return bs.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=X_(n.unaryFilter.field);return bs.create(o,"!=",{nullValue:"NULL_VALUE"});default:return sn()}}(e):e.fieldFilter!==void 0?function(n){return bs.create(X_(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return sn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Vf.create(n.compositeFilter.filters.map(r=>pPe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return sn()}}(n.compositeFilter.op))}(e):sn()}function x3t(e){return c3t[e]}function S3t(e){return f3t[e]}function T3t(e){return d3t[e]}function K_(e){return{fieldPath:e.canonicalString()}}function X_(e){return To.fromServerFormat(e.fieldPath)}function mPe(e){return e instanceof bs?function(n){if(n.op==="=="){if(ehe(n.value))return{unaryFilter:{field:K_(n.field),op:"IS_NAN"}};if(Zde(n.value))return{unaryFilter:{field:K_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ehe(n.value))return{unaryFilter:{field:K_(n.field),op:"IS_NOT_NAN"}};if(Zde(n.value))return{unaryFilter:{field:K_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:K_(n.field),op:S3t(n.op),value:n.value}}}(e):e instanceof Vf?function(n){const r=n.getFilters().map(i=>mPe(i));return r.length===1?r[0]:{compositeFilter:{op:T3t(n.op),filters:r}}}(e):sn()}function A3t(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function gPe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(t,n,r,i,s=cn.min(),o=cn.min(),a=va.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Kg(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Kg(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Kg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Kg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3t{constructor(t){this.ct=t}}function I3t(e){const t=w3t({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?SV(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3t{constructor(){this._n=new R3t}addToCollectionParentIndex(t,n){return this._n.add(n),Je.resolve()}getCollectionParents(t,n){return Je.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Je.resolve()}deleteFieldIndex(t,n){return Je.resolve()}deleteAllFieldIndexes(t){return Je.resolve()}createTargetIndexes(t,n){return Je.resolve()}getDocumentsMatchingTarget(t,n){return Je.resolve(null)}getIndexType(t,n){return Je.resolve(0)}getFieldIndexes(t,n){return Je.resolve([])}getNextCollectionGroupToUpdate(t){return Je.resolve(null)}getMinOffset(t,n){return Je.resolve(ty.min())}getMinOffsetFromCollectionGroup(t,n){return Je.resolve(ty.min())}updateCollectionGroup(t,n,r){return Je.resolve()}updateIndexEntries(t,n){return Je.resolve()}}class R3t{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new No(oi.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new No(oi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new nx(0)}static Ln(){return new nx(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3t{constructor(){this.changes=new IS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,oa.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Je.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3t{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3t{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&OA(r.mutation,i,El.empty(),$s.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Bn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Bn()){const i=l1();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=I2();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=l1();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Bn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Rm();const o=DA(),a=function(){return DA()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Ly)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),OA(c.mutation,l,c.mutation.getFieldMask(),$s.now())):o.set(l.key,El.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new P3t(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=DA();let i=new Pi((o,a)=>o-a),s=Bn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||El.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Bn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=JNe();c.forEach(d=>{if(!s.has(d)){const h=sPe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Je.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Bt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):GNe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Je.resolve(l1());let a=-1,u=s;return o.next(l=>Je.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Je.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Bn())).next(c=>({batchId:a,changes:QNe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Bt(n)).next(r=>{let i=I2();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=I2();return this.indexManager.getCollectionParents(t,s).next(a=>Je.forEach(a,u=>{const l=function(f,d){return new CS(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,oa.newInvalidDocument(c)))});let a=I2();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&OA(c.mutation,l,El.empty(),$s.now()),g4(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3t{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Je.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:uh(i.createTime)}}(n)),Je.resolve()}getNamedQuery(t,n){return Je.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:I3t(i.bundledQuery),readTime:uh(i.readTime)}}(n)),Je.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3t{constructor(){this.overlays=new Pi(Bt.comparator),this.hr=new Map}getOverlay(t,n){return Je.resolve(this.overlays.get(n))}getOverlays(t,n){const r=l1();return Je.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Je.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Je.resolve()}getOverlaysForCollection(t,n,r){const i=l1(),s=n.length+1,o=new Bt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Je.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Pi((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=l1(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=l1(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Je.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new i3t(n,r));let s=this.hr.get(n);s===void 0&&(s=Bn(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FJ{constructor(){this.Pr=new No(Gs.Ir),this.Tr=new No(Gs.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Gs(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Gs(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Bt(new oi([])),r=new Gs(n,t),i=new Gs(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Bt(new oi([])),r=new Gs(n,t),i=new Gs(n,t+1);let s=Bn();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Gs(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Gs{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Bt.comparator(t.key,n.key)||gr(t.pr,n.pr)}static Er(t,n){return gr(t.pr,n.pr)||Bt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3t{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new No(Gs.Ir)}checkEmpty(t){return Je.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new r3t(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Gs(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Je.resolve(o)}lookupMutationBatch(t,n){return Je.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Je.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Je.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Gs(n,0),i=new Gs(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Je.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new No(gr);return n.forEach(i=>{const s=new Gs(i,0),o=new Gs(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Je.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Bt.isDocumentKey(s)||(s=s.child(""));const o=new Gs(new Bt(s),0);let a=new No(gr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Je.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ti(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Je.forEach(n.mutations,i=>{const s=new Gs(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Gs(n,0),i=this.wr.firstAfterOrEqual(r);return Je.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Je.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3t{constructor(t){this.vr=t,this.docs=function(){return new Pi(Bt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Je.resolve(r?r.document.mutableCopy():oa.newInvalidDocument(n))}getEntries(t,n){let r=Rm();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():oa.newInvalidDocument(i))}),Je.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Rm();const o=n.path,a=new Bt(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||wOt(_Ot(c),r)<=0||(i.has(c.key)||g4(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Je.resolve(s)}getAllFromCollectionGroup(t,n,r,i){sn()}Fr(t,n){return Je.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new F3t(this)}getSize(t){return Je.resolve(this.size)}}class F3t extends N3t{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Je.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3t{constructor(t){this.persistence=t,this.Mr=new IS(n=>PJ(n),DJ),this.lastRemoteSnapshotVersion=cn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new FJ,this.targetCount=0,this.Lr=nx.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Je.resolve()}getLastRemoteSnapshotVersion(t){return Je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Je.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Je.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Je.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new nx(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Je.resolve()}updateTargetData(t,n){return this.qn(n),Je.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Je.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Je.waitFor(s).next(()=>i)}getTargetCount(t){return Je.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Je.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Je.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Je.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Je.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Je.resolve(r)}containsKey(t,n){return Je.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3t{constructor(t,n){this.Br={},this.overlays={},this.kr=new IJ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new j3t(this),this.indexManager=new k3t,this.remoteDocumentCache=function(i){return new L3t(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new C3t(n),this.$r=new O3t(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new $3t,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new M3t(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){kt("MemoryPersistence","Starting transaction:",t);const i=new U3t(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Je.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class U3t extends xOt{constructor(t){super(),this.currentSequenceNumber=t}}class jJ{constructor(t){this.persistence=t,this.zr=new FJ,this.jr=null}static Hr(t){return new jJ(t)}get Jr(){if(this.jr)return this.jr;throw sn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Je.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Je.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Je.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Je.forEach(this.Jr,r=>{const i=Bt.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,cn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Je.or([()=>Je.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BJ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=Bn(),i=Bn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new BJ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3t{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3t{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Ekt()?8:SOt($o())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new z3t;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(PT()<=qn.DEBUG&&kt("QueryEngine","SDK will not create cache indexes for query:",Y_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Je.resolve()):(PT()<=qn.DEBUG&&kt("QueryEngine","Query:",Y_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(PT()<=qn.DEBUG&&kt("QueryEngine","The SDK decides to create cache indexes for query:",Y_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ah(n))):Je.resolve())}ji(t,n){if(ihe(n))return Je.resolve(null);let r=ah(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=SV(n,null,"F"),r=ah(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Bn(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,SV(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return ihe(n)||i.isEqual(cn.min())?Je.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Je.resolve(null):(PT()<=qn.DEBUG&&kt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Y_(n)),this.es(t,o,n,bOt(i,-1)).next(a=>a))})}Zi(t,n){let r=new No(KNe(t));return n.forEach((i,s)=>{g4(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return PT()<=qn.DEBUG&&kt("QueryEngine","Using full collection scan to execute query:",Y_(n)),this.zi.getDocumentsMatchingQuery(t,n,ty.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3t{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Pi(gr),this.rs=new IS(s=>PJ(s),DJ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new D3t(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function q3t(e,t,n,r){return new H3t(e,t,n,r)}async function yPe(e,t){const n=fn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Bn();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function W3t(e,t){const n=fn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Je.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ti(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Bn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function vPe(e){const t=fn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function G3t(e,t){const n=fn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(va.EMPTY_BYTE_STRING,cn.min()).withLastLimboFreeSnapshotVersion(cn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=Rm(),l=Bn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(Y3t(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(cn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Je.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function Y3t(e,t,n){let r=Bn(),i=Bn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Rm();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(cn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):kt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function K3t(e,t){const n=fn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function X3t(e,t){const n=fn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Je.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Kg(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function kV(e,t,n){const r=fn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!jk(o))throw o;kt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function mhe(e,t,n){const r=fn(e);let i=cn.min(),s=Bn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=fn(u),d=f.rs.get(c);return d!==void 0?Je.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,ah(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:cn.min(),n?s:Bn())).next(a=>(Q3t(r,UOt(t),a),{documents:a,hs:s})))}function Q3t(e,t,n){let r=e.ss.get(t)||cn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class ghe{constructor(){this.activeTargetIds=GOt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class J3t{constructor(){this.no=new ghe,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new ghe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3t{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yhe{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){kt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){kt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tP=null;function v9(){return tP===null?tP=function(){return 268435456+Math.round(2147483648*Math.random())}():tP++,"0x"+tP.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e$t={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t$t{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo="WebChannelConnection";class n$t extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=v9(),u=this.vo(n,r.toUriEncodedString());kt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(kt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw nI("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+AS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=e$t[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=v9();return new Promise((o,a)=>{const u=new NNe;u.setWithCredentials(!0),u.listenOnce(DNe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case TD.NO_ERROR:const c=u.getResponseJson();kt(Jo,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case TD.TIMEOUT:kt(Jo,`RPC '${t}' ${s} timed out`),a(new _t(qe.DEADLINE_EXCEEDED,"Request time out"));break;case TD.HTTP_ERROR:const f=u.getStatus();if(kt(Jo,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(qe).indexOf(y)>=0?y:qe.UNKNOWN}(h.status);a(new _t(p,h.message))}else a(new _t(qe.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new _t(qe.UNAVAILABLE,"Connection failed."));break;default:sn()}}finally{kt(Jo,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);kt(Jo,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=v9(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=MNe(),a=$Ne(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new PNe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");kt(Jo,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new t$t({lo:g=>{h?kt(Jo,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(kt(Jo,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),kt(Jo,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,C2.EventType.OPEN,()=>{h||(kt(Jo,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,C2.EventType.CLOSE,()=>{h||(h=!0,kt(Jo,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,C2.EventType.ERROR,g=>{h||(h=!0,nI(Jo,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new _t(qe.UNAVAILABLE,"The operation could not be completed")))}),m(f,C2.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ti(!!v);const b=v,w=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(w){kt(Jo,`RPC '${t}' stream ${i} received error:`,w);const E=w.status;let T=function(C){const k=ps[C];if(k!==void 0)return aPe(k)}(E),S=w.message;T===void 0&&(T=qe.INTERNAL,S="Unknown error status: "+E+" with message "+w.message),h=!0,p.po(new _t(T,S)),f.close()}else kt(Jo,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,ONe.STAT_EVENT,g=>{g.stat===vV.PROXY?kt(Jo,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===vV.NOPROXY&&kt(Jo,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function b9(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(e){return new h3t(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bPe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&kt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Pe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new bPe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===qe.RESOURCE_EXHAUSTED?(km(n.toString()),km("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===qe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new _t(qe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return kt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(kt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class r$t extends _Pe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=g3t(this.serializer,t),r=function(s){if(!("targetChange"in s))return cn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?cn.min():o.readTime?uh(o.readTime):cn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=IV(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=EV(u)?{documents:b3t(s,u)}:{query:_3t(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=cPe(s,o.resumeToken);const l=TV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(cn.min())>0){a.readTime=M$(s,o.snapshotVersion.toTimestamp());const l=TV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=E3t(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=IV(this.serializer),n.removeTarget=t,this.i_(n)}}class i$t extends _Pe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ti(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=v3t(t.writeResults,t.commitTime),r=uh(t.commitTime);return this.listener.A_(r,n)}return ti(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=IV(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>y3t(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s$t extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new _t(qe.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,AV(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _t(qe.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,AV(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _t(qe.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class o$t{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(km(n),this.y_=!1):kt("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a$t{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{zb(this)&&(kt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=fn(u);l.M_.add(4),await Vk(l),l.N_.set("Unknown"),l.M_.delete(4),await zk(l)}(this))})}),this.N_=new o$t(r,i)}}async function zk(e){if(zb(e))for(const t of e.x_)await t(!0)}async function Vk(e){for(const t of e.x_)await t(!1)}function wPe(e,t){const n=fn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),HJ(n)?VJ(n):kS(n).Xo()&&zJ(n,t))}function UJ(e,t){const n=fn(e),r=kS(n);n.F_.delete(t),r.Xo()&&EPe(n,t),n.F_.size===0&&(r.Xo()?r.n_():zb(n)&&n.N_.set("Unknown"))}function zJ(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(cn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}kS(e).P_(t)}function EPe(e,t){e.L_.xe(t),kS(e).I_(t)}function VJ(e){e.L_=new l3t({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),kS(e).start(),e.N_.w_()}function HJ(e){return zb(e)&&!kS(e).Zo()&&e.F_.size>0}function zb(e){return fn(e).M_.size===0}function xPe(e){e.L_=void 0}async function u$t(e){e.N_.set("Online")}async function l$t(e){e.F_.forEach((t,n)=>{zJ(e,t)})}async function c$t(e,t){xPe(e),HJ(e)?(e.N_.D_(t),VJ(e)):e.N_.set("Unknown")}async function f$t(e,t,n){if(e.N_.set("Online"),t instanceof lPe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){kt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await L$(e,r)}else if(t instanceof ID?e.L_.Ke(t):t instanceof uPe?e.L_.He(t):e.L_.We(t),!n.isEqual(cn.min()))try{const r=await vPe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(va.EMPTY_BYTE_STRING,c.snapshotVersion)),EPe(s,u);const f=new Kg(c.target,u,l,c.sequenceNumber);zJ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){kt("RemoteStore","Failed to raise snapshot:",r),await L$(e,r)}}async function L$(e,t,n){if(!jk(t))throw t;e.M_.add(1),await Vk(e),e.N_.set("Offline"),n||(n=()=>vPe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{kt("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await zk(e)})}function SPe(e,t){return t().catch(n=>L$(e,n,t))}async function E4(e){const t=fn(e),n=ry(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;d$t(t);)try{const i=await K3t(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,h$t(t,i)}catch(i){await L$(t,i)}TPe(t)&&APe(t)}function d$t(e){return zb(e)&&e.v_.length<10}function h$t(e,t){e.v_.push(t);const n=ry(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function TPe(e){return zb(e)&&!ry(e).Zo()&&e.v_.length>0}function APe(e){ry(e).start()}async function p$t(e){ry(e).V_()}async function m$t(e){const t=ry(e);for(const n of e.v_)t.d_(n.mutations)}async function g$t(e,t,n){const r=e.v_.shift(),i=$J.from(r,t,n);await SPe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await E4(e)}async function y$t(e,t){t&&ry(e).E_&&await async function(r,i){if(function(o){return o3t(o)&&o!==qe.ABORTED}(i.code)){const s=r.v_.shift();ry(r).t_(),await SPe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await E4(r)}}(e,t),TPe(e)&&APe(e)}async function vhe(e,t){const n=fn(e);n.asyncQueue.verifyOperationInProgress(),kt("RemoteStore","RemoteStore received new credentials");const r=zb(n);n.M_.add(3),await Vk(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await zk(n)}async function v$t(e,t){const n=fn(e);t?(n.M_.delete(2),await zk(n)):t||(n.M_.add(2),await Vk(n),n.N_.set("Unknown"))}function kS(e){return e.B_||(e.B_=function(n,r,i){const s=fn(n);return s.f_(),new r$t(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:u$t.bind(null,e),To:l$t.bind(null,e),Ao:c$t.bind(null,e),h_:f$t.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),HJ(e)?VJ(e):e.N_.set("Unknown")):(await e.B_.stop(),xPe(e))})),e.B_}function ry(e){return e.k_||(e.k_=function(n,r,i){const s=fn(n);return s.f_(),new i$t(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:p$t.bind(null,e),Ao:y$t.bind(null,e),R_:m$t.bind(null,e),A_:g$t.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await E4(e)):(await e.k_.stop(),e.v_.length>0&&(kt("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qJ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Zp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new qJ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _t(qe.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function WJ(e,t){if(km("AsyncQueue",`${t}: ${e}`),jk(e))return new _t(qe.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Bt.comparator(n.key,r.key):(n,r)=>Bt.comparator(n.key,r.key),this.keyedMap=I2(),this.sortedSet=new Pi(this.comparator)}static emptySet(t){return new nE(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof nE)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new nE;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bhe{constructor(){this.q_=new Pi(Bt.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):sn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class rx{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new rx(t,n,nE.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&m4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b$t{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class _$t{constructor(){this.queries=new IS(t=>YNe(t),m4),this.onlineState="Unknown",this.z_=new Set}}async function CPe(e,t){const n=fn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new b$t,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=WJ(o,`Initialization of query '${Y_(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&GJ(n)}async function IPe(e,t){const n=fn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function w$t(e,t){const n=fn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&GJ(n)}function E$t(e,t,n){const r=fn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function GJ(e){e.z_.forEach(t=>{t.next()})}var RV,_he;(_he=RV||(RV={})).J_="default",_he.Cache="cache";class kPe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new rx(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=rx.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==RV.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RPe{constructor(t){this.key=t}}class NPe{constructor(t){this.key=t}}class x$t{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Bn(),this.mutatedKeys=Bn(),this.Ia=KNe(t),this.Ta=new nE(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new bhe,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=g4(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return sn()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new rx(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new bhe,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Bn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new NPe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new RPe(r))}),n}pa(t){this.la=t.hs,this.Pa=Bn();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return rx.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class S$t{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class T$t{constructor(t){this.key=t,this.wa=!1}}class A$t{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new IS(a=>YNe(a),m4),this.Da=new Map,this.Ca=new Set,this.va=new Pi(Bt.comparator),this.Fa=new Map,this.Ma=new FJ,this.xa={},this.Oa=new Map,this.Na=nx.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function C$t(e,t,n=!0){const r=LPe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await PPe(r,t,n,!0),i}async function I$t(e,t){const n=LPe(e);await PPe(n,t,!0,!1)}async function PPe(e,t,n,r){const i=await X3t(e.localStore,ah(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await k$t(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&wPe(e.remoteStore,i),a}async function k$t(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await mhe(m.localStore,g.query,!1).then(({documents:S})=>g.view.da(S,b)));const w=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,T=g.view.applyChanges(b,m.isPrimaryClient,w,E);return Ehe(m,g.targetId,T.fa),T.snapshot}(e,f,d,h);const s=await mhe(e.localStore,t,!0),o=new x$t(t,s.hs),a=o.da(s.documents),u=Uk.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);Ehe(e,n,l.fa);const c=new S$t(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function R$t(e,t,n){const r=fn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!m4(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await kV(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&UJ(r.remoteStore,i.targetId),NV(r,i.targetId)}).catch(Fk)):(NV(r,i.targetId),await kV(r.localStore,i.targetId,!0))}async function N$t(e,t){const n=fn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),UJ(n.remoteStore,r.targetId))}async function P$t(e,t,n){const r=j$t(e);try{const i=await function(o,a){const u=fn(o),l=$s.now(),c=a.reduce((h,p)=>h.add(p.key),Bn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Rm(),m=Bn();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=t3t(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new Ly(v.key,b,BNe(b.value.mapValue),Uu.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:QNe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Pi(gr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await Hk(r,i.changes),await E4(r.remoteStore)}catch(i){const s=WJ(i,"Failed to persist write");n.reject(s)}}async function DPe(e,t){const n=fn(e);try{const r=await G3t(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ti(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ti(o.wa):i.removedDocuments.size>0&&(ti(o.wa),o.wa=!1))}),await Hk(n,r,t)}catch(r){await Fk(r)}}function whe(e,t,n){const r=fn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=fn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&GJ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function D$t(e,t,n){const r=fn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Pi(Bt.comparator);o=o.insert(s,oa.newNoDocument(s,cn.min()));const a=Bn().add(s),u=new _4(cn.min(),new Map,new Pi(gr),o,a);await DPe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),YJ(r)}else await kV(r.localStore,t,!1).then(()=>NV(r,t,n)).catch(Fk)}async function O$t(e,t){const n=fn(e),r=t.batch.batchId;try{const i=await W3t(n.localStore,t);$Pe(n,r,null),OPe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hk(n,i)}catch(i){await Fk(i)}}async function $$t(e,t,n){const r=fn(e);try{const i=await function(o,a){const u=fn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ti(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);$Pe(r,t,n),OPe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Hk(r,i)}catch(i){await Fk(i)}}function OPe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function $Pe(e,t,n){const r=fn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function NV(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||MPe(e,r)})}function MPe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(UJ(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),YJ(e))}function Ehe(e,t,n){for(const r of n)r instanceof RPe?(e.Ma.addReference(r.key,t),M$t(e,r)):r instanceof NPe?(kt("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||MPe(e,r.key)):sn()}function M$t(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(kt("SyncEngine","New document in limbo: "+n),e.Ca.add(r),YJ(e))}function YJ(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Bt(oi.fromString(t)),r=e.Na.next();e.Fa.set(r,new T$t(n)),e.va=e.va.insert(n,r),wPe(e.remoteStore,new Kg(ah(OJ(n.path)),r,"TargetPurposeLimboResolution",IJ.oe))}}async function Hk(e,t,n){const r=fn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=BJ.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=fn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Je.forEach(l,d=>Je.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Je.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!jk(f))throw f;kt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function L$t(e,t){const n=fn(e);if(!n.currentUser.isEqual(t)){kt("SyncEngine","User change. New user:",t.toKey());const r=await yPe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new _t(qe.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Hk(n,r.us)}}function F$t(e,t){const n=fn(e),r=n.Fa.get(t);if(r&&r.wa)return Bn().add(r.key);{let i=Bn();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function LPe(e){const t=fn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=DPe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=F$t.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=D$t.bind(null,t),t.Sa.h_=w$t.bind(null,t.eventManager),t.Sa.ka=E$t.bind(null,t.eventManager),t}function j$t(e){const t=fn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=O$t.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$$t.bind(null,t),t}class xhe{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=w4(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return q3t(this.persistence,new V3t,t.initialUser,this.serializer)}createPersistence(t){return new B3t(jJ.Hr,this.serializer)}createSharedClientState(t){return new J3t}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class B$t{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>whe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=L$t.bind(null,this.syncEngine),await v$t(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new _$t}()}createDatastore(t){const n=w4(t.databaseInfo.databaseId),r=function(s){return new n$t(s)}(t.databaseInfo);return function(s,o,a,u){return new s$t(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new a$t(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>whe(this.syncEngine,n,0),function(){return yhe.D()?new yhe:new Z3t}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new A$t(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=fn(r);kt("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await Vk(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FPe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):km("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U$t{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=mu.UNAUTHENTICATED,this.clientId=LNe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{kt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(kt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _t(qe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Zp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=WJ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function _9(e,t){e.asyncQueue.verifyOperationInProgress(),kt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await yPe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function She(e,t){e.asyncQueue.verifyOperationInProgress();const n=await jPe(e);kt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>vhe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>vhe(t.remoteStore,i)),e._onlineComponents=t}function z$t(e){return e.name==="FirebaseError"?e.code===qe.FAILED_PRECONDITION||e.code===qe.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function jPe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){kt("FirestoreClient","Using user provided OfflineComponentProvider");try{await _9(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!z$t(n))throw n;nI("Error using user provided cache. Falling back to memory cache: "+n),await _9(e,new xhe)}}else kt("FirestoreClient","Using default OfflineComponentProvider"),await _9(e,new xhe);return e._offlineComponents}async function KJ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(kt("FirestoreClient","Using user provided OnlineComponentProvider"),await She(e,e._uninitializedComponentsProvider._online)):(kt("FirestoreClient","Using default OnlineComponentProvider"),await She(e,new B$t))),e._onlineComponents}function V$t(e){return jPe(e).then(t=>t.persistence)}function H$t(e){return KJ(e).then(t=>t.remoteStore)}function q$t(e){return KJ(e).then(t=>t.syncEngine)}async function BPe(e){const t=await KJ(e),n=t.eventManager;return n.onListen=C$t.bind(null,t.syncEngine),n.onUnlisten=R$t.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=I$t.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=N$t.bind(null,t.syncEngine),n}function W$t(e){return e.asyncQueue.enqueue(async()=>{const t=await V$t(e),n=await H$t(e);return t.setNetworkEnabled(!0),function(i){const s=fn(i);return s.M_.delete(0),zk(s)}(n)})}function G$t(e,t,n={}){const r=new Zp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new FPe({next:d=>{o.enqueueAndForget(()=>IPe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new _t(qe.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new _t(qe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new kPe(OJ(a.path),c,{includeMetadataChanges:!0,ra:!0});return CPe(s,f)}(await BPe(e),e.asyncQueue,t,n,r)),r.promise}function Y$t(e,t,n={}){const r=new Zp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new FPe({next:d=>{o.enqueueAndForget(()=>IPe(s,f)),d.fromCache&&u.source==="server"?l.reject(new _t(qe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new kPe(a,c,{includeMetadataChanges:!0,ra:!0});return CPe(s,f)}(await BPe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UPe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const The=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zPe(e,t,n){if(!n)throw new _t(qe.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function K$t(e,t,n,r){if(t===!0&&r===!0)throw new _t(qe.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Ahe(e){if(!Bt.isDocumentKey(e))throw new _t(qe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Che(e){if(Bt.isDocumentKey(e))throw new _t(qe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function x4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":sn()}function Hf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new _t(qe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=x4(e);throw new _t(qe.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ihe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new _t(qe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new _t(qe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}K$t("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UPe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new _t(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _t(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _t(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class XJ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ihe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _t(qe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new _t(qe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ihe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new fOt;switch(r.type){case"firstParty":return new pOt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _t(qe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=The.get(n);r&&(kt("ComponentProvider","Removing Datastore"),The.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Vb(this.firestore,t,this._query)}}class Ha{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new x0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ha(this.firestore,t,this._key)}}class x0 extends Vb{constructor(t,n,r){super(t,n,OJ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ha(this.firestore,null,new Bt(t))}withConverter(t){return new x0(this.firestore,t,this._path)}}function Qc(e,t,...n){if(e=ni(e),zPe("collection","path",t),e instanceof XJ){const r=oi.fromString(t,...n);return Che(r),new x0(e,null,r)}{if(!(e instanceof Ha||e instanceof x0))throw new _t(qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(oi.fromString(t,...n));return Che(r),new x0(e.firestore,null,r)}}function hs(e,t,...n){if(e=ni(e),arguments.length===1&&(t=LNe.newId()),zPe("doc","path",t),e instanceof XJ){const r=oi.fromString(t,...n);return Ahe(r),new Ha(e,null,new Bt(r))}{if(!(e instanceof Ha||e instanceof x0))throw new _t(qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(oi.fromString(t,...n));return Ahe(r),new Ha(e.firestore,e instanceof x0?e.converter:null,new Bt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X$t{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new bPe(this,"async_queue_retry"),this.hu=()=>{const n=b9();n&&kt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=b9();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=b9();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Zp;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!jk(t))throw t;kt("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw km("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=qJ.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&sn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class Fy extends XJ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new X$t}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||VPe(this),this._firestoreClient.terminate()}}function Q$t(e,t,n){n||(n="(default)");const r=SS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(ZC(s,t))return i;throw new _t(qe.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new _t(qe.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new _t(qe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function qk(e){return e._firestoreClient||VPe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function VPe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new COt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,UPe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new U$t(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function J$t(e){return W$t(qk(e=Hf(e,Fy)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ix(va.fromBase64String(t))}catch(n){throw new _t(qe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new ix(va.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new _t(qe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new To(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QJ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new _t(qe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new _t(qe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return gr(this._lat,t._lat)||gr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z$t=/^__.*__$/;class eMt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Ly(t,this.data,this.fieldMask,n,this.fieldTransforms):new Bk(t,this.data,n,this.fieldTransforms)}}class HPe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Ly(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function qPe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw sn()}}class JJ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new JJ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return F$(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(qPe(this.fu)&&Z$t.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class tMt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||w4(t)}Fu(t,n,r,i=!1){return new JJ({fu:t,methodName:n,vu:r,path:To.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function T4(e){const t=e._freezeSettings(),n=w4(e._databaseId);return new tMt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function WPe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);eZ("Data must be an object, but it was:",o,r);const a=KPe(r,o);let u,l;if(s.merge)u=new El(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=PV(t,f,n);if(!o.contains(d))throw new _t(qe.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);QPe(c,d)||c.push(d)}u=new El(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new eMt(new Au(a),u,l)}class A4 extends S4{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof A4}}class ZJ extends S4{_toFieldTransform(t){return new QOt(t.path,new uI)}isEqual(t){return t instanceof ZJ}}function GPe(e,t,n,r){const i=e.Fu(1,t,n);eZ("Data must be an object, but it was:",i,r);const s=[],o=Au.empty();Ub(r,(u,l)=>{const c=tZ(t,u,n);l=ni(l);const f=i.Su(c);if(l instanceof A4)s.push(c);else{const d=Gk(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new El(s);return new HPe(o,a,i.fieldTransforms)}function YPe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[PV(t,r,n)],u=[i];if(s.length%2!=0)throw new _t(qe.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(PV(t,s[d])),u.push(s[d+1]);const l=[],c=Au.empty();for(let d=a.length-1;d>=0;--d)if(!QPe(l,a[d])){const h=a[d];let p=u[d];p=ni(p);const m=o.Su(h);if(p instanceof A4)l.push(h);else{const g=Gk(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new El(l);return new HPe(c,f,o.fieldTransforms)}function nMt(e,t,n,r=!1){return Gk(n,e.Fu(r?4:3,t))}function Gk(e,t){if(XPe(e=ni(e)))return eZ("Unsupported field value:",t,e),KPe(e,t);if(e instanceof S4)return function(r,i){if(!qPe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Gk(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=ni(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YOt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=$s.fromDate(r);return{timestampValue:M$(i.serializer,s)}}if(r instanceof $s){const s=new $s(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:M$(i.serializer,s)}}if(r instanceof QJ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ix)return{bytesValue:cPe(i.serializer,r._byteString)};if(r instanceof Ha){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:LJ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${x4(r)}`)}(e,t)}function KPe(e,t){const n={};return FNe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ub(e,(r,i)=>{const s=Gk(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function XPe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof $s||e instanceof QJ||e instanceof ix||e instanceof Ha||e instanceof S4)}function eZ(e,t,n){if(!XPe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=x4(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function PV(e,t,n){if((t=ni(t))instanceof Wk)return t._internalPath;if(typeof t=="string")return tZ(e,t);throw F$("Field path arguments must be of type string or ",e,!1,void 0,n)}const rMt=new RegExp("[~\\*/\\[\\]]");function tZ(e,t,n){if(t.search(rMt)>=0)throw F$(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Wk(...t.split("."))._internalPath}catch{throw F$(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function F$(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new _t(qe.INVALID_ARGUMENT,a+e+u)}function QPe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JPe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ha(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new iMt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(C4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iMt extends JPe{data(){return super.data()}}function C4(e,t){return typeof t=="string"?tZ(e,t):t instanceof Wk?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sMt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new _t(qe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nZ{}class ZPe extends nZ{}function khe(e,t,...n){let r=[];t instanceof nZ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof rZ).length,a=s.filter(u=>u instanceof I4).length;if(o>1||o>0&&a>0)throw new _t(qe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class I4 extends ZPe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new I4(t,n,r)}_apply(t){const n=this._parse(t);return eDe(t._query,n),new Vb(t.firestore,t.converter,xV(t._query,n))}_parse(t){const n=T4(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new _t(qe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Nhe(f,c);const h=[];for(const p of f)h.push(Rhe(u,s,p));d={arrayValue:{values:h}}}else d=Rhe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Nhe(f,c),d=nMt(a,o,f,c==="in"||c==="not-in");return bs.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function oMt(e,t,n){const r=t,i=C4("where",e);return I4._create(i,r,n)}class rZ extends nZ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new rZ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Vf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)eDe(o,u),o=xV(o,u)}(t._query,n),new Vb(t.firestore,t.converter,xV(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class iZ extends ZPe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new iZ(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new _t(qe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new _t(qe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new aI(s,o)}(t._query,this._field,this._direction);return new Vb(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new CS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function aMt(e,t="asc"){const n=t,r=C4("orderBy",e);return iZ._create(r,n)}function Rhe(e,t,n){if(typeof(n=ni(n))=="string"){if(n==="")throw new _t(qe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GNe(t)&&n.indexOf("/")!==-1)throw new _t(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(oi.fromString(n));if(!Bt.isDocumentKey(r))throw new _t(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Jde(e,new Bt(r))}if(n instanceof Ha)return Jde(e,n._key);throw new _t(qe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${x4(n)}.`)}function Nhe(e,t){if(!Array.isArray(e)||e.length===0)throw new _t(qe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function eDe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new _t(qe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new _t(qe.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class uMt{convertValue(t,n="none"){switch(tb(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ys(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(eb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw sn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Ub(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new QJ(ys(t.latitude),ys(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=RJ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(iI(t));default:return null}}convertTimestamp(t){const n=ny(t);return new $s(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=oi.fromString(t);ti(gPe(r));const i=new sI(r.get(1),r.get(3)),s=new Bt(r.popFirst(5));return i.isEqual(n)||km(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tDe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class nDe extends JPe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new kD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(C4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class kD extends nDe{data(t={}){return super.data(t)}}class lMt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new R2(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new kD(this._firestore,this._userDataWriter,r.key,r,new R2(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _t(qe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new kD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new R2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new kD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new R2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:cMt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function cMt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w9(e){e=Hf(e,Ha);const t=Hf(e.firestore,Fy);return G$t(qk(t),e._key).then(n=>hMt(t,e,n))}class rDe extends uMt{constructor(t){super(),this.firestore=t}convertBytes(t){return new ix(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ha(this.firestore,null,n)}}function DT(e){e=Hf(e,Vb);const t=Hf(e.firestore,Fy),n=qk(t),r=new rDe(t);return sMt(e._query),Y$t(n,e._query).then(i=>new lMt(t,r,e,i))}function fu(e,t,n){e=Hf(e,Ha);const r=Hf(e.firestore,Fy),i=tDe(e.converter,t,n);return k4(r,[WPe(T4(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Uu.none())])}function fMt(e,t,n,...r){e=Hf(e,Ha);const i=Hf(e.firestore,Fy),s=T4(i);let o;return o=typeof(t=ni(t))=="string"||t instanceof Wk?YPe(s,"updateDoc",e._key,t,n,r):GPe(s,"updateDoc",e._key,t),k4(i,[o.toMutation(e._key,Uu.exists(!0))])}function dMt(e){return k4(Hf(e.firestore,Fy),[new b4(e._key,Uu.none())])}function k4(e,t){return function(r,i){const s=new Zp;return r.asyncQueue.enqueueAndForget(async()=>P$t(await q$t(r),i,s)),s.promise}(qk(e),t)}function hMt(e,t,n){const r=n.docs.get(t._key),i=new rDe(e);return new nDe(e,i,t._key,r,new R2(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pMt{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=T4(t)}set(t,n,r){this._verifyNotCommitted();const i=E9(t,this._firestore),s=tDe(i.converter,n,r),o=WPe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Uu.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=E9(t,this._firestore);let o;return o=typeof(n=ni(n))=="string"||n instanceof Wk?YPe(this._dataReader,"WriteBatch.update",s._key,n,r,i):GPe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Uu.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=E9(t,this._firestore);return this._mutations=this._mutations.concat(new b4(n._key,Uu.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _t(qe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function E9(e,t){if((e=ni(e)).firestore!==t)throw new _t(qe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function mMt(){return new ZJ("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Phe(e){return qk(e=Hf(e,Fy)),new pMt(e,t=>k4(e,t))}(function(t,n=!0){(function(i){AS=i})(Bb),Cm(new xh("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Fy(new dOt(r.getProvider("auth-internal")),new gOt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new _t(qe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sI(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Of(Yde,"4.6.3",t),Of(Yde,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV=new Map,iDe={activated:!1,tokenObservers:[]},gMt={initialized:!1,enabled:!1};function Ms(e){return DV.get(e)||Object.assign({},iDe)}function yMt(e,t){return DV.set(e,t),DV.get(e)}function R4(){return gMt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sDe="https://content-firebaseappcheck.googleapis.com/v1",vMt="exchangeRecaptchaV3Token",bMt="exchangeDebugToken",Dhe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},_Mt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wMt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new JC,this.pending.promise.catch(n=>{}),await EMt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new JC,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function EMt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xMt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Du=new xS("appCheck","AppCheck",xMt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ohe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function sZ(e){if(!Ms(e).activated)throw Du.create("use-before-activation",{appName:e.name})}function oDe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=nP(n)+"d:"),r&&(o+=nP(r)+"h:"),o+=nP(i)+"m:"+nP(s)+"s",o}function nP(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oZ({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Du.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Du.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Du.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Du.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function SMt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${sDe}/projects/${n}/apps/${r}:${vMt}?key=${i}`,body:{recaptcha_v3_token:t}}}function aDe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${sDe}/projects/${n}/apps/${r}:${bMt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TMt="firebase-app-check-database",AMt=1,fI="firebase-app-check-store",uDe="debug-token";let rP=null;function lDe(){return rP||(rP=new Promise((e,t)=>{try{const n=indexedDB.open(TMt,AMt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Du.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(fI,{keyPath:"compositeKey"})}}}catch(n){t(Du.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),rP)}function CMt(e){return fDe(dDe(e))}function IMt(e,t){return cDe(dDe(e),t)}function kMt(e){return cDe(uDe,e)}function RMt(){return fDe(uDe)}async function cDe(e,t){const r=(await lDe()).transaction(fI,"readwrite"),s=r.objectStore(fI).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Du.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function fDe(e){const n=(await lDe()).transaction(fI,"readonly"),i=n.objectStore(fI).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Du.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function dDe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=new a4("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NMt(e){if(uJ()){let t;try{t=await CMt(e)}catch(n){dI.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function x9(e,t){return uJ()?IMt(e,t).catch(n=>{dI.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function PMt(){let e;try{e=await RMt()}catch{}if(e)return e;{const t=Nkt();return kMt(t).catch(n=>dI.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aZ(){return R4().enabled}async function uZ(){const e=R4();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function DMt(){const e=kRe(),t=R4();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new JC;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(PMt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OMt={error:"UNKNOWN_ERROR"};function $Mt(e){return aJ.encodeString(JSON.stringify(e),!1)}async function OV(e,t=!1){const n=e.app;sZ(n);const r=Ms(n);let i=r.token,s;if(i&&!bw(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(bw(u)?i=u:await x9(n,void 0))}if(!t&&i&&bw(i))return{token:i.token};let o=!1;if(aZ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=oZ(aDe(n,await uZ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await x9(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Ms(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?dI.warn(u.message):dI.error(u),s=u}let a;return i?s?bw(i)?a={token:i.token,internalError:s}:a=Mhe(s):(a={token:i.token},r.token=i,await x9(n,i)):a=Mhe(s),o&&mDe(n,a),a}async function MMt(e){const t=e.app;sZ(t);const{provider:n}=Ms(t);if(aZ()){const r=await uZ(),{token:i}=await oZ(aDe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function hDe(e,t,n,r){const{app:i}=e,s=Ms(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&bw(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),$he(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>$he(e))}function pDe(e,t){const n=Ms(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function $he(e){const{app:t}=e,n=Ms(t);let r=n.tokenRefresher;r||(r=LMt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function LMt(e){const{app:t}=e;return new wMt(async()=>{const n=Ms(t);let r;if(n.token?r=await OV(e,!0):r=await OV(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Ms(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Dhe.RETRIAL_MIN_WAIT,Dhe.RETRIAL_MAX_WAIT)}function mDe(e,t){const n=Ms(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function bw(e){return e.expireTimeMillis-Date.now()>0}function Mhe(e){return{token:$Mt(OMt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FMt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Ms(this.app);for(const n of t)pDe(this.app,n.next);return Promise.resolve()}}function jMt(e,t){return new FMt(e,t)}function BMt(e){return{getToken:t=>OV(e,t),getLimitedUseToken:()=>MMt(e),addTokenListener:t=>hDe(e,"INTERNAL",t),removeTokenListener:t=>pDe(e.app,t)}}const UMt="@firebase/app-check",zMt="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VMt="https://www.google.com/recaptcha/api.js";function HMt(e,t){const n=new JC,r=Ms(e);r.reCAPTCHAState={initialized:n};const i=qMt(e),s=Ohe(!1);return s?Lhe(e,t,s,i,n):YMt(()=>{const o=Ohe(!1);if(!o)throw new Error("no recaptcha");Lhe(e,t,o,i,n)}),n.promise}function Lhe(e,t,n,r,i){n.ready(()=>{GMt(e,t,n,r),i.resolve(n)})}function qMt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function WMt(e){sZ(e);const n=await Ms(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Ms(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function GMt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Ms(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Ms(e).reCAPTCHAState.succeeded=!1}}),s=Ms(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function YMt(e){const t=document.createElement("script");t.src=VMt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lZ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;XMt(this._throttleData);const i=await WMt(this._app).catch(o=>{throw Du.create("recaptcha-error")});if(!(!((t=Ms(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Du.create("recaptcha-error");let s;try{s=await oZ(SMt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=KMt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Du.create("throttled",{time:oDe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=SS(t,"heartbeat"),HMt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof lZ?this._siteKey===t._siteKey:!1}}function KMt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+_Mt,httpStatus:e};{const n=t?t.backoffCount:0,r=Mkt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function XMt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Du.create("throttled",{time:oDe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QMt(e=cJ(),t){e=ni(e);const n=SS(e,"app-check");if(R4().initialized||DMt(),aZ()&&uZ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Du.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return JMt(e,t.provider,t.isTokenAutoRefreshEnabled),Ms(e).isTokenAutoRefreshEnabled&&hDe(r,"INTERNAL",()=>{}),r}function JMt(e,t,n){const r=yMt(e,Object.assign({},iDe));r.activated=!0,r.provider=t,r.cachedTokenPromise=NMt(e).then(i=>(i&&bw(i)&&(r.token=i,mDe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const ZMt="app-check",Fhe="app-check-internal";function eLt(){Cm(new xh(ZMt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return jMt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Fhe).initialize()})),Cm(new xh(Fhe,e=>{const t=e.getProvider("app-check").getImmediate();return BMt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Of(UMt,zMt)}eLt();function iP(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var gDe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof iP=="function"&&iP;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof iP=="function"&&iP,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Zs<"u"?Zs:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,T){if(typeof E!="function"&&this.state===l||typeof T!="function"&&this.state===u)return this;var S=new this.constructor(o);if(this.state!==c){var A=this.state===l?E:T;h(S,A,this.outcome)}else this.queue.push(new d(S,E,T));return S};function d(E,T,S){this.promise=E,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,T,S){s(function(){var A;try{A=T(S)}catch(C){return a.reject(E,C)}A===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,A)})}a.resolve=function(E,T){var S=g(p,T);if(S.status==="error")return a.reject(E,S.value);var A=S.value;if(A)m(E,A);else{E.state=l,E.outcome=T;for(var C=-1,k=E.queue.length;++C<k;)E.queue[C].callFulfilled(T)}return E},a.reject=function(E,T){E.state=u,E.outcome=T;for(var S=-1,A=E.queue.length;++S<A;)E.queue[S].callRejected(T);return E};function p(E){var T=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof T=="function")return function(){T.apply(E,arguments)}}function m(E,T){var S=!1;function A(O){S||(S=!0,a.reject(E,O))}function C(O){S||(S=!0,a.resolve(E,O))}function k(){T(C,A)}var N=g(k);N.status==="error"&&A(N.value)}function g(E,T){var S={};try{S.value=E(T),S.status="success"}catch(A){S.status="error",S.value=A}return S}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var T=new this(o);return a.reject(T,E)}f.all=b;function b(E){var T=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=E.length,A=!1;if(!S)return this.resolve([]);for(var C=new Array(S),k=0,N=-1,O=new this(o);++N<S;)P(E[N],N);return O;function P($,F){T.resolve($).then(M,function(B){A||(A=!0,a.reject(O,B))});function M(B){C[F]=B,++k===S&&!A&&(A=!0,a.resolve(O,C))}}}f.race=w;function w(E){var T=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=E.length,A=!1;if(!S)return this.resolve([]);for(var C=-1,k=new this(o);++C<S;)N(E[C]);return k;function N(O){T.resolve(O).then(function(P){A||(A=!0,a.resolve(k,P))},function(P){A||(A=!0,a.reject(k,P))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Zs<"u"?Zs:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,ae){if(!(Y instanceof ae))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),ae=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||ae)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,ae){Y=Y||[],ae=ae||{};try{return new Blob(Y,ae)}catch(he){if(he.name!=="TypeError")throw he;for(var te=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,me=new te,xe=0;xe<Y.length;xe+=1)me.append(Y[xe]);return me.getBlob(ae.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(Y,ae){ae&&Y.then(function(te){ae(null,te)},function(te){ae(te)})}function h(Y,ae,te){typeof ae=="function"&&Y.then(ae),typeof te=="function"&&Y.catch(te)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,w="readonly",E="readwrite";function T(Y){for(var ae=Y.length,te=new ArrayBuffer(ae),me=new Uint8Array(te),xe=0;xe<ae;xe++)me[xe]=Y.charCodeAt(xe);return te}function S(Y){return new f(function(ae){var te=Y.transaction(g,E),me=c([""]);te.objectStore(g).put(me,"key"),te.onabort=function(xe){xe.preventDefault(),xe.stopPropagation(),ae(!1)},te.oncomplete=function(){var xe=navigator.userAgent.match(/Chrome\/(\d+)/),he=navigator.userAgent.match(/Edge\//);ae(he||!xe||parseInt(xe[1],10)>=43)}}).catch(function(){return!1})}function A(Y){return typeof y=="boolean"?f.resolve(y):S(Y).then(function(ae){return y=ae,y})}function C(Y){var ae=v[Y.name],te={};te.promise=new f(function(me,xe){te.resolve=me,te.reject=xe}),ae.deferredOperations.push(te),ae.dbReady?ae.dbReady=ae.dbReady.then(function(){return te.promise}):ae.dbReady=te.promise}function k(Y){var ae=v[Y.name],te=ae.deferredOperations.pop();if(te)return te.resolve(),te.promise}function N(Y,ae){var te=v[Y.name],me=te.deferredOperations.pop();if(me)return me.reject(ae),me.promise}function O(Y,ae){return new f(function(te,me){if(v[Y.name]=v[Y.name]||W(),Y.db)if(ae)C(Y),Y.db.close();else return te(Y.db);var xe=[Y.name];ae&&xe.push(Y.version);var he=u.open.apply(u,xe);ae&&(he.onupgradeneeded=function(Le){var We=he.result;try{We.createObjectStore(Y.storeName),Le.oldVersion<=1&&We.createObjectStore(g)}catch(Ke){if(Ke.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Le.oldVersion+" to version "+Le.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw Ke}}),he.onerror=function(Le){Le.preventDefault(),me(he.error)},he.onsuccess=function(){var Le=he.result;Le.onversionchange=function(We){We.target.close()},te(Le),k(Y)}})}function P(Y){return O(Y,!1)}function $(Y){return O(Y,!0)}function F(Y,ae){if(!Y.db)return!0;var te=!Y.db.objectStoreNames.contains(Y.storeName),me=Y.version<Y.db.version,xe=Y.version>Y.db.version;if(me&&(Y.version!==ae&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),xe||te){if(te){var he=Y.db.version+1;he>Y.version&&(Y.version=he)}return!0}return!1}function M(Y){return new f(function(ae,te){var me=new FileReader;me.onerror=te,me.onloadend=function(xe){var he=btoa(xe.target.result||"");ae({__local_forage_encoded_blob:!0,data:he,type:Y.type})},me.readAsBinaryString(Y)})}function B(Y){var ae=T(atob(Y.data));return c([ae],{type:Y.type})}function U(Y){return Y&&Y.__local_forage_encoded_blob}function H(Y){var ae=this,te=ae._initReady().then(function(){var me=v[ae._dbInfo.name];if(me&&me.dbReady)return me.dbReady});return h(te,Y,Y),te}function D(Y){C(Y);for(var ae=v[Y.name],te=ae.forages,me=0;me<te.length;me++){var xe=te[me];xe._dbInfo.db&&(xe._dbInfo.db.close(),xe._dbInfo.db=null)}return Y.db=null,P(Y).then(function(he){return Y.db=he,F(Y)?$(Y):he}).then(function(he){Y.db=ae.db=he;for(var Le=0;Le<te.length;Le++)te[Le]._dbInfo.db=he}).catch(function(he){throw N(Y,he),he})}function z(Y,ae,te,me){me===void 0&&(me=1);try{var xe=Y.db.transaction(Y.storeName,ae);te(null,xe)}catch(he){if(me>0&&(!Y.db||he.name==="InvalidStateError"||he.name==="NotFoundError"))return f.resolve().then(function(){if(!Y.db||he.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),$(Y)}).then(function(){return D(Y).then(function(){z(Y,ae,te,me-1)})}).catch(te);te(he)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(Y){var ae=this,te={db:null};if(Y)for(var me in Y)te[me]=Y[me];var xe=v[te.name];xe||(xe=W(),v[te.name]=xe),xe.forages.push(ae),ae._initReady||(ae._initReady=ae.ready,ae.ready=H);var he=[];function Le(){return f.resolve()}for(var We=0;We<xe.forages.length;We++){var Ke=xe.forages[We];Ke!==ae&&he.push(Ke._initReady().catch(Le))}var Xe=xe.forages.slice(0);return f.all(he).then(function(){return te.db=xe.db,P(te)}).then(function(at){return te.db=at,F(te,ae._defaultConfig.version)?$(te):at}).then(function(at){te.db=xe.db=at,ae._dbInfo=te;for(var xt=0;xt<Xe.length;xt++){var hn=Xe[xt];hn!==ae&&(hn._dbInfo.db=te.db,hn._dbInfo.version=te.version)}})}function q(Y,ae){var te=this;Y=p(Y);var me=new f(function(xe,he){te.ready().then(function(){z(te._dbInfo,w,function(Le,We){if(Le)return he(Le);try{var Ke=We.objectStore(te._dbInfo.storeName),Xe=Ke.get(Y);Xe.onsuccess=function(){var at=Xe.result;at===void 0&&(at=null),U(at)&&(at=B(at)),xe(at)},Xe.onerror=function(){he(Xe.error)}}catch(at){he(at)}})}).catch(he)});return d(me,ae),me}function G(Y,ae){var te=this,me=new f(function(xe,he){te.ready().then(function(){z(te._dbInfo,w,function(Le,We){if(Le)return he(Le);try{var Ke=We.objectStore(te._dbInfo.storeName),Xe=Ke.openCursor(),at=1;Xe.onsuccess=function(){var xt=Xe.result;if(xt){var hn=xt.value;U(hn)&&(hn=B(hn));var Dt=Y(hn,xt.key,at++);Dt!==void 0?xe(Dt):xt.continue()}else xe()},Xe.onerror=function(){he(Xe.error)}}catch(xt){he(xt)}})}).catch(he)});return d(me,ae),me}function re(Y,ae,te){var me=this;Y=p(Y);var xe=new f(function(he,Le){var We;me.ready().then(function(){return We=me._dbInfo,b.call(ae)==="[object Blob]"?A(We.db).then(function(Ke){return Ke?ae:M(ae)}):ae}).then(function(Ke){z(me._dbInfo,E,function(Xe,at){if(Xe)return Le(Xe);try{var xt=at.objectStore(me._dbInfo.storeName);Ke===null&&(Ke=void 0);var hn=xt.put(Ke,Y);at.oncomplete=function(){Ke===void 0&&(Ke=null),he(Ke)},at.onabort=at.onerror=function(){var Dt=hn.error?hn.error:hn.transaction.error;Le(Dt)}}catch(Dt){Le(Dt)}})}).catch(Le)});return d(xe,te),xe}function de(Y,ae){var te=this;Y=p(Y);var me=new f(function(xe,he){te.ready().then(function(){z(te._dbInfo,E,function(Le,We){if(Le)return he(Le);try{var Ke=We.objectStore(te._dbInfo.storeName),Xe=Ke.delete(Y);We.oncomplete=function(){xe()},We.onerror=function(){he(Xe.error)},We.onabort=function(){var at=Xe.error?Xe.error:Xe.transaction.error;he(at)}}catch(at){he(at)}})}).catch(he)});return d(me,ae),me}function pe(Y){var ae=this,te=new f(function(me,xe){ae.ready().then(function(){z(ae._dbInfo,E,function(he,Le){if(he)return xe(he);try{var We=Le.objectStore(ae._dbInfo.storeName),Ke=We.clear();Le.oncomplete=function(){me()},Le.onabort=Le.onerror=function(){var Xe=Ke.error?Ke.error:Ke.transaction.error;xe(Xe)}}catch(Xe){xe(Xe)}})}).catch(xe)});return d(te,Y),te}function ge(Y){var ae=this,te=new f(function(me,xe){ae.ready().then(function(){z(ae._dbInfo,w,function(he,Le){if(he)return xe(he);try{var We=Le.objectStore(ae._dbInfo.storeName),Ke=We.count();Ke.onsuccess=function(){me(Ke.result)},Ke.onerror=function(){xe(Ke.error)}}catch(Xe){xe(Xe)}})}).catch(xe)});return d(te,Y),te}function Ee(Y,ae){var te=this,me=new f(function(xe,he){if(Y<0){xe(null);return}te.ready().then(function(){z(te._dbInfo,w,function(Le,We){if(Le)return he(Le);try{var Ke=We.objectStore(te._dbInfo.storeName),Xe=!1,at=Ke.openKeyCursor();at.onsuccess=function(){var xt=at.result;if(!xt){xe(null);return}Y===0||Xe?xe(xt.key):(Xe=!0,xt.advance(Y))},at.onerror=function(){he(at.error)}}catch(xt){he(xt)}})}).catch(he)});return d(me,ae),me}function Z(Y){var ae=this,te=new f(function(me,xe){ae.ready().then(function(){z(ae._dbInfo,w,function(he,Le){if(he)return xe(he);try{var We=Le.objectStore(ae._dbInfo.storeName),Ke=We.openKeyCursor(),Xe=[];Ke.onsuccess=function(){var at=Ke.result;if(!at){me(Xe);return}Xe.push(at.key),at.continue()},Ke.onerror=function(){xe(Ke.error)}}catch(at){xe(at)}})}).catch(xe)});return d(te,Y),te}function Q(Y,ae){ae=m.apply(this,arguments);var te=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||te.name,Y.storeName=Y.storeName||te.storeName);var me=this,xe;if(!Y.name)xe=f.reject("Invalid arguments");else{var he=Y.name===te.name&&me._dbInfo.db,Le=he?f.resolve(me._dbInfo.db):P(Y).then(function(We){var Ke=v[Y.name],Xe=Ke.forages;Ke.db=We;for(var at=0;at<Xe.length;at++)Xe[at]._dbInfo.db=We;return We});Y.storeName?xe=Le.then(function(We){if(We.objectStoreNames.contains(Y.storeName)){var Ke=We.version+1;C(Y);var Xe=v[Y.name],at=Xe.forages;We.close();for(var xt=0;xt<at.length;xt++){var hn=at[xt];hn._dbInfo.db=null,hn._dbInfo.version=Ke}var Dt=new f(function(Fn,Cr){var Ir=u.open(Y.name,Ke);Ir.onerror=function(Uo){var fd=Ir.result;fd.close(),Cr(Uo)},Ir.onupgradeneeded=function(){var Uo=Ir.result;Uo.deleteObjectStore(Y.storeName)},Ir.onsuccess=function(){var Uo=Ir.result;Uo.close(),Fn(Uo)}});return Dt.then(function(Fn){Xe.db=Fn;for(var Cr=0;Cr<at.length;Cr++){var Ir=at[Cr];Ir._dbInfo.db=Fn,k(Ir._dbInfo)}}).catch(function(Fn){throw(N(Y,Fn)||f.resolve()).catch(function(){}),Fn})}}):xe=Le.then(function(We){C(Y);var Ke=v[Y.name],Xe=Ke.forages;We.close();for(var at=0;at<Xe.length;at++){var xt=Xe[at];xt._dbInfo.db=null}var hn=new f(function(Dt,Fn){var Cr=u.deleteDatabase(Y.name);Cr.onerror=function(){var Ir=Cr.result;Ir&&Ir.close(),Fn(Cr.error)},Cr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Cr.onsuccess=function(){var Ir=Cr.result;Ir&&Ir.close(),Dt(Ir)}});return hn.then(function(Dt){Ke.db=Dt;for(var Fn=0;Fn<Xe.length;Fn++){var Cr=Xe[Fn];k(Cr._dbInfo)}}).catch(function(Dt){throw(N(Y,Dt)||f.resolve()).catch(function(){}),Dt})})}return d(xe,ae),xe}var fe={_driver:"asyncStorage",_initStorage:j,_support:l(),iterate:G,getItem:q,setItem:re,removeItem:de,clear:pe,length:ge,key:Ee,keys:Z,dropInstance:Q};function be(){return typeof openDatabase=="function"}var Me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Be="~~local_forage_type~",ve=/^~~local_forage_type~([^~]+)~/,Re="__lfsc__:",He=Re.length,Ze="arbf",bt="blob",Ge="si08",ye="ui08",pt="uic8",vt="si16",_e="si32",Ne="ur16",Ye="ui32",ct="fl32",wt="fl64",$n=He+Ze.length,Sr=Object.prototype.toString;function Mn(Y){var ae=Y.length*.75,te=Y.length,me,xe=0,he,Le,We,Ke;Y[Y.length-1]==="="&&(ae--,Y[Y.length-2]==="="&&ae--);var Xe=new ArrayBuffer(ae),at=new Uint8Array(Xe);for(me=0;me<te;me+=4)he=Me.indexOf(Y[me]),Le=Me.indexOf(Y[me+1]),We=Me.indexOf(Y[me+2]),Ke=Me.indexOf(Y[me+3]),at[xe++]=he<<2|Le>>4,at[xe++]=(Le&15)<<4|We>>2,at[xe++]=(We&3)<<6|Ke&63;return Xe}function ur(Y){var ae=new Uint8Array(Y),te="",me;for(me=0;me<ae.length;me+=3)te+=Me[ae[me]>>2],te+=Me[(ae[me]&3)<<4|ae[me+1]>>4],te+=Me[(ae[me+1]&15)<<2|ae[me+2]>>6],te+=Me[ae[me+2]&63];return ae.length%3===2?te=te.substring(0,te.length-1)+"=":ae.length%3===1&&(te=te.substring(0,te.length-2)+"=="),te}function pn(Y,ae){var te="";if(Y&&(te=Sr.call(Y)),Y&&(te==="[object ArrayBuffer]"||Y.buffer&&Sr.call(Y.buffer)==="[object ArrayBuffer]")){var me,xe=Re;Y instanceof ArrayBuffer?(me=Y,xe+=Ze):(me=Y.buffer,te==="[object Int8Array]"?xe+=Ge:te==="[object Uint8Array]"?xe+=ye:te==="[object Uint8ClampedArray]"?xe+=pt:te==="[object Int16Array]"?xe+=vt:te==="[object Uint16Array]"?xe+=Ne:te==="[object Int32Array]"?xe+=_e:te==="[object Uint32Array]"?xe+=Ye:te==="[object Float32Array]"?xe+=ct:te==="[object Float64Array]"?xe+=wt:ae(new Error("Failed to get type for BinaryArray"))),ae(xe+ur(me))}else if(te==="[object Blob]"){var he=new FileReader;he.onload=function(){var Le=Be+Y.type+"~"+ur(this.result);ae(Re+bt+Le)},he.readAsArrayBuffer(Y)}else try{ae(JSON.stringify(Y))}catch(Le){console.error("Couldn't convert value into a JSON string: ",Y),ae(null,Le)}}function Tn(Y){if(Y.substring(0,He)!==Re)return JSON.parse(Y);var ae=Y.substring($n),te=Y.substring(He,$n),me;if(te===bt&&ve.test(ae)){var xe=ae.match(ve);me=xe[1],ae=ae.substring(xe[0].length)}var he=Mn(ae);switch(te){case Ze:return he;case bt:return c([he],{type:me});case Ge:return new Int8Array(he);case ye:return new Uint8Array(he);case pt:return new Uint8ClampedArray(he);case vt:return new Int16Array(he);case Ne:return new Uint16Array(he);case _e:return new Int32Array(he);case Ye:return new Uint32Array(he);case ct:return new Float32Array(he);case wt:return new Float64Array(he);default:throw new Error("Unkown type: "+te)}}var er={serialize:pn,deserialize:Tn,stringToBuffer:Mn,bufferToString:ur};function tr(Y,ae,te,me){Y.executeSql("CREATE TABLE IF NOT EXISTS "+ae.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],te,me)}function jo(Y){var ae=this,te={db:null};if(Y)for(var me in Y)te[me]=typeof Y[me]!="string"?Y[me].toString():Y[me];var xe=new f(function(he,Le){try{te.db=openDatabase(te.name,String(te.version),te.description,te.size)}catch(We){return Le(We)}te.db.transaction(function(We){tr(We,te,function(){ae._dbInfo=te,he()},function(Ke,Xe){Le(Xe)})},Le)});return te.serializer=er,xe}function Di(Y,ae,te,me,xe,he){Y.executeSql(te,me,xe,function(Le,We){We.code===We.SYNTAX_ERR?Le.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[ae.storeName],function(Ke,Xe){Xe.rows.length?he(Ke,We):tr(Ke,ae,function(){Ke.executeSql(te,me,xe,he)},he)},he):he(Le,We)},he)}function An(Y,ae){var te=this;Y=p(Y);var me=new f(function(xe,he){te.ready().then(function(){var Le=te._dbInfo;Le.db.transaction(function(We){Di(We,Le,"SELECT * FROM "+Le.storeName+" WHERE key = ? LIMIT 1",[Y],function(Ke,Xe){var at=Xe.rows.length?Xe.rows.item(0).value:null;at&&(at=Le.serializer.deserialize(at)),xe(at)},function(Ke,Xe){he(Xe)})})}).catch(he)});return d(me,ae),me}function Oi(Y,ae){var te=this,me=new f(function(xe,he){te.ready().then(function(){var Le=te._dbInfo;Le.db.transaction(function(We){Di(We,Le,"SELECT * FROM "+Le.storeName,[],function(Ke,Xe){for(var at=Xe.rows,xt=at.length,hn=0;hn<xt;hn++){var Dt=at.item(hn),Fn=Dt.value;if(Fn&&(Fn=Le.serializer.deserialize(Fn)),Fn=Y(Fn,Dt.key,hn+1),Fn!==void 0){xe(Fn);return}}xe()},function(Ke,Xe){he(Xe)})})}).catch(he)});return d(me,ae),me}function Tr(Y,ae,te,me){var xe=this;Y=p(Y);var he=new f(function(Le,We){xe.ready().then(function(){ae===void 0&&(ae=null);var Ke=ae,Xe=xe._dbInfo;Xe.serializer.serialize(ae,function(at,xt){xt?We(xt):Xe.db.transaction(function(hn){Di(hn,Xe,"INSERT OR REPLACE INTO "+Xe.storeName+" (key, value) VALUES (?, ?)",[Y,at],function(){Le(Ke)},function(Dt,Fn){We(Fn)})},function(hn){if(hn.code===hn.QUOTA_ERR){if(me>0){Le(Tr.apply(xe,[Y,Ke,te,me-1]));return}We(hn)}})})}).catch(We)});return d(he,te),he}function ds(Y,ae,te){return Tr.apply(this,[Y,ae,te,1])}function np(Y,ae){var te=this;Y=p(Y);var me=new f(function(xe,he){te.ready().then(function(){var Le=te._dbInfo;Le.db.transaction(function(We){Di(We,Le,"DELETE FROM "+Le.storeName+" WHERE key = ?",[Y],function(){xe()},function(Ke,Xe){he(Xe)})})}).catch(he)});return d(me,ae),me}function sl(Y){var ae=this,te=new f(function(me,xe){ae.ready().then(function(){var he=ae._dbInfo;he.db.transaction(function(Le){Di(Le,he,"DELETE FROM "+he.storeName,[],function(){me()},function(We,Ke){xe(Ke)})})}).catch(xe)});return d(te,Y),te}function ld(Y){var ae=this,te=new f(function(me,xe){ae.ready().then(function(){var he=ae._dbInfo;he.db.transaction(function(Le){Di(Le,he,"SELECT COUNT(key) as c FROM "+he.storeName,[],function(We,Ke){var Xe=Ke.rows.item(0).c;me(Xe)},function(We,Ke){xe(Ke)})})}).catch(xe)});return d(te,Y),te}function wr(Y,ae){var te=this,me=new f(function(xe,he){te.ready().then(function(){var Le=te._dbInfo;Le.db.transaction(function(We){Di(We,Le,"SELECT key FROM "+Le.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(Ke,Xe){var at=Xe.rows.length?Xe.rows.item(0).key:null;xe(at)},function(Ke,Xe){he(Xe)})})}).catch(he)});return d(me,ae),me}function Ai(Y){var ae=this,te=new f(function(me,xe){ae.ready().then(function(){var he=ae._dbInfo;he.db.transaction(function(Le){Di(Le,he,"SELECT key FROM "+he.storeName,[],function(We,Ke){for(var Xe=[],at=0;at<Ke.rows.length;at++)Xe.push(Ke.rows.item(at).key);me(Xe)},function(We,Ke){xe(Ke)})})}).catch(xe)});return d(te,Y),te}function Kr(Y){return new f(function(ae,te){Y.transaction(function(me){me.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(xe,he){for(var Le=[],We=0;We<he.rows.length;We++)Le.push(he.rows.item(We).name);ae({db:Y,storeNames:Le})},function(xe,he){te(he)})},function(me){te(me)})})}function su(Y,ae){ae=m.apply(this,arguments);var te=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||te.name,Y.storeName=Y.storeName||te.storeName);var me=this,xe;return Y.name?xe=new f(function(he){var Le;Y.name===te.name?Le=me._dbInfo.db:Le=openDatabase(Y.name,"","",0),Y.storeName?he({db:Le,storeNames:[Y.storeName]}):he(Kr(Le))}).then(function(he){return new f(function(Le,We){he.db.transaction(function(Ke){function Xe(Dt){return new f(function(Fn,Cr){Ke.executeSql("DROP TABLE IF EXISTS "+Dt,[],function(){Fn()},function(Ir,Uo){Cr(Uo)})})}for(var at=[],xt=0,hn=he.storeNames.length;xt<hn;xt++)at.push(Xe(he.storeNames[xt]));f.all(at).then(function(){Le()}).catch(function(Dt){We(Dt)})},function(Ke){We(Ke)})})}):xe=f.reject("Invalid arguments"),d(xe,ae),xe}var Sa={_driver:"webSQLStorage",_initStorage:jo,_support:be(),iterate:Oi,getItem:An,setItem:ds,removeItem:np,clear:sl,length:ld,key:wr,keys:Ai,dropInstance:su};function Ta(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ue(Y,ae){var te=Y.name+"/";return Y.storeName!==ae.storeName&&(te+=Y.storeName+"/"),te}function ne(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function le(){return!ne()||localStorage.length>0}function ke(Y){var ae=this,te={};if(Y)for(var me in Y)te[me]=Y[me];return te.keyPrefix=ue(Y,ae._defaultConfig),le()?(ae._dbInfo=te,te.serializer=er,f.resolve()):f.reject()}function Ce(Y){var ae=this,te=ae.ready().then(function(){for(var me=ae._dbInfo.keyPrefix,xe=localStorage.length-1;xe>=0;xe--){var he=localStorage.key(xe);he.indexOf(me)===0&&localStorage.removeItem(he)}});return d(te,Y),te}function ut(Y,ae){var te=this;Y=p(Y);var me=te.ready().then(function(){var xe=te._dbInfo,he=localStorage.getItem(xe.keyPrefix+Y);return he&&(he=xe.serializer.deserialize(he)),he});return d(me,ae),me}function Tt(Y,ae){var te=this,me=te.ready().then(function(){for(var xe=te._dbInfo,he=xe.keyPrefix,Le=he.length,We=localStorage.length,Ke=1,Xe=0;Xe<We;Xe++){var at=localStorage.key(Xe);if(at.indexOf(he)===0){var xt=localStorage.getItem(at);if(xt&&(xt=xe.serializer.deserialize(xt)),xt=Y(xt,at.substring(Le),Ke++),xt!==void 0)return xt}}});return d(me,ae),me}function Vt(Y,ae){var te=this,me=te.ready().then(function(){var xe=te._dbInfo,he;try{he=localStorage.key(Y)}catch{he=null}return he&&(he=he.substring(xe.keyPrefix.length)),he});return d(me,ae),me}function Pn(Y){var ae=this,te=ae.ready().then(function(){for(var me=ae._dbInfo,xe=localStorage.length,he=[],Le=0;Le<xe;Le++){var We=localStorage.key(Le);We.indexOf(me.keyPrefix)===0&&he.push(We.substring(me.keyPrefix.length))}return he});return d(te,Y),te}function Ln(Y){var ae=this,te=ae.keys().then(function(me){return me.length});return d(te,Y),te}function dn(Y,ae){var te=this;Y=p(Y);var me=te.ready().then(function(){var xe=te._dbInfo;localStorage.removeItem(xe.keyPrefix+Y)});return d(me,ae),me}function nr(Y,ae,te){var me=this;Y=p(Y);var xe=me.ready().then(function(){ae===void 0&&(ae=null);var he=ae;return new f(function(Le,We){var Ke=me._dbInfo;Ke.serializer.serialize(ae,function(Xe,at){if(at)We(at);else try{localStorage.setItem(Ke.keyPrefix+Y,Xe),Le(he)}catch(xt){(xt.name==="QuotaExceededError"||xt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&We(xt),We(xt)}})})});return d(xe,te),xe}function Ar(Y,ae){if(ae=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var te=this.config();Y.name=Y.name||te.name,Y.storeName=Y.storeName||te.storeName}var me=this,xe;return Y.name?xe=new f(function(he){Y.storeName?he(ue(Y,me._defaultConfig)):he(Y.name+"/")}).then(function(he){for(var Le=localStorage.length-1;Le>=0;Le--){var We=localStorage.key(Le);We.indexOf(he)===0&&localStorage.removeItem(We)}}):xe=f.reject("Invalid arguments"),d(xe,ae),xe}var zt={_driver:"localStorageWrapper",_initStorage:ke,_support:Ta(),iterate:Tt,getItem:ut,setItem:nr,removeItem:dn,clear:Ce,length:Ln,key:Vt,keys:Pn,dropInstance:Ar},rr=function(ae,te){return ae===te||typeof ae=="number"&&typeof te=="number"&&isNaN(ae)&&isNaN(te)},zr=function(ae,te){for(var me=ae.length,xe=0;xe<me;){if(rr(ae[xe],te))return!0;xe++}return!1},Xn=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Ci={},zs={},Xr={INDEXEDDB:fe,WEBSQL:Sa,LOCALSTORAGE:zt},ho=[Xr.INDEXEDDB._driver,Xr.WEBSQL._driver,Xr.LOCALSTORAGE._driver],$i=["dropInstance"],Mi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat($i),Bo={description:"",driver:ho.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Aa(Y,ae){Y[ae]=function(){var te=arguments;return Y.ready().then(function(){return Y[ae].apply(Y,te)})}}function Vs(){for(var Y=1;Y<arguments.length;Y++){var ae=arguments[Y];if(ae)for(var te in ae)ae.hasOwnProperty(te)&&(Xn(ae[te])?arguments[0][te]=ae[te].slice():arguments[0][te]=ae[te])}return arguments[0]}var Xl=function(){function Y(ae){o(this,Y);for(var te in Xr)if(Xr.hasOwnProperty(te)){var me=Xr[te],xe=me._driver;this[te]=xe,Ci[xe]||this.defineDriver(me)}this._defaultConfig=Vs({},Bo),this._config=Vs({},this._defaultConfig,ae),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(te){if((typeof te>"u"?"undefined":s(te))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var me in te){if(me==="storeName"&&(te[me]=te[me].replace(/\W/g,"_")),me==="version"&&typeof te[me]!="number")return new Error("Database version must be a number.");this._config[me]=te[me]}return"driver"in te&&te.driver?this.setDriver(this._config.driver):!0}else return typeof te=="string"?this._config[te]:this._config},Y.prototype.defineDriver=function(te,me,xe){var he=new f(function(Le,We){try{var Ke=te._driver,Xe=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!te._driver){We(Xe);return}for(var at=Mi.concat("_initStorage"),xt=0,hn=at.length;xt<hn;xt++){var Dt=at[xt],Fn=!zr($i,Dt);if((Fn||te[Dt])&&typeof te[Dt]!="function"){We(Xe);return}}var Cr=function(){for(var fd=function(Ql){return function(){var ou=new Error("Method "+Ql+" is not implemented by the current driver"),ip=f.reject(ou);return d(ip,arguments[arguments.length-1]),ip}},rp=0,QS=$i.length;rp<QS;rp++){var Qy=$i[rp];te[Qy]||(te[Qy]=fd(Qy))}};Cr();var Ir=function(fd){Ci[Ke]&&console.info("Redefining LocalForage driver: "+Ke),Ci[Ke]=te,zs[Ke]=fd,Le()};"_support"in te?te._support&&typeof te._support=="function"?te._support().then(Ir,We):Ir(!!te._support):Ir(!0)}catch(Uo){We(Uo)}});return h(he,me,xe),he},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(te,me,xe){var he=Ci[te]?f.resolve(Ci[te]):f.reject(new Error("Driver not found."));return h(he,me,xe),he},Y.prototype.getSerializer=function(te){var me=f.resolve(er);return h(me,te),me},Y.prototype.ready=function(te){var me=this,xe=me._driverSet.then(function(){return me._ready===null&&(me._ready=me._initDriver()),me._ready});return h(xe,te,te),xe},Y.prototype.setDriver=function(te,me,xe){var he=this;Xn(te)||(te=[te]);var Le=this._getSupportedDrivers(te);function We(){he._config.driver=he.driver()}function Ke(xt){return he._extend(xt),We(),he._ready=he._initStorage(he._config),he._ready}function Xe(xt){return function(){var hn=0;function Dt(){for(;hn<xt.length;){var Fn=xt[hn];return hn++,he._dbInfo=null,he._ready=null,he.getDriver(Fn).then(Ke).catch(Dt)}We();var Cr=new Error("No available storage method found.");return he._driverSet=f.reject(Cr),he._driverSet}return Dt()}}var at=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=at.then(function(){var xt=Le[0];return he._dbInfo=null,he._ready=null,he.getDriver(xt).then(function(hn){he._driver=hn._driver,We(),he._wrapLibraryMethodsWithReady(),he._initDriver=Xe(Le)})}).catch(function(){We();var xt=new Error("No available storage method found.");return he._driverSet=f.reject(xt),he._driverSet}),h(this._driverSet,me,xe),this._driverSet},Y.prototype.supports=function(te){return!!zs[te]},Y.prototype._extend=function(te){Vs(this,te)},Y.prototype._getSupportedDrivers=function(te){for(var me=[],xe=0,he=te.length;xe<he;xe++){var Le=te[xe];this.supports(Le)&&me.push(Le)}return me},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var te=0,me=Mi.length;te<me;te++)Aa(this,Mi[te])},Y.prototype.createInstance=function(te){return new Y(te)},Y}(),cd=new Xl;r.exports=cd},{3:3}]},{},[4])(4)})})(gDe);var tLt=gDe.exports;const Q_=Hl(tLt);var yo=[];for(var S9=0;S9<256;++S9)yo.push((S9+256).toString(16).slice(1));function nLt(e,t=0){return(yo[e[t+0]]+yo[e[t+1]]+yo[e[t+2]]+yo[e[t+3]]+"-"+yo[e[t+4]]+yo[e[t+5]]+"-"+yo[e[t+6]]+yo[e[t+7]]+"-"+yo[e[t+8]]+yo[e[t+9]]+"-"+yo[e[t+10]]+yo[e[t+11]]+yo[e[t+12]]+yo[e[t+13]]+yo[e[t+14]]+yo[e[t+15]]).toLowerCase()}var sP,rLt=new Uint8Array(16);function iLt(){if(!sP&&(sP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!sP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return sP(rLt)}var sLt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const jhe={randomUUID:sLt};function j$(e,t,n){if(jhe.randomUUID&&!t&&!e)return jhe.randomUUID();e=e||{};var r=e.random||(e.rng||iLt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,nLt(r)}class yDe{constructor(t){uu(this,"engine");uu(this,"connected",!1);uu(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function B$(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function OT(e){return e.participantId!==void 0}class pf extends yDe{constructor(){super("firebase");uu(this,"RECAPTCHAV3TOKEN","6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth");uu(this,"firestore");uu(this,"collectionPrefix","prod-");uu(this,"studyCollection");uu(this,"storage");uu(this,"studyId","");uu(this,"localForage",Q_.createInstance({name:"currentParticipantId"}));uu(this,"participantData",null);const n=bQ.parse(`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`),r=$Re(n);this.firestore=Q$t(r,{}),this.storage=oOt();try{QMt(r,{provider:new lZ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await J$t(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=P$();if(!i.currentUser&&(await TNt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await B$(JSON.stringify(r));if(this.studyCollection=Qc(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(OT(a))return this.participantData=a,a;const l=await B$(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=tc(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=j$(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=hs(this.studyCollection,"sequenceAssignment");await fu(i,{});const s=Qc(i,"sequenceAssignment"),o=hs(s,this.currentParticipantId),a=khe(s,oMt("participantId","==","")),u=await DT(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await dMt(m.ref),await fu(o,{participantId:this.currentParticipantId,timestamp:g}))}else r.dataCollectionEnabled&&await fu(o,{participantId:this.currentParticipantId,timestamp:mMt()});const l=khe(s,aMt("timestamp","asc")),d=(await DT(l)).docs.map(m=>m.data()).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=tc(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await NT(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");OT(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return OT(n)?n:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=j$();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=Qc(this.firestore,"user-management"),i=await DT(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.uid=n.user.uid),await fu(hs(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await fu(hs(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await fu(hs(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await fu(hs(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await fu(hs(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=tc(this.storage,`${this.collectionPrefix}${n}/participants`),i=await NT(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");OT(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=Qc(this.firestore,`${this.collectionPrefix}${n}`),s=tc(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!OT(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=hs(i,"sequenceAssignment"),u=Qc(a,"sequenceAssignment"),l=hs(u,r);await fMt(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async setMode(n,r,i){const s=hs(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await fu(s,{[r]:i},{merge:!0})}async getModes(n){const r=hs(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await w9(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await fu(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=hs(this.firestore,"metadata","collections"),i=await w9(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=hs(this.firestore,"metadata","collections");await fu(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=hs(this.firestore,"metadata","collections");return await fu(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=hs(this.firestore,"metadata","collections"),i=await w9(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await fu(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=tc(this.storage,n),s=(await NT(r)).items.map(o=>Wde(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=tc(this.storage,n),o=(await NT(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=tc(this.storage,n),s=tc(this.storage,r),o=await g9(i),u=await(await fetch(o)).blob();await m9(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Qc(this.firestore,n),s=hs(i,"sequenceAssignment"),o=Qc(s,"sequenceAssignment"),a=Qc(this.firestore,r),u=hs(a,"sequenceAssignment");await fu(u,{});const l=Qc(u,"sequenceAssignment"),c=await DT(o),f=Phe(this.firestore);c.docs.forEach(d=>{const h=hs(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=Qc(this.firestore,n),i=hs(r,"sequenceAssignment"),s=Qc(i,"sequenceAssignment"),o=await DT(s),a=Phe(this.firestore);o.forEach(u=>{const l=hs(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=tc(this.storage,n);return(await NT(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=tc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await g9(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await g9(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=tc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await m9(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await m9(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=tc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await Wde(i)}}const vDe=I.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),Hb=()=>I.useContext(vDe);function oLt({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=I.useState(t),[o,a]=I.useState(!1),{storageEngine:u}=Ss(),l=async()=>{const h=P$();try{await PNt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;I.useEffect(()=>{s(t);let h;if(u instanceof pf)try{h=P$()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof pf){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=NNt(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=I.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return _.jsx(vDe.Provider,{value:d,children:i.determiningStatus?_.jsx(Pl,{visible:!0}):e})}function $A({studyIds:e}){const t=Hm(),{studyId:n}=dm(),r=Ay(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=Ss(),{user:o,logout:a}=Hb(),[u,l]=I.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:_.jsx(CXe,{}),href:"",needAdmin:!1},{name:"Analysis",leftIcon:_.jsx(vXe,{}),href:"analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:_.jsx(iwe,{}),href:"settings",needAdmin:!0}];return _.jsx(ci.Header,{p:"md",children:_.jsxs(ja,{mt:-7,align:"center",children:[_.jsx(ja.Col,{span:6,children:_.jsxs(Pt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[_.jsx(Ty,{w:40,src:`${Fu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsx(Al,{w:"md"}),_.jsx(Ei,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),_.jsx(ja.Col,{span:6,children:_.jsxs(Pt,{justify:"flex-end",direction:"row",children:[c&&_.jsx(QI,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),_.jsx(_G,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),_.jsx($h,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:_.jsxs(Pt,{direction:"column",mt:20,children:[_.jsx(it,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?_.jsx(ln,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${Fu}${d.href}`,children:d.name},`menu-item-${d.name}`):null:_.jsx(ln,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${Fu}${d.href}`,children:d.name},`menu-item-${d.name}`)),_.jsxs(we,{ml:10,children:[_.jsx(xE,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?_.jsx(it,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),l(!1)},children:"Logout"}):_.jsx(it,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function cZ({allParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=nL(!1),[a,u]=I.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;oJ(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return _.jsxs(_.Fragment,{children:[_.jsxs(Es,{style:{gap:n},children:[_.jsx(wi,{label:"Download all participants data as JSON",children:_.jsx(ln,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:_.jsx(xXe,{})})}),_.jsx(wi,{label:"Download all participants data as a tidy CSV",children:_.jsx(ln,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:_.jsx(swe,{})})})]}),i&&a.length>0&&_.jsx(HIt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function aLt({cellData:e}){return _.jsx(Ht.Td,{children:_.jsx(Hd,{miw:100,children:Object.entries(e.answer).map(([t,n])=>_.jsxs(we,{children:[_.jsxs(it,{fw:700,span:!0,children:[" ",`${t}: `]}),_.jsx(it,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function Bhe({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return _.jsxs(Ht.Td,{children:[t.toFixed(1)," ","s"]})}function uLt(e){const{metaData:t}=e;return _.jsx(Ht.Td,{children:_.jsx(YG,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:_.jsxs(Hd,{gap:"xs",children:[_.jsxs(we,{children:["IP:"," ",t.ip]}),_.jsxs(we,{children:["Language:"," ",t.language]}),_.jsxs(we,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),_.jsxs(we,{children:["User Agent:"," ",t.userAgent]})]})})})}function lLt({completed:e,inProgress:t,rejected:n,studyConfig:r,refresh:i}){const{storageEngine:s}=Ss(),{studyId:o}=dm(),{user:a}=Hb(),u=async b=>{s&&o&&(a.isAdmin?(await s.rejectParticipant(o,b),await i()):console.warn("You are not authorized to perform this action."))},[l,c]=I.useState([]),[f,d]=I.useState(!1),h=()=>HU({title:"Confirm rejecting participants",children:_.jsxs(it,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",_.jsx(it,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{d(!0);const b=l.map(async w=>await u(w));await Promise.all(b),c([]),await i(),d(!1)}}),p=I.useMemo(()=>[...e,...t,...n],[e,t,n]);function m(b){b==="all"?l.length===p.length?c([]):c(p.map(w=>w.participantId)):l.includes(b)?c(l.filter(w=>w!==b)):c([...l,b])}const g=rxe(r.sequence),y=[_.jsx(Ht.Th,{children:_.jsx(Pt,{justify:"center",children:_.jsx(bl,{mb:-4,checked:l.length===p.length,onChange:()=>m("all")})})},"action"),_.jsx(Ht.Th,{children:"ID"},"ID"),_.jsx(Ht.Th,{children:"Status"},"status"),_.jsx(Ht.Th,{children:"Meta"},"meta"),...g.flatMap(b=>[_.jsx(Ht.Th,{children:b.componentName},`header-${b.componentName}-${b.timesSeenInBlock}`),_.jsxs(Ht.Th,{children:[_.jsx("span",{style:{whiteSpace:"nowrap"},children:b.componentName})," ","Duration"]},`header-${b.componentName}-${b.timesSeenInBlock}-duration`)]),_.jsx(Ht.Th,{children:"Total Duration"},"total-duration")],v=p.map(b=>_.jsxs(Ht.Tr,{children:[_.jsx(Ht.Td,{children:_.jsx(Pt,{justify:"center",children:_.jsx(bl,{mb:-4,checked:l.includes(b.participantId),onChange:()=>m(b.participantId)})})}),_.jsx(Ht.Td,{style:{whiteSpace:"nowrap"},children:b.participantId}),_.jsx(Ht.Td,{children:_.jsxs(Pt,{direction:"row",align:"center",children:[b.rejected?_.jsx(wi,{label:"Rejected",children:_.jsx(cY,{size:16,color:"red",style:{marginBottom:-3}})}):b.completed?_.jsx(wi,{label:"Completed",children:_.jsx(twe,{size:16,color:"teal",style:{marginBottom:-3}})}):_.jsx(wi,{label:"In Progress",children:_.jsx(rwe,{size:16,color:"orange",style:{marginBottom:-3}})}),!b.completed&&_.jsxs(it,{size:"sm",mb:-1,ml:4,children:[(Object.entries(b.answers).filter(([w,E])=>E.endTime!==void 0).length/(mm(b.sequence).length-1)*100).toFixed(2),"%"]})]})}),b.metadata?_.jsx(uLt,{metaData:b.metadata}):_.jsx(Ht.Td,{children:"N/A"}),g.map(w=>{const E=txe(b.sequence,w.orderPath),T=E&&Object.entries(b.answers).sort((S,A)=>{const C=parseInt(S[0].slice(S[0].lastIndexOf("_")+1),10),k=parseInt(A[0].slice(A[0].lastIndexOf("_")+1),10);return C-k}).filter(([S])=>{const A=S.slice(0,S.lastIndexOf("_")),C=parseInt(S.slice(S.lastIndexOf("_")+1),10);return A===w.componentName&&C<=E[0].lastIndex&&C>=E[0].firstIndex});return T!==null&&T.length>=w.timesSeenInBlock+1?_.jsxs(vr.Fragment,{children:[_.jsx(aLt,{cellData:T[w.timesSeenInBlock][1]}),_.jsx(Bhe,{cellData:T[w.timesSeenInBlock][1]})]},`cellgroup-${b.participantId}-${w.componentName}-${w.timesSeenInBlock}`):_.jsxs(vr.Fragment,{children:[_.jsx(Ht.Td,{children:"N/A"}),_.jsx(Ht.Td,{children:"N/A"})]},`cellgroup-${b.participantId}-${w.componentName}-${w.timesSeenInBlock}`)}),_.jsx(Bhe,{cellData:{startTime:Math.min(...Object.values(b.answers).map(w=>w.startTime)),endTime:Math.max(...Object.values(b.answers).map(w=>w.endTime)),answer:{},windowEvents:[]}},`cell-${b.participantId}-total-duration`)]},b.participantId));return p.length>0?_.jsxs(_.Fragment,{children:[_.jsx(Pl,{visible:f,overlayProps:{blur:2}}),_.jsxs(Pt,{justify:"space-between",mb:8,p:8,children:[_.jsx(Es,{children:_.jsx(QI,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:p.map(b=>({value:b.participantId,label:b.participantId})),searchable:!0,value:null,leftSection:_.jsx(LXe,{size:14}),onChange:b=>b&&m(b)})}),_.jsxs(Es,{children:[_.jsx(cZ,{allParticipants:[...e,...t],studyId:o||""}),_.jsx(ln,{disabled:l.length===0||!a.isAdmin,onClick:h,color:"red",children:"Reject Participants"})]})]}),_.jsx(Pt,{direction:"column",style:{width:"100%",overflow:"auto"},children:_.jsxs(Ht,{striped:!0,withTableBorder:!0,children:[_.jsx(Ht.Thead,{children:_.jsx(Ht.Tr,{children:y})}),_.jsx(Ht.Tbody,{children:v})]})})]}):_.jsxs(_.Fragment,{children:[_.jsx(Al,{h:"xl"}),_.jsx(Pt,{justify:"center",align:"center",children:_.jsx(it,{children:"No data available"})})]})}const cLt="_root_1spq0_1",fLt="_description_1spq0_9",dLt="_title_1spq0_10",hLt="_closeButton_1spq0_14",pLt={root:cLt,description:fLt,title:dLt,closeButton:hLt},U$=e=>{const{title:t,message:n,color:r}=e;Rb.show({title:t,message:n,position:"top-center",classNames:pLt,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})};function mLt({studyId:e,refresh:t}){const[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[u,l]=I.useState(!1),[c,f]=I.useState(""),[d,h]=I.useState([]),[p,m]=I.useState(""),[g,y]=I.useState(""),[v,b]=I.useState(!1),[w,E]=I.useState(!1),{storageEngine:T}=Ss(),S=T,A=I.useCallback(async()=>{E(!0);const D=await S.getSnapshots(e);h(D),E(!1)},[S,e]);I.useEffect(()=>{A()},[A]);const C=async(D,...z)=>{b(!0);const W=await D(...z);W.status==="SUCCESS"?(A(),b(!1),await t(),W.notifications&&W.notifications.forEach(j=>{U$(j)})):(b(!1),U$({title:W.error.title,message:W.error.message,color:"red"}))},k=async()=>{await C(S.createSnapshot.bind(S),e,!1)},N=async()=>{m(""),r(!1),await C(S.createSnapshot.bind(S),e,!0)},O=async()=>{a(!1),await C(S.renameSnapshot.bind(S),c,g)},P=async D=>{await C(S.restoreSnapshot.bind(S),e,D)},$=async()=>{m(""),s(!1),await C(S.removeSnapshotOrLive.bind(S),c,!0)},F=async()=>{m(""),l(!1),await C(S.removeSnapshotOrLive.bind(S),e,!0)},M=()=>HU({title:"Create a Snapshot",children:_.jsx(it,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>k()}),B=D=>HU({title:"Restore Snapshot",children:_.jsx(it,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>P(D)}),U=D=>{const z=/-snapshot-(.+)$/,W=D.match(z);return W&&W[1]?W[1].replace("T"," "):null},H=async D=>{const z=D.slice(D.indexOf("-")+1);return await S.getAllParticipantsDataByStudy(z)};return _.jsxs(_.Fragment,{children:[_.jsx(Pl,{visible:v}),_.jsxs(Pt,{justify:"space-between",align:"center",children:[_.jsxs(we,{style:{width:"70%"},children:[_.jsx(Ei,{order:5,children:"Create a Snapshot"}),_.jsxs(it,{children:["This will create a snapshot of the live"," ",_.jsx(it,{span:!0,fw:700,children:e})," ","database. It will"," ",_.jsx(it,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(wi,{label:"Create a snapshot",children:_.jsx(ln,{onClick:M,children:"Snapshot"})})]}),_.jsx(Al,{h:"lg"}),_.jsxs(Pt,{justify:"space-between",align:"center",children:[_.jsxs(we,{style:{width:"70%"},children:[_.jsx(Ei,{order:5,children:"Archive Data"}),_.jsxs(it,{children:["This will create a snapshot of the live"," ",_.jsx(it,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(wi,{label:"Snapshot and Delete Data",children:_.jsx(ln,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),_.jsx(Al,{h:"lg"}),_.jsxs(Pt,{justify:"space-between",align:"center",children:[_.jsxs(we,{style:{width:"70%"},children:[_.jsx(Ei,{order:5,children:"Delete Data"}),_.jsxs(it,{children:["This will delete the live"," ",_.jsx(it,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),_.jsx(wi,{label:"Delete Data",children:_.jsx(ln,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),_.jsx(Al,{h:"xl"}),_.jsxs(Pt,{direction:"column",children:[_.jsx(Pt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:_.jsx(Ei,{order:5,children:"Snapshots"})}),_.jsxs(we,{style:{position:"relative"},children:[_.jsx(Pl,{visible:w}),d.length>0?_.jsxs(Ht,{children:[_.jsx(Ht.Thead,{children:_.jsxs(Ht.Tr,{children:[_.jsx(Ht.Th,{children:"Snapshot Name"}),_.jsx(Ht.Th,{children:"Date Created"}),_.jsx(Ht.Th,{children:"Actions"})]})}),_.jsx(Ht.Tbody,{children:d.map(D=>_.jsxs(Ht.Tr,{children:[_.jsx(Ht.Td,{children:D.alternateName}),_.jsx(Ht.Td,{children:U(D.originalName)}),_.jsx(Ht.Td,{children:_.jsxs(Pt,{children:[_.jsx(wi,{label:"Rename",children:_.jsx(ln,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(D.originalName)},children:_.jsx(PXe,{})})}),_.jsx(wi,{label:"Restore Snapshot",children:_.jsx(ln,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{B(D.originalName)},children:_.jsx($Xe,{})})}),_.jsx(wi,{label:"Delete Snapshot",children:_.jsx(ln,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(D.originalName)},children:_.jsx(owe,{})})}),_.jsx(cZ,{allParticipants:()=>H(D.originalName),studyId:e,gap:"10px",fileName:D.alternateName})]})})]},D.originalName))})]}):_.jsx(it,{children:"No snapshots."})]})]}),_.jsxs(Wi,{opened:n,onClose:()=>{r(!1),m("")},title:_.jsx(it,{children:"Archive Data"}),children:[_.jsx(it,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),_.jsx(Hg,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:D=>m(D.target.value)}),_.jsxs(Pt,{mt:"sm",justify:"right",children:[_.jsx(ln,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),_.jsx(ln,{color:"red",onClick:N,disabled:p!==e,children:"Archive"})]})]}),_.jsxs(Wi,{opened:i,onClose:()=>{s(!1),m("")},title:_.jsx(it,{children:"Delete Snapshot"}),children:[_.jsxs(it,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",_.jsx(it,{span:!0,fw:700,children:"irreversible"}),"."]}),_.jsx(Hg,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:D=>m(D.target.value)}),_.jsxs(Pt,{mt:"sm",justify:"right",children:[_.jsx(ln,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),_.jsx(ln,{color:"red",onClick:$,disabled:p!==e,children:"Delete"})]})]}),_.jsxs(Wi,{opened:o,onClose:()=>{a(!1),y("")},title:_.jsx(it,{children:"Rename Snapshot"}),children:[_.jsx(Hg,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:D=>y(D.target.value)}),_.jsxs(Pt,{mt:"sm",justify:"right",children:[_.jsx(ln,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),y("")},children:"Cancel"}),_.jsx(ln,{color:"green",onClick:O,disabled:!g||g.length===0,children:"Rename"})]})]}),_.jsxs(Wi,{opened:u,onClose:()=>{l(!1),m("")},title:_.jsx(it,{children:"Delete Live Data"}),children:[_.jsxs(it,{mb:"sm",children:["This will permanently delete the live"," ",_.jsx(it,{span:!0,fw:700,children:e})," ","data. This action is"," ",_.jsx(it,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),_.jsx(Hg,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:D=>m(D.target.value)}),_.jsxs(Pt,{mt:"sm",justify:"right",children:[_.jsx(ln,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),_.jsx(ln,{color:"red",onClick:F,disabled:p!==e,children:"Delete"})]})]})]})}function gLt({studyId:e}){const{storageEngine:t}=Ss(),[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[u,l]=I.useState(!1);I.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&_.jsxs(Hd,{children:[_.jsx($w,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),_.jsx($w,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),_.jsx($w,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function yLt({studyId:e,refresh:t}){const{storageEngine:n}=Ss();return _.jsx(Cc,{children:_.jsxs(gu,{multiple:!0,variant:"contained",children:[_.jsxs(gu.Item,{value:"ReVISit Modes",children:[_.jsx(gu.Control,{children:_.jsx(Ei,{order:5,children:"ReVISit Modes"})}),_.jsx(gu.Panel,{children:_.jsx(gLt,{studyId:e})})]},"modes"),_.jsxs(gu.Item,{value:"Data Management",children:[_.jsx(gu.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:_.jsx(Ei,{order:5,children:"Data Management"})}),_.jsx(gu.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&_.jsx(mLt,{studyId:e,refresh:t})})]},"dataManagement")]})})}const A_=14;function bDe({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return _.jsxs(Pt,{ml:4,gap:4,children:[_.jsx(wi,{label:"Completed",children:_.jsx(d0,{variant:"light",color:"green",leftSection:_.jsx(twe,{width:A_,height:A_,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),_.jsx(wi,{label:"In Progress",children:_.jsx(d0,{variant:"light",color:"orange",leftSection:_.jsx(rwe,{width:A_,height:A_,style:{paddingTop:1}}),pb:1,children:t})}),_.jsx(wi,{label:"Rejected",children:_.jsx(d0,{variant:"light",color:"red",leftSection:_.jsx(cY,{width:A_,height:A_,style:{paddingTop:1}}),pb:1,children:n})})]})}const Uhe={};function $V(e,t){e===void 0&&(e=Uhe),t===void 0&&(t=Uhe);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var vLt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bLt=Object.prototype.hasOwnProperty;function MV(e,t){return bLt.call(e,t)}function LV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)MV(e,i)&&r.push(i);return r}function xl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function FV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Nv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function _De(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function jV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(jV(e[t]))return!0}else if(typeof e=="object"){for(var r=LV(e),i=r.length,s=0;s<i;s++)if(jV(e[r[s]]))return!0}}return!1}function zhe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var wDe=function(e){vLt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,zhe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=zhe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),ji=wDe,_Lt=xl,_w={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=z$(n,this.path);r&&(r=xl(r));var i=w1(n,{op:"remove",path:this.from}).removed;return w1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=z$(n,this.from);return w1(n,{op:"add",path:this.path,value:xl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:hI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},wLt={add:function(e,t,n){return FV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:_w.move,copy:_w.copy,test:_w.test,_get:_w._get};function z$(e,t){if(t=="")return e;var n={op:"_get",path:t};return w1(e,n),n.value}function w1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):V$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=z$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=hI(e,t.value),o.test===!1)throw new ji("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new ji("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=xl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=V$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=_De(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!FV(h))throw new ji("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);FV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new ji("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=wLt[t.op].call(t,l,h,e);if(o.test===!1)throw new ji("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=_w[t.op].call(t,l,h,e);if(o.test===!1)throw new ji("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new ji("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function N4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new ji("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=xl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=w1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function ELt(e,t,n){var r=w1(e,t);if(r.test===!1)throw new ji("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function V$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new ji("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(_w[e.op]){if(typeof e.path!="string")throw new ji("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new ji('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new ji("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new ji("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&jV(e.value))throw new ji("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new ji("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new ji("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=EDe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new ji("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new ji("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function EDe(e,t,n){try{if(!Array.isArray(e))throw new ji("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)N4(xl(t),xl(e),n||!0);else{n=n||V$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof ji)return i;throw i}}function hI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!hI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!hI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const xLt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:ji,_areEquals:hI,applyOperation:w1,applyPatch:N4,applyReducer:ELt,deepClone:_Lt,getValueByPointer:z$,validate:EDe,validator:V$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var fZ=new WeakMap,SLt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),TLt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function ALt(e){return fZ.get(e)}function CLt(e,t){return e.observers.get(t)}function ILt(e,t){e.observers.delete(t.callback)}function kLt(e,t){t.unobserve()}function RLt(e,t){var n=[],r,i=ALt(e);if(!i)i=new SLt(e),fZ.set(e,i);else{var s=CLt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=xl(e),t){r.callback=t,r.next=null;var o=function(){BV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){BV(r),clearTimeout(r.next),ILt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new TLt(t,r)),r}function BV(e,t){t===void 0&&(t=!1);var n=fZ.get(e.object);dZ(n.value,e.object,e.patches,"",t),e.patches.length&&N4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function dZ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=LV(t),o=LV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(MV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?dZ(c,f,n,r+"/"+Nv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Nv(l),value:xl(c)}),n.push({op:"replace",path:r+"/"+Nv(l),value:xl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Nv(l),value:xl(c)}),n.push({op:"remove",path:r+"/"+Nv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!MV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Nv(l),value:xl(t[l])})}}}function NLt(e,t,n){n===void 0&&(n=!1);var r=[];return dZ(e,t,r,"",n),r}const PLt=Object.freeze(Object.defineProperty({__proto__:null,compare:NLt,generate:BV,observe:RLt,unobserve:kLt},Symbol.toStringTag,{value:"Module"}));Object.assign({},xLt,PLt,{JsonPatchError:wDe,deepClone:xl,escapePathComponent:Nv,unescapePathComponent:_De});var DLt=/("(?:[^\\"]|\\.)*")|[:,]/g,OLt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(DLt,function(T,S){return S||T+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const T9=Hl(OLt);function rl(e,t,n){return e.fields=t||[],e.fname=n,e}function Gi(e){return e==null?null:e.fname}function da(e){return e==null?null:e.fields}function xDe(e){return e.length===1?$Lt(e[0]):MLt(e)}const $Lt=e=>function(t){return t[e]},MLt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Ue(e){throw Error(e)}function Wh(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Ue("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Ue("Access path missing closing bracket: "+e),r&&Ue("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Rc(e,t,n){const r=Wh(e);return e=r.length===1?r[0]:e,rl((n&&n.get||xDe)(r),[e],t||e)}const Yk=Rc("id"),ba=rl(e=>e,[],"identity"),Ug=rl(()=>0,[],"zero"),RS=rl(()=>1,[],"one"),Nc=rl(()=>!0,[],"true"),bg=rl(()=>!1,[],"false");function LLt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const SDe=0,hZ=1,pZ=2,TDe=3,ADe=4;function mZ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:LLt,r=e||SDe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=hZ&&n(t||"error","ERROR",arguments),this},warn(){return r>=pZ&&n(t||"warn","WARN",arguments),this},info(){return r>=TDe&&n(t||"log","INFO",arguments),this},debug(){return r>=ADe&&n(t||"log","DEBUG",arguments),this}}}var Ve=Array.isArray;function yt(e){return e===Object(e)}const Vhe=e=>e!=="__proto__";function NS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=FLt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;PS(r,s,i[s],o)}return r},{})}function PS(e,t,n,r){if(!Vhe(t))return;let i,s;if(yt(n)&&!Ve(n)){s=yt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?PS(s,i,n[i]):Vhe(i)&&(s[i]=n[i])}else e[t]=n}function FLt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Kn(e){return e[e.length-1]}function la(e){return e==null||e===""?null:+e}const CDe=e=>t=>e*Math.exp(t),IDe=e=>t=>Math.log(e*t),kDe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),RDe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,H$=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function P4(e,t,n,r){const i=n(e[0]),s=n(Kn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function NDe(e,t){return P4(e,t,la,ba)}function PDe(e,t){var n=Math.sign(e[0]);return P4(e,t,IDe(n),CDe(n))}function DDe(e,t,n){return P4(e,t,H$(n),H$(1/n))}function ODe(e,t,n){return P4(e,t,kDe(n),RDe(n))}function D4(e,t,n,r,i){const s=r(e[0]),o=r(Kn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function gZ(e,t,n){return D4(e,t,n,la,ba)}function yZ(e,t,n){const r=Math.sign(e[0]);return D4(e,t,n,IDe(r),CDe(r))}function q$(e,t,n,r){return D4(e,t,n,H$(r),H$(1/r))}function vZ(e,t,n,r){return D4(e,t,n,kDe(r),RDe(r))}function $De(e){return 1+~~(new Date(e).getMonth()/3)}function MDe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function mt(e){return e!=null?Ve(e)?e:[e]:[]}function LDe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function vn(e){return typeof e=="function"}const jLt="descending";function bZ(e,t,n){n=n||{},t=mt(t)||[];const r=[],i=[],s={},o=n.comparator||BLt;return mt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===jLt?-1:1),i.push(a=vn(a)?a:Rc(a,null,n)),(da(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:rl(o(i,r),Object.keys(s))}const O4=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),BLt=(e,t)=>e.length===1?ULt(e[0],t[0]):zLt(e,t,e.length),ULt=(e,t)=>function(n,r){return O4(e(n),e(r))*t},zLt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=O4(s(r),s(i));return o*t[a]});function _a(e){return vn(e)?e:()=>e}function _Z(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function yn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Ah(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function FDe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const VLt=Object.prototype.hasOwnProperty;function Ft(e,t){return VLt.call(e,t)}const oP={};function DS(e){let t={},n;function r(s){return Ft(t,s)&&t[s]!==oP}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===oP&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=oP),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==oP&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function jDe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Kn(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function ft(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),yn(r,n)}function ww(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function jy(e){return typeof e=="boolean"}function S0(e){return Object.prototype.toString.call(e)==="[object Date]"}function BDe(e){return e&&vn(e[Symbol.iterator])}function ar(e){return typeof e=="number"}function UDe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function gt(e){return typeof e=="string"}function wZ(e,t,n){e&&(e=t?mt(e).map(a=>a.replace(/\\(.)/g,"$1")):mt(e));const r=e&&e.length,i=n&&n.get||xDe,s=a=>i(t?[a]:Wh(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return rl(o,e,"key")}function zDe(e,t){const n=e[0],r=Kn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const HLt=1e4;function VDe(e){e=+e||HLt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Ft(t,o)||Ft(n,o),get:o=>Ft(t,o)?t[o]:Ft(n,o)?s(o,n[o]):void 0,set:(o,a)=>Ft(t,o)?t[o]=a:s(o,a)}}function HDe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function N2(e,t){let n="";for(;--t>=0;)n+=e;return n}function qDe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?N2(i,o)+s:r==="center"?N2(i,~~(o/2))+s+N2(i,Math.ceil(o/2)):s+N2(i,o)}function Kk(e){return e&&Kn(e)-e[0]||0}function ot(e){return Ve(e)?"["+e.map(ot)+"]":yt(e)||gt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function EZ(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const qLt=e=>ar(e)||S0(e)?e:Date.parse(e);function xZ(e,t){return t=t||qLt,e==null||e===""?null:t(e)}function SZ(e){return e==null||e===""?null:e+""}function qf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function WDe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Ig(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function WLt(e){return e}function GLt(e){if(e==null)return WLt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function YLt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function KLt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Hhe(e,n)})}:Hhe(e,t)}function Hhe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=GDe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function GDe(e,t){var n=GLt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&YLt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function XLt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function QLt(e){return GDe(e,JLt.apply(this,arguments))}function JLt(e,t,n){var r,i,s;if(arguments.length>1)r=ZLt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:XLt(e,r)}}function ZLt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Po="year",Qu="quarter",ha="month",Ds="week",Ju="date",ua="day",Ch="dayofyear",jl="hours",Bl="minutes",Pc="seconds",Wf="milliseconds",TZ=[Po,Qu,ha,Ds,Ju,ua,Ch,jl,Bl,Pc,Wf],A9=TZ.reduce((e,t,n)=>(e[t]=1+n,e),{});function AZ(e){const t=mt(e).slice(),n={};return t.length||Ue("Missing time unit."),t.forEach(i=>{Ft(A9,i)?n[i]=1:Ue(`Invalid time unit: ${i}.`)}),(n[Ds]||n[ua]?1:0)+(n[Qu]||n[ha]||n[Ju]?1:0)+(n[Ch]?1:0)>1&&Ue(`Incompatible time units: ${e}`),t.sort((i,s)=>A9[i]-A9[s]),t}const e6t={[Po]:"%Y ",[Qu]:"Q%q ",[ha]:"%b ",[Ju]:"%d ",[Ds]:"W%U ",[ua]:"%a ",[Ch]:"%j ",[jl]:"%H:00",[Bl]:"00:%M",[Pc]:":%S",[Wf]:".%L",[`${Po}-${ha}`]:"%Y-%m ",[`${Po}-${ha}-${Ju}`]:"%Y-%m-%d ",[`${jl}-${Bl}`]:"%H:%M"};function YDe(e,t){const n=yn({},e6t,t),r=AZ(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Bv=new Date;function CZ(e){return Bv.setFullYear(e),Bv.setMonth(0),Bv.setDate(1),Bv.setHours(0,0,0,0),Bv}function KDe(e){return QDe(new Date(e))}function XDe(e){return UV(new Date(e))}function QDe(e){return Qp.count(CZ(e.getFullYear())-1,e)}function UV(e){return sS.count(CZ(e.getFullYear())-1,e)}function zV(e){return CZ(e).getDay()}function t6t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function JDe(e){return eOe(new Date(e))}function ZDe(e){return VV(new Date(e))}function eOe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return y0.count(t-1,e)}function VV(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return oS.count(t-1,e)}function HV(e){return Bv.setTime(Date.UTC(e,0,1)),Bv.getUTCDay()}function n6t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function tOe(e,t,n,r,i){const s=t||1,o=Kn(e),a=(y,v,b)=>(b=b||y,r6t(n[b],r[b],y===o&&s,v)),u=new Date,l=qf(e),c=l[Po]?a(Po):_a(2012),f=l[ha]?a(ha):l[Qu]?a(Qu):Ug,d=l[Ds]&&l[ua]?a(ua,1,Ds+ua):l[Ds]?a(Ds,1):l[ua]?a(ua,1):l[Ju]?a(Ju,1):l[Ch]?a(Ch,1):RS,h=l[jl]?a(jl):Ug,p=l[Bl]?a(Bl):Ug,m=l[Pc]?a(Pc):Ug,g=l[Wf]?a(Wf):Ug;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function r6t(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function sx(e,t,n){return t+e*7-(n+6)%7}const i6t={[Po]:e=>e.getFullYear(),[Qu]:e=>Math.floor(e.getMonth()/3),[ha]:e=>e.getMonth(),[Ju]:e=>e.getDate(),[jl]:e=>e.getHours(),[Bl]:e=>e.getMinutes(),[Pc]:e=>e.getSeconds(),[Wf]:e=>e.getMilliseconds(),[Ch]:e=>QDe(e),[Ds]:e=>UV(e),[Ds+ua]:(e,t)=>sx(UV(e),e.getDay(),zV(t)),[ua]:(e,t)=>sx(1,e.getDay(),zV(t))},s6t={[Qu]:e=>3*e,[Ds]:(e,t)=>sx(e,0,zV(t))};function nOe(e,t){return tOe(e,t||1,i6t,s6t,t6t)}const o6t={[Po]:e=>e.getUTCFullYear(),[Qu]:e=>Math.floor(e.getUTCMonth()/3),[ha]:e=>e.getUTCMonth(),[Ju]:e=>e.getUTCDate(),[jl]:e=>e.getUTCHours(),[Bl]:e=>e.getUTCMinutes(),[Pc]:e=>e.getUTCSeconds(),[Wf]:e=>e.getUTCMilliseconds(),[Ch]:e=>eOe(e),[Ds]:e=>VV(e),[ua]:(e,t)=>sx(1,e.getUTCDay(),HV(t)),[Ds+ua]:(e,t)=>sx(VV(e),e.getUTCDay(),HV(t))},a6t={[Qu]:e=>3*e,[Ds]:(e,t)=>sx(e,0,HV(t))};function rOe(e,t){return tOe(e,t||1,o6t,a6t,n6t)}const u6t={[Po]:mh,[Qu]:DC.every(3),[ha]:DC,[Ds]:sS,[Ju]:Qp,[ua]:Qp,[Ch]:Qp,[jl]:y6,[Bl]:m6,[Pc]:Up,[Wf]:$E},l6t={[Po]:gh,[Qu]:OC.every(3),[ha]:OC,[Ds]:oS,[Ju]:y0,[ua]:y0,[Ch]:y0,[jl]:v6,[Bl]:g6,[Pc]:Up,[Wf]:$E};function OS(e){return u6t[e]}function $S(e){return l6t[e]}function iOe(e,t,n){return e?e.offset(t,n):void 0}function sOe(e,t,n){return iOe(OS(e),t,n)}function oOe(e,t,n){return iOe($S(e),t,n)}function aOe(e,t,n,r){return e?e.range(t,n,r):void 0}function uOe(e,t,n,r){return aOe(OS(e),t,n,r)}function lOe(e,t,n,r){return aOe($S(e),t,n,r)}const P2=1e3,D2=P2*60,O2=D2*60,$4=O2*24,c6t=$4*7,qhe=$4*30,qV=$4*365,cOe=[Po,ha,Ju,jl,Bl,Pc,Wf],$2=cOe.slice(0,-1),M2=$2.slice(0,-1),L2=M2.slice(0,-1),f6t=L2.slice(0,-1),d6t=[Po,Ds],Whe=[Po,ha],fOe=[Po],$T=[[$2,1,P2],[$2,5,5*P2],[$2,15,15*P2],[$2,30,30*P2],[M2,1,D2],[M2,5,5*D2],[M2,15,15*D2],[M2,30,30*D2],[L2,1,O2],[L2,3,3*O2],[L2,6,6*O2],[L2,12,12*O2],[f6t,1,$4],[d6t,1,c6t],[Whe,1,qhe],[Whe,3,3*qhe],[fOe,1,qV]];function dOe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Kk(t))/n;let i=eS(a=>a[2]).right($T,r),s,o;return i===$T.length?(s=fOe,o=F0(t[0]/qV,t[1]/qV,n)):i?(i=$T[r/$T[i-1][2]<$T[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=cOe,o=Math.max(F0(t[0],t[1],n),1)),{units:s,step:o}}function F2(e){const t={};return n=>t[n]||(t[n]=e(n))}function h6t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=p6t(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function p6t(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function hOe(e){const t=F2(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=B1(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return h6t(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=B1(o??",f");const a=F0(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=wSe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=ESe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=_Se(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let WV;pOe();function pOe(){return WV=hOe({format:nS,formatPrefix:oK})}function mOe(e){return hOe(bSe(e))}function W$(e){return arguments.length?WV=mOe(e):WV}function Ghe(e,t,n){n=n||{},yt(n)||Ue(`Invalid time multi-format specifier: ${n}`);const r=t(Pc),i=t(Bl),s=t(jl),o=t(Ju),a=t(Ds),u=t(ha),l=t(Qu),c=t(Po),f=e(n[Wf]||".%L"),d=e(n[Pc]||":%S"),h=e(n[Bl]||"%I:%M"),p=e(n[jl]||"%I %p"),m=e(n[Ju]||n[ua]||"%a %d"),g=e(n[Ds]||"%b %d"),y=e(n[ha]||"%B"),v=e(n[Qu]||"%B"),b=e(n[Po]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:b)(w)}function gOe(e){const t=F2(e.format),n=F2(e.utcFormat);return{timeFormat:r=>gt(r)?t(r):Ghe(t,OS,r),utcFormat:r=>gt(r)?n(r):Ghe(n,$S,r),timeParse:F2(e.parse),utcParse:F2(e.utcParse)}}let GV;yOe();function yOe(){return GV=gOe({format:bK,parse:$Te,utcFormat:b6,utcParse:MTe})}function vOe(e){return gOe(RTe(e))}function pI(e){return arguments.length?GV=vOe(e):GV}const YV=(e,t)=>yn({},e,t);function bOe(e,t){const n=e?mOe(e):W$(),r=t?vOe(t):pI();return YV(n,r)}function IZ(e,t){const n=arguments.length;return n&&n!==2&&Ue("defaultLocale expects either zero or two arguments."),n?YV(W$(e),pI(t)):YV(W$(),pI())}function m6t(){return pOe(),yOe(),IZ()}const g6t=/^(data:|([A-Za-z]+:)?\/\/)/,y6t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,v6t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Yhe="file://";function b6t(e,t){return n=>({options:n||{},sanitize:w6t,load:_6t,fileAccess:!!t,file:E6t(t),http:S6t(e)})}async function _6t(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function w6t(e,t){t=yn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=y6t.test(e.replace(v6t,""));(e==null||typeof e!="string"||!a)&&Ue("Sanitize failure, invalid URI: "+ot(e));const u=g6t.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Yhe))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Yhe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function E6t(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):x6t}async function x6t(){Ue("No file system access.")}function S6t(e){return e?async function(t,n){const r=yn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?vn(s[i])?s[i]():s.text():Ue(s.status+""+s.statusText)}:T6t}async function T6t(){Ue("No HTTP fetch method available.")}const A6t=e=>e!=null&&e===e,C6t=e=>e==="true"||e==="false"||e===!0||e===!1,I6t=e=>!Number.isNaN(Date.parse(e)),_Oe=e=>!Number.isNaN(+e)&&!(e instanceof Date),k6t=e=>_Oe(e)&&Number.isInteger(+e),KV={boolean:EZ,integer:la,number:la,date:xZ,string:SZ,unknown:ba},aP=[C6t,k6t,_Oe,I6t],R6t=["boolean","integer","number","date"];function wOe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=aP.length,i=aP.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&A6t(u)&&!aP[a](u)&&(i[a]=0,++o,o===aP.length))return"string";return R6t[i.reduce((s,o)=>s===0?o:s,0)-1]}function EOe(e,t){return t.reduce((n,r)=>(n[r]=wOe(e,r),n),{})}function Khe(e){const t=function(n,r){const i={delimiter:e};return kZ(n,r?yn(r,i):i)};return t.responseType="text",t}function kZ(e,t){return t.header&&(e=t.header.map(ot).join(t.delimiter)+`
`+e),gSe(t.delimiter).parse(e+"")}kZ.responseType="text";function N6t(e){return typeof Buffer=="function"&&vn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function RZ(e,t){const n=t&&t.property?Rc(t.property):ba;return yt(e)&&!N6t(e)?P6t(n(e),t):n(JSON.parse(e))}RZ.responseType="json";function P6t(e,t){return!Ve(e)&&BDe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const D6t={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function xOe(e,t){let n,r,i,s;return e=RZ(e,t),t&&t.feature?(n=KLt,i=t.feature):t&&t.mesh?(n=QLt,i=t.mesh,s=D6t[t.filter]):Ue("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Ue("Invalid TopoJSON object: "+i),r&&r.features||[r]}xOe.responseType="json";const RD={dsv:kZ,csv:Khe(","),tsv:Khe("	"),json:RZ,topojson:xOe};function NZ(e,t){return arguments.length>1?(RD[e]=t,this):Ft(RD,e)?RD[e]:null}function SOe(e){const t=NZ(e);return t&&t.responseType||"text"}function TOe(e,t,n,r){t=t||{};const i=NZ(t.type||"json");return i||Ue("Unknown data format type: "+t.type),e=i(e,t),t.parse&&O6t(e,t.parse,n,r),Ft(e,"columns")&&delete e.columns,e}function O6t(e,t,n,r){if(!e.length)return;const i=pI();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=EOe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!KV[p])throw Error("Illegal format pattern: "+h+":"+p);return KV[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const M4=b6t(typeof fetch<"u"&&fetch,null);function L4(e){const t=e||ba,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function ND(e,t){try{await t(e)}catch(n){e.error(n)}}const AOe=Symbol("vega_id");let $6t=1;function F4(e){return!!(e&&Mt(e))}function Mt(e){return e[AOe]}function COe(e,t){return e[AOe]=t,e}function _r(e){const t=e===Object(e)?e:{data:e};return Mt(t)?t:COe(t,$6t++)}function PZ(e){return j4(e,_r({}))}function j4(e,t){for(const n in e)t[n]=e[n];return t}function IOe(e,t){return COe(t,Mt(e))}function qb(e,t){return e?t?(n,r)=>e(n,r)||Mt(t(n))-Mt(t(r)):(n,r)=>e(n,r)||Mt(n)-Mt(r):null}function kOe(e){return e&&e.constructor===Wb}function Wb(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:Wb,insert(a){const u=mt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=vn(a)?r:t,l=mt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:_a(l)};return vn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return vn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Mt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Mt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Mt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Mt(m),l[g]?l[g]=1:a.add.push(_r(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Mt(m)]<0&&a.rem.push(m);function y(v,b,w){w?v[b]=w(v):a.encode=b,o||(c[Mt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Mt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Mt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Mt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const PD="_:mod:_";function B4(){Object.defineProperty(this,PD,{writable:!0,value:{}})}B4.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[PD];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Ve(n)?1+n.length:-1),i},modified(e,t){const n=this[PD];if(arguments.length){if(Ve(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[PD]={},this}};let M6t=0;const L6t="pulse",F6t=new B4,j6t=1,B6t=2;function Gr(e,t,n,r){this.id=++M6t,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Xhe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Gr.prototype={targets(){return this._targets||(this._targets=L4(Yk))},set(e){return this.value!==e?(this.value=e,1):0},skip:Xhe(j6t),modified:Xhe(B6t),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new B4,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Gr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===L6t)mt(a).forEach(f=>{f instanceof Gr?f!==this&&(f.targets().add(this),s.push(f)):Ue("Pulse parameters must be operator instances.")}),this.source=a;else if(Ve(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||F6t,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function U6t(e,t,n,r){let i=1,s;return e instanceof Gr?s=e:e&&e.prototype instanceof Gr?s=new e:vn(e)?s=new Gr(null,e):(i=0,s=new Gr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function z6t(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let V6t=0;function U4(e,t,n){this.id=++V6t,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function _g(e,t,n){return new U4(e,t,n)}U4.prototype={_filter:Nc,_apply:ba,targets(){return this._targets||(this._targets=L4(Yk))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=_g(e);return this.targets().add(t),t},apply(e){const t=_g(null,e);return this.targets().add(t),t},merge(){const e=_g();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=_g();return this.targets().add(_g(null,null,_Z(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(_g(null,null,()=>n=!0)),t.targets().add(_g(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Nc,this._targets=null}};function H6t(e,t,n,r){const i=this,s=_g(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=mt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function q6t(e,t){const n=this.locale();return TOe(e,t,n.timeParse,n.utcParse)}function W6t(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function G6t(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:SOe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function Y6t(e,t,n){const r=this,i=r._pending||K6t(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Nc).insert(s.data||[])),i.done(),s}function K6t(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const X6t={skip:!0};function Q6t(e,t,n,r,i){return(e instanceof Gr?Z6t:J6t)(this,e,t,n,r,i),this}function J6t(e,t,n,r,i,s){const o=yn({},s,X6t);let a,u;vn(n)||(n=_a(n)),r===void 0?a=l=>e.touch(n(l)):vn(r)?(u=new Gr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;kOe(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function Z6t(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Gr(null,e4t(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function e4t(e,t){return t=vn(t)?t:_a(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function t4t(e){e.rank=++this._rank}function n4t(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Ue("Cycle detected in dataflow graph.")}const G$={},Cd=1,kg=2,wp=4,r4t=Cd|kg,Qhe=Cd|wp,C_=Cd|kg|wp,Jhe=8,MT=16,Zhe=32,epe=64;function T0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function C9(e,t){const n=[];return Ig(e,t,r=>n.push(r)),n}function tpe(e,t){const n={};return e.visit(t,r=>{n[Mt(r)]=1}),r=>n[Mt(r)]?null:r}function uP(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}T0.prototype={StopPropagation:G$,ADD:Cd,REM:kg,MOD:wp,ADD_REM:r4t,ADD_MOD:Qhe,ALL:C_,REFLOW:Jhe,SOURCE:MT,NO_SOURCE:Zhe,NO_FIELDS:epe,fork(e){return new T0(this.dataflow).init(this,e)},clone(){const e=this.fork(C_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(C_|MT)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new T0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&epe)&&(n.fields=e.fields),t&Cd?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&kg?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&wp?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Zhe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||C_;return t&Cd&&this.add.length||t&kg&&this.rem.length||t&wp&&this.mod.length},reflow(e){if(e)return this.fork(C_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(wp,tpe(this,Cd))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Ve(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Ve(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Cd&&(n.addF=uP(n.addF,t)),e&kg&&(n.remF=uP(n.remF,t)),e&wp&&(n.modF=uP(n.modF,t)),e&MT&&(n.srcF=uP(n.srcF,t)),n},materialize(e){e=e||C_;const t=this;return e&Cd&&t.addF&&(t.add=C9(t.add,t.addF),t.addF=null),e&kg&&t.remF&&(t.rem=C9(t.rem,t.remF),t.remF=null),e&wp&&t.modF&&(t.mod=C9(t.mod,t.modF),t.modF=null),e&MT&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&MT)return Ig(n.source,n.srcF,r),n;e&Cd&&Ig(n.add,n.addF,r),e&kg&&Ig(n.rem,n.remF,r),e&wp&&Ig(n.mod,n.modF,r);const i=n.source;if(e&Jhe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Ig(i,tpe(n,Qhe),r):Ig(i,n.srcF,r))}return n}};function DZ(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}ft(DZ,T0,{fork(e){const t=new T0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Ve(e)?e.some(r=>n[r]):n[e]:0},filter(){Ue("MultiPulse does not support filtering.")},materialize(){Ue("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function i4t(e,t,n){const r=this,i=[];if(r._pulse)return ROe(r);if(r._pending&&await r._pending,t&&await ND(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new T0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=L4(Yk);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=G$),u!==G$&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await ND(r,c[f].callback)}return n&&await ND(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function s4t(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function o4t(e,t,n){return this._pulse?ROe(this):(this.evaluate(e,t,n),this)}function a4t(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function ROe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function u4t(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function l4t(e,t){const n=e.source,r=this._clock;return n&&Ve(n)?new DZ(this,r,n.map(i=>i.pulse),t):this._input[e.id]||c4t(this._pulse,n&&n.pulse)}function c4t(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==G$&&(e.source=t.source),e)}const OZ={skip:!1,force:!1};function f4t(e,t){const n=t||OZ;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function d4t(e,t,n){const r=n||OZ;return(e.set(t)||r.force)&&this.touch(e,r),this}function h4t(e,t,n){this.touch(e,n||OZ);const r=new T0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function p4t(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),NOe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,m4t(t,0,e)):r=n,r}}}function NOe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function m4t(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,NOe(e,r,t,n)}function rE(){this.logger(mZ()),this.logLevel(hZ),this._clock=0,this._rank=0,this._locale=IZ();try{this._loader=M4()}catch{}this._touched=L4(Yk),this._input={},this._pulse=null,this._heap=p4t((e,t)=>e.qrank-t.qrank),this._postrun=[]}function LT(e){return function(){return this._log[e].apply(this,arguments)}}rE.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:LT("error"),warn:LT("warn"),info:LT("info"),debug:LT("debug"),logLevel:LT("level"),cleanThreshold:1e4,add:U6t,connect:z6t,rank:t4t,rerank:n4t,pulse:h4t,touch:f4t,update:d4t,changeset:Wb,ingest:W6t,parse:q6t,preload:Y6t,request:G6t,events:H6t,on:Q6t,evaluate:i4t,run:o4t,runAsync:s4t,runAfter:a4t,_enqueue:u4t,_getPulse:l4t};function Oe(e,t){Gr.call(this,e,null,t)}ft(Oe,Gr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const ox={};function POe(e){const t=DOe(e);return t&&t.Definition||null}function DOe(e){return e=e&&e.toLowerCase(),Ft(ox,e)?ox[e]:null}function*OOe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function $Z(e,t,n){const r=Float64Array.from(OOe(e,n));return r.sort(Kp),t.map(i=>bxe(r,i))}function MZ(e,t){return $Z(e,[.25,.5,.75],t)}function LZ(e,t){const n=e.length,r=Hot(e,t),i=MZ(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function $Oe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Dc=Math.random;function g4t(e){Dc=e}function MOe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(OOe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(Dc()*s)];c[l]=a/s}return c.sort(Kp),[b7(c,n/2),b7(c,1-n/2)]}function LOe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?y4t(s,t+t/4):s}function y4t(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function v4t(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function b4t(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Dc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const FOe=Math.sqrt(2*Math.PI),_4t=Math.SQRT2;let FT=NaN;function z4(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(FT===FT)n=FT,FT=NaN;else{do n=Dc()*2-1,r=Dc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,FT=r*s}return e+n*t}function FZ(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*FOe)}function V4(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function H4(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*_4t*w4t(2*e-1)}function w4t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function jZ(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>z4(n,r),pdf:s=>FZ(s,n,r),cdf:s=>V4(s,n,r),icdf:s=>H4(s,n,r)};return i.mean(e).stdev(t)}function BZ(e,t){const n=jZ();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=LZ(e)),i):t},sample(){return e[~~(Dc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function UZ(e,t){return e=e||0,t=t??1,Math.exp(e+z4()*t)}function zZ(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*FOe*e)}function VZ(e,t,n){return V4(Math.log(e),t,n)}function HZ(e,t,n){return Math.exp(H4(e,t,n))}function jOe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>UZ(n,r),pdf:s=>zZ(s,n,r),cdf:s=>VZ(s,n,r),icdf:s=>HZ(s,n,r)};return i.mean(e).stdev(t)}function BOe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Dc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function qZ(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Dc()}function WZ(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function GZ(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function YZ(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function UOe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>qZ(n,r),pdf:s=>WZ(s,n,r),cdf:s=>GZ(s,n,r),icdf:s=>YZ(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function KZ(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Xk(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function q4(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function Qk(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function MS(e,t,n,r,i){let s=0,o=0;return Qk(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function XZ(e,t,n){let r=0,i=0,s=0,o=0,a=0;Qk(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=Xk(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:MS(e,t,n,i,l)}}function zOe(e,t,n){let r=0,i=0,s=0,o=0,a=0;Qk(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=Xk(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:MS(e,t,n,i,l)}}function VOe(e,t,n){const[r,i,s,o]=q4(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;Qk(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=Xk(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:MS(e,t,n,o,y)}}function HOe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;Qk(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=Xk(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:MS(e,t,n,a,c)}}function QZ(e,t,n){const[r,i,s,o]=q4(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,w=(f*y-d*l)/v,E=-b*u,T=S=>(S=S-s,b*S*S+w*S+E+o);return{coef:[E-w*s+b*s*s+o,w-2*b*s,b],predict:T,rSquared:MS(e,t,n,o,T)}}function qOe(e,t,n,r){if(r===0)return KZ(e,t,n);if(r===1)return XZ(e,t,n);if(r===2)return QZ(e,t,n);const[i,s,o,a]=q4(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=x4t(c),v=b=>{b-=o;let w=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)w+=y[d]*Math.pow(b,d);return w};return{coef:E4t(f,y,-o,a),predict:v,rSquared:MS(e,t,n,a,v)}}function E4t(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function x4t(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const npe=2,rpe=1e-12;function WOe(e,t,n,r){const[i,s,o,a]=q4(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=npe;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],w=y-i[v]>i[b]-y?v:b;let E=0,T=0,S=0,A=0,C=0;const k=1/Math.abs(i[w]-y||1);for(let P=v;P<=b;++P){const $=i[P],F=s[P],M=S4t(Math.abs(y-$)*k)*d[P],B=$*M;E+=M,T+=B,S+=F*M,A+=F*B,C+=$*B}const[N,O]=Xk(T/E,S/E,A/E,C/E);c[g]=N+O*y,f[g]=Math.abs(s[g]-c[g]),T4t(i,g+1,p)}if(h===npe)break;const m=_xe(f);if(Math.abs(m)<rpe)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?rpe:(v=1-y*y)*v}return A4t(i,c,o,a)}function S4t(e){return(e=1-e*e*e)*e*e}function T4t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function A4t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const C4t=.5*Math.PI/180;function W4(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=I4t(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&k4t(f,m,d,h,p)>C4t?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function I4t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function k4t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function R4t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function XV(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:R4t(e)}function GOe(e,t,n){return n||e+(t?"_"+t:"")}const I9=()=>{},N4t={init:I9,add:I9,rem:I9,idx:0},mI={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Jk=Object.keys(mI).filter(e=>e!=="__count__");function P4t(e,t){return(n,r)=>yn({name:e,aggregate_param:r,out:n||e},N4t,t)}[...Jk,"__count__"].forEach(e=>{mI[e]=P4t(e,mI[e])});function YOe(e,t,n){return mI[e](n,t)}function KOe(e,t){return e.idx-t.idx}function D4t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=mI[i]())})};return e.forEach(n),Object.values(t).sort(KOe)}function O4t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function $4t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function M4t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function L4t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function XOe(e,t){const n=t||ba,r=D4t(e),i=e.slice().sort(KOe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=O4t,s.prototype.add=$4t,s.prototype.rem=M4t,s.prototype.set=L4t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function JZ(e){this._key=e?Rc(e):Mt,this.reset()}const Fo=JZ.prototype;Fo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Fo.add=function(e){this._add.push(e)};Fo.rem=function(e){this._rem.push(e)};Fo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Fo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Ft(n,s)||(n[s]=1,++i);return i};Fo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=FDe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Fo.argmin=function(e){return this.extent(e)[0]||{}};Fo.argmax=function(e){return this.extent(e)[1]||{}};Fo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Fo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Fo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=MZ(this.values(),e),this._get=e),this._q};Fo.q1=function(e){return this.quartile(e)[0]};Fo.q2=function(e){return this.quartile(e)[1]};Fo.q3=function(e){return this.quartile(e)[2]};Fo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=MOe(this.values(),1e3,.05,e),this._get=e),this._ci};Fo.ci0=function(e){return this.ci(e)[0]};Fo.ci1=function(e){return this.ci(e)[1]};function iy(e){Oe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}iy.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Jk},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ft(iy,Oe,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=mt(da(v)),w=b.length;let E=0,T;for(;E<w;++E)r[T=b[E]]||(r[T]=1,t.push(T))}this._dims=mt(e.groupby),this._dnames=this._dims.map(v=>{const b=Gi(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:XV(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Ue("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Ue("Null aggregate field specified."),m=Gi(f),g=GOe(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(YOe(d,h,g))}return this._measures=this._measures.map(v=>XOe(v,v.field)),Object.create(null)},cellkey:XV(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new JZ),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?IOe(t.tuple,s):_r(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const F4t=1e-14;function ZZ(e){Oe.call(this,null,e)}ZZ.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ft(ZZ,Oe,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(da(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=$Oe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=la(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(F4t+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=rl(u,da(t),e.name||"bin_"+Gi(t))}});function QOe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?HDe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function eee(e){Oe.call(this,[],e)}eee.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ft(eee,Oe,{transform(e,t){const n=t.fork(t.ALL),r=QOe(Mt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(qb(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function JOe(e){Gr.call(this,null,j4t,e)}ft(JOe,Gr);function j4t(e){return this.value&&!e.modified()?this.value:bZ(e.fields,e.orders)}function tee(e){Oe.call(this,null,e)}tee.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function B4t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ft(tee,Oe,{transform(e,t){const n=f=>d=>{for(var h=B4t(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=_r({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function nee(e){Oe.call(this,null,e)}nee.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ft(nee,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=U4t(a,i,s,e.filter||Nc)):n.mod=a,n.source=this.value,n.modifies(r)}});function U4t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(_r(s)),s={},s[t]=l);return i}const ipe={kde:BZ,mixture:BOe,normal:jZ,lognormal:jOe,uniform:UOe},z4t="distributions",spe="function",V4t="field";function ZOe(e,t){const n=e[spe];Ft(ipe,n)||Ue("Unknown distribution function: "+n);const r=ipe[n]();for(const i in e)i===V4t?r.data((e.from||t()).map(e[i])):i===z4t?r[i](e[i].map(s=>ZOe(s,t))):typeof r[i]===spe&&r[i](e[i]);return r}function ree(e){Oe.call(this,null,e)}const e3e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],H4t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:e3e},{name:"weights",type:"number",array:!0}]};ree.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:e3e.concat(H4t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ft(ree,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=ZOe(e.distribution,q4t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Ue("Invalid density method: "+o),!e.extent&&!r.data&&Ue("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Ah(r.data()),l=W4(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],_r(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function q4t(e){return()=>e.materialize(e.SOURCE).source}function t3e(e,t){return e?e.map((n,r)=>t[r]||Gi(n)):null}function iee(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const n3e="bin";function see(e){Oe.call(this,null,e)}see.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:n3e}]};const W4t=(e,t)=>Kk(Ah(e,t))/30;ft(see,Oe,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=iee(t.source,e.groupby,ba),i=e.smooth||!1,s=e.field,o=e.step||W4t(n,s),a=qb((p,m)=>s(p)-s(m)),u=e.as||n3e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of LOe(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function r3e(e){Gr.call(this,null,G4t,e),this.modified(!0)}ft(r3e,Gr);function G4t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:rl(n=>t(n,e),da(t),Gi(t))}function oee(e){Oe.call(this,[void 0,void 0],e)}oee.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ft(oee,Oe,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=la(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Gi(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function aee(e,t){Gr.call(this,e),this.parent=t,this.count=0}ft(aee,Gr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function G4(e){Oe.call(this,{},e),this._keys=DS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ft(G4,Oe,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Ft(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new aee(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Mt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Mt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Mt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Mt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Mt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function i3e(e){Gr.call(this,null,Y4t,e)}ft(i3e,Gr);function Y4t(e){return this.value&&!e.modified()?this.value:Ve(e.name)?mt(e.name).map(t=>Rc(t)):Rc(e.name,e.as)}function uee(e){Oe.call(this,DS(),e)}uee.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ft(uee,Oe,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Mt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Mt(f),1)});function c(f){const d=Mt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function lee(e){Oe.call(this,[],e)}lee.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ft(lee,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=t3e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=PZ(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function cee(e){Oe.call(this,[],e)}cee.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ft(cee,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Gi),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=PZ(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function fee(e){Oe.call(this,null,e)}fee.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ft(fee,Oe,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function s3e(e){Oe.call(this,[],e)}ft(s3e,Oe,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=_r(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const lP={value:"value",median:_xe,mean:Xot,min:v7,max:g0},K4t=[];function dee(e){Oe.call(this,[],e)}dee.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function X4t(e){var t=e.method||lP.value,n;if(lP[t]==null)Ue("Unrecognized imputation method: "+t);else return t===lP.value?(n=e.value!==void 0?e.value:0,()=>n):lP[t]}function Q4t(e){const t=e.field;return n=>n?t(n):NaN}ft(dee,Oe,{transform(e,t){var n=t.fork(t.ALL),r=X4t(e),i=Q4t(e),s=Gi(e.field),o=Gi(e.key),a=(e.groupby||[]).map(Gi),u=J4t(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,w,E;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(_r(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function J4t(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):K4t)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function hee(e){iy.call(this,e)}hee.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Jk},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ft(hee,iy,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{yn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function pee(e){Oe.call(this,null,e)}pee.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ft(pee,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=iee(r,e.groupby,e.field),s=(e.groupby||[]).map(Gi),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Ue("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Ah(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=BZ(h,o)[a],m=e.counts?h.length:1,g=c||Ah(h);W4(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(_r(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function o3e(e){Gr.call(this,null,Z4t,e)}ft(o3e,Gr);function Z4t(e){return this.value&&!e.modified()?this.value:wZ(e.fields,e.flat)}function a3e(e){Oe.call(this,[],e),this._pending=null}ft(a3e,Oe,{transform(e,t){const n=t.dataflow;return this._pending?k9(this,t,this._pending):eFt(e)?t.StopPropagation:e.values?k9(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=mt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>k9(this,t,mt(r.data)))}});function eFt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function k9(e,t,n){n.forEach(_r);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function mee(e){Oe.call(this,{},e)}mee.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ft(mee,Oe,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Ue('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Ue('The "as" parameter has too few output field names.'),c=c||i.map(Gi),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Ue("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function u3e(e){Gr.call(this,null,tFt,e)}ft(u3e,Gr);function tFt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function l3e(e){Gr.call(this,null,nFt,e)}ft(l3e,Gr);function nFt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function c3e(e){Oe.call(this,null,e)}ft(c3e,Oe,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function gee(e){iy.call(this,e)}gee.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Jk,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ft(gee,iy,{_transform:iy.prototype.transform,transform(e,t){return this._transform(rFt(e,t),t)}});function rFt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=da(n).concat(da(r)),o=sFt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>iFt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function iFt(e,t,n,r){return rl(i=>t(i)===e?n(i):NaN,r,e+"")}function sFt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(O4),t?i.slice(0,t):i}function f3e(e){G4.call(this,e)}ft(f3e,G4,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Mt(s),n,t,s);return(e.modified("field")||r&&t.modified(da(r)))&&Ue("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(_r(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function yee(e){Oe.call(this,null,e)}yee.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ft(yee,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=t3e(e.fields,e.as||[]),s=r?(a,u)=>oFt(a,u,r,i):j4;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Mt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,_r({}));o[Mt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Mt(a)]))}),n}});function oFt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function d3e(e){Oe.call(this,null,e)}ft(d3e,Oe,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function vee(e){Oe.call(this,null,e)}vee.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const aFt=1e-14;ft(vee,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=iee(i,e.groupby,e.field),o=(e.groupby||[]).map(Gi),a=[],u=e.step||.01,l=e.probs||Ru(u/2,1-aFt,u),c=l.length;return s.forEach(f=>{const d=$Z(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(_r(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function h3e(e){Oe.call(this,null,e)}ft(h3e,Oe,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Mt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=PZ(i);r[Mt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Mt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function bee(e){Oe.call(this,[],e),this.count=0}bee.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ft(bee,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Mt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*Dc()),d<o.length&&d>=u&&(f=o[d],s[Mt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Mt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Mt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Mt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Mt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Mt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Mt(c)])),this.count=a,this.value=n.source=o,n}});function _ee(e){Oe.call(this,null,e)}_ee.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ft(_ee,Oe,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Ru(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,_r(s)}),n.add=t.add.concat(this.value),n}});function p3e(e){Oe.call(this,null,e),this.modified(!0)}ft(p3e,Oe,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function wee(e){Oe.call(this,null,e)}const m3e=["unit0","unit1"];wee.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:TZ,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:m3e}]};ft(wee,Oe,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?$S:OS)(s.unit).offset,a=e.as||m3e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(da(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:dOe({extent:e.extent||Ah(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=AZ(r),o=this.value||{},a=(n?rOe:nOe)(s,i);return a.unit=Kn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function g3e(e){Oe.call(this,DS(),e)}ft(g3e,Oe,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function y3e(e){Oe.call(this,null,e)}ft(y3e,Oe,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(qb(e.sort)):t.source).map(e.field))}});function uFt(e,t,n,r){const i=gI[e](t,n);return{init:i.init||Ug,update:function(s,o){o[r]=i.next(s)}}}const gI={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=gI.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Ue("ntile num must be greater than zero.");const n=gI.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Ue("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=lFt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function lFt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const cFt=Object.keys(gI);function v3e(e){const t=mt(e.ops),n=mt(e.fields),r=mt(e.params),i=mt(e.aggregate_params),s=mt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){mt(da(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=Gi(g),w=GOe(p,b,s[m]);if(h(g),o.push(w),Ft(gI,p))a.push(uFt(p,g,y,w));else{if(g==null&&p!=="count"&&Ue("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let E=l[b];E||(E=l[b]=[],E.field=g,f.push(E)),E.push(YOe(p,v,w))}}),(c.length||f.length)&&(this.cell=fFt(f,c,d)),this.inputs=Object.keys(u)}const b3e=v3e.prototype;b3e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};b3e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function fFt(e,t,n){e=e.map(u=>XOe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new JZ;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function Eee(e){Oe.call(this,{},e),this._mlen=0,this._mods=[]}Eee.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:cFt.concat(Jk)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ft(Eee,Oe,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=qb(e.sort),i=XV(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new v3e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)dFt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=QOe(Mt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function dFt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?eS(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||_a(-1)};t.init();for(let f=0;f<u;++f)hFt(c,o,f,u),s&&pFt(c,l),t.update(c,a[f])}function hFt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function pFt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const mFt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:iy,bin:ZZ,collect:eee,compare:JOe,countpattern:tee,cross:nee,density:ree,dotbin:see,expression:r3e,extent:oee,facet:G4,field:i3e,filter:uee,flatten:lee,fold:cee,formula:fee,generate:s3e,impute:dee,joinaggregate:hee,kde:pee,key:o3e,load:a3e,lookup:mee,multiextent:u3e,multivalues:l3e,params:c3e,pivot:gee,prefacet:f3e,project:yee,proxy:d3e,quantile:vee,relay:h3e,sample:bee,sequence:_ee,sieve:p3e,subflow:aee,timeunit:wee,tupleindex:g3e,values:y3e,window:Eee},Symbol.toStringTag,{value:"Module"}));function A0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const gFt=()=>typeof Image<"u"?Image:null;function xee(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const yFt="identity",ax="linear",Nm="log",Zk="pow",eR="sqrt",Y4="symlog",nb="time",rb="utc",lh="sequential",LS="diverging",ux="quantile",K4="quantize",X4="threshold",See="ordinal",QV="point",_3e="band",Tee="bin-ordinal",Us="continuous",tR="discrete",nR="discretizing",Hc="interpolating",Aee="temporal";function vFt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function bFt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function Cee(){const e=iS().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=xee(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Ru(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,L0(h,m)-1),v=m===g?y:L0(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return Cee().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function w3e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return w3e(t())},e}function _Ft(){return w3e(Cee().paddingInner(1))}var wFt=Array.prototype.map;function EFt(e){return wFt.call(e,la)}const xFt=Array.prototype.slice;function E3e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(L0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=EFt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=xFt.call(r),n):t.slice()},n.tickFormat=function(r,i){return _Te(e[0],Kn(e),r??10,i)},n.copy=function(){return E3e().domain(n.domain()).range(n.range())},n}const Y$=new Map,x3e=Symbol("vega_scale");function S3e(e){return e[x3e]=!0,e}function SFt(e){return e&&e[x3e]===!0}function TFt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?vFt(s):s.invertExtent?bFt(s):void 0),s.type=e,S3e(s)};return r.metadata=qf(mt(n)),r}function pr(e,t,n){return arguments.length>1?(Y$.set(e,TFt(e,t,n)),this):T3e(e)?Y$.get(e):void 0}pr(yFt,wTe);pr(ax,vm,Us);pr(Nm,xTe,[Us,Nm]);pr(Zk,yK,Us);pr(eR,Ipt,Us);pr(Y4,STe,Us);pr(nb,LTe,[Us,Aee]);pr(rb,Vmt,[Us,Aee]);pr(lh,wK,[Us,Hc]);pr(`${lh}-${ax}`,wK,[Us,Hc]);pr(`${lh}-${Nm}`,FTe,[Us,Hc,Nm]);pr(`${lh}-${Zk}`,EK,[Us,Hc]);pr(`${lh}-${eR}`,Hmt,[Us,Hc]);pr(`${lh}-${Y4}`,jTe,[Us,Hc]);pr(`${LS}-${ax}`,BTe,[Us,Hc]);pr(`${LS}-${Nm}`,UTe,[Us,Hc,Nm]);pr(`${LS}-${Zk}`,xK,[Us,Hc]);pr(`${LS}-${eR}`,qmt,[Us,Hc]);pr(`${LS}-${Y4}`,zTe,[Us,Hc]);pr(ux,TTe,[nR,ux]);pr(K4,ATe,nR);pr(X4,CTe,nR);pr(Tee,E3e,[tR,nR]);pr(See,iS,tR);pr(_3e,Cee,tR);pr(QV,_Ft,tR);function T3e(e){return Y$.has(e)}function Gb(e,t){const n=Y$.get(e);return n&&n.metadata[t]}function Iee(e){return Gb(e,Us)}function lx(e){return Gb(e,tR)}function JV(e){return Gb(e,nR)}function A3e(e){return Gb(e,Nm)}function AFt(e){return Gb(e,Aee)}function C3e(e){return Gb(e,Hc)}function I3e(e){return Gb(e,ux)}const CFt=["clamp","base","constant","exponent"];function k3e(e,t){const n=t[0],r=Kn(t)-n;return function(i){return e(n+i*r)}}function Q4(e,t,n){return XY(kee(t||"rgb",n),e)}function R3e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function N3e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?_a(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=pr(s)().domain([t,n]).range([0,1]),CFt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function kee(e,t){const n=wlt[IFt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function IFt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const kFt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},RFt={accent:Gmt,category10:Wmt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Ymt,observable10:Kmt,paired:Xmt,pastel1:Qmt,pastel2:Jmt,set1:Zmt,set2:egt,set3:tgt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function P3e(e){if(Ve(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function D3e(e,t){for(const n in e)Ree(n,t(e[n]))}const ope={};D3e(RFt,P3e);D3e(kFt,e=>Q4(P3e(e)));function Ree(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(ope[e]=t,this):ope[e]}const DD="symbol",NFt="discrete",PFt="gradient",DFt=e=>Ve(e)?e.map(t=>String(t)):String(e),OFt=(e,t)=>e[1]-t[1],$Ft=(e,t)=>t[1]-e[1];function Nee(e,t,n){let r;return ar(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Kk(e.domain())/n||1)+1))),yt(t)&&(r=t.step,t=t.interval),gt(t)&&(t=e.type===nb?OS(t):e.type==rb?$S(t):Ue("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function O3e(e,t,n){let r=e.range(),i=r[0],s=Kn(r),o=OFt;if(i>s&&(r=s,s=i,i=r,o=$Ft),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Kn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function Pee(e,t){return e.bins?O3e(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function $3e(e,t,n,r,i,s){const o=t.type;let a=DFt;if(o===nb||i===nb)a=e.timeFormat(r);else if(o===rb||i===rb)a=e.utcFormat(r);else if(A3e(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=M3e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function M3e(e,t,n){const r=Pee(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const ZV={[ux]:"quantiles",[K4]:"thresholds",[X4]:"domain"},L3e={[ux]:"quantiles",[K4]:"domain"};function F3e(e,t){return e.bins?FFt(e.bins):e.type===Nm?M3e(e,t,!0):ZV[e.type]?LFt(e[ZV[e.type]]()):Pee(e,t)}function MFt(e,t,n){const r=t[L3e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function LFt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function FFt(e){const t=e.slice(0,-1);return t.max=Kn(e),t}const jFt=e=>ZV[e.type]||e.bins;function j3e(e,t,n,r,i,s,o){const a=L3e[t.type]&&s!==nb&&s!==rb?MFt(e,t,i):$3e(e,t,n,i,s,o);return r===DD&&jFt(t)?BFt(a):r===NFt?UFt(a):zFt(a)}const BFt=e=>(t,n,r)=>{const i=ape(r[n+1],ape(r.max,1/0)),s=upe(t,e),o=upe(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},ape=(e,t)=>e??t,UFt=e=>(t,n)=>n?e(t):null,zFt=e=>t=>e(t),upe=(e,t)=>Number.isFinite(e)?t(e):null;function VFt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Kn(t),s=i-r;if(e.type===X4){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function HFt(e,t,n,r){const i=r||t.type;return gt(n)&&AFt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===nb?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===rb?e.utcFormat("%A, %d %B %Y, %X UTC"):j3e(e,t,5,null,n,r,!0)}function B3e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=HFt(e,t,n.format,n.formatType);if(JV(t.type)){const s=F3e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(lx(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Kn(s))}`}}let U3e=0;function qFt(){U3e=0}const K$="p_";function Dee(e){return e&&e.gradient}function z3e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?K$:"";return i||(i=e.id="gradient_"+U3e++,r==="radial"?(e.x1=md(e.x1,.5),e.y1=md(e.y1,.5),e.r1=md(e.r1,0),e.x2=md(e.x2,.5),e.y2=md(e.y2,.5),e.r2=md(e.r2,.5),s=K$):(e.x1=md(e.x1,0),e.y1=md(e.y1,0),e.x2=md(e.x2,1),e.y2=md(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function md(e,t){return e??t}function V3e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const lpe={basis:{curve:mgt},"basis-closed":{curve:ggt},"basis-open":{curve:ygt},bundle:{curve:vgt,tension:"beta",value:.85},cardinal:{curve:bgt,tension:"tension",value:0},"cardinal-open":{curve:wgt,tension:"tension",value:0},"cardinal-closed":{curve:_gt,tension:"tension",value:0},"catmull-rom":{curve:Egt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:xgt,tension:"alpha",value:.5},"catmull-rom-open":{curve:Sgt,tension:"alpha",value:.5},linear:{curve:SK},"linear-closed":{curve:Tgt},monotone:{horizontal:Cgt,vertical:Agt},natural:{curve:Igt},step:{curve:kgt},"step-after":{curve:Ngt},"step-before":{curve:Rgt}};function Oee(e,t,n){var r=Ft(lpe,e)&&lpe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const WFt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},GFt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,YFt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,KFt=/^((\s+,?\s*)|(,\s*))/,XFt=/^[01]/;function cx(e){const t=[];return(e.match(GFt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=WFt[s],a=QFt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function QFt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?XFt:YFt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(KFt);u!==null&&(i+=u[0].length)}return r}const sy=Math.PI/180,JFt=1e-14,Uv=Math.PI/2,zd=Math.PI*2,I_=Math.sqrt(3)/2;var R9={},N9={},H3e=[].join;function ZFt(e,t,n,r,i,s,o,a,u){const l=H3e.call(arguments);if(R9[l])return R9[l];const c=o*sy,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,w=g*a+y*u,E=v*a+b*u,T=g*e+y*t,S=v*e+b*t;let C=1/((T-w)*(T-w)+(S-E)*(S-E))-.25;C<0&&(C=0);let k=Math.sqrt(C);s==i&&(k=-k);const N=.5*(w+T)-k*(S-E),O=.5*(E+S)+k*(T-w),P=Math.atan2(E-O,w-N);let F=Math.atan2(S-O,T-N)-P;F<0&&s===1?F+=zd:F>0&&s===0&&(F-=zd);const M=Math.ceil(Math.abs(F/(Uv+.001))),B=[];for(let U=0;U<M;++U){const H=P+U*F/M,D=P+(U+1)*F/M;B[U]=[N,O,H,D,n,r,f,d]}return R9[l]=B}function e5t(e){const t=H3e.call(e);if(N9[t])return N9[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),w=8/3*b*b/Math.sin(v),E=n+p-w*m,T=r+m+w*p,S=n+g,A=r+y,C=S+w*y,k=A-w*g;return N9[t]=[c*E+f*T,d*E+h*T,c*C+f*k,d*C+h*k,c*S+f*A,d*S+h*A]}const nc=["l",0,0,0,0,0,0,0];function t5t(e,t,n){const r=nc[0]=e[0];if(r==="a"||r==="A")nc[1]=t*e[1],nc[2]=n*e[2],nc[3]=e[3],nc[4]=e[4],nc[5]=e[5],nc[6]=t*e[6],nc[7]=n*e[7];else if(r==="h"||r==="H")nc[1]=t*e[1];else if(r==="v"||r==="V")nc[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)nc[i]=(i%2==1?t:n)*e[i];return nc}function yI(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=t5t(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":cpe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":cpe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function cpe(e,t,n,r){const i=ZFt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=e5t(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const fpe=.5773502691896257,dpe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,zd)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=I_*n,i=r-n*fpe,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=I_*n,i=r-n*fpe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=I_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=I_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=I_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=I_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function q3e(e){return Ft(dpe,e)?dpe[e]:n5t(e)}var P9={};function n5t(e){if(!Ft(P9,e)){const t=cx(e);P9[e]={draw:function(n,r){yI(n,t,0,0,Math.sqrt(r)/2)}}}return P9[e]}const mg=.448084975506;function r5t(e){return e.x}function i5t(e){return e.y}function s5t(e){return e.width}function o5t(e){return e.height}function dp(e){return typeof e=="function"?e:()=>+e}function cP(e,t,n){return Math.max(t,Math.min(e,n))}function W3e(){var e=r5t,t=i5t,n=s5t,r=o5t,i=dp(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=cP(+i.call(this,c),0,v),w=cP(+s.call(this,c),0,v),E=cP(+o.call(this,c),0,v),T=cP(+a.call(this,c),0,v);if(u||(u=h=u6()),b<=0&&w<=0&&E<=0&&T<=0)u.rect(p,m,g,y);else{var S=p+g,A=m+y;u.moveTo(p+b,m),u.lineTo(S-w,m),u.bezierCurveTo(S-mg*w,m,S,m+mg*w,S,m+w),u.lineTo(S,A-T),u.bezierCurveTo(S,A-mg*T,S-mg*T,A,S-T,A),u.lineTo(p+E,A),u.bezierCurveTo(p+mg*E,A,p,A-mg*E,p,A-E),u.lineTo(p,m+b),u.bezierCurveTo(p,m+mg*b,p+mg*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=dp(c),l):e},l.y=function(c){return arguments.length?(t=dp(c),l):t},l.width=function(c){return arguments.length?(n=dp(c),l):n},l.height=function(c){return arguments.length?(r=dp(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=dp(c),s=f!=null?dp(f):i,a=d!=null?dp(d):i,o=h!=null?dp(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function G3e(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+b),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,zd);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=u6()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function rR(e,t){return e??t}const iR=e=>e.x||0,sR=e=>e.y||0,a5t=e=>e.width||0,u5t=e=>e.height||0,l5t=e=>(e.x||0)+(e.width||0),c5t=e=>(e.y||0)+(e.height||0),f5t=e=>e.startAngle||0,d5t=e=>e.endAngle||0,h5t=e=>e.padAngle||0,p5t=e=>e.innerRadius||0,m5t=e=>e.outerRadius||0,g5t=e=>e.cornerRadius||0,y5t=e=>rR(e.cornerRadiusTopLeft,e.cornerRadius)||0,v5t=e=>rR(e.cornerRadiusTopRight,e.cornerRadius)||0,b5t=e=>rR(e.cornerRadiusBottomRight,e.cornerRadius)||0,_5t=e=>rR(e.cornerRadiusBottomLeft,e.cornerRadius)||0,w5t=e=>rR(e.size,64),E5t=e=>e.size||1,J4=e=>e.defined!==!1,x5t=e=>q3e(e.shape||"circle"),S5t=sz().startAngle(f5t).endAngle(d5t).padAngle(h5t).innerRadius(p5t).outerRadius(m5t).cornerRadius(g5t),T5t=YTe().x(iR).y1(sR).y0(c5t).defined(J4),A5t=YTe().y(sR).x1(iR).x0(l5t).defined(J4),C5t=GTe().x(iR).y(sR).defined(J4),I5t=W3e().x(iR).y(sR).width(a5t).height(u5t).cornerRadius(y5t,v5t,b5t,_5t),k5t=pgt().type(x5t).size(w5t),R5t=G3e().x(iR).y(sR).defined(J4).size(E5t);function $ee(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function N5t(e,t){return S5t.context(e)(t)}function P5t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?A5t:T5t).curve(Oee(r,n.orient,n.tension)).context(e)(t)}function D5t(e,t){const n=t[0],r=n.interpolate||"linear";return C5t.curve(Oee(r,n.orient,n.tension)).context(e)(t)}function FS(e,t,n,r){return I5t.context(e)(t,n,r)}function O5t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function $5t(e,t){return k5t.context(e)(t)}function M5t(e,t){return R5t.context(e)(t)}var Y3e=1;function K3e(){Y3e=1}function Mee(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+Y3e++),o=i.clipping[s]||(i.clipping[s]={id:s});return vn(r)?o.path=r(null):$ee(n)?o.path=FS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function xs(e){this.clear(),e&&this.union(e)}xs.prototype={clone(){return new xs(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function Z4(e){this.mark=e,this.bounds=this.bounds||new xs}function eF(e){Z4.call(this,e),this.items=this.items||[]}ft(eF,Z4);class X3e{constructor(t){this._pending=0,this._loader=t||M4()}pending(){return this._pending}sanitizeURL(t){const n=this;return hpe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(jT(n),r)).catch(()=>(jT(n),null))}loadImage(t){const n=this,r=gFt();return hpe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Ft(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>jT(n),o.onerror=()=>jT(n),o.src=s,o}).catch(i=>(jT(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function hpe(e){e._pending+=1}function jT(e){e._pending-=1}function Zm(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?L5t(t,r):0))}return e}function L5t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const F5t=zd-1e-8;let tF,OD,$D,c1,eH,MD,tH,nH;const Xg=(e,t)=>tF.add(e,t),LD=(e,t)=>Xg(OD=e,$D=t),ppe=e=>Xg(e,tF.y1),mpe=e=>Xg(tF.x1,e),zv=(e,t)=>eH*e+tH*t,Vv=(e,t)=>MD*e+nH*t,D9=(e,t)=>Xg(zv(e,t),Vv(e,t)),O9=(e,t)=>LD(zv(e,t),Vv(e,t));function oR(e,t){return tF=e,t?(c1=t*sy,eH=nH=Math.cos(c1),MD=Math.sin(c1),tH=-MD):(eH=nH=1,c1=MD=tH=0),j5t}const j5t={beginPath(){},closePath(){},moveTo:O9,lineTo:O9,rect(e,t,n,r){c1?(D9(e+n,t),D9(e+n,t+r),D9(e,t+r),O9(e,t)):(Xg(e+n,t+r),LD(e,t))},quadraticCurveTo(e,t,n,r){const i=zv(e,t),s=Vv(e,t),o=zv(n,r),a=Vv(n,r);gpe(OD,i,o,ppe),gpe($D,s,a,mpe),LD(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=zv(e,t),a=Vv(e,t),u=zv(n,r),l=Vv(n,r),c=zv(i,s),f=Vv(i,s);ype(OD,o,u,c,ppe),ype($D,a,l,f,mpe),LD(c,f)},arc(e,t,n,r,i,s){if(r+=c1,i+=c1,OD=n*Math.cos(i)+e,$D=n*Math.sin(i)+t,Math.abs(i-r)>F5t)Xg(e-n,t-n),Xg(e+n,t+n);else{const o=l=>Xg(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%zd,r<0&&(r+=zd),i=i%zd,i<0&&(i+=zd),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=zd,a=r-r%Uv,u=0;u<4&&a>i;++u,a-=Uv)o(a);else for(a=r-r%Uv+Uv,u=0;u<4&&a<i;++u,a=a+Uv)o(a)}}};function gpe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function ype(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>JFt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(vpe(u,e,t,n,r)),0<l&&l<1&&i(vpe(l,e,t,n,r))}function vpe(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var C0=(C0=A0(1,1))?C0.getContext("2d"):null;const rH=new xs;function Lee(e){return function(t,n){if(!C0)return!0;e(C0,t),rH.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=rH;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(C0.isPointInPath(u,a))return!0;return!1}}function Fee(e,t){return t.contains(e.x||0,e.y||0)}function Q3e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(rH.set(n,r,n+i,r+s))}function J3e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return Ew(t,n,r,i,s)}function Ew(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function fx(e,t){e.globalCompositeOperation=t.blend||"source-over"}function nf(e,t){return e??t}function bpe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function B5t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+nf(t.x1,.5)*r,n.y1+nf(t.y1,.5)*i,Math.max(r,i)*nf(t.r1,0),n.x1+nf(t.x2,.5)*r,n.y1+nf(t.y2,.5)*i,Math.max(r,i)*nf(t.r2,.5));else{const o=nf(t.x1,0),a=nf(t.y1,0),u=nf(t.x2,1),l=nf(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=A0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=bpe(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return bpe(s,t.stops)}function Z3e(e,t,n){return Dee(n)?B5t(e,n,t.bounds):n}function X$(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=Z3e(e,t,t.fill),!0):!1}var U5t=[];function dx(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=Z3e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||U5t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function z5t(e,t){return e.zindex-t.zindex||e.index-t.index}function jee(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(z5t)}function Gf(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=jee(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function Q$(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=jee(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Bee(e){return function(t,n,r){Gf(n,i=>{(!r||r.intersects(i.bounds))&&e$e(e,t,i,i)})}}function V5t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&e$e(e,t,n.items[0],n.items)}}function e$e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(fx(t,n),n.fill&&X$(t,n,i)&&t.fill(),n.stroke&&dx(t,n,i)&&t.stroke()))}function nF(e){return e=e||Nc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,Q$(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function aR(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Uee(e){return nF(aR(e))}function E1(e,t){return"translate("+e+","+t+")"}function zee(e){return"rotate("+e+")"}function H5t(e,t){return"scale("+e+","+t+")"}function t$e(e){return E1(e.x||0,e.y||0)}function q5t(e){return E1(e.x||0,e.y||0)+(e.angle?" "+zee(e.angle):"")}function W5t(e){return E1(e.x||0,e.y||0)+(e.angle?" "+zee(e.angle):"")+(e.scaleX||e.scaleY?" "+H5t(e.scaleX||1,e.scaleY||1):"")}function Vee(e,t,n){function r(o,a){o("transform",q5t(a)),o("d",t(null,a))}function i(o,a){return t(oR(o,a.angle),a),Zm(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=sy),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Bee(s),pick:Uee(s),isect:n||Lee(s)}}var G5t=Vee("arc",N5t);function Y5t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function K5t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function X5t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function Hee(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(oR(u),c),Zm(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=aR(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:V5t(s),pick:a,isect:Fee,tip:n}}var Q5t=Hee("area",P5t,Y5t);function J5t(e,t){var n=t.clip;e.save(),vn(n)?(e.beginPath(),n(e),e.clip()):n$e(e,t.group)}function n$e(e,t){e.beginPath(),$ee(t)?FS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function r$e(e){const t=nf(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Z5t(e,t){e("transform",t$e(t))}function i$e(e,t){const n=r$e(t);e("d",FS(null,t,n,n))}function ejt(e,t){e("class","background"),e("aria-hidden",!0),i$e(e,t)}function tjt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?i$e(e,t):e("d","")}function njt(e,t,n){const r=t.clip?Mee(n,t,t):null;e("clip-path",r)}function rjt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Zm(e,t),e.translate(t.x||0,t.y||0)}function vI(e,t,n,r){const i=r$e(t);e.beginPath(),FS(e,t,(n||0)+i,(r||0)+i)}const ijt=aR(vI),sjt=aR(vI,!1),ojt=aR(vI,!0);function ajt(e,t,n,r){Gf(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(vI(e,i,s,o),fx(e,i),i.fill&&X$(e,i,u)&&e.fill(),i.stroke&&!a&&dx(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&n$e(e,i),n&&n.translate(-s,-o),Gf(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(vI(e,i,s,o),fx(e,i),dx(e,i,u)&&e.stroke())})}function ujt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return Q$(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&$ee(u)&&!ojt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&sjt(e,u,o,a)?(e.restore(),u):(l=Q$(u,v=>ljt(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&ijt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function ljt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var cjt={type:"group",tag:"g",nested:!1,attr:Z5t,bound:rjt,draw:ajt,pick:ujt,isect:Q3e,content:njt,background:ejt,foreground:tjt},bI={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function qee(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Wee(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Gee(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function rF(e,t){return e==="center"?t/2:e==="right"?t:0}function iF(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function fjt(e,t,n){const r=qee(t,n),i=Wee(t,r),s=Gee(t,r),o=(t.x||0)-rF(t.align,i),a=(t.y||0)-iF(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,bI["xmlns:xlink"],"xlink:href"),e("transform",E1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function djt(e,t){const n=t.image,r=Wee(t,n),i=Gee(t,n),s=(t.x||0)-rF(t.align,r),o=(t.y||0)-iF(t.baseline,i);return e.set(s,o,s+r,o+i)}function hjt(e,t,n){Gf(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=qee(r,this);let s=Wee(r,i),o=Gee(r,i);if(s===0||o===0)return;let a=(r.x||0)-rF(r.align,s),u=(r.y||0)-iF(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(fx(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var pjt={type:"image",tag:"image",nested:!1,attr:fjt,bound:djt,draw:hjt,pick:nF(),isect:Nc,get:qee,xOffset:rF,yOffset:iF},mjt=Hee("line",D5t,K5t);function gjt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",W5t(t)),e("d",t.path)}function FD(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*sy,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=cx(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),yI(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):yI(e,u,r,i,s,o)}function yjt(e,t){return FD(oR(e,t.angle),t)?e.set(0,0,0,0):Zm(e,t,!0)}var vjt={type:"path",tag:"path",nested:!1,attr:gjt,bound:yjt,draw:Bee(FD),pick:Uee(FD),isect:Lee(FD)};function bjt(e,t){e("d",FS(null,t))}function _jt(e,t){var n,r;return Zm(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function _pe(e,t){e.beginPath(),FS(e,t)}var wjt={type:"rect",tag:"path",nested:!1,attr:bjt,bound:_jt,draw:Bee(_pe),pick:Uee(_pe),isect:Q3e};function Ejt(e,t){e("transform",t$e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function xjt(e,t){var n,r;return Zm(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function s$e(e,t,n){var r,i,s,o;return t.stroke&&dx(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function Sjt(e,t,n){Gf(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&s$e(e,r,i)&&(fx(e,r),e.stroke())}})}function Tjt(e,t,n,r){return e.isPointInStroke?s$e(e,t,1)&&e.isPointInStroke(n,r):!1}var Ajt={type:"rule",tag:"line",nested:!1,attr:Ejt,bound:xjt,draw:Sjt,pick:nF(Tjt),isect:J3e},Cjt=Vee("shape",O5t),Ijt=Vee("symbol",$5t,Fee);const wpe=VDe();var Cl={height:Gh,measureWidth:Yee,estimateWidth:J$,width:J$,canvas:o$e};o$e(!0);function o$e(e){Cl.width=e&&C0?Yee:J$}function J$(e,t){return a$e(ay(e,t),Gh(e))}function a$e(e,t){return~~(.8*e.length*t)}function Yee(e,t){return Gh(e)<=0||!(t=ay(e,t))?0:u$e(t,sF(e))}function u$e(e,t){const n=`(${t}) ${e}`;let r=wpe.get(n);return r===void 0&&(C0.font=t,r=C0.measureText(e).width,wpe.set(n,r)),r}function Gh(e){return e.fontSize!=null?+e.fontSize||0:11}function oy(e){return e.lineHeight!=null?e.lineHeight:Gh(e)+2}function kjt(e){return Ve(e)?e.length>1?e:e[0]:e}function uR(e){return kjt(e.lineBreak&&e.text&&!Ve(e.text)?e.text.split(e.lineBreak):e.text)}function Kee(e){const t=uR(e);return(Ve(t)?t.length-1:0)*oy(e)}function ay(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Njt(e,n):n}function Rjt(e){if(Cl.width===Yee){const t=sF(e);return n=>u$e(n,t)}else if(Cl.width===J$){const t=Gh(e);return n=>a$e(n,t)}else return t=>Cl.width(e,t)}function Njt(e,t){var n=+e.limit,r=Rjt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function lR(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function sF(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Gh(e)+"px "+lR(e,t)}function Xee(e){var t=e.baseline,n=Gh(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*oy(e):t==="line-bottom"?.29*n-.5*oy(e):0)}const Pjt={left:"start",center:"middle",right:"end"},MA=new xs;function oF(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Uv,t+=r*Math.cos(i),n+=r*Math.sin(i)),MA.x1=t,MA.y1=n,MA}function Djt(e,t){var n=t.dx||0,r=(t.dy||0)+Xee(t),i=oF(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",Pjt[t.align]||"start"),a?(u=E1(s,o)+" "+zee(a),(n||r)&&(u+=" "+E1(n,r))):u=E1(s+n,o+r),e("transform",u)}function Qee(e,t,n){var r=Cl.height(t),i=t.align,s=oF(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Xee(t)-Math.round(.8*r),c=uR(t),f;if(Ve(c)?(r+=oy(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Cl.width(t,h)),0)):f=Cl.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*sy,o,a);else if(n===2)return e.rotatedPoints(t.angle*sy,o,a);return e}function Ojt(e,t,n){Gf(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=sF(r),e.textAlign=r.align||"left",s=oF(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*sy),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Xee(r),c=uR(r),fx(e,r),Ve(c))for(l=oy(r),u=0;u<c.length;++u)f=ay(r,c[u]),r.fill&&X$(e,r,i)&&e.fillText(f,o,a),r.stroke&&dx(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=ay(r,c),r.fill&&X$(e,r,i)&&e.fillText(f,o,a),r.stroke&&dx(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function $jt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=oF(t),a=o.x1,u=o.y1,l=Qee(MA,t,1),c=-t.angle*sy,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function Mjt(e,t){const n=Qee(MA,e,2);return Ew(t,n[0],n[1],n[2],n[3])||Ew(t,n[0],n[1],n[4],n[5])||Ew(t,n[4],n[5],n[6],n[7])||Ew(t,n[2],n[3],n[6],n[7])}var Ljt={type:"text",tag:"text",nested:!1,attr:Djt,bound:Qee,draw:Ojt,pick:nF($jt),isect:Mjt},Fjt=Hee("trail",M5t,X5t),Ul={arc:G5t,area:Q5t,group:cjt,image:pjt,line:mjt,path:vjt,rect:wjt,rule:Ajt,shape:Cjt,symbol:Ijt,text:Ljt,trail:Fjt};function iH(e,t,n){var r=Ul[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new xs),e,n)}var Epe={mark:null};function l$e(e,t,n){var r=Ul[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(Epe.mark=e,l=Epe),c=iH(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new xs,o)for(a=0,u=s.length;a<u;++a)t.union(iH(s[a],i,n));return e.bounds=t}const jjt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function c$e(e,t){return JSON.stringify(e,jjt,t)}function f$e(e){const t=typeof e=="string"?JSON.parse(e):e;return d$e(t)}function d$e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&d$e(n[i]);return t&&l$e(e),e}class h$e{constructor(t){arguments.length?this.root=f$e(t):(this.root=xpe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new eF(this.root)])}toJSON(t){return c$e(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=xpe(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function xpe(e,t){const n={bounds:new xs,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Qg(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Jee(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Ns(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Qg(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function hc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function p$e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function aF(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Bjt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Ul[i.marktype]).tip){for(o=aF(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let Zee=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||M4(),this._tooltip=n||Ujt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Qg(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=Bjt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function Ujt(e,t,n,r){e.element().setAttribute("title",r||"")}class cR{constructor(t){this._el=null,this._bgcolor=null,this._loader=new X3e(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const zjt="keydown",Vjt="keypress",Hjt="keyup",m$e="dragenter",jD="dragleave",g$e="dragover",sH="pointerdown",qjt="pointerup",Z$="pointermove",BD="pointerout",y$e="pointerover",oH="mousedown",Wjt="mouseup",v$e="mousemove",eM="mouseout",b$e="mouseover",tM="click",Gjt="dblclick",Yjt="wheel",_$e="mousewheel",nM="touchstart",rM="touchmove",iM="touchend",Kjt=[zjt,Vjt,Hjt,m$e,jD,g$e,sH,qjt,Z$,BD,y$e,oH,Wjt,v$e,eM,b$e,tM,Gjt,Yjt,_$e,nM,rM,iM],aH=Z$,LA=eM,uH=tM;class fR extends Zee{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Kjt,this.pointermove=Tpe([Z$,v$e],[y$e,b$e],[BD,eM]),this.dragover=Tpe([g$e],[m$e],[jD]),this.pointerout=Ape([BD,eM]),this.dragleave=Ape([jD])}initialize(t,n,r){return this._canvas=t&&Jee(t,"canvas"),[tM,oH,sH,Z$,BD,jD].forEach(i=>Spe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(_$e,t)}pointerdown(t){this._down=this._active,this.fire(sH,t)}mousedown(t){this._down=this._active,this.fire(oH,t)}click(t){this._down===this._active&&(this.fire(tM,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(nM,t,!0)}touchmove(t){this.fire(rM,t,!0)}touchend(t){this.fire(iM,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===uH&&i&&i.href?this.handleHref(n,i,i.href):(t===aH||t===LA)&&this.handleTooltip(n,i,t!==LA),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Spe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=aF(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Ul[t.marktype].pick.call(this,o,t,n,r,i,s)}}const Xjt=e=>e===nM||e===rM||e===iM?[nM,rM,iM]:[e];function Spe(e,t){Xjt(t).forEach(n=>Qjt(e,n))}function Qjt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function j2(e,t,n){t.forEach(r=>e.fire(r,n))}function Tpe(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?j2(this,e,r):((!i||!i.exit)&&j2(this,n,r),this._active=s,j2(this,t,r),j2(this,e,r))}}function Ape(e){return function(t){j2(this,e,t),this._active=null}}function Jjt(){return typeof window<"u"&&window.devicePixelRatio||1}function Zjt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?Jjt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class sM extends cR{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new xs,this._tempb=new xs}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:A0(1,1,this._options.type),t&&this._canvas&&(hc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)Zjt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Ue("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=e8t(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):t8t(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Ul[n.marktype];n.clip&&J5t(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const e8t=(e,t,n)=>new xs().set(0,0,t,n).translate(-e[0],-e[1]);function t8t(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class w$e extends Zee{constructor(t,n){super(t,n);const r=this;r._hrefHandler=$9(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=$9(r,(i,s)=>{r.handleTooltip(i,s,i.type!==LA)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(uH,this._hrefHandler),i.removeEventListener(aH,this._tooltipHandler),i.removeEventListener(LA,this._tooltipHandler)),this._svg=i=t&&Jee(t,"svg"),i&&(i.addEventListener(uH,this._hrefHandler),i.addEventListener(aH,this._tooltipHandler),i.addEventListener(LA,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:$9(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const $9=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},E$e="aria-hidden",ete="aria-label",tte="role",nte="aria-roledescription",x$e="graphics-object",rte="graphics-symbol",S$e=(e,t,n)=>({[tte]:e,[nte]:t,[ete]:n||void 0}),n8t=qf(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Cpe={axis:{desc:"axis",caption:s8t},legend:{desc:"legend",caption:o8t},"title-text":{desc:"title",caption:e=>`Title text '${kpe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${kpe(e)}'`}},Ipe={ariaRole:tte,ariaRoleDescription:nte,description:ete};function T$e(e,t){const n=t.aria===!1;if(e(E$e,n||void 0),n||t.description==null)for(const r in Ipe)e(Ipe[r],void 0);else{const r=t.mark.marktype;e(ete,t.description),e(tte,t.ariaRole||(r==="group"?x$e:rte)),e(nte,t.ariaRoleDescription||`${r} mark`)}}function A$e(e){return e.aria===!1?{[E$e]:!0}:n8t[e.role]?null:Cpe[e.role]?i8t(e,Cpe[e.role]):r8t(e)}function r8t(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return S$e(n?x$e:rte,`${t} mark container`,e.description)}function i8t(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return S$e(t.role||rte,t.desc,n.description||r(n))}catch{return null}}function kpe(e){return mt(e.text).join(" ")}function s8t(e){const t=e.datum,n=e.orient,r=t.title?C$e(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${lx(a)?"discrete":a} scale with ${B3e(o,s,e)}`}function o8t(e){const t=e.datum,n=t.title?C$e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return u8t(r)+(n?` titled '${n}'`:"")+` for ${a8t(s)} with ${B3e(u,a,e)}`}function C$e(e){try{return mt(Kn(e.items).items[0].text).join(" ")}catch{return null}}function a8t(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Kn(e)}function u8t(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const I$e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l8t=e=>I$e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function ite(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${l8t(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=I$e(u),a),toString:()=>e};return a}const k$e=e=>R$e(ite(),e)+"";function R$e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):R$e(e,r)}return e.close()}const oM={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},aM={blend:"mix-blend-mode"},N$e={fill:"none","stroke-miterlimit":10},BT=0,Rpe="http://www.w3.org/2000/xmlns/",ks=bI.xmlns;class ste extends cR{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Ns(t,0,"svg",ks),this._svg.setAttributeNS(Rpe,"xmlns",ks),this._svg.setAttributeNS(Rpe,"xmlns:xlink",bI["xmlns:xlink"]),this._svg.setAttribute("version",bI.version),this._svg.setAttribute("class","marks"),hc(t,1),this._root=Ns(this._svg,BT,"g",ks),Jg(this._root,N$e),hc(this._svg,BT+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Jg(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Ns(t,BT,"rect",ks),Jg(r,{width:this._width,height:this._height,fill:n}));const i=k$e(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),hc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Ul[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Npe(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Npe(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Ul[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=Ppe(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return hc(c,0),n._svg;c.setAttribute("class",p$e(n));const f=A$e(n);for(const m in f)Na(c,m,f[m]);l||Na(c,"pointer-events",u),Na(c,"clip-path",n.clip?Mee(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=Ppe(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&d8t(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):Gf(n,p),hc(c,h),c}_update(t,n,r){qp=n,na=n.__values__,T$e(FA,r),t.attr(FA,r,this);const i=p8t[t.type];i&&i.call(this,t,n,r),qp&&this.style(qp,r)}style(t,n){if(n!=null){for(const r in oM){let i=r==="font"?lR(n):n[r];if(i===na[r])continue;const s=oM[r];i==null?t.removeAttribute(s):(Dee(i)&&(i=z3e(i,this._defs.gradient,P$e())),t.setAttribute(s,i+"")),na[r]=i}for(const r in aM)UD(t,aM[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Ns(t,BT+1,"defs",ks)),i=c8t(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Ns(t,BT+1,"defs",ks)),i=f8t(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):hc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Npe(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function c8t(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Ns(e,n++,"pattern",ks);Jg(o,{id:K$+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Ns(o,0,"rect",ks),Jg(o,{width:1,height:1,fill:`url(${P$e()}#${t.id})`}),e=Ns(e,n++,"radialGradient",ks),Jg(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Ns(e,n++,"linearGradient",ks),Jg(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Ns(e,r,"stop",ks),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return hc(e,r),n}function f8t(e,t,n){let r;return e=Ns(e,n,"clipPath",ks),e.setAttribute("id",t.id),t.path?(r=Ns(e,0,"path",ks),r.setAttribute("d",t.path)):(r=Ns(e,0,"rect",ks),Jg(r,{x:0,y:0,width:t.width,height:t.height})),hc(e,1),n+1}function d8t(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Gf(n,o=>{i=e.mark(t,o,i,r),++s}),hc(t,1+s)}function Ppe(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Qg(o,r,ks),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Qg(o,"path",ks);s.appendChild(a),a.__data__=e;const u=Qg(o,"g",ks);s.appendChild(u),u.__data__=e;const l=Qg(o,"path",ks);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||h8t(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function h8t(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let qp=null,na=null;const p8t={group(e,t,n){const r=qp=t.childNodes[2];na=r.__values__,e.foreground(FA,n,this),na=t.__values__,qp=t.childNodes[1],e.content(FA,n,this);const i=qp=t.childNodes[0];e.background(FA,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==na.events&&(Na(r,"pointer-events",s),Na(i,"pointer-events",s),na.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Na(r,"display",null),this.style(i,n),Na(i,"stroke",null),o&&(n.fill=null),na=r.__values__,this.style(r,n),o&&(n.fill=o),qp=null}else Na(r,"display","none")},image(e,t,n){n.smooth===!1?(UD(t,"image-rendering","optimizeSpeed"),UD(t,"image-rendering","pixelated")):UD(t,"image-rendering",null)},text(e,t,n){const r=uR(n);let i,s,o,a;Ve(r)?(s=r.map(u=>ay(n,u)),i=s.join(`
`),i!==na.text&&(hc(t,0),o=t.ownerDocument,a=oy(n),s.forEach((u,l)=>{const c=Qg(o,"tspan",ks);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),na.text=i)):(s=ay(n,r),s!==na.text&&(t.textContent=s,na.text=s)),Na(t,"font-family",lR(n)),Na(t,"font-size",Gh(n)+"px"),Na(t,"font-style",n.fontStyle),Na(t,"font-variant",n.fontVariant),Na(t,"font-weight",n.fontWeight)}};function FA(e,t,n){t!==na[e]&&(n?m8t(qp,e,t,n):Na(qp,e,t),na[e]=t)}function UD(e,t,n){n!==na[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),na[t]=n)}function Jg(e,t){for(const n in t)Na(e,n,t[n])}function Na(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function m8t(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function P$e(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class D$e extends cR{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=ite();n.open("svg",yn({},bI,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",N$e,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Ul[n.marktype],i=r.tag,s=[T$e,r.attr];t.open("g",{class:p$e(n),"clip-path":n.clip?Mee(this,n,n.group):null},A$e(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=uR(a);if(Ve(l)){const c={x:0,dy:oy(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(ay(a,l[f])).close()}else t.text(ay(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Gf(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Gf(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&g8t(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:K$+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function g8t(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=lR(t),e["font-size"]=Gh(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in oM){let a=t[o];const u=oM[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(Dee(a)&&(a=z3e(a,i.gradient,"")),e[u]=a)}for(const o in aM){const a=t[o];a!=null&&(s=s||[],s.push(`${aM[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const cf={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function y8t(e){cf.svgMarkTypes=e.svgMarkTypes??["text"],cf.svgOnTop=e.svgOnTop??!0,cf.debug=e.debug??!1}class lH extends cR{constructor(t){super(t),this._svgRenderer=new ste(t),this._canvasRenderer=new sM(t)}initialize(t,n,r,i,s){this._root_el=Ns(t,0,"div");const o=Ns(this._root_el,0,"div"),a=Ns(this._root_el,1,"div");return this._root_el.style.position="relative",cf.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=cf.svgOnTop?a:o,this._canvasEl=cf.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return cf.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!cf.svgMarkTypes.includes(s));this._svgRenderer.render(t,cf.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return cf.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class O$e extends fR{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Ns(Ns(t,0,"div"),cf.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const $$e="canvas",M$e="hybrid",L$e="png",F$e="svg",j$e="none",Zg={Canvas:$$e,PNG:L$e,SVG:F$e,Hybrid:M$e,None:j$e},ib={};ib[$$e]=ib[L$e]={renderer:sM,headless:sM,handler:fR};ib[F$e]={renderer:ste,headless:D$e,handler:w$e};ib[M$e]={renderer:lH,headless:lH,handler:O$e};ib[j$e]={};function uF(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(ib[e]=t,this):ib[e]}function B$e(e,t,n){const r=[],i=new xs().union(t),s=e.marktype;return s?U$e(e,i,n,r):s==="group"?z$e(e,i,n,r):Ue("Intersect scene must be mark node or group item.")}function U$e(e,t,n,r){if(v8t(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)z$e(i[a],t,n,r);else for(const u=Ul[s].isect;a<o;++a){const l=i[a];V$e(l,t,u)&&r.push(l)}}return r}function v8t(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function z$e(e,t,n,r){n&&n(e.mark)&&V$e(e,t,Ul.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)U$e(i[u],t,n,r);t.translate(o,a)}return r}function V$e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const M9=new xs;function H$e(e){const t=e.clip;if(vn(t))t(oR(M9.clear()));else if(t)M9.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(M9)}const b8t=1e-9;function ote(e,t,n){return e===t?!0:n==="path"?q$e(e,t):e instanceof Date&&t instanceof Date?+e==+t:ar(e)&&ar(t)?Math.abs(e-t)<=b8t:!e||!t||!yt(e)&&!yt(t)?e==t:_8t(e,t)}function q$e(e,t){return ote(cx(e),cx(t))}function _8t(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!ote(e[i],t[i],i))return!1;return typeof e==typeof t}function w8t(){K3e(),qFt()}const hx="top",wf="left",Af="right",uy="bottom",E8t="top-left",x8t="top-right",S8t="bottom-left",T8t="bottom-right",ate="start",cH="middle",Da="end",A8t="x",C8t="y",lF="group",ute="axis",lte="title",I8t="frame",k8t="scope",cte="legend",W$e="row-header",G$e="row-footer",Y$e="row-title",K$e="column-header",X$e="column-footer",Q$e="column-title",R8t="padding",N8t="symbol",J$e="fit",Z$e="fit-x",eMe="fit-y",P8t="pad",fte="none",fP="all",fH="each",dte="flush",e0="column",t0="row";function tMe(e){Oe.call(this,null,e)}ft(tMe,Oe,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Ul[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=dP(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===lF||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(dP(l,o))),r.role){case ute:case cte:case lte:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(dP(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(dP(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return H$e(r),t.modifies("bounds")}});function dP(e,t,n){return t(e.bounds.clear(),e,n)}const Dpe=":vega_identifier:";function hte(e){Oe.call(this,0,e)}hte.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ft(hte,Oe,{transform(e,t){const n=D8t(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function D8t(e){return e._signals[Dpe]||(e._signals[Dpe]=e.add(0))}function nMe(e){Oe.call(this,null,e)}ft(nMe,Oe,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,O8t(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===lF?eF:Z4;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function O8t(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function rMe(e){Oe.call(this,null,e)}const Ope={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!iMe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},iMe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),$pe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(iMe(i,s=e[n].bounds,t))return!0},$8t=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},M8t=(e,t,n)=>{var r=e.range(),i=new xs;return t===hx||t===uy?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Mpe=e=>(e.forEach(t=>t.opacity=1),e),Lpe=(e,t)=>e.reflow(t.modified()).modifies("opacity");ft(rMe,Oe,{transform(e,t){const n=Ope[e.method]||Ope.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Mpe(i),t=Lpe(t,e)),t;if(i=i.filter($8t),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Mpe(i),t=Lpe(t,e),s.length>=3&&$pe(s,r)){do s=n(s,r);while(s.length>=3&&$pe(s,r));s.length<3&&!Kn(i).opacity&&(s.length>1&&(Kn(s).opacity=0),Kn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=M8t(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function sMe(e){Oe.call(this,null,e)}ft(sMe,Oe,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const ea=new xs;function xw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function L8t(e){var t=e.items[0].orient;return t===wf||t===Af}function F8t(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function j8t(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=F8t(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Kee(p),v=0,b=0,w,E;switch(ea.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case hx:v=f||0,b=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&hP(e,p,E,m,y,0,-1,g);break;case wf:v=-c,b=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&hP(e,p,E,m,y,1,-1,g);break;case Af:v=n+c,b=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&hP(e,p,E,m,y,1,1,g);break;case uy:v=f||0,b=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&hP(e,p,E,m,0,0,1,g);break;default:v=i.x,b=i.y}return Zm(g.translate(v,b),i),xw(i,"x",v+o)|xw(i,"y",b+o)&&(i.bounds=ea,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function hP(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Fpe=(e,t)=>Math.floor(Math.min(e,t)),jpe=(e,t)=>Math.ceil(Math.max(e,t));function B8t(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===lF)switch(i.role){case ute:case cte:case lte:break;case W$e:o.rowheaders.push(...s);break;case G$e:o.rowfooters.push(...s);break;case K$e:o.colheaders.push(...s);break;case X$e:o.colfooters.push(...s);break;case Y$e:o.rowtitle=s[0];break;case Q$e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function U8t(e){return new xs().set(0,0,e.width||0,e.height||0)}function z8t(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function gi(e,t,n){const r=yt(e)?e[t]:e;return r??(n!==void 0?n:0)}function Bpe(e){return e<0?Math.ceil(-e):0}function oMe(e,t,n){var r=!n.nodirty,i=n.bounds===dte?U8t:z8t,s=ea.set(0,0,0,0),o=gi(n.align,e0),a=gi(n.align,t0),u=gi(n.padding,e0),l=gi(n.padding,t0),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),w=Array(d),E=Array(d),T,S,A,C,k,N,O,P,$,F,M;for(S=0;S<c;++S)p[S]=0;for(S=0;S<f;++S)y[S]=0;for(S=0;S<d;++S)N=t[S],k=E[S]=i(N),N.x=N.x||0,b[S]=0,N.y=N.y||0,w[S]=0,A=S%c,C=~~(S/c),m=Math.max(m,O=Math.ceil(k.x2)),v=Math.max(v,P=Math.ceil(k.y2)),p[A]=Math.max(p[A],O),y[C]=Math.max(y[C],P),h[S]=u+Bpe(k.x1),g[S]=l+Bpe(k.y1),r&&e.dirty(t[S]);for(S=0;S<d;++S)S%c===0&&(h[S]=0),S<c&&(g[S]=0);if(o===fH)for(A=1;A<c;++A){for(M=0,S=A;S<d;S+=c)M<h[S]&&(M=h[S]);for(S=A;S<d;S+=c)h[S]=M+p[A-1]}else if(o===fP){for(M=0,S=0;S<d;++S)S%c&&M<h[S]&&(M=h[S]);for(S=0;S<d;++S)S%c&&(h[S]=M+m)}else for(o=!1,A=1;A<c;++A)for(S=A;S<d;S+=c)h[S]+=p[A-1];if(a===fH)for(C=1;C<f;++C){for(M=0,S=C*c,T=S+c;S<T;++S)M<g[S]&&(M=g[S]);for(S=C*c;S<T;++S)g[S]=M+y[C-1]}else if(a===fP){for(M=0,S=c;S<d;++S)M<g[S]&&(M=g[S]);for(S=c;S<d;++S)g[S]=M+v}else for(a=!1,C=1;C<f;++C)for(S=C*c,T=S+c;S<T;++S)g[S]+=y[C-1];for($=0,S=0;S<d;++S)$=h[S]+(S%c?$:0),b[S]+=$-t[S].x;for(A=0;A<c;++A)for(F=0,S=A;S<d;S+=c)F+=g[S],w[S]+=F-t[S].y;if(o&&gi(n.center,e0)&&f>1)for(S=0;S<d;++S)k=o===fP?m:p[S%c],$=k-E[S].x2-t[S].x-b[S],$>0&&(b[S]+=$/2);if(a&&gi(n.center,t0)&&c!==1)for(S=0;S<d;++S)k=a===fP?v:y[~~(S/c)],F=k-E[S].y2-t[S].y-w[S],F>0&&(w[S]+=F/2);for(S=0;S<d;++S)s.union(E[S].translate(b[S],w[S]));switch($=gi(n.anchor,A8t),F=gi(n.anchor,C8t),gi(n.anchor,e0)){case Da:$-=s.width();break;case cH:$-=s.width()/2}switch(gi(n.anchor,t0)){case Da:F-=s.height();break;case cH:F-=s.height()/2}for($=Math.round($),F=Math.round(F),s.clear(),S=0;S<d;++S)t[S].mark.bounds.clear();for(S=0;S<d;++S)N=t[S],N.x+=b[S]+=$,N.y+=w[S]+=F,s.union(N.mark.bounds.union(N.bounds.translate(b[S],w[S]))),r&&e.dirty(N);return s}function V8t(e,t,n){var r=B8t(t),i=r.marks,s=n.bounds===dte?H8t:q8t,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=oMe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=gi(n.headerBand,t0,null),c=pP(e,r.rowheaders,i,a,u,-gi(o,"rowHeader"),Fpe,0,s,"x1",0,a,1,m)),r.colheaders&&(m=gi(n.headerBand,e0,null),f=pP(e,r.colheaders,i,a,a,-gi(o,"columnHeader"),Fpe,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=gi(n.footerBand,t0,null),d=pP(e,r.rowfooters,i,a,u,gi(o,"rowFooter"),jpe,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=gi(n.footerBand,e0,null),h=pP(e,r.colfooters,i,a,a,gi(o,"columnFooter"),jpe,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=gi(n.titleAnchor,t0),g=gi(o,"rowTitle"),g=p===Da?d+g:c-g,m=gi(n.titleBand,t0,.5),Upe(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=gi(n.titleAnchor,e0),g=gi(o,"columnTitle"),g=p===Da?h+g:f-g,m=gi(n.titleBand,e0,.5),Upe(e,r.coltitle,g,1,y,m))}function H8t(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function q8t(e,t){return e.bounds[t]}function pP(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,w,E,T,S,A,C;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(T=t[v],E=T.mark.bounds,b=y;b>=0&&(S=n[b])==null;b-=d);a?(A=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),C=m):(A=m,C=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),E.union(T.bounds.translate(A-(T.x||0),C-(T.y||0))),T.x=A,T.y=C,e.dirty(T),g=o(g,E[l])}return g}function Upe(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function W8t(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function G8t(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function Y8t(e,t,n,r,i,s,o){const a=W8t(n,t),u=G8t(e,a("offset",0)),l=a("anchor",ate),c=l===Da?1:l===cH?.5:0,f={align:fH,bounds:a("bounds",dte),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case wf:f.anchor={x:Math.floor(r.x1)-u,column:Da,y:c*(o||r.height()+2*r.y1),row:l};break;case Af:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case hx:f.anchor={y:Math.floor(i.y1)-u,row:Da,x:c*(s||i.width()+2*i.x1),column:l};break;case uy:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case E8t:f.anchor={x:u,y:u};break;case x8t:f.anchor={x:s-u,y:u,column:Da};break;case S8t:f.anchor={x:u,y:o-u,row:Da};break;case T8t:f.anchor={x:s-u,y:o-u,column:Da,row:Da};break}return f}function K8t(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),Q8t(e,n,n.items[0].items[0]),s=X8t(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===N8t&&J8t(n.items[0].items[0].items[0].items),i!==fte&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,Zm(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function X8t(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Q8t(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&UT(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case wf:i+=Math.ceil(o.bounds.width())+u;break;case Af:case uy:break;default:s+=o.bounds.height()+u}switch((i||s)&&UT(e,n,i,s),o.orient){case wf:c+=k_(t,n,o,a,1,1);break;case Af:l+=k_(t,n,o,Da,0,0)+u,c+=k_(t,n,o,a,1,1);break;case uy:l+=k_(t,n,o,a,0,0),c+=k_(t,n,o,Da,-1,0,1)+u;break;default:l+=k_(t,n,o,a,0,0)}(l||c)&&UT(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(UT(e,n,-l,0),UT(e,o,-l,0))}}function k_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Kee(n);return Math.round(r===ate?f:r===Da?d-h:.5*(c-h))}function UT(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function J8t(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Z8t(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===wf||a===Af?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==lF?a===wf?(p=i.y2,h=i.y1):a===Af?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===wf&&(p=r,h=0),b=u===ate?p:u===Da?h:(p+h)/2,d&&d.text){switch(a){case hx:case uy:v=f.bounds.height()+c;break;case wf:y=f.bounds.width()+c;break;case Af:y=-f.bounds.width()-c;break}ea.clear().union(d.bounds),ea.translate(y-(d.x||0),v-(d.y||0)),xw(d,"x",y)|xw(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(ea),d.mark.bounds.clear().union(ea),e.dirty(d)),ea.clear().union(d.bounds)}else ea.clear();switch(ea.union(f.bounds),a){case hx:m=b,g=i.y1-ea.height()-l;break;case wf:m=i.x1-ea.width()-l,g=b;break;case Af:m=i.x2+ea.width()+l,g=b;break;case uy:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return xw(s,"x",m)|xw(s,"y",g)&&(ea.translate(m,g),e.dirty(s),s.bounds.clear().union(ea),t.bounds.clear().union(ea),e.dirty(s)),s.bounds}function aMe(e){Oe.call(this,null,e)}ft(aMe,Oe,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&V8t(n,r,e.layout),t9t(n,r,e)}),e9t(e.mark.group)?t.reflow():t}});function e9t(e){return e&&e.mark.role!=="legend-entry"}function t9t(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new xs().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case ute:h=L8t(f)?a:u,h.union(j8t(e,f,i,s));break;case lte:c=f;break;case cte:l.push(K8t(e,f));break;case I8t:case k8t:case W$e:case G$e:case Y$e:case K$e:case X$e:case Q$e:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Af,d!==fte&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];oMe(e,v,Y8t(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===J$e||n.autosize.type===Z$e||n.autosize.type===eMe))switch(y.orient){case wf:case Af:o.add(v.x1,0).add(v.x2,0);break;case hx:case uy:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(Z8t(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),n9t(e,t,o,n)}function n9t(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===R8t){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===fte?(l=0,f=0,u=o,c=a):s===J$e?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===Z$e?(u=Math.max(0,o-l-d),a=c+f+h):s===eMe?(o=u+l+d,c=Math.max(0,a-f-h)):s===P8t&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const r9t=Object.freeze(Object.defineProperty({__proto__:null,bound:tMe,identifier:hte,mark:nMe,overlap:rMe,render:sMe,viewlayout:aMe},Symbol.toStringTag,{value:"Module"}));function uMe(e){Oe.call(this,null,e)}ft(uMe,Oe,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Nee(s,o,e.minstep),u=e.format||$3e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?O3e(s,e.values,a):Pee(s,a);return i&&(r.rem=i),i=l.map((c,f)=>_r({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(_r({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function lMe(e){Oe.call(this,null,e)}function i9t(){return _r({})}function s9t(e){const t=DS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ft(lMe,Oe,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||i9t,s=e.key||Mt,o=this.value;return Ve(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Ue("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=s9t(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function cMe(e){Oe.call(this,null,e)}ft(cMe,Oe,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Ve(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||bg,u=i.enter||bg,l=i.exit||bg,c=(s&&!o?i[s]:a)||bg;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==bg&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==bg&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==bg){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function fMe(e){Oe.call(this,[],e)}ft(fMe,Oe,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||DD,o=e.scale,a=+e.limit,u=Nee(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===DD,c=e.format||j3e(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||F3e(o,u),d,h,p,m,g;return i&&(r.rem=i),s===DD?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,vn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=_a(m=p||8),i=i.map((y,v)=>_r({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(_r({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===PFt?(d=o.domain(),h=N3e(o,d[0],Kn(d)),f.length<3&&!e.values&&d[0]!==Kn(d)&&(f=[d[0],Kn(d)]),i=f.map((y,v)=>_r({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=VFt(o),i=f.map((y,v)=>_r({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const o9t=e=>e.source.x,a9t=e=>e.source.y,u9t=e=>e.target.x,l9t=e=>e.target.y;function pte(e){Oe.call(this,{},e)}pte.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ft(pte,Oe,{transform(e,t){var n=e.sourceX||o9t,r=e.sourceY||a9t,i=e.targetX||u9t,s=e.targetY||l9t,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=zpe.get(u+"-"+a)||zpe.get(u);return l||Ue("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const dMe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,c9t=(e,t,n,r)=>dMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),hMe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},f9t=(e,t,n,r)=>hMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),pMe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},d9t=(e,t,n,r)=>pMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),h9t=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,p9t=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,m9t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},g9t=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},y9t=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},v9t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},zpe=DS({line:dMe,"line-radial":c9t,arc:hMe,"arc-radial":f9t,curve:pMe,"curve-radial":d9t,"orthogonal-horizontal":h9t,"orthogonal-vertical":p9t,"orthogonal-radial":m9t,"diagonal-horizontal":g9t,"diagonal-vertical":y9t,"diagonal-radial":v9t});function mte(e){Oe.call(this,null,e)}mte.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ft(mte,Oe,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||RS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/Exe(l),h=Ru(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const b9t=5;function _9t(e){const t=e.type;return!e.bins&&(t===ax||t===Zk||t===eR)}function mMe(e){return Iee(e)&&e!==lh}const w9t=qf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function gMe(e){Oe.call(this,null,e),this.modified(!0)}ft(gMe,Oe,{transform(e,t){var n=t.dataflow,r=this.value,i=E9t(e);(!r||i!==r.type)&&(this.value=r=pr(i)());for(i in e)if(!w9t[i]){if(i==="padding"&&mMe(r.type))continue;vn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return I9t(r,e,C9t(r,e,S9t(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function E9t(e){var t=e.type,n="",r;return t===lh?lh+"-"+ax:(x9t(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?lh+"-":r===3?LS+"-":""),(n+t||ax).toLowerCase())}function x9t(e){const t=e.type;return Iee(t)&&t!==nb&&t!==rb&&(e.scheme||e.range&&e.range.length&&e.range.every(gt))}function S9t(e,t,n){const r=T9t(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&_9t(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return mMe(s)&&t.padding&&i[0]!==Kn(i)&&(i=A9t(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(yMe(s,i,n)),s===See&&e.unknown(t.domainImplicit?nz:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Nee(e,t.nice)||null),i.length}function T9t(e,t,n){return t?(e.domain(yMe(e.type,t,n)),t.length):-1}function A9t(e,t,n,r,i,s){var o=Math.abs(Kn(n)-n[0]),a=o/(o-2*r),u=e===Nm?yZ(t,null,a):e===eR?q$(t,null,a,.5):e===Zk?q$(t,null,a,i||1):e===Y4?vZ(t,null,a,s||1):gZ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function yMe(e,t,n){if(A3e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+ot(t))}return t}function C9t(e,t,n){let r=t.bins;if(r&&!Ve(r)){const i=e.domain(),s=i[0],o=Kn(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Ue("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Ru(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Tee&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function I9t(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=k9t(r,t,n);else if(t.scheme&&(s=R9t(r,t,n),vn(s))){if(e.interpolator)return e.interpolator(s);Ue(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&C3e(r))return e.interpolator(Q4(dH(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(kee(t.interpolate,t.interpolateGamma)):vn(e.round)?e.round(i):vn(e.rangeRound)&&e.interpolate(i?uk:Wm),s&&e.range(dH(s,t.reverse))}function k9t(e,t,n){e!==_3e&&e!==QV&&Ue("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===QV?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*xee(n,i,r)]}function R9t(e,t,n){var r=t.schemeExtent,i,s;return Ve(t.scheme)?s=Q4(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=Ree(i),s||Ue(`Unrecognized scheme name: ${t.scheme}`)),n=e===X4?n+1:e===Tee?n-1:e===ux||e===K4?+t.schemeCount||b9t:n,C3e(e)?Vpe(s,r,t.reverse):vn(s)?R3e(Vpe(s,r),n):e===See?s:s.slice(0,n)}function Vpe(e,t,n){return vn(e)&&(t||n)?k3e(e,dH(t||[0,1],n)):e}function dH(e,t){return t?e.slice().reverse():e}function vMe(e){Oe.call(this,null,e)}ft(vMe,Oe,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(qb(e.sort)),this.modified(n),t}});const Hpe="zero",bMe="center",_Me="normalize",wMe=["y0","y1"];function gte(e){Oe.call(this,null,e)}gte.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Hpe,values:[Hpe,bMe,_Me]},{name:"as",type:"string",array:!0,length:2,default:wMe}]};ft(gte,Oe,{transform(e,t){var n=e.as||wMe,r=n[0],i=n[1],s=qb(e.sort),o=e.field||RS,a=e.offset===bMe?N9t:e.offset===_Me?P9t:D9t,u,l,c,f;for(u=O9t(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function N9t(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function P9t(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function D9t(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function O9t(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const $9t=Object.freeze(Object.defineProperty({__proto__:null,axisticks:uMe,datajoin:lMe,encode:cMe,legendentries:fMe,linkpath:pte,pie:mte,scale:gMe,sortitems:vMe,stack:gte},Symbol.toStringTag,{value:"Module"}));var M9t=Math.abs,hH=Math.cos,uM=Math.sin,L9t=1e-6,EMe=Math.PI,pH=EMe/2,qpe=F9t(2);function Wpe(e){return e>1?pH:e<-1?-pH:Math.asin(e)}function F9t(e){return e>0?Math.sqrt(e):0}function j9t(e,t){var n=e*uM(t),r=30,i;do t-=i=(t+uM(t)-n)/(1+hH(t));while(M9t(i)>L9t&&--r>0);return t/2}function B9t(e,t,n){function r(i,s){return[e*i*hH(s=j9t(n,s)),t*uM(s)]}return r.invert=function(i,s){return s=Wpe(s/t),[i/(e*hH(s)),Wpe((2*s+uM(2*s))/n)]},r}var U9t=B9t(qpe/pH,qpe,EMe);function z9t(){return Uh(U9t).scale(169.529)}const V9t=QSe(),mH=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function H9t(e,t){return function n(){const r=t();return r.type=e,r.path=QSe().projection(r),r.copy=r.copy||function(){const i=n();return mH.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},S3e(r)}}function yte(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(lM[e]=H9t(e,t),this):lM[e]||null}function xMe(e){return e&&e.path||V9t}const lM={albers:ZSe,albersusa:tht,azimuthalequalarea:nht,azimuthalequidistant:rht,conicconformal:oht,conicequalarea:A3,conicequidistant:lht,equalEarth:fht,equirectangular:aht,gnomonic:dht,identity:hht,mercator:iht,mollweide:z9t,naturalEarth1:pht,orthographic:mht,stereographic:ght,transversemercator:yht};for(const e in lM)yte(e,lM[e]);function q9t(){}const hp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function SMe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),W9t(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(G9t((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,hp[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,hp[m|g<<1].forEach(b);for(hp[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,hp[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,hp[m|g<<1|y<<2|v<<3].forEach(b);hp[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,hp[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,hp[y<<2|v<<3].forEach(b);hp[y<<3].forEach(b);function b(w){var E=[w[0][0]+h,w[0][1]+p],T=[w[1][0]+h,w[1][1]+p],S=o(E),A=o(T),C,k;(C=d[S])?(k=f[A])?(delete d[C.end],delete f[k.start],C===k?(C.ring.push(T),c(C.ring)):f[C.start]=d[k.end]={start:C.start,end:k.end,ring:C.ring.concat(k.ring)}):(delete d[C.end],C.ring.push(T),d[C.end=A]=C):(C=f[A])?(k=d[S])?(delete f[C.start],delete d[k.end],C===k?(C.ring.push(T),c(C.ring)):f[k.start]=d[C.end]={start:k.start,end:C.end,ring:k.ring.concat(C.ring)}):(delete f[C.start],C.ring.unshift(E),f[C.start=S]=C):f[S]=d[A]={start:S,end:A,ring:[E,T]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Ue("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:q9t,r):n===a},r}function W9t(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function G9t(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Y9t(e,t[n]))return i;return 0}function Y9t(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(K9t(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function K9t(e,t,n){var r;return X9t(e,t,n)&&Q9t(e[r=+(e[0]===t[0])],n[r],t[r])}function X9t(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Q9t(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function TMe(e,t,n){return function(r){var i=Ah(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?F0(s,o,e):a/(e+1);return Ru(s+u,o,u)}}function vte(e){Oe.call(this,null,e)}vte.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ft(vte,Oe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||ba,s=SMe().smooth(e.smooth!==!1),o=e.thresholds||J9t(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Ve(o)?o:o(c.values));Z9t(f,c,l,e),f.forEach(d=>{u.push(j4(l,_r(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function J9t(e,t,n){const r=TMe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>g0(t(i).values)))}function Z9t(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(vn(i)&&(i=i(n,r)),vn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(ar(i)?i:i[0])||1,a=(ar(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(AMe(t,o,a,u,l))}function AMe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function Gpe(e,t,n){const r=e>=0?e:LZ(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function L9(e){return vn(e)?e:_a(+e)}function CMe(){var e=u=>u[0],t=u=>u[1],n=RS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=Gpe(r[0],u,e)>>o,f=Gpe(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const E=d+(+e(w)>>o),T=h+(+t(w)>>o);E>=0&&E<p&&T>=0&&T<m&&(g[E+T*p]+=+n(w))}),c>0&&f>0?(R_(p,m,g,y,c),N_(p,m,y,g,f),R_(p,m,g,y,c),N_(p,m,y,g,f),R_(p,m,g,y,c),N_(p,m,y,g,f)):c>0?(R_(p,m,g,y,c),R_(p,m,y,g,c),R_(p,m,g,y,c),v=y):f>0&&(N_(p,m,g,y,f),N_(p,m,y,g,f),N_(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/Exe(v);for(let w=0,E=p*m;w<E;++w)v[w]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=L9(u),a):e},a.y=function(u){return arguments.length?(t=L9(u),a):t},a.weight=function(u){return arguments.length?(n=L9(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Ue("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Ue("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=mt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Ue("invalid bandwidth"),r=u,a):r},a}function R_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function N_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function bte(e){Oe.call(this,null,e)}bte.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const eBt=["x","y","weight","size","cellSize","bandwidth"];function IMe(e,t){return eBt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ft(bte,Oe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=tBt(r,e.groupby),s=(e.groupby||[]).map(Gi),o=IMe(CMe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>_r(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function tBt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function _te(e){Oe.call(this,null,e)}_te.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ft(_te,Oe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=SMe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||TMe(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=IMe(CMe(),e)(i,!0),u=AMe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Ve(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(_r),n}});const gH="Feature",wte="FeatureCollection",nBt="MultiPoint";function Ete(e){Oe.call(this,null,e)}Ete.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ft(Ete,Oe,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&ba,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(da(a))||s&&t.modified(da(s))||o&&t.modified(da(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:gH,geometry:{type:nBt,coordinates:r}})),this.value={type:wte,features:n}}});function xte(e){Oe.call(this,null,e)}xte.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ft(xte,Oe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||ba,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=xMe(e.projection),n.materialize().reflow()):o=i===ba||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=rBt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function rBt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Ste(e){Oe.call(this,null,e)}Ste.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ft(Ste,Oe,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function Tte(e){Oe.call(this,null,e)}Tte.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ft(Tte,Oe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=iBt(xMe(e.projection),e.field||Rc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function iBt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Ate(e){Oe.call(this,[],e),this.generator=Odt()}Ate.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ft(Ate,Oe,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)vn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(IOe(n[0],i)):t.add.push(_r(i)),n[0]=i,t}});function Cte(e){Oe.call(this,null,e)}Cte.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ft(Cte,Oe,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||ba,s=oBt(e.opacity,e),o=sBt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?g0(n.map(l=>g0(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=yn({},l,u);r||(f.$max=g0(c.values||[])),l[a]=aBt(c,f,o.dep?o:_a(o(f)),s.dep?s:_a(s(f)))}),t.reflow(!0).modifies(a)}});function sBt(e,t){let n;return vn(e)?(n=r=>j0(e(r,t)),n.dep=kMe(e)):n=_a(j0(e||"#888")),n}function oBt(e,t){let n;return vn(e)?(n=r=>e(r,t),n.dep=kMe(e)):e?n=_a(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function kMe(e){if(!vn(e))return!1;const t=qf(da(e));return t.$x||t.$y||t.$value||t.$max}function aBt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Ug,d=A0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function RMe(e){Oe.call(this,null,e),this.modified(!0)}ft(RMe,Oe,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=lBt(e.type),mH.forEach(r=>{e[r]!=null&&Ype(n,r,e[r])})):mH.forEach(r=>{e.modified(r)&&Ype(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&uBt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function uBt(e,t){const n=cBt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function lBt(e){const t=yte((e||"mercator").toLowerCase());return t||Ue("Unrecognized projection type: "+e),t()}function Ype(e,t,n){vn(e[t])&&e[t](n)}function cBt(e){return e=mt(e),e.length===1?e[0]:{type:wte,features:e.reduce((t,n)=>t.concat(fBt(n)),[])}}function fBt(e){return e.type===wte?e.features:mt(e).filter(t=>t!=null).map(t=>t.type===gH?t:{type:gH,geometry:t})}const dBt=Object.freeze(Object.defineProperty({__proto__:null,contour:_te,geojson:Ete,geopath:xte,geopoint:Ste,geoshape:Tte,graticule:Ate,heatmap:Cte,isocontour:vte,kde2d:bte,projection:RMe},Symbol.toStringTag,{value:"Module"})),Kpe={center:Sft,collide:Vft,nbody:edt,link:qft,x:tdt,y:ndt},B2="forces",yH=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],hBt=["static","iterations"],NMe=["x","y","vx","vy"];function Ite(e){Oe.call(this,null,e)}Ite.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:NMe}]};ft(Ite,Oe,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(yH),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&PMe(n,e,0,t)):(this.value=n=mBt(t.source,e),n.on("tick",pBt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(hBt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==B2||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(NMe)}});function pBt(e,t){return()=>e.touch(t).run()}function mBt(e,t){const n=Zft(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),PMe(n,t,!0).on("end",()=>s=!0)}function PMe(e,t,n,r){var i=mt(t.forces),s,o,a,u;for(s=0,o=yH.length;s<o;++s)a=yH[s],a!==B2&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=B2+s,a=n||t.modified(B2,s)?yBt(i[s]):r&&gBt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(B2+s,null);return e.numForces=i.length,e}function gBt(e,t){var n,r;for(n in e)if(vn(r=e[n])&&t.modified(da(r)))return 1;return 0}function yBt(e){var t,n;Ft(Kpe,e.force)||Ue("Unrecognized force: "+e.force),t=Kpe[e.force]();for(n in e)vn(t[n])&&vBt(t[n],e[n],e);return t}function vBt(e,t,n){e(vn(t)?r=>t(r,n):t)}const bBt=Object.freeze(Object.defineProperty({__proto__:null,force:Ite},Symbol.toStringTag,{value:"Module"}));function vH(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function kte(e){Oe.call(this,null,e)}kte.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const _Bt=e=>e.values;ft(kte,Oe,{transform(e,t){t.source||Ue("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&F4(o.data)&&i.rem.push(o.data)}),this.value=s=d6({values:mt(e.keys).reduce((o,a)=>(o.key(a),o),wBt()).entries(i.source)},_Bt),n&&s.each(o=>{o.children&&(o=_r(o.data),i.add.push(o),i.source.push(o))}),vH(s,Mt,Mt)),i.source.root=s,i}});function wBt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function eg(e){Oe.call(this,null,e)}const EBt=(e,t)=>e.parent===t.parent?1:2;ft(eg,Oe,{transform(e,t){(!t.source||!t.source.root)&&Ue(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(qb(e.sort,o=>o.data)),xBt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?EBt:RS);try{this.value=n(i)}catch(o){Ue(o)}return i.each(o=>SBt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function xBt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function SBt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const bH=["x","y","r","depth","children"];function Rte(e){eg.call(this,e)}Rte.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:bH.length,default:bH}]};ft(Rte,eg,{layout:pTe,params:["radius","size","padding"],fields:bH});const _H=["x0","y0","x1","y1","depth","children"];function Nte(e){eg.call(this,e)}Nte.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:_H.length,default:_H}]};ft(Nte,eg,{layout:npt,params:["size","round","padding"],fields:_H});function Pte(e){Oe.call(this,null,e)}Pte.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ft(Pte,Oe,{transform(e,t){t.source||Ue("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?vH(Dle().id(e.key).parentId(e.parentKey)(i.source),e.key,Nc):vH(Dle()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Xpe={tidy:dpt,cluster:Tht},wH=["x","y","depth","children"];function Dte(e){eg.call(this,e)}Dte.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:wH.length,default:wH}]};ft(Dte,eg,{layout(e){const t=e||"tidy";if(Ft(Xpe,t))return Xpe[t]();Ue("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:wH});function Ote(e){Oe.call(this,[],e)}Ote.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ft(Ote,Oe,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Ue("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Mt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Mt(a)]&&s[Mt(u)]&&i.add.push(_r({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Mt(o)]=1),n.forEach(o=>{(s[Mt(o.source)]||s[Mt(o.target)])&&i.mod.push(o)})),i}});const Qpe={binary:ppt,dice:dk,slice:h6,slicedice:mpt,squarify:vTe,resquarify:gpt},EH=["x0","y0","x1","y1","depth","children"];function $te(e){eg.call(this,e)}$te.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:EH.length,default:EH}]};ft($te,eg,{layout(){const e=hpt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ft(Qpe,t)?e.tile(Qpe[t]):Ue("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:EH});const TBt=Object.freeze(Object.defineProperty({__proto__:null,nest:kte,pack:Rte,partition:Nte,stratify:Pte,tree:Dte,treelinks:Ote,treemap:$te},Symbol.toStringTag,{value:"Module"})),F9=4278190080;function ABt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function CBt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=A0(s,o).getContext("2d"),l=A0(s,o).getContext("2d"),c=a&&A0(s,o).getContext("2d");n.forEach(A=>zD(u,A,!1)),zD(l,t,!1),a&&zD(c,t,!0);const f=j9(u,s,o),d=j9(l,s,o),h=a&&j9(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,w,E,T,S;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,E=f[w]&F9,S=d[w]&F9,T=a&&h[w]&F9,(E||T||S)&&(v=e(g),b=e(y),!i&&(E||S)&&p.set(v,b),a&&(E||T)&&m.set(v,b));return[p,m]}function j9(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function zD(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>zD(e,s.items,n))}):Ul[r].draw(e,{items:n?t.map(IBt):t})}function IBt(e){const t=j4(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const pp=5,Ra=31,_I=32,Rg=new Uint32Array(_I+1),mf=new Uint32Array(_I+1);mf[0]=0;Rg[0]=~mf[0];for(let e=1;e<=_I;++e)mf[e]=mf[e-1]<<1|1,Rg[e]=~mf[e];function kBt(e,t){const n=new Uint32Array(~~((e*t+_I)/_I));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>pp]&1<<(a&Ra)},set:(s,o)=>{const a=o*e+s;r(a>>>pp,1<<(a&Ra))},clear:(s,o)=>{const a=o*e+s;i(a>>>pp,~(1<<(a&Ra)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>pp,h=f>>>pp,d===h){if(n[d]&Rg[c&Ra]&mf[(f&Ra)+1])return!0}else{if(n[d]&Rg[c&Ra]||n[h]&mf[(f&Ra)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>pp,d=c>>>pp,f===d)r(f,Rg[l&Ra]&mf[(c&Ra)+1]);else for(r(f,Rg[l&Ra]),r(d,mf[(c&Ra)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>pp,d=c>>>pp,f===d)i(f,mf[l&Ra]|Rg[(c&Ra)+1]);else for(i(f,mf[l&Ra]),i(d,Rg[(c&Ra)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function RBt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>kBt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function NBt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Cl.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function cM(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function n0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function PBt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!cM(p,m,d,h,i,s)&&!n0(e,p,m,h,d,g,o,a)&&!n0(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,n0(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Cl.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,w,E,T,S,A,C,k,N,O,P,$,F,M,B,U;for(let H=0;H<f;++H){for(v=c[H].x,w=c[H].y,b=c[H].x2===void 0?v:c[H].x2,E=c[H].y2===void 0?w:c[H].y2,v>b&&(U=v,v=b,b=U),w>E&&(U=w,w=E,E=U),k=e(v),O=e(b),N=~~((k+O)/2),P=e(w),F=e(E),$=~~((P+F)/2),A=N;A>=k;--A)for(C=$;C>=P;--C)B=u(A,C,p,h,d),B&&([l.x,l.y,p,m]=B);for(A=N;A<=O;++A)for(C=$;C<=F;++C)B=u(A,C,p,h,d),B&&([l.x,l.y,p,m]=B);!m&&!n&&(M=Math.abs(b-v+E-w),T=(v+b)/2,S=(w+E)/2,M>=y&&!cM(T,S,h,d,i,s)&&!n0(e,T,S,d,h,d,o,null)&&(y=M,l.x=T,l.y=S,g=!0))}return m||g?(T=h/2,S=d/2,o.setRange(e(l.x-T),e(l.y-S),e(l.x+T),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const DBt=[-1,-1,1,1],OBt=[-1,1,-1,1];function $Bt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Cl.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,w,E,T,S,A,C,k,N,O,P,$;for(let F=0;F<f;++F){for(b=c[F].x,E=c[F].y,w=c[F].x2===void 0?b:c[F].x2,T=c[F].y2===void 0?E:c[F].y2,p.push([e((b+w)/2),e((E+T)/2)]);p.length;)if([C,k]=p.pop(),!(o.get(C,k)||a.get(C,k)||u.get(C,k))){u.set(C,k);for(let M=0;M<4;++M)S=C+DBt[M],A=k+OBt[M],u.outOfBounds(S,A,S,A)||p.push([S,A]);if(S=e.invert(C),A=e.invert(k),N=m,O=s,!cM(S,A,h,d,i,s)&&!n0(e,S,A,d,h,N,o,a)&&!n0(e,S,A,d,h,d,o,null)){for(;O-N>=1;)P=(N+O)/2,n0(e,S,A,d,h,P,o,a)?O=P:N=P;N>m&&(l.x=S,l.y=A,m=N,g=!0)}}!g&&!n&&($=Math.abs(w-b+T-E),S=(b+w)/2,A=(E+T)/2,$>=v&&!cM(S,A,h,d,i,s)&&!n0(e,S,A,d,h,d,o,null)&&(v=$,l.x=S,l.y=A,y=!0))}return g||y?(S=h/2,A=d/2,o.setRange(e(l.x-S),e(l.y-A),e(l.x+S),e(l.y+A)),l.align="center",l.baseline="middle",!0):!1}}const MBt=["right","center","left"],LBt=["bottom","middle","top"];function FBt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,w,E,T,S,A,C,k,N;for(let O=0;O<u;++O){if(h=(n[O]&3)-1,p=(n[O]>>>2&3)-1,m=h===0&&p===0||r[O]<0,g=h&&p?Math.SQRT1_2:1,y=r[O]<0?-1:1,v=c[1+h]+r[O]*h*g,S=c[4+p]+y*f*p/2+r[O]*p*g,w=S-f/2,E=S+f/2,A=e(v),k=e(w),N=e(E),!d)if(Jpe(A,A,k,N,o,a,v,v,w,E,c,m))d=Cl.width(l.datum,l.datum.text);else continue;if(T=v+y*d*h/2,v=T-d/2,b=T+d/2,A=e(v),C=e(b),Jpe(A,C,k,N,o,a,v,b,w,E,c,m))return l.x=h?h*y<0?b:v:T,l.y=p?p*y<0?E:w:S,l.align=MBt[h*y+1],l.baseline=LBt[p*y+1],o.setRange(A,k,C,N),!0}return!1}}function Jpe(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const B9=0,U9=4,z9=8,V9=0,H9=1,q9=2,jBt={"top-left":B9+V9,top:B9+H9,"top-right":B9+q9,left:U9+V9,middle:U9+H9,right:U9+q9,"bottom-left":z9+V9,bottom:z9+H9,"bottom-right":z9+q9},BBt={naive:NBt,"reduced-search":PBt,floodfill:$Bt};function UBt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=zBt(r,f),h=VBt(i,f),p=HBt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=qBt(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let w=-1,E=-1;const T=e.map(k=>{const N=v?Cl.width(k,k.text):void 0;return w=Math.max(w,N),E=Math.max(E,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(k),textWidth:N}});l=l===null||l===1/0?Math.max(w,E)+Math.max(...r):l;const S=RBt(t[0],t[1],l);let A;if(!b){n&&T.sort((O,P)=>n(O.datum,P.datum));let k=!1;for(let O=0;O<h.length&&!k;++O)k=h[O]===5||d[O]<0;const N=(p&&o||g)&&e.map(O=>O.datum);A=s.length||N?CBt(S,N||[],s,k,g):ABt(S,o&&T)}const C=g?BBt[c](S,A,o,u):FBt(S,A,h,d);return T.forEach(k=>k.opacity=+C(k)),T}function zBt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function VBt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=jBt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function HBt(e){return e&&e.mark&&e.mark.marktype}function qBt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const xH=["x","y","opacity","align","baseline"],DMe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Mte(e){Oe.call(this,null,e)}Mte.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:DMe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:xH.length,default:xH}]};ft(Mte,Oe,{transform(e,t){function n(s){const o=e[s];return vn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Ue("Size parameter should be specified as a [width, height] array.");const i=e.as||xH;return UBt(t.materialize(t.SOURCE).source||[],e.size,e.sort,mt(e.offset==null?1:e.offset),mt(e.anchor||DMe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const WBt=Object.freeze(Object.defineProperty({__proto__:null,label:Mte},Symbol.toStringTag,{value:"Module"}));function OMe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Lte(e){Oe.call(this,null,e)}Lte.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ft(Lte,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=OMe(r,e.groupby),s=(e.groupby||[]).map(Gi),o=s.length,a=e.as||[Gi(e.x),Gi(e.y)],u=[];i.forEach(l=>{WOe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(_r(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const SH={constant:KZ,linear:XZ,log:zOe,exp:VOe,pow:HOe,quad:QZ,poly:qOe},GBt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Fte(e){Oe.call(this,null,e)}Fte.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(SH)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ft(Fte,Oe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=OMe(r,e.groupby),s=(e.groupby||[]).map(Gi),o=e.method||"linear",a=e.order==null?3:e.order,u=GBt(o,a),l=e.as||[Gi(e.x),Gi(e.y)],c=SH[o],f=[];let d=e.extent;Ft(SH,o)||Ue("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(_r({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Ah(h,e.x),y=v=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[l[0]]=v[0],b[l[1]]=v[1],f.push(_r(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):W4(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const YBt=Object.freeze(Object.defineProperty({__proto__:null,loess:Lte,regression:Fte},Symbol.toStringTag,{value:"Module"}));function jte(e){Oe.call(this,null,e)}jte.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const KBt=[-1e5,-1e5,1e5,1e5];ft(jte,Oe,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:KBt;const s=this.value=nK.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!QBt(u)?XBt(u):null}return t.reflow(e.modified()).modifies(n)}});function XBt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function QBt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const JBt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:jte},Symbol.toStringTag,{value:"Module"}));var W9=Math.PI/180,U2=64,VD=2048;function ZBt(){var e=[256,256],t,n,r,i,s,o,a,u=$Me,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(A0()),m=sUt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],w=l.map(T=>({text:t(T),font:n(T),style:i(T),weight:s(T),rotate:o(T),size:~~(r(T)+1e-14),padding:a(T),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:T})).sort((T,S)=>S.size-T.size);++v<y;){var E=w[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,eUt(p,E,w,v),E.hasText&&h(m,E,g)&&(b.push(E),g?nUt(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(U2<<5)/m,p.height=VD/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),E=c()<.5?1:-1,T=-E,S,A,C;(S=w(T+=E))&&(A=~~S[0],C=~~S[1],!(Math.min(Math.abs(A),Math.abs(C))>=b));)if(m.x=y+A,m.y=v+C,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!tUt(m,p,e[0]))&&(!g||rUt(m,g))){for(var k=m.sprite,N=m.width>>5,O=e[0]>>5,P=m.x-(N<<4),$=P&127,F=32-$,M=m.y1-m.y0,B=(m.y+m.y0)*O+(P>>5),U,H=0;H<M;H++){U=0;for(var D=0;D<=N;D++)p[B+D]|=U<<F|(D<N?(U=k[H*N+D])>>>$:0);B+=O}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=ov(p),f):n},f.fontStyle=function(p){return arguments.length?(i=ov(p),f):i},f.fontWeight=function(p){return arguments.length?(s=ov(p),f):s},f.rotate=function(p){return arguments.length?(o=ov(p),f):o},f.text=function(p){return arguments.length?(t=ov(p),f):t},f.spiral=function(p){return arguments.length?(u=oUt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=ov(p),f):r},f.padding=function(p){return arguments.length?(a=ov(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function eUt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(U2<<5)/s,VD/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*W9),g=Math.cos(t.rotate*W9),y=c*g,v=c*m,b=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=U2<<5&&(o=0,a+=u,u=0),a+d>=VD)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*W9),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(U2<<5)/s,VD/s).data,T=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)T[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var S=0,A=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var C=f*p+(h>>5),k=E[(a+p)*(U2<<5)+(o+h)<<2]?1<<31-h%32:0;T[C]|=k,S|=k}S?A=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+A,t.sprite=T.slice(0,(t.y1-t.y0)*f)}}}function tUt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function nUt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function rUt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function $Me(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function iUt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function sUt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function ov(e){return typeof e=="function"?e:function(){return e}}var oUt={archimedean:$Me,rectangular:iUt};const MMe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],aUt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Bte(e){Oe.call(this,ZBt(),e)}Bte.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:MMe}]};ft(Bte,Oe,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Ue("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return vn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||aUt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||MMe;let a=e.fontSize||14,u;if(vn(a)?u=e.fontSizeRange:a=_a(a),u){const p=a,m=pr("sqrt")().domain(Ah(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Dc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const uUt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Bte},Symbol.toStringTag,{value:"Module"})),lUt=e=>new Uint8Array(e),cUt=e=>new Uint16Array(e),jA=e=>new Uint32Array(e);function fUt(){let e=8,t=[],n=jA(0),r=mP(0,e),i=mP(0,e);return{data:()=>t,seen:()=>n=dUt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=mP(s,e,r),i=mP(s,e))}}}function dUt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function mP(e,t,n){const r=(t<257?lUt:t<65537?cUt:jA)(e);return n&&r.set(n),r}function Zpe(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function eme(){let e=jA(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=jA(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=hUt(h,d),c)p=t,m=e,t=Array(c+f),e=jA(c+f),pUt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[zot(u,a[0],0,l),L0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function hUt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),qot(e,t)}function pUt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Ute(e){Oe.call(this,fUt(),e),this._indices=null,this._dims=null}Ute.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ft(Ute,Oe,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=eme()),s.push(Zpe(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,w,E,T,S;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,E=0,T=v.length;E<T;++E)w[v[E]._index]=1;for(E=0;E<h;++E)S=r[E],(!o[E]||e.modified("fields",E)||t.modified(S.fields))&&(y=S.fname,(m=p[y])||(s[y]=g=eme(),p[y]=m=g.insert(S,t.source,0)),o[E]=Zpe(g,E,i[E]).onAdd(m,u));for(E=0,T=a.data().length;E<T;++E)b[E]||(l[E]!==u[E]?f.push(E):w[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function zte(e){Oe.call(this,null,e)}zte.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ft(zte,Oe,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const mUt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Ute,resolvefilter:zte},Symbol.toStringTag,{value:"Module"})),gUt="RawCode",sb="Literal",yUt="Property",vUt="Identifier",bUt="ArrayExpression",_Ut="BinaryExpression",LMe="CallExpression",wUt="ConditionalExpression",EUt="LogicalExpression",xUt="MemberExpression",SUt="ObjectExpression",TUt="UnaryExpression";function td(e){this.type=e}td.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=AUt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function AUt(e){switch(e.type){case bUt:return e.elements;case _Ut:case EUt:return[e.left,e.right];case LMe:return[e.callee].concat(e.arguments);case wUt:return[e.test,e.consequent,e.alternate];case xUt:return[e.object,e.property];case SUt:return e.properties;case yUt:return[e.key,e.value];case TUt:return[e.argument];case vUt:case sb:case gUt:default:return[]}}var Yh,Rt,Fe,pa,Nr,cF=1,dR=2,ob=3,By=4,fF=5,Yb=6,bu=7,hR=8,CUt=9;Yh={};Yh[cF]="Boolean";Yh[dR]="<end>";Yh[ob]="Identifier";Yh[By]="Keyword";Yh[fF]="Null";Yh[Yb]="Numeric";Yh[bu]="Punctuator";Yh[hR]="String";Yh[CUt]="RegularExpression";var IUt="ArrayExpression",kUt="BinaryExpression",RUt="CallExpression",NUt="ConditionalExpression",FMe="Identifier",PUt="Literal",DUt="LogicalExpression",OUt="MemberExpression",$Ut="ObjectExpression",MUt="Property",LUt="UnaryExpression",no="Unexpected token %0",FUt="Unexpected number",jUt="Unexpected string",BUt="Unexpected identifier",UUt="Unexpected reserved word",zUt="Unexpected end of input",TH="Invalid regular expression",G9="Invalid regular expression: missing /",jMe="Octal literals are not allowed in strict mode.",VUt="Duplicate data property in object literal not allowed in strict mode",Co="ILLEGAL",wI="Disabled.",HUt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),qUt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function dF(e,t){if(!e)throw new Error("ASSERT: "+t)}function Ap(e){return e>=48&&e<=57}function Vte(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function BA(e){return"01234567".indexOf(e)>=0}function WUt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function EI(e){return e===10||e===13||e===8232||e===8233}function pR(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&HUt.test(String.fromCharCode(e))}function fM(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&qUt.test(String.fromCharCode(e))}const GUt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function BMe(){for(;Fe<pa;){const e=Rt.charCodeAt(Fe);if(WUt(e)||EI(e))++Fe;else break}}function AH(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Fe<pa&&Vte(Rt[Fe])?(r=Rt[Fe++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):dr({},no,Co);return String.fromCharCode(i)}function YUt(){var e,t,n,r;for(e=Rt[Fe],t=0,e==="}"&&dr({},no,Co);Fe<pa&&(e=Rt[Fe++],!!Vte(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&dr({},no,Co),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function UMe(){var e,t;for(e=Rt.charCodeAt(Fe++),t=String.fromCharCode(e),e===92&&(Rt.charCodeAt(Fe)!==117&&dr({},no,Co),++Fe,e=AH("u"),(!e||e==="\\"||!pR(e.charCodeAt(0)))&&dr({},no,Co),t=e);Fe<pa&&(e=Rt.charCodeAt(Fe),!!fM(e));)++Fe,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Rt.charCodeAt(Fe)!==117&&dr({},no,Co),++Fe,e=AH("u"),(!e||e==="\\"||!fM(e.charCodeAt(0)))&&dr({},no,Co),t+=e);return t}function KUt(){var e,t;for(e=Fe++;Fe<pa;){if(t=Rt.charCodeAt(Fe),t===92)return Fe=e,UMe();if(fM(t))++Fe;else break}return Rt.slice(e,Fe)}function XUt(){var e,t,n;return e=Fe,t=Rt.charCodeAt(Fe)===92?UMe():KUt(),t.length===1?n=ob:GUt.hasOwnProperty(t)?n=By:t==="null"?n=fF:t==="true"||t==="false"?n=cF:n=ob,{type:n,value:t,start:e,end:Fe}}function Y9(){var e=Fe,t=Rt.charCodeAt(Fe),n,r=Rt[Fe],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Fe,{type:bu,value:String.fromCharCode(t),start:e,end:Fe};default:if(n=Rt.charCodeAt(Fe+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Fe+=2,{type:bu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Fe};case 33:case 61:return Fe+=2,Rt.charCodeAt(Fe)===61&&++Fe,{type:bu,value:Rt.slice(e,Fe),start:e,end:Fe}}}if(o=Rt.substr(Fe,4),o===">>>=")return Fe+=4,{type:bu,value:o,start:e,end:Fe};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return Fe+=3,{type:bu,value:s,start:e,end:Fe};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return Fe+=2,{type:bu,value:i,start:e,end:Fe};if(i==="//"&&dr({},no,Co),"<>=!+-*%&|^/".indexOf(r)>=0)return++Fe,{type:bu,value:r,start:e,end:Fe};dr({},no,Co)}function QUt(e){let t="";for(;Fe<pa&&Vte(Rt[Fe]);)t+=Rt[Fe++];return t.length===0&&dr({},no,Co),pR(Rt.charCodeAt(Fe))&&dr({},no,Co),{type:Yb,value:parseInt("0x"+t,16),start:e,end:Fe}}function JUt(e){let t="0"+Rt[Fe++];for(;Fe<pa&&BA(Rt[Fe]);)t+=Rt[Fe++];return(pR(Rt.charCodeAt(Fe))||Ap(Rt.charCodeAt(Fe)))&&dr({},no,Co),{type:Yb,value:parseInt(t,8),octal:!0,start:e,end:Fe}}function tme(){var e,t,n;if(n=Rt[Fe],dF(Ap(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Fe,e="",n!=="."){if(e=Rt[Fe++],n=Rt[Fe],e==="0"){if(n==="x"||n==="X")return++Fe,QUt(t);if(BA(n))return JUt(t);n&&Ap(n.charCodeAt(0))&&dr({},no,Co)}for(;Ap(Rt.charCodeAt(Fe));)e+=Rt[Fe++];n=Rt[Fe]}if(n==="."){for(e+=Rt[Fe++];Ap(Rt.charCodeAt(Fe));)e+=Rt[Fe++];n=Rt[Fe]}if(n==="e"||n==="E")if(e+=Rt[Fe++],n=Rt[Fe],(n==="+"||n==="-")&&(e+=Rt[Fe++]),Ap(Rt.charCodeAt(Fe)))for(;Ap(Rt.charCodeAt(Fe));)e+=Rt[Fe++];else dr({},no,Co);return pR(Rt.charCodeAt(Fe))&&dr({},no,Co),{type:Yb,value:parseFloat(e),start:t,end:Fe}}function ZUt(){var e="",t,n,r,i,s=!1;for(t=Rt[Fe],dF(t==="'"||t==='"',"String literal must starts with a quote"),n=Fe,++Fe;Fe<pa;)if(r=Rt[Fe++],r===t){t="";break}else if(r==="\\")if(r=Rt[Fe++],!r||!EI(r.charCodeAt(0)))switch(r){case"u":case"x":Rt[Fe]==="{"?(++Fe,e+=YUt()):e+=AH(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:BA(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),Fe<pa&&BA(Rt[Fe])&&(s=!0,i=i*8+"01234567".indexOf(Rt[Fe++]),"0123".indexOf(r)>=0&&Fe<pa&&BA(Rt[Fe])&&(i=i*8+"01234567".indexOf(Rt[Fe++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Rt[Fe]===`
`&&++Fe;else{if(EI(r.charCodeAt(0)))break;e+=r}return t!==""&&dr({},no,Co),{type:hR,value:e,octal:s,start:n,end:Fe}}function e7t(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";dr({},TH)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{dr({},TH)}try{return new RegExp(e,t)}catch{return null}}function t7t(){var e,t,n,r,i;for(e=Rt[Fe],dF(e==="/","Regular expression literal must start with a slash"),t=Rt[Fe++],n=!1,r=!1;Fe<pa;)if(e=Rt[Fe++],t+=e,e==="\\")e=Rt[Fe++],EI(e.charCodeAt(0))&&dr({},G9),t+=e;else if(EI(e.charCodeAt(0)))dr({},G9);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||dr({},G9),i=t.substr(1,t.length-2),{value:i,literal:t}}function n7t(){var e,t,n;for(t="",n="";Fe<pa&&(e=Rt[Fe],!!fM(e.charCodeAt(0)));)++Fe,e==="\\"&&Fe<pa?dr({},no,Co):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&dr({},TH,n),{value:n,literal:t}}function r7t(){var e,t,n,r;return Nr=null,BMe(),e=Fe,t=t7t(),n=n7t(),r=e7t(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Fe}}function i7t(e){return e.type===ob||e.type===By||e.type===cF||e.type===fF}function zMe(){if(BMe(),Fe>=pa)return{type:dR,start:Fe,end:Fe};const e=Rt.charCodeAt(Fe);return pR(e)?XUt():e===40||e===41||e===59?Y9():e===39||e===34?ZUt():e===46?Ap(Rt.charCodeAt(Fe+1))?tme():Y9():Ap(e)?tme():Y9()}function Cu(){const e=Nr;return Fe=e.end,Nr=zMe(),Fe=e.end,e}function VMe(){const e=Fe;Nr=zMe(),Fe=e}function s7t(e){const t=new td(IUt);return t.elements=e,t}function nme(e,t,n){const r=new td(e==="||"||e==="&&"?DUt:kUt);return r.operator=e,r.left=t,r.right=n,r}function o7t(e,t){const n=new td(RUt);return n.callee=e,n.arguments=t,n}function a7t(e,t,n){const r=new td(NUt);return r.test=e,r.consequent=t,r.alternate=n,r}function Hte(e){const t=new td(FMe);return t.name=e,t}function z2(e){const t=new td(PUt);return t.value=e.value,t.raw=Rt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function rme(e,t,n){const r=new td(OUt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function u7t(e){const t=new td($Ut);return t.properties=e,t}function ime(e,t,n){const r=new td(MUt);return r.key=t,r.value=n,r.kind=e,r}function l7t(e,t){const n=new td(LUt);return n.operator=e,n.argument=t,n.prefix=!0,n}function dr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(dF(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=Fe,n.description=i,n}function hF(e){e.type===dR&&dr(e,zUt),e.type===Yb&&dr(e,FUt),e.type===hR&&dr(e,jUt),e.type===ob&&dr(e,BUt),e.type===By&&dr(e,UUt),dr(e,no,e.value)}function ma(e){const t=Cu();(t.type!==bu||t.value!==e)&&hF(t)}function ai(e){return Nr.type===bu&&Nr.value===e}function K9(e){return Nr.type===By&&Nr.value===e}function c7t(){const e=[];for(Fe=Nr.start,ma("[");!ai("]");)ai(",")?(Cu(),e.push(null)):(e.push(ab()),ai("]")||ma(","));return Cu(),s7t(e)}function sme(){Fe=Nr.start;const e=Cu();return e.type===hR||e.type===Yb?(e.octal&&dr(e,jMe),z2(e)):Hte(e.value)}function f7t(){var e,t,n,r;if(Fe=Nr.start,e=Nr,e.type===ob)return n=sme(),ma(":"),r=ab(),ime("init",n,r);if(e.type===dR||e.type===bu)hF(e);else return t=sme(),ma(":"),r=ab(),ime("init",t,r)}function d7t(){var e=[],t,n,r,i={},s=String;for(Fe=Nr.start,ma("{");!ai("}");)t=f7t(),t.key.type===FMe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?dr({},VUt):i[r]=!0,e.push(t),ai("}")||ma(",");return ma("}"),u7t(e)}function h7t(){ma("(");const e=qte();return ma(")"),e}const p7t={if:1};function m7t(){var e,t,n;if(ai("("))return h7t();if(ai("["))return c7t();if(ai("{"))return d7t();if(e=Nr.type,Fe=Nr.start,e===ob||p7t[Nr.value])n=Hte(Cu().value);else if(e===hR||e===Yb)Nr.octal&&dr(Nr,jMe),n=z2(Cu());else{if(e===By)throw new Error(wI);e===cF?(t=Cu(),t.value=t.value==="true",n=z2(t)):e===fF?(t=Cu(),t.value=null,n=z2(t)):ai("/")||ai("/=")?(n=z2(r7t()),VMe()):hF(Cu())}return n}function g7t(){const e=[];if(ma("("),!ai(")"))for(;Fe<pa&&(e.push(ab()),!ai(")"));)ma(",");return ma(")"),e}function y7t(){Fe=Nr.start;const e=Cu();return i7t(e)||hF(e),Hte(e.value)}function v7t(){return ma("."),y7t()}function b7t(){ma("[");const e=qte();return ma("]"),e}function _7t(){var e,t,n;for(e=m7t();;)if(ai("."))n=v7t(),e=rme(".",e,n);else if(ai("("))t=g7t(),e=o7t(e,t);else if(ai("["))n=b7t(),e=rme("[",e,n);else break;return e}function ome(){const e=_7t();if(Nr.type===bu&&(ai("++")||ai("--")))throw new Error(wI);return e}function HD(){var e,t;if(Nr.type!==bu&&Nr.type!==By)t=ome();else{if(ai("++")||ai("--"))throw new Error(wI);if(ai("+")||ai("-")||ai("~")||ai("!"))e=Cu(),t=HD(),t=l7t(e.value,t);else{if(K9("delete")||K9("void")||K9("typeof"))throw new Error(wI);t=ome()}}return t}function ame(e){let t=0;if(e.type!==bu&&e.type!==By)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function w7t(){var e,t,n,r,i,s,o,a,u,l;if(e=Nr,u=HD(),r=Nr,i=ame(r),i===0)return u;for(r.prec=i,Cu(),t=[e,Nr],o=HD(),s=[u,r,o];(i=ame(Nr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=nme(a,u,o),s.push(n);r=Cu(),r.prec=i,s.push(r),t.push(Nr),n=HD(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=nme(s[l-1].value,s[l-2],n),l-=2;return n}function ab(){var e,t,n;return e=w7t(),ai("?")&&(Cu(),t=ab(),ma(":"),n=ab(),e=a7t(e,t,n)),e}function qte(){const e=ab();if(ai(","))throw new Error(wI);return e}function Wte(e){Rt=e,Fe=0,pa=Rt.length,Nr=null,VMe();const t=qte();if(Nr.type!==dR)throw new Error("Unexpect token after expression.");return t}var HMe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function qMe(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Ue("Missing arguments to clamp function."),o.length>3&&Ue("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Ue("Missing arguments to if function."),o.length>3&&Ue("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function E7t(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function WMe(e){e=e||{};const t=e.allowed?qf(e.allowed):{},n=e.forbidden?qf(e.forbidden):{},r=e.constants||HMe,i=(e.functions||qMe)(f),s=e.globalvar,o=e.fieldvar,a=vn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(gt(p))return p;const m=d[p.type];return m==null&&Ue("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Ft(n,m)?Ue("Illegal identifier: "+m):Ft(r,m)?r[m]:Ft(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[E7t(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Ue("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Ft(i,m)&&i[m];return y||Ue("Unrecognized function: "+m),vn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const ume=Symbol("vega_selection_getter");function GMe(e){return(!e.getter||!e.getter[ume])&&(e.getter=Rc(e.field),e.getter[ume]=!0),e.getter}const Gte="intersect",lme="union",x7t="vlMulti",S7t="vlPoint",cme="or",T7t="and",kd="_vgsid_",xI=Rc(kd),A7t="E",C7t="R",I7t="R-E",k7t="R-LE",R7t="R-RE",dM="index:unit";function fme(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=GMe(a)(e),S0(o)&&(o=la(o)),S0(r[s])&&(r[s]=la(r[s])),Ve(r[s])&&S0(r[s][0])&&(r[s]=r[s].map(la)),a.type===A7t){if(Ve(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===C7t){if(!ww(o,r[s]))return!1}else if(a.type===R7t){if(!ww(o,r[s],!0,!1))return!1}else if(a.type===I7t){if(!ww(o,r[s],!1,!1))return!1}else if(a.type===k7t&&!ww(o,r[s],!1,!0))return!1;return!0}function N7t(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[dM]&&r[dM].value:void 0,o=n===Gte,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=fme(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=fme(t,l),o^h)return h;return a&&o}const YMe=eS(xI),P7t=YMe.left,D7t=YMe.right;function O7t(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[dM]&&r[dM].value:void 0,o=n===Gte,a=xI(t),u=P7t(i,a);if(u===i.length||xI(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(D7t(i,a)-u<s.size)return!1}return!0}function $7t(e,t){return e.map(n=>yn(t.fields?{values:t.fields.map(r=>GMe(r)(n.datum))}:{[kd]:xI(n.datum)},t))}function M7t(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,w=0,E,T;w<b;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,T=c.length;E<T;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=X9[`${y}_union`],m[d]=v(g,mt(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(mt(f).reduce((S,A,C)=>(S[c[C].field]=A,S),{})))}else h=kd,p=xI(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[kd]:p}));if(t=t||lme,o[kd]?o[kd]=X9[`${kd}_${t}`](...Object.values(o[kd])):Object.keys(o).forEach(S=>{o[S]=Object.keys(o[S]).map(A=>o[S][A]).reduce((A,C)=>A===void 0?C:X9[`${u[S]}_${t}`](A,C))}),s=Object.keys(a),n&&s.length){const S=r?S7t:x7t;o[S]=t===lme?{[cme]:s.reduce((A,C)=>(A.push(...a[C]),A),[])}:{[T7t]:s.map(A=>({[cme]:a[A]}))}}return o}var X9={[`${kd}_union`]:eat,[`${kd}_intersect`]:Jot,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=la(t[0]),r=la(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=la(t[0]),r=la(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const L7t=":",F7t="@";function Yte(e,t,n,r){t[0].type!==sb&&Ue("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Kn(t).value,o="unit",a=F7t+o,u=L7t+i;s===Gte&&!Ft(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Ft(r,u)||(r[u]=n.getData(i).tuplesRef())}function KMe(e){const t=this.context.data[e];return t?t.values.value:[]}function j7t(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function B7t(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Nc).insert(t)),1}function U7t(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const mR=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},z7t=mR("format"),XMe=mR("timeFormat"),V7t=mR("utcFormat"),H7t=mR("timeParse"),q7t=mR("utcParse"),gP=new Date(2e3,0,1);function pF(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(gP.setYear(2e3),gP.setMonth(e),gP.setDate(t),XMe.call(this,gP,n))}function W7t(e){return pF.call(this,e,1,"%B")}function G7t(e){return pF.call(this,e,1,"%b")}function Y7t(e){return pF.call(this,0,2+e,"%A")}function K7t(e){return pF.call(this,0,2+e,"%a")}const X7t=":",Q7t="@",CH="%",QMe="$";function Kte(e,t,n,r){t[0].type!==sb&&Ue("First argument to data functions must be a string literal.");const i=t[0].value,s=X7t+i;if(!Ft(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function J7t(e,t,n,r){t[0].type!==sb&&Ue("First argument to indata must be a string literal."),t[1].type!==sb&&Ue("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=Q7t+s;Ft(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function qa(e,t,n,r){if(t[0].type===sb)dme(n,r,t[0].value);else for(e in n.scales)dme(n,r,e)}function dme(e,t,n){const r=CH+n;if(!Ft(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Kh(e,t){if(vn(e))return e;if(gt(e)){const n=t.scales[e];return n&&SFt(n.value)?n.value:void 0}}function Z7t(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=qa,n._range=qa,n._scale=qa;const r=i=>"_["+(i.type===sb?ot(CH+i.value):ot(CH)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Xte(e,t){return function(n,r,i){if(n){const s=Kh(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const ezt=Xte("area",hdt),tzt=Xte("bounds",ydt),nzt=Xte("centroid",xdt);function rzt(e,t){const n=Kh(e,(t||this).context);return n&&n.scale()}function izt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Qte(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function szt(){return Qte(this.context.dataflow,"warn",arguments)}function ozt(){return Qte(this.context.dataflow,"info",arguments)}function azt(){return Qte(this.context.dataflow,"debug",arguments)}function Q9(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function IH(e){const t=j0(e),n=Q9(t.r),r=Q9(t.g),i=Q9(t.b);return .2126*n+.7152*r+.0722*i}function uzt(e,t){const n=IH(e),r=IH(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function lzt(){const e=[].slice.call(arguments);return e.unshift({}),yn(...e)}function JMe(e,t){return e===t||e!==e&&t!==t?!0:Ve(e)?Ve(t)&&e.length===t.length?czt(e,t):!1:yt(e)&&yt(t)?ZMe(e,t):!1}function czt(e,t){for(let n=0,r=e.length;n<r;++n)if(!JMe(e[n],t[n]))return!1;return!0}function ZMe(e,t){for(const n in e)if(!JMe(e[n],t[n]))return!1;return!0}function hme(e){return t=>ZMe(e,t)}function fzt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Nc:Ve(n)||F4(n)?n:hme(n),c.remove(f)),t&&c.insert(t),r&&(f=hme(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function dzt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function hzt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const pme={};function pzt(e,t){const n=pme[t]||(pme[t]=Rc(t));return Ve(e)?e.map(n):n(e)}function Jte(e){return Ve(e)||ArrayBuffer.isView(e)?e:null}function Zte(e){return Jte(e)||(gt(e)?e:null)}function mzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Jte(e).join(...n)}function gzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Zte(e).indexOf(...n)}function yzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Zte(e).lastIndexOf(...n)}function vzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Zte(e).slice(...n)}function bzt(e,t,n){return vn(n)&&Ue("Function argument passed to replace."),String(e).replace(t,n)}function _zt(e){return Jte(e).slice().reverse()}function wzt(e,t,n){return xee(e||0,t||0,n||0)}function Ezt(e,t){const n=Kh(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function xzt(e,t){const n=Kh(e,(t||this).context);return n?n.copy():void 0}function Szt(e,t){const n=Kh(e,(t||this).context);return n?n.domain():[]}function Tzt(e,t,n){const r=Kh(e,(n||this).context);return r?Ve(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Azt(e,t){const n=Kh(e,(t||this).context);return n&&n.range?n.range():[]}function Czt(e,t,n){const r=Kh(e,(n||this).context);return r?r(t):void 0}function Izt(e,t,n,r,i){e=Kh(e,(i||this).context);const s=V3e(t,n);let o=e.domain(),a=o[0],u=Kn(o),l=ba;return u-a?l=N3e(e,a,u):e=(e.interpolator?pr("sequential")().interpolator(e.interpolator()):pr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Kn(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function kzt(e,t,n){const r=Kh(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function Rzt(e){let t=null;return function(n){return n?yI(n,t=t||cx(e)):e}}const eLe=e=>e.data;function tLe(e,t){const n=KMe.call(t,e);return n.root&&n.root.lookup||{}}function Nzt(e,t,n){const r=tLe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(eLe):void 0}function Pzt(e,t){const n=tLe(e,this)[t];return n?n.ancestors().map(eLe):void 0}const nLe=()=>typeof window<"u"&&window||null;function Dzt(){const e=nLe();return e?e.screen:{}}function Ozt(){const e=nLe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function $zt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function rLe(e,t,n){if(!e)return[];const[r,i]=e,s=new xs().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return B$e(o,s,Mzt(t))}function Mzt(e){let t=null;if(e){const n=mt(e.marktype),r=mt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function Lzt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=mt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function Fzt(e){return mt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function jzt(e,t,n){const{x:r,y:i,mark:s}=n,o=new xs().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),rLe([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>Bzt(u.x,u.y,t))}function Bzt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const SI={random(){return Dc()},cumulativeNormal:V4,cumulativeLogNormal:VZ,cumulativeUniform:GZ,densityNormal:FZ,densityLogNormal:zZ,densityUniform:WZ,quantileNormal:H4,quantileLogNormal:HZ,quantileUniform:YZ,sampleNormal:z4,sampleLogNormal:UZ,sampleUniform:qZ,isArray:Ve,isBoolean:jy,isDate:S0,isDefined(e){return e!==void 0},isNumber:ar,isObject:yt,isRegExp:UDe,isString:gt,isTuple:F4,isValid(e){return e!=null&&e===e},toBoolean:EZ,toDate(e){return xZ(e)},toNumber:la,toString:SZ,indexof:gzt,join:mzt,lastindexof:yzt,replace:bzt,reverse:_zt,slice:vzt,flush:jDe,lerp:zDe,merge:lzt,pad:qDe,peek:Kn,pluck:pzt,span:Kk,inrange:ww,truncate:WDe,rgb:j0,lab:ZO,hcl:e3,hsl:QO,luminance:IH,contrast:uzt,sequence:Ru,format:z7t,utcFormat:V7t,utcParse:q7t,utcOffset:oOe,utcSequence:lOe,timeFormat:XMe,timeParse:H7t,timeOffset:sOe,timeSequence:uOe,timeUnitSpecifier:YDe,monthFormat:W7t,monthAbbrevFormat:G7t,dayFormat:Y7t,dayAbbrevFormat:K7t,quarter:$De,utcquarter:MDe,week:XDe,utcweek:ZDe,dayofyear:KDe,utcdayofyear:JDe,warn:szt,info:ozt,debug:azt,extent(e){return Ah(e)},inScope:izt,intersect:rLe,clampRange:LDe,pinchDistance:dzt,pinchAngle:hzt,screen:Dzt,containerSize:$zt,windowSize:Ozt,bandspace:wzt,setdata:B7t,pathShape:Rzt,panLinear:NDe,panLog:PDe,panPow:DDe,panSymlog:ODe,zoomLinear:gZ,zoomLog:yZ,zoomPow:q$,zoomSymlog:vZ,encode:U7t,modify:fzt,lassoAppend:Lzt,lassoPath:Fzt,intersectLasso:jzt},Uzt=["view","item","group","xy","x","y"],zzt="event.vega.",iLe="this.",ene={},sLe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${ot(QMe+e)}]`,functions:Vzt,constants:HMe,visitors:ene},kH=WMe(sLe);function Vzt(e){const t=qMe(e);Uzt.forEach(n=>t[n]=zzt+n);for(const n in SI)t[n]=iLe+n;return yn(t,Z7t(e,SI,ene)),t}function fs(e,t,n){return arguments.length===1?SI[e]:(SI[e]=t,n&&(ene[e]=n),kH&&(kH.functions[e]=iLe+e),this)}fs("bandwidth",Ezt,qa);fs("copy",xzt,qa);fs("domain",Szt,qa);fs("range",Azt,qa);fs("invert",Tzt,qa);fs("scale",Czt,qa);fs("gradient",Izt,qa);fs("geoArea",ezt,qa);fs("geoBounds",tzt,qa);fs("geoCentroid",nzt,qa);fs("geoShape",kzt,qa);fs("geoScale",rzt,qa);fs("indata",j7t,J7t);fs("data",KMe,Kte);fs("treePath",Nzt,Kte);fs("treeAncestors",Pzt,Kte);fs("vlSelectionTest",N7t,Yte);fs("vlSelectionIdTest",O7t,Yte);fs("vlSelectionResolve",M7t,Yte);fs("vlSelectionTuples",$7t);function Ih(e,t){const n={};let r;try{e=gt(e)?e:ot(e)+"",r=Wte(e)}catch{Ue("Expression parse error: "+e)}r.visit(s=>{if(s.type!==LMe)return;const o=s.callee.name,a=sLe.visitors[o];a&&a(o,s.arguments,t,n)});const i=kH(r);return i.globals.forEach(s=>{const o=QMe+s;!Ft(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:yn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Hzt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const qzt=qf(["rule"]),mme=qf(["group","image","rect"]);function Wzt(e,t){let n="";return qzt[t]||(e.x2&&(e.x?(mme[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(mme[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function tne(e){return(e+"").toLowerCase()}function Gzt(e){return tne(e)==="operator"}function Yzt(e){return tne(e)==="collect"}function zT(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Kzt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var Xzt={operator:(e,t)=>zT(e,["_"],t.code),parameter:(e,t)=>zT(e,["datum","_"],t.code),event:(e,t)=>zT(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return zT(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+ot(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=Wzt(r,n),i+="return m;",zT(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(ot).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),Kzt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function Qzt(e){const t=this;Gzt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Jzt(e){const t=this;if(e.params){const n=t.get(e.id);n||Ue("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Zzt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Ve(i)?i.map(s=>gme(s,n,t)):gme(i,n,t)}return t}function gme(e,t,n){if(!e||!yt(e))return e;for(let r=0,i=yme.length,s;r<i;++r)if(s=yme[r],Ft(e,s.key))return s.parse(e,t,n);return e}var yme=[{key:"$ref",parse:eVt},{key:"$key",parse:nVt},{key:"$expr",parse:tVt},{key:"$field",parse:rVt},{key:"$encode",parse:sVt},{key:"$compare",parse:iVt},{key:"$context",parse:oVt},{key:"$subflow",parse:aVt},{key:"$tupleid",parse:uVt}];function eVt(e,t){return t.get(e.$ref)||Ue("Operator not defined: "+e.$ref)}function tVt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=rl(t.parameterExpression(e.$expr),e.$fields))}function nVt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=wZ(e.$key,e.$flat,t.expr.codegen))}function rVt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Rc(e.$field,e.$name,t.expr.codegen))}function iVt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=mt(e.$compare).map(i=>i&&i.$tupleid?Mt:i);return t.fn[n]||(t.fn[n]=bZ(r,e.$order,t.expr.codegen))}function sVt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=rl(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function oVt(e,t){return t}function aVt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function uVt(){return Mt}function lVt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Ue("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function cVt(e){var t=this,n=yt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Ue("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const fVt={skip:!0};function dVt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function hVt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],fVt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Nc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function oLe(e,t,n,r){return new aLe(e,t,n,r)}function aLe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||Xzt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function vme(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}aLe.prototype=vme.prototype={fork(){const e=new vme(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Yzt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[tne(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Hzt,parseOperator:Qzt,parseOperatorParameters:Jzt,parseParameters:Zzt,parseStream:lVt,parseUpdate:cVt,getState:dVt,setState:hVt};function pVt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),uLe(t,e.description()))}function uLe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function mVt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const J9="default";function gVt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:J9,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?gt(i)?i:i.user:J9,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return gt(r)||(i=r.item,r=r.user),RH(e,r&&r!==J9?r:i||r),i},{cursor:t})}function RH(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function hM(e,t){var n=e._runtime.data;return Ft(n,t)||Ue("Unrecognized data set: "+t),n[t]}function yVt(e,t){return arguments.length<2?hM(this,e).values.value:mF.call(this,e,Wb().remove(Nc).insert(t))}function mF(e,t){kOe(t)||Ue("Second argument to changes must be a changeset.");const n=hM(this,e);return n.modified=!0,this.pulse(n.input,t)}function vVt(e,t){return mF.call(this,e,Wb().insert(t))}function bVt(e,t){return mF.call(this,e,Wb().remove(t))}function lLe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function cLe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function gF(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function _Vt(e){var t=gF(e),n=lLe(e),r=cLe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function wVt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=gF(e),o=t.changedTouches?t.changedTouches[0]:t,s=aF(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=EVt(e,n,s),t}function EVt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;gt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:_a(e),item:_a(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const bme="view",xVt="timer",SVt="window",TVt={trap:!1};function AVt(e){const t=yn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Ve(r[s])&&(r[s]=qf(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function fLe(e,t,n,r){e._eventListeners.push({type:n,sources:mt(t),handler:r})}function CVt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function yP(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||yt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function IVt(e,t,n){var r=this,i=new U4(n),s=function(l,c){r.runAsync(null,()=>{e===bme&&CVt(r,t)&&l.preventDefault(),i.receive(wVt(r,l,c))})},o;if(e===xVt)yP(r,"timer",t)&&r.timer(s,t);else if(e===bme)yP(r,"view",t)&&r.addEventListener(t,s,TVt);else if(e===SVt?yP(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&yP(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);fLe(r,o,t,s)}return i}function _me(e){return e.item}function wme(e){return e.item.mark.source}function Eme(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function kVt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",_me),wme,Eme(e)),this.on(this.events("view","pointerout",_me),wme,Eme(t)),this}function RVt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Il(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const NVt="vega-bind",PVt="vega-bind-name",DVt="vega-bind-radio";function OVt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=_Z(r.debounce,i.update))),(r.input==null&&r.element?$Vt:LVt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function $Vt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),fLe(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(MVt(i))}}function MVt(e){return typeof Event<"u"?new Event(e):{type:e}}function LVt(e,t,n,r){const i=r.signal(n.signal),s=Il("div",{class:NVt}),o=n.input==="radio"?s:s.appendChild(Il("label"));o.appendChild(Il("span",{class:PVt},n.name||n.signal)),t.appendChild(s);let a=FVt;switch(n.input){case"checkbox":a=jVt;break;case"select":a=BVt;break;case"radio":a=UVt;break;case"range":a=zVt;break}a(e,o,n,i)}function FVt(e,t,n,r){const i=Il("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function jVt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Il("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function BVt(e,t,n,r){const i=Il("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};pM(o,r)&&(u.selected=!0),i.appendChild(Il("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(pM(n.options[a],o)){i.selectedIndex=a;return}}}function UVt(e,t,n,r){const i=Il("span",{class:DVt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};pM(o,r)&&(u.checked=!0);const l=Il("input",u);l.addEventListener("change",()=>e.update(o));const c=Il("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)pM(a[l].value,o)&&(a[l].checked=!0)}}function zVt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||F0(s,i,100),a=Il("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Il("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function pM(e,t){return e===t||e+""==t+""}function dLe(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,lLe(e),cLe(e),gF(e),i,s).background(e.background())}function nne(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function VVt(e,t,n,r){const i=new r(e.loader(),nne(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,gF(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function HVt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=uF(r);e=n._el=e?Z9(n,e,!0):null,pVt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||fR,a=e?s.renderer:s.headless;return n._renderer=a?dLe(n,n._renderer,e,a):null,n._handler=VVt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=Z9(n,t,!0):e.appendChild(Il("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=Z9(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{OVt(n,u.element||t,u)})),n}function Z9(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const VT=e=>+e||0,qVt=e=>({top:e,bottom:e,left:e,right:e});function xme(e){return yt(e)?{top:VT(e.top),bottom:VT(e.bottom),left:VT(e.left),right:VT(e.right)}:qVt(VT(e))}async function rne(e,t,n,r){const i=uF(t),s=i&&i.headless;return s||Ue("Unrecognized renderer type: "+t),await e.runAsync(),dLe(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function WVt(e,t){e!==Zg.Canvas&&e!==Zg.SVG&&e!==Zg.PNG&&Ue("Unrecognized image type: "+e);const n=await rne(this,e,t);return e===Zg.SVG?GVt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function GVt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function YVt(e,t){return(await rne(this,Zg.Canvas,e,t)).canvas()}async function KVt(e){return(await rne(this,Zg.SVG,e)).svg()}function XVt(e,t,n){return oLe(e,ox,SI,n).parse(t)}function QVt(e){var t=this._runtime.scales;return Ft(t,e)||Ue("Unrecognized scale or projection: "+e),t[e].value}var hLe="width",pLe="height",ine="padding",Sme={skip:!0};function mLe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===ine?r.left+r.right:0)}function gLe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===ine?r.top+r.bottom:0)}function JVt(e){var t=e._signals,n=t[hLe],r=t[pLe],i=t[ine];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=mLe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=gLe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function ZVt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(hLe,n,Sme),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(pLe,r,Sme),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function eHt(e){return this._runtime.getState(e||{data:tHt,signals:nHt,recurse:!0})}function tHt(e,t){return t.modified&&Ve(t.input.value)&&!e.startsWith("_:vega:_")}function nHt(e,t){return!(e==="parent"||t instanceof ox.proxy)}function rHt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function iHt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Alt(n,t))}function sHt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",oHt(r))}function oHt(e){return e==null?"":Ve(e)?yLe(e):yt(e)&&!S0(e)?aHt(e):e+""}function aHt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Ve(n)?yLe(n):vLe(n))}).join(`
`)}function yLe(e){return"["+e.map(vLe).join(", ")+"]"}function vLe(e){return Ve(e)?"[]":yt(e)&&!S0(e)?"{}":e}function uHt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function bLe(e,t){const n=this;if(t=t||{},rE.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=yn({},e.locale,t.locale);n.locale(bOe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Zg.Canvas,n._scenegraph=new h$e;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||sHt,n._redraw=!0,n._handler=new fR().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=AVt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=XVt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:yn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=mLe(n,n._width),n._viewHeight=gLe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,JVt(n),mVt(n),gVt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function vP(e,t){return Ft(e._signals,t)?e._signals[t]:Ue("Unrecognized signal name: "+ot(t))}function _Le(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Tme(e,t,n,r){let i=_Le(n,r);return i||(i=nne(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Ame(e,t,n){const r=_Le(t,n);return r&&t._targets.remove(r),e}ft(bLe,rE,{async evaluate(e,t,n){if(await rE.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,_Vt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&ND(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&uLe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=vP(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",xme(e)):xme(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(uF(e)||Ue("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(rE.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(vP(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:ZVt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=nne(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Tme(this,e,vP(this,e),t)},removeSignalListener(e,t){return Ame(this,vP(this,e),t)},addDataListener(e,t){return Tme(this,e,hM(this,e).values,t)},removeDataListener(e,t){return Ame(this,hM(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=RH(this,null);this._globalCursor=!!e,t&&RH(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:iHt,events:IVt,finalize:RVt,hover:kVt,data:yVt,change:mF,insert:vVt,remove:bVt,scale:QVt,initialize:HVt,toImageURL:WVt,toCanvas:YVt,toSVG:KVt,getState:eHt,setState:rHt,_watchPixelRatio:uHt});const lHt="view",mM="[",gM="]",wLe="{",ELe="}",cHt=":",xLe=",",fHt="@",dHt=">",hHt=/[[\]{}]/,pHt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let SLe,TLe;function Uy(e,t,n){return SLe=t||lHt,TLe=n||pHt,ALe(e.trim()).map(NH)}function mHt(e){return TLe[e]}function UA(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function ALe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=UA(e,i,xLe,mM+wLe,gM+ELe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function NH(e){return e[0]==="["?gHt(e):yHt(e)}function gHt(e){const t=e.length;let n=1,r;if(n=UA(e,n,gM,mM,gM),n===t)throw"Empty between selector: "+e;if(r=ALe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==dHt)throw"Expected '>' after between selector: "+e;r=r.map(NH);const i=NH(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function yHt(e){const t={source:SLe},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===ELe){if(a=e.lastIndexOf(wLe),a>=0){try{r=vHt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===fHt&&(i=++a),u=UA(e,a,cHt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=UA(e,a,mM),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=UA(e,a,gM),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==mM)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||hHt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):mHt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function vHt(e){const t=e.split(xLe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function bHt(e){return yt(e)?e:{type:e||"pad"}}const HT=e=>+e||0,_Ht=e=>({top:e,bottom:e,left:e,right:e});function wHt(e){return yt(e)?e.signal?e:{top:HT(e.top),bottom:HT(e.bottom),left:HT(e.left),right:HT(e.right)}:_Ht(HT(e))}const ro=e=>yt(e)&&!Ve(e)?yn({},e):{value:e};function Cme(e,t,n,r){return n!=null?(yt(n)&&!Ve(n)||Ve(n)&&n.length&&yt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Mo(e,t,n){for(const r in t)Cme(e,r,t[r]);for(const r in n)Cme(e,r,n[r],"update")}function jS(e,t,n){for(const r in t)n&&Ft(n,r)||(e[r]=yn(e[r]||{},t[r]));return e}function J_(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const sne="mark",one="frame",ane="scope",EHt="axis",xHt="axis-domain",SHt="axis-grid",THt="axis-label",AHt="axis-tick",CHt="axis-title",IHt="legend",kHt="legend-band",RHt="legend-entry",NHt="legend-gradient",CLe="legend-label",PHt="legend-symbol",DHt="legend-title",OHt="title",$Ht="title-text",MHt="title-subtitle";function LHt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!J_(u,e)&&eB(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===one?i.group:n===sne?yn({},i.mark,i[t]):null;for(u in c)l=J_(u,e)||(u==="fill"||u==="stroke")&&(J_("fill",e)||J_("stroke",e)),l||eB(s,u,c[u]);mt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)J_(h,e)||eB(s,h,d[h])}),e=yn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=yn(o,e.enter),a&&(e.update=yn(a,e.update)),e}function eB(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const ILe=e=>gt(e)?ot(e):e.signal?`(${e.signal})`:kLe(e);function yF(e){if(e.gradient!=null)return jHt(e);let t=e.signal?`(${e.signal})`:e.color?FHt(e.color):e.field!=null?kLe(e.field):e.value!==void 0?ot(e.value):void 0;return e.scale!=null&&(t=BHt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${qD(e.exponent)})`),e.mult!=null&&(t+=`*${qD(e.mult)}`),e.offset!=null&&(t+=`+${qD(e.offset)}`),e.round&&(t=`round(${t})`),t}const bP=(e,t,n,r)=>`(${e}(${[t,n,r].map(yF).join(",")})+'')`;function FHt(e){return e.c?bP("hcl",e.h,e.c,e.l):e.h||e.s?bP("hsl",e.h,e.s,e.l):e.l||e.a?bP("lab",e.l,e.a,e.b):e.r||e.g||e.b?bP("rgb",e.r,e.g,e.b):null}function jHt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:ot(n));for(;t.length&&Kn(t)==null;)t.pop();return t.unshift(ILe(e.gradient)),`gradient(${t.join(",")})`}function qD(e){return yt(e)?"("+yF(e)+")":e}function kLe(e){return RLe(yt(e)?e:{datum:e})}function RLe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Ue("Invalid field reference: "+ot(e));return e.signal||(r=gt(r)?Wh(r).map(ot).join("]["):RLe(r)),t+"["+r+"]"}function BHt(e,t){const n=ILe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+qD(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function UHt(e){let t="";return e.forEach(n=>{const r=yF(n);t+=n.test?`(${n.test})?${r}:`:r}),Kn(t)===":"&&(t+="null"),t}function NLe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=LHt(e,t,n,r,i.config);for(const a in e)o[a]=zHt(e[a],t,s,i);return s}function zHt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=HHt(VHt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function VHt(e){return Ve(e)?UHt(e):yF(e)}function HHt(e,t,n,r){const i=Ih(e,t);return i.$fields.forEach(s=>r[s]=1),yn(n,i.$params),i.$expr}const qHt="outer",WHt=["value","update","init","react","bind"];function Ime(e,t){Ue(e+' for "outer" push: '+ot(t))}function PLe(e,t){const n=e.name;if(e.push===qHt)t.signals[n]||Ime("No prior signal definition",n),WHt.forEach(r=>{e[r]!==void 0&&Ime("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function PH(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function vF(e,t,n,r){return new PH(e,t,n,r)}function yM(e,t){return vF("operator",e,t)}function $t(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function TI(e,t){return t?{$field:e,$name:t}:{$field:e}}const DH=TI("key");function kme(e,t){return{$compare:e,$order:t}}function GHt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const YHt="ascending",KHt="descending";function XHt(e){return yt(e)?(e.order===KHt?"-":"+")+bF(e.op,e.field):""}function bF(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const une="scope",OH="view";function Ls(e){return e&&e.signal}function QHt(e){return e&&e.expr}function WD(e){if(Ls(e))return!0;if(yt(e)){for(const t in e)if(WD(e[t]))return!0}return!1}function ff(e,t){return e??t}function x1(e){return e&&e.signal||e}const Rme="timer";function AI(e,t){return(e.merge?ZHt:e.stream?eqt:e.type?tqt:Ue("Invalid stream specification: "+ot(e)))(e,t)}function JHt(e){return e===une?OH:e||OH}function ZHt(e,t){const n=e.merge.map(i=>AI(i,t)),r=lne({merge:n},e,t);return t.addStream(r).id}function eqt(e,t){const n=AI(e.stream,t),r=lne({stream:n},e,t);return t.addStream(r).id}function tqt(e,t){let n;e.type===Rme?(n=t.event(Rme,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(JHt(e.source),e.type);const r=lne({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function lne(e,t,n){let r=t.between;return r&&(r.length!==2&&Ue('Stream "between" parameter must have 2 entries: '+ot(t)),e.between=[AI(r[0],n),AI(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(nqt(t.marktype,t.markname,t.markrole)),t.source===une&&r.push("inScope(event.item)"),r.length&&(e.filter=Ih("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function nqt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const rqt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function iqt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Ue("Signal update missing events specification."),gt(s)&&(s=Uy(s,t.isSubscope()?une:OH)),s=mt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[oqt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Ue("Signal encode and update are mutually exclusive."),o="encode(item(),"+ot(r)+")"),i.update=gt(o)?Ih(o,t):o.expr!=null?Ih(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:rqt,$params:{$value:t.signalRef(o.signal)}}:Ue("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(yn(sqt(u,t),i)))}function sqt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):AI(e,t)}}function oqt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function aqt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Ue("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Ih(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>iqt(i,t,n.id))}const Ur=e=>(t,n,r)=>vF(e,n,t||void 0,r),DLe=Ur("aggregate"),uqt=Ur("axisticks"),OLe=Ur("bound"),nd=Ur("collect"),Nme=Ur("compare"),lqt=Ur("datajoin"),$Le=Ur("encode"),cqt=Ur("expression"),fqt=Ur("facet"),dqt=Ur("field"),hqt=Ur("key"),pqt=Ur("legendentries"),mqt=Ur("load"),gqt=Ur("mark"),yqt=Ur("multiextent"),vqt=Ur("multivalues"),bqt=Ur("overlap"),_qt=Ur("params"),MLe=Ur("prefacet"),wqt=Ur("projection"),Eqt=Ur("proxy"),xqt=Ur("relay"),LLe=Ur("render"),Sqt=Ur("scale"),Kb=Ur("sieve"),Tqt=Ur("sortitems"),FLe=Ur("viewlayout"),Aqt=Ur("values");let Cqt=0;const jLe={min:"min",max:"max",count:"sum"};function Iqt(e,t){const n=e.type||"linear";T3e(n)||Ue("Unrecognized scale type: "+ot(n)),t.addScale(e.name,{type:n,domain:void 0})}function kqt(e,t){const n=t.getScale(e.name).params;let r;n.domain=BLe(e.domain,e,t),e.range!=null&&(n.range=zLe(e,t,n)),e.interpolate!=null&&jqt(e.interpolate,n),e.nice!=null&&(n.nice=Fqt(e.nice,t)),e.bins!=null&&(n.bins=Lqt(e.bins,t));for(r in e)Ft(n,r)||r==="name"||(n[r]=bc(e[r],t))}function bc(e,t){return yt(e)?e.signal?t.signalRef(e.signal):Ue("Unsupported object: "+ot(e)):e}function GD(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>bc(n,t))}function _F(e){Ue("Can not find data set: "+ot(e))}function BLe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Ue("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Ve(e)?Rqt:e.fields?Pqt:Nqt)(e,t,n)}function Rqt(e,t,n){return e.map(r=>bc(r,n))}function Nqt(e,t,n){const r=n.getData(e.data);return r||_F(e.data),lx(t.type)?r.valuesRef(n,e.field,ULe(e.sort,!1)):I3e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function Pqt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=gt(o)?{data:r,field:o}:Ve(o)||o.signal?Dqt(o,n):o,s.push(o),s),[]);return(lx(t.type)?Oqt:I3e(t.type)?$qt:Mqt)(e,n,i)}function Dqt(e,t){const n="_:vega:_"+Cqt++,r=nd({});if(Ve(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+ot(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Kb({})]),{data:n,field:"data"}}function Oqt(e,t,n){const r=ULe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||_F(l.data),c.countsRef(t,l.field,r)}),a={groupby:DH,pulse:o};r&&(i=r.op||"count",s=r.field?bF(i,r.field):"count",a.ops=[jLe[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(DLe(a));const u=t.add(nd({pulse:$t(i)}));return s=t.add(Aqt({field:DH,sort:t.sortRef(r),pulse:$t(u)})),$t(s)}function ULe(e,t){return e&&(!e.field&&!e.op?yt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Ue("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!jLe[e.op]&&Ue("Multiple domain scales can not be sorted using "+e.op)),e}function $qt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||_F(i.data),s.domainRef(t,i.field)});return $t(t.add(vqt({values:r})))}function Mqt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||_F(i.data),s.extentRef(t,i.field)});return $t(t.add(yqt({extents:r})))}function Lqt(e,t){return e.signal||Ve(e)?GD(e,t):t.objectProperty(e)}function Fqt(e,t){return e.signal?t.signalRef(e.signal):yt(e)?{interval:bc(e.interval),step:bc(e.step)}:bc(e)}function jqt(e,t){t.interpolate=bc(e.type||e),e.gamma!=null&&(t.interpolateGamma=bc(e.gamma))}function zLe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(gt(i)){if(r&&Ft(r,i))return e=yn({},e,{range:r[i]}),zLe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=lx(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Ue("Unrecognized scale range value: "+ot(i))}else if(i.scheme){n.scheme=Ve(i.scheme)?GD(i.scheme,t):bc(i.scheme,t),i.extent&&(n.schemeExtent=GD(i.extent,t)),i.count&&(n.schemeCount=bc(i.count,t));return}else if(i.step){n.rangeStep=bc(i.step,t);return}else{if(lx(e.type)&&!Ve(i))return BLe(i,e,t);Ve(i)||Ue("Unsupported range type: "+ot(i))}return i.map(s=>(Ve(s)?GD:bc)(s,t))}function Bqt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=$H(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=$H(n[i],i,t));t.addProjection(e.name,r)}function $H(e,t,n){return Ve(e)?e.map(r=>$H(r,t,n)):yt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Ue("Unsupported parameter object: "+ot(e)):e}const rd="top",BS="left",US="right",ly="bottom",VLe="center",Uqt="vertical",zqt="start",Vqt="middle",Hqt="end",MH="index",cne="label",qqt="offset",px="perc",Wqt="perc2",Ec="value",gR="guide-label",fne="guide-title",Gqt="group-title",Yqt="group-subtitle",Pme="symbol",YD="gradient",LH="discrete",FH="size",Kqt="shape",Xqt="fill",Qqt="stroke",Jqt="strokeWidth",Zqt="strokeDash",eWt="opacity",dne=[FH,Kqt,Xqt,Qqt,Jqt,Zqt,eWt],yR={name:1,style:1,interactive:1},Zn={value:0},xc={value:1},wF="group",HLe="rect",hne="rule",tWt="symbol",Xb="text";function CI(e){return e.type=wF,e.interactive=e.interactive||!1,e}function il(e,t){const n=(r,i)=>ff(e[r],ff(t[r],i));return n.isVertical=r=>Uqt===ff(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>ff(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>ff(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>ff(e.columns,ff(t.columns,+n.isVertical(!0))),n}function qLe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function nWt(e,t,n){const r=t.config.style[n];return r&&r[e]}function EF(e,t,n){return`item.anchor === '${zqt}' ? ${e} : item.anchor === '${Hqt}' ? ${t} : ${n}`}const pne=EF(ot(BS),ot(US),ot(VLe));function rWt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},yt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function WLe(e,t){return t?e?yt(e)?Object.assign({},e,{offset:WLe(e.offset,t)}):{value:e,offset:t}:t:e}function zl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=jS(e.encode,t,yR)):e.interactive=!1,e}function iWt(e,t,n,r){const i=il(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:Zn,x:Zn,y:Zn,width:ro(f),height:ro(d)},update:yn({},u,{opacity:xc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:Zn}};return Mo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),zl({type:HLe,role:NHt,encode:h},r)}function sWt(e,t,n,r,i){const s=il(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:Zn,fill:{scale:t,field:Ec}};p[l]={signal:h+"datum."+px,mult:u},p[c]=Zn,p[f]={signal:h+"datum."+Wqt,mult:u},p[d]=ro(a);const m={enter:p,update:yn({},p,{opacity:xc}),exit:{opacity:Zn}};return Mo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),zl({type:HLe,role:kHt,key:Ec,from:i,encode:m},r)}const oWt=`datum.${px}<=0?"${BS}":datum.${px}>=1?"${US}":"${VLe}"`,aWt=`datum.${px}<=0?"${ly}":datum.${px}>=1?"${rd}":"${Vqt}"`;function Dme(e,t,n,r){const i=il(e,t),s=i.isVertical(),o=ro(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:Zn},update:c={opacity:xc,text:{field:cne}},exit:{opacity:Zn}};return Mo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:ff(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:aWt},f="y",d="x",h="1-"):(l.align=c.align={signal:oWt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+px,mult:a},l[d]=c[d]=o,o.offset=ff(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+MH}:void 0,zl({type:Xb,role:CLe,style:gR,key:Ec,from:r,encode:p,overlap:u},n)}function uWt(e,t,n,r,i){const s=il(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${qqt} : datum.${FH}`,h=l?ro(l):{field:FH},p=`datum.${MH}`,m=`max(1, ${i})`;let g,y,v,b,w;h.mult=.5,g={enter:y={opacity:Zn,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:xc,x:y.x,y:y.y},exit:{opacity:Zn}};let E=null,T=null;e.fill||(E=t.symbolBaseFillColor,T=t.symbolBaseStrokeColor),Mo(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",T),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),dne.forEach(k=>{e[k]&&(v[k]=y[k]={scale:e[k],field:Ec})});const S=zl({type:tWt,role:PHt,key:Ec,from:f,clip:l?!0:void 0,encode:g},n.symbols),A=ro(c);A.offset=s("labelOffset"),g={enter:y={opacity:Zn,x:{signal:d,offset:A},y:h},update:v={opacity:xc,text:{field:cne},x:y.x,y:y.y},exit:{opacity:Zn}},Mo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const C=zl({type:Xb,role:CLe,style:gR,key:Ec,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:Zn,height:l?ro(l):Zn,opacity:Zn},exit:{opacity:Zn},update:v={opacity:xc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:MH}},CI({role:ane,from:r,encode:jS(g,o,yR),marks:[S,C],name:u,interactive:a,sort:w})}function lWt(e,t){const n=il(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const mne='item.orient === "left"',gne='item.orient === "right"',xF=`(${mne} || ${gne})`,cWt=`datum.vgrad && ${xF}`,fWt=EF('"top"','"bottom"','"middle"'),dWt=EF('"right"','"left"','"center"'),hWt=`datum.vgrad && ${gne} ? (${dWt}) : (${xF} && !(datum.vgrad && ${mne})) ? "left" : ${pne}`,pWt=`item._anchor || (${xF} ? "middle" : "start")`,mWt=`${cWt} ? (${mne} ? -90 : 90) : 0`,gWt=`${xF} ? (datum.vgrad ? (${gne} ? "bottom" : "top") : ${fWt}) : "top"`;function yWt(e,t,n,r){const i=il(e,t),s={enter:{opacity:Zn},update:{opacity:xc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Zn}};return Mo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:pWt},angle:{signal:mWt},align:{signal:hWt},baseline:{signal:gWt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),zl({type:Xb,role:DHt,style:fne,from:r,encode:s},n)}function vWt(e,t){let n;return yt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Ome(e.path)+")":e.sphere&&(n="geoShape("+Ome(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Ome(e){return yt(e)&&e.signal?e.signal:ot(e)}function GLe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===wF?ane:t||sne}function bWt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||GLe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function _Wt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function yne(e,t){const n=POe(e.type);n||Ue("Unrecognized transform type: "+ot(e.type));const r=vF(n.type.toLowerCase(),null,YLe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function YLe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=wWt(o,t,n)}return r}function wWt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return EWt(e,t,n);if(i===void 0){e.required&&Ue("Missing required "+ot(t.type)+" parameter: "+ot(e.name));return}else{if(r==="param")return xWt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Ls(i)?i.map(s=>$me(e,s,n)):$me(e,i,n)}function $me(e,t,n){const r=e.type;if(Ls(t))return Lme(r)?Ue("Expression references can not be signals."):tB(r)?n.fieldRef(t):Fme(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||tB(r);return i&&SWt(t)?n.exprRef(t.expr,t.as):i&&TWt(t)?TI(t.field,t.as):Lme(r)?Ih(t,n):AWt(r)?$t(n.getData(t).values):tB(r)?TI(t):Fme(r)?n.compareRef(t):t}}function EWt(e,t,n){return gt(t.from)||Ue('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function xWt(e,t,n){const r=t[e.name];return e.array?(Ve(r)||Ue("Expected an array of sub-parameters. Instead: "+ot(r)),r.map(i=>Mme(e,i,n))):Mme(e,r,n)}function Mme(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Ue("Unsupported parameter: "+ot(t));const s=yn(YLe(i,t,n),i.key);return $t(n.add(_qt(s)))}const SWt=e=>e&&e.expr,TWt=e=>e&&e.field,AWt=e=>e==="data",Lme=e=>e==="expr",tB=e=>e==="field",Fme=e=>e==="compare";function CWt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Ue("Only group marks can be faceted."),r.field!=null?o=a=KD(r,n):(e.data?a=$t(n.getData(e.data).aggregate):(s=yne(yn({type:"aggregate",groupby:mt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=KD(r,n),o=a=$t(n.add(s))),i=n.keyRef(r.groupby,!0))):o=$t(n.add(nd(null,[{}]))),o||(o=KD(e,n)),{key:i,pulse:o,parent:a}}function KD(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:$t(t.getData(e.data).output)}function ub(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}ub.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=$t(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new ub(e,s,i,r,o)};function KLe(e){return gt(e)?e:null}function jme(e,t,n){const r=bF(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function qT(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=XHt(s);let l=KLe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:DH,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:$t(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(vF(r,void 0,d)),o&&(t.index[i]=f),c=$t(f),l!=null&&(a[l]=c)}return c}ub.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=KLe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&jme(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:$t(r.output)},n&&n.field&&jme(e,u,n),a=e.add(DLe(u)),o=e.add(nd({pulse:$t(a)})),o={agg:a,ref:$t(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return $t(this.values)},extentRef(e,t){return qT(e,this,"extent","extent",t,!1)},domainRef(e,t){return qT(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return qT(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return qT(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return qT(e,this,"indata","tupleindex",t,!0,!0)}};function IWt(e,t,n){const r=e.from.facet,i=r.name,s=KD(r,t);let o;r.name||Ue("Facet must have a name: "+ot(r)),r.data||Ue("Facet must reference a data set: "+ot(r)),r.field?o=t.add(MLe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(fqt({key:t.keyRef(r.groupby),group:$t(t.proxy(n.parent)),pulse:s})):Ue("Facet must specify groupby or field: "+ot(r));const a=t.fork(),u=a.add(nd()),l=a.add(Kb({pulse:$t(u)}));a.addData(i,new ub(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function kWt(e,t,n){const r=t.add(MLe({pulse:n.pulse})),i=t.fork();i.add(Kb()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function XLe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(yM()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Ih(l,t);u.update=c.$expr,u.params=c.$params}function SF(e,t){const n=GLe(e),r=e.type===wF,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===ane||n===one,a,u,l,c,f,d,h;const p=n===sne||o||i,m=CWt(e.from,r,t);u=t.add(lqt({key:m.key||(e.key?TI(e.key):void 0),pulse:m.pulse,clean:!r}));const g=$t(u);u=l=t.add(nd({pulse:g})),u=t.add(gqt({markdef:bWt(e),interactive:_Wt(e.interactive,t),clip:vWt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:$t(u)}));const y=$t(u);u=c=t.add($Le(NLe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(T=>{const S=yne(T,t),A=S.metadata;(A.generates||A.changes)&&Ue("Mark transforms should not generate new data."),A.nomod||(c.params.mod=!0),S.params.pulse=$t(u),t.add(u=S)}),e.sort&&(u=t.add(Tqt({sort:t.compareRef(e.sort),pulse:$t(u)})));const v=$t(u);(i||o)&&(o=t.add(FLe({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=$t(o));const b=t.add(OLe({mark:y,pulse:d||v}));h=$t(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?IWt(e,t,m):p?kWt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=RWt(s,h,t));const w=t.add(LLe({pulse:h})),E=t.add(Kb({pulse:$t(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new ub(t,l,w,E)),e.on&&e.on.forEach(T=>{(T.insert||T.remove||T.toggle)&&Ue("Marks only support modify triggers."),XLe(T,t,f)}))}function RWt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Ls(s)?n.signalRef(s.signal):s,method:Ls(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Ls(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return $t(n.add(bqt(o)))}function NWt(e,t){const n=t.config.legend,r=e.encode||{},i=il(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;dne.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||Ue("Missing valid scale for legend.");const p=PWt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=$t(t.add(nd(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=$t(t.add(pqt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===YD?(h=[iWt(e,c,n,r.gradient),Dme(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${x1(i.gradientLength())})/100))`)):p===LH?h=[sWt(e,c,n,r.gradient,v),Dme(e,n,r.labels,v)]:(f=lWt(e,n),h=[uWt(e,n,r,v,x1(f.columns))],d.size=$Wt(e,t,h[0].marks)),h=[CI({role:RHt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(yWt(e,n,r.title,g)),SF(CI({role:IHt,from:g,encode:jS(OWt(i,e,n),s,yR),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function PWt(e,t){let n=e.type||Pme;return!e.type&&DWt(e)===1&&(e.fill||e.stroke)&&(n=Iee(t)?YD:JV(t)?LH:Pme),n!==YD?n:JV(t)?LH:YD}function DWt(e){return dne.reduce((t,n)=>t+(e[n]?1:0),0)}function OWt(e,t,n){const r={enter:{},update:{}};return Mo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function $Wt(e,t,n){const r=x1(Bme("size",e,n)),i=x1(Bme("strokeWidth",e,n)),s=x1(MWt(n[1].encode,t,gR));return Ih(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Bme(e,t,n){return t[e]?`scale("${t[e]}",datum)`:qLe(e,n[0].encode)}function MWt(e,t,n){return qLe("fontSize",e)||nWt("fontSize",t,n)}const LWt=`item.orient==="${BS}"?-90:item.orient==="${US}"?90:0`;function FWt(e,t){e=gt(e)?{text:e}:e;const n=il(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=$t(t.add(nd(null,[l])));return u.push(UWt(e,n,jWt(e),c)),e.subtitle&&u.push(zWt(e,n,r.subtitle,c)),SF(CI({role:OHt,from:c,encode:BWt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function jWt(e){const t=e.encode;return t&&t.title||yn({name:e.name,interactive:e.interactive,style:e.style},t)}function BWt(e,t){const n={enter:{},update:{}};return Mo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:pne},angle:{signal:LWt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),jS(n,t,yR)}function UWt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Mo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),zl({type:Xb,role:$Ht,style:Gqt,from:r,encode:o},n)}function zWt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Mo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),zl({type:Xb,role:MHt,style:Yqt,from:r,encode:o},n)}function VWt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(yne(r,t))}),e.on&&e.on.forEach(r=>{XLe(r,t,e.name)}),t.addDataPipeline(e.name,HWt(e,t,n))}function HWt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Ls(e.values)||WD(e.format)?(r.push(Ume(t,e)),r.push(i=av())):r.push(i=av({$ingest:e.values,$format:e.format})):e.url?WD(e.url)||WD(e.format)?(r.push(Ume(t,e)),r.push(i=av())):r.push(i=av({$request:e.url,$format:e.format})):e.source&&(i=a=mt(e.source).map(d=>$t(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=av()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=xqt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,av())),i||r.push(av()),r.push(Kb({})),r}function av(e){const t=nd({},e);return t.metadata={source:!0},t}function Ume(e,t){return mqt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const QLe=e=>e===ly||e===rd,TF=(e,t,n)=>Ls(e)?YWt(e.signal,t,n):e===BS||e===rd?t:n,io=(e,t,n)=>Ls(e)?WWt(e.signal,t,n):QLe(e)?t:n,Mf=(e,t,n)=>Ls(e)?GWt(e.signal,t,n):QLe(e)?n:t,JLe=(e,t,n)=>Ls(e)?KWt(e.signal,t,n):e===rd?{value:t}:{value:n},qWt=(e,t,n)=>Ls(e)?XWt(e.signal,t,n):e===US?{value:t}:{value:n},WWt=(e,t,n)=>ZLe(`${e} === '${rd}' || ${e} === '${ly}'`,t,n),GWt=(e,t,n)=>ZLe(`${e} !== '${rd}' && ${e} !== '${ly}'`,t,n),YWt=(e,t,n)=>vne(`${e} === '${BS}' || ${e} === '${rd}'`,t,n),KWt=(e,t,n)=>vne(`${e} === '${rd}'`,t,n),XWt=(e,t,n)=>vne(`${e} === '${US}'`,t,n),ZLe=(e,t,n)=>(t=t!=null?ro(t):t,n=n!=null?ro(n):n,zme(t)&&zme(n)?(t=t?t.signal||ot(t.value):null,n=n?n.signal||ot(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[yn({test:e},t)].concat(n||[])),zme=e=>e==null||Object.keys(e).length===1,vne=(e,t,n)=>({signal:`${e} ? (${Sw(t)}) : (${Sw(n)})`}),QWt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${BS}' ? (${Sw(r)}) : `:"")+(n!=null?`${e} === '${ly}' ? (${Sw(n)}) : `:"")+(i!=null?`${e} === '${US}' ? (${Sw(i)}) : `:"")+(t!=null?`${e} === '${rd}' ? (${Sw(t)}) : `:"")+"(null)"}),Sw=e=>Ls(e)?e.signal:e==null?null:ot(e),JWt=(e,t)=>t===0?0:Ls(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},iE=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function P_(e,t,n,r){let i;if(t&&Ft(t,e))return t[e];if(Ft(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[fne][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[gR][i]}return null}function Vme(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function ZWt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Ls(o)){const f=Vme([n.axisX,n.axisY]),d=Vme([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=io(o,P_(l,n.axisX,i,r),P_(l,n.axisY,i,r));u={};for(l of d)u[l]=QWt(o.signal,P_(l,n.axisTop,i,r),P_(l,n.axisBottom,i,r),P_(l,n.axisLeft,i,r),P_(l,n.axisRight,i,r))}else a=o===rd||o===ly?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?yn({},i,a,u,s):i}function eGt(e,t,n,r){const i=il(e,t),s=e.orient;let o,a;const u={enter:o={opacity:Zn},update:a={opacity:xc},exit:{opacity:Zn}};Mo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Hme(e,0),c=Hme(e,1);return o.x=a.x=io(s,l,Zn),o.x2=a.x2=io(s,c),o.y=a.y=Mf(s,l,Zn),o.y2=a.y2=Mf(s,c),zl({type:hne,role:xHt,from:r,encode:u},n)}function Hme(e,t){return{scale:e.scale,range:t}}function tGt(e,t,n,r,i){const s=il(e,t),o=e.orient,a=e.gridScale,u=TF(o,1,-1),l=nGt(e.offset,u);let c,f,d;const h={enter:c={opacity:Zn},update:d={opacity:xc},exit:f={opacity:Zn}};Mo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Ec,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=io(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:yn(m,{mult:u,offset:l});return c.x=d.x=io(o,p,g),c.y=d.y=Mf(o,p,g),c.x2=d.x2=Mf(o,y),c.y2=d.y2=io(o,y),f.x=io(o,p),f.y=Mf(o,p),zl({type:hne,role:SHt,key:Ec,from:r,encode:h},n)}function nGt(e,t){if(t!==1)if(!yt(e))e=Ls(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=yn({},e);for(;n.mult!=null;)if(yt(n.mult))n=n.mult=yn({},n.mult);else return n.mult=Ls(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function rGt(e,t,n,r,i,s){const o=il(e,t),a=e.orient,u=TF(a,-1,1);let l,c,f;const d={enter:l={opacity:Zn},update:f={opacity:xc},exit:c={opacity:Zn}};Mo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=ro(i);h.mult=u;const p={scale:e.scale,field:Ec,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=io(a,Zn,p),f.y2=l.y2=io(a,h),c.x=io(a,p),f.x=l.x=Mf(a,Zn,p),f.x2=l.x2=Mf(a,h),c.y=Mf(a,p),zl({type:hne,role:AHt,key:Ec,from:r,encode:d},n)}function nB(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function iGt(e,t,n,r,i,s){const o=il(e,t),a=e.orient,u=e.scale,l=TF(a,-1,1),c=x1(o("labelFlush")),f=x1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=ro(i);g.mult=l,g.offset=ro(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:Ec,band:.5,offset:WLe(s.offset,o("labelOffset"))},v=io(a,p?nB(u,c,'"left"','"right"','"center"'):{value:"center"},qWt(a,"left","right")),b=io(a,JLe(a,"bottom","top"),p?nB(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=nB(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:Zn,x:io(a,y,g),y:Mf(a,y,g)},T={enter:E,update:m={opacity:xc,text:{field:cne},x:E.x,y:E.y,align:v,baseline:b},exit:{opacity:Zn,x:E.x,y:E.y}};Mo(T,{dx:!d&&p?io(a,w):null,dy:!h&&p?Mf(a,w):null}),Mo(T,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const S=o("labelBound");let A=o("labelOverlap");return A=A||S?{separation:o("labelSeparation"),method:A,order:"datum.index",bound:S?{scale:u,orient:a,tolerance:S}:null}:void 0,m.align!==v&&(m.align=iE(m.align,v)),m.baseline!==b&&(m.baseline=iE(m.baseline,b)),zl({type:Xb,role:THt,style:gR,key:Ec,from:r,encode:T,overlap:A},n)}function sGt(e,t,n,r){const i=il(e,t),s=e.orient,o=TF(s,-1,1);let a,u;const l={enter:a={opacity:Zn,anchor:ro(i("titleAnchor",null)),align:{signal:pne}},update:u=yn({},a,{opacity:xc,text:ro(e.title)}),exit:{opacity:Zn}},c={signal:`lerp(range("${e.scale}"), ${EF(0,1,.5)})`};return u.x=io(s,c),u.y=Mf(s,c),a.angle=io(s,Zn,JWt(o,90)),a.baseline=io(s,JLe(s,ly,rd),{value:ly}),u.angle=a.angle,u.baseline=a.baseline,Mo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),oGt(i,s,l,n),l.update.align=iE(l.update.align,a.align),l.update.angle=iE(l.update.angle,a.angle),l.update.baseline=iE(l.update.baseline,a.baseline),zl({type:Xb,role:CHt,style:fne,from:r,encode:l},n)}function oGt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=iE(ro(a),n.update[u]),!1):!J_(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?ro(o):io(t,ro(o),ro(s))}function aGt(e,t){const n=ZWt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=il(e,n),l=rWt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=$t(t.add(nd({},[c]))),d=$t(t.add(uqt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(tGt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(rGt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(iGt(e,n,r.labels,d,p,l))),c.domain&&h.push(eGt(e,n,r.domain,f)),c.title&&h.push(sGt(e,n,r.title,f)),SF(CI({role:EHt,from:f,encode:jS(uGt(u,e),i,yR),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function uGt(e,t){const n={enter:{},update:{}};return Mo(n,{orient:e("orient"),offset:e("offset")||0,position:ff(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function e6e(e,t,n){const r=mt(e.signals),i=mt(e.scales);return n||r.forEach(s=>PLe(s,t)),mt(e.projections).forEach(s=>Bqt(s,t)),i.forEach(s=>Iqt(s,t)),mt(e.data).forEach(s=>VWt(s,t)),i.forEach(s=>kqt(s,t)),(n||r).forEach(s=>aqt(s,t)),mt(e.axes).forEach(s=>aGt(s,t)),mt(e.marks).forEach(s=>SF(s,t)),mt(e.legends).forEach(s=>NWt(s,t)),e.title&&FWt(e.title,t),t.parseLambdas(),t}const lGt=e=>jS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function cGt(e,t){const n=t.config,r=$t(t.root=t.add(yM())),i=fGt(e,n);i.forEach(l=>PLe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(nd()),o=t.add($Le(NLe(lGt(e.encode),wF,one,e.style,t,{pulse:$t(s)}))),a=t.add(FLe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:$t(o)}));t.operators.pop(),t.pushState($t(o),$t(a),null),e6e(e,t,i),t.operators.push(a);let u=t.add(OLe({mark:r,pulse:$t(a)}));return u=t.add(LLe({pulse:$t(u)})),u=t.add(Kb({pulse:$t(u)})),t.addData("root",new ub(t,s,s,u)),t}function WT(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function fGt(e,t){const n=o=>ff(e[o],t[o]),r=[WT("background",n("background")),WT("autosize",bHt(n("autosize"))),WT("padding",wHt(n("padding"))),WT("width",n("width")||0),WT("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return mt(e.signals).forEach(o=>{Ft(i,o.name)?o=yn(i[o.name],o):r.push(o),s[o.name]=o}),mt(t.signals).forEach(o=>{!Ft(s,o.name)&&!Ft(i,o.name)&&r.push(o)}),r}function t6e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function qme(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}t6e.prototype=qme.prototype={parse(e){return e6e(e,this)},fork(){return new qme(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof PH?$t(e):e;return this.add(Eqt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push($t(this.add(Kb({pulse:e})))),this._parent.push(t),this._lookup.push(n?$t(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Kn(this._parent)},encode(){return Kn(this._encode)},lookup(){return Kn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(gt(e))return TI(e,t);e.signal||Ue("Unsupported field reference: "+ot(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=$t(this.add(dqt(i)))}return r},compareRef(e){let t=!1;const n=s=>Ls(s)?(t=!0,this.signalRef(s.signal)):QHt(s)?(t=!0,this.exprRef(s.expr)):s,r=mt(e.field).map(n),i=mt(e.order).map(n);return t?$t(this.add(Nme({fields:r,orders:i}))):kme(r,i)},keyRef(e,t){let n=!1;const r=s=>Ls(s)?(n=!0,$t(i[s.signal])):s,i=this.signals;return e=mt(e).map(r),n?$t(this.add(hqt({fields:e,flat:t}))):GHt(e,t)},sortRef(e){if(!e)return e;const t=bF(e.op,e.field),n=e.order||YHt;return n.signal?$t(this.add(Nme({fields:t,orders:this.signalRef(n.signal)}))):kme(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Ft(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Ue("Duplicate signal name: "+ot(e));const n=t instanceof PH?t:this.add(yM(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Ue("Unrecognized signal name: "+ot(e)),this.signals[e]},signalRef(e){return this.signals[e]?$t(this.signals[e]):(Ft(this.lambdas,e)||(this.lambdas[e]=this.add(yM(null))),$t(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Ih(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!yt(e)?e:this.signalRef(e.signal||bne(e))},exprRef(e,t){const n={expr:Ih(e,this)};return t&&(n.expr.$name=t),$t(this.add(cqt(n)))},addBinding(e,t){this.bindings||Ue("Nested signals do not support binding: "+ot(e)),this.bindings.push(yn({signal:e},t))},addScaleProj(e,t){Ft(this.scales,e)&&Ue("Duplicate scale or projection name: "+ot(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Sqt(t))},addProjection(e,t){this.addScaleProj(e,wqt(t))},getScale(e){return this.scales[e]||Ue("Unrecognized scale name: "+ot(e)),this.scales[e]},scaleRef(e){return $t(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ft(this.data,e)&&Ue("Duplicate data set name: "+ot(e)),this.data[e]=t},getData(e){return this.data[e]||Ue("Undefined data set name: "+ot(e)),this.data[e]},addDataPipeline(e,t){return Ft(this.data,e)&&Ue("Duplicate data set name: "+ot(e)),this.addData(e,ub.fromEntries(this,t))}};function bne(e){return(Ve(e)?dGt:hGt)(e)}function dGt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(yt(i)?i.signal||bne(i):ot(i))}return n+"]"}function hGt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+ot(r)+":"+(yt(i)?i.signal||bne(i):ot(i));return t+"}"}function pGt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function mGt(e,t,n){return yt(e)||Ue("Input Vega specification must be an object."),t=NS(pGt(),t,e.config),cGt(e,new t6e(t,n)).toRuntime()}var gGt="5.29.0";yn(ox,mFt,r9t,$9t,dBt,bBt,WBt,TBt,YBt,JBt,uUt,mUt);const yGt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:xs,CanvasHandler:fR,CanvasRenderer:sM,DATE:Ju,DAY:ua,DAYOFYEAR:Ch,Dataflow:rE,Debug:ADe,Error:hZ,EventStream:U4,Gradient:V3e,GroupItem:eF,HOURS:jl,Handler:Zee,HybridHandler:O$e,HybridRenderer:lH,Info:TDe,Item:Z4,MILLISECONDS:Wf,MINUTES:Bl,MONTH:ha,Marks:Ul,MultiPulse:DZ,None:SDe,Operator:Gr,Parameters:B4,Pulse:T0,QUARTER:Qu,RenderType:Zg,Renderer:cR,ResourceLoader:X3e,SECONDS:Pc,SVGHandler:w$e,SVGRenderer:ste,SVGStringRenderer:D$e,Scenegraph:h$e,TIME_UNITS:TZ,Transform:Oe,View:bLe,WEEK:Ds,Warn:pZ,YEAR:Po,accessor:rl,accessorFields:da,accessorName:Gi,array:mt,ascending:O4,bandwidthNRD:LZ,bin:$Oe,bootstrapCI:MOe,boundClip:H$e,boundContext:oR,boundItem:iH,boundMark:l$e,boundStroke:Zm,changeset:Wb,clampRange:LDe,codegenExpression:WMe,compare:bZ,constant:_a,cumulativeLogNormal:VZ,cumulativeNormal:V4,cumulativeUniform:GZ,dayofyear:KDe,debounce:_Z,defaultLocale:IZ,definition:POe,densityLogNormal:zZ,densityNormal:FZ,densityUniform:WZ,domChild:Ns,domClear:hc,domCreate:Qg,domFind:Jee,dotbin:LOe,error:Ue,expressionFunction:fs,extend:yn,extent:Ah,extentIndex:FDe,falsy:bg,fastmap:DS,field:Rc,flush:jDe,font:sF,fontFamily:lR,fontSize:Gh,format:RD,formatLocale:W$,formats:NZ,hasOwnProperty:Ft,id:Yk,identity:ba,inferType:wOe,inferTypes:EOe,ingest:_r,inherits:ft,inrange:ww,interpolate:kee,interpolateColors:Q4,interpolateRange:k3e,intersect:B$e,intersectBoxLine:Ew,intersectPath:Lee,intersectPoint:Fee,intersectRule:J3e,isArray:Ve,isBoolean:jy,isDate:S0,isFunction:vn,isIterable:BDe,isNumber:ar,isObject:yt,isRegExp:UDe,isString:gt,isTuple:F4,key:wZ,lerp:zDe,lineHeight:oy,loader:M4,locale:bOe,logger:mZ,lruCache:VDe,markup:ite,merge:HDe,mergeConfig:NS,multiLineOffset:Kee,one:RS,pad:qDe,panLinear:NDe,panLog:PDe,panPow:DDe,panSymlog:ODe,parse:mGt,parseExpression:Wte,parseSelector:Uy,path:u6,pathCurves:Oee,pathEqual:q$e,pathParse:cx,pathRectangle:W3e,pathRender:yI,pathSymbols:q3e,pathTrail:G3e,peek:Kn,point:aF,projection:yte,quantileLogNormal:HZ,quantileNormal:H4,quantileUniform:YZ,quantiles:$Z,quantizeInterpolator:R3e,quarter:$De,quartiles:MZ,get random(){return Dc},randomInteger:b4t,randomKDE:BZ,randomLCG:v4t,randomLogNormal:jOe,randomMixture:BOe,randomNormal:jZ,randomUniform:UOe,read:TOe,regressionConstant:KZ,regressionExp:VOe,regressionLinear:XZ,regressionLoess:WOe,regressionLog:zOe,regressionPoly:qOe,regressionPow:HOe,regressionQuad:QZ,renderModule:uF,repeat:N2,resetDefaultLocale:m6t,resetSVGClipId:K3e,resetSVGDefIds:w8t,responseType:SOe,runtimeContext:oLe,sampleCurve:W4,sampleLogNormal:UZ,sampleNormal:z4,sampleUniform:qZ,scale:pr,sceneEqual:ote,sceneFromJSON:f$e,scenePickVisit:Q$,sceneToJSON:c$e,sceneVisit:Gf,sceneZOrder:jee,scheme:Ree,serializeXML:k$e,setHybridRendererOptions:y8t,setRandom:g4t,span:Kk,splitAccessPath:Wh,stringValue:ot,textMetrics:Cl,timeBin:dOe,timeFloor:nOe,timeFormatLocale:pI,timeInterval:OS,timeOffset:sOe,timeSequence:uOe,timeUnitSpecifier:YDe,timeUnits:AZ,toBoolean:EZ,toDate:xZ,toNumber:la,toSet:qf,toString:SZ,transform:DOe,transforms:ox,truncate:WDe,truthy:Nc,tupleid:Mt,typeParsers:KV,utcFloor:rOe,utcInterval:$S,utcOffset:oOe,utcSequence:lOe,utcdayofyear:JDe,utcquarter:MDe,utcweek:ZDe,version:gGt,visitArray:Ig,week:XDe,writeConfig:PS,zero:Ug,zoomLinear:gZ,zoomLog:yZ,zoomPow:q$,zoomSymlog:vZ},Symbol.toStringTag,{value:"Module"}));function vGt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var bGt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},_Gt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},wGt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const EGt=Array.prototype.slice,uv=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,EGt.call(t,1))},xGt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var SGt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:xGt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return uv("join",arguments)},indexof:function(){return uv("indexOf",arguments)},lastindexof:function(){return uv("lastIndexOf",arguments)},slice:function(){return uv("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return uv("substring",arguments,String)},split:function(){return uv("split",arguments,String)},replace:function(){return uv("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const TGt=["view","item","group","xy","x","y"],jH=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&jH.add(setImmediate);const AGt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:bGt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),jH.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||SGt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>_Gt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>wGt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,jH.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function GT(e,t,n,r,i,s){const o=a=>AGt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,TGt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var CGt={operator(e,t){const n=t.ast,r=e.functions;return i=>GT(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>GT(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>GT(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return GT(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=GT(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&vGt(o,r,s),l}}};const IGt="vega-lite",kGt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',RGt="5.18.1",NGt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],PGt="https://vega.github.io/vega-lite/",DGt="Vega-Lite is a concise high-level language for interactive visualization.",OGt=["vega","chart","visualization"],$Gt="build/vega-lite.js",MGt="build/vega-lite.min.js",LGt="build/vega-lite.min.js",FGt="build/src/index",jGt="build/src/index.d.ts",BGt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},UGt=["bin","build","src","vega-lite*","tsconfig.json"],zGt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},VGt={type:"git",url:"https://github.com/vega/vega-lite.git"},HGt="BSD-3-Clause",qGt={url:"https://github.com/vega/vega-lite/issues"},WGt={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},GGt={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},YGt={vega:"^5.24.0"},KGt={node:">=18"},XGt="yarn@1.22.19",QGt={name:IGt,author:kGt,version:RGt,collaborators:NGt,homepage:PGt,description:DGt,keywords:OGt,main:$Gt,unpkg:MGt,jsdelivr:LGt,module:FGt,types:jGt,bin:BGt,files:UGt,scripts:zGt,repository:VGt,license:HGt,bugs:qGt,devDependencies:WGt,dependencies:GGt,peerDependencies:YGt,engines:KGt,packageManager:XGt};function _ne(e){return!!e.or}function wne(e){return!!e.and}function Ene(e){return!!e.not}function XD(e,t){if(Ene(e))XD(e.not,t);else if(wne(e))for(const n of e.and)XD(n,t);else if(_ne(e))for(const n of e.or)XD(n,t);else t(e)}function sE(e,t){return Ene(e)?{not:sE(e.not,t)}:wne(e)?{and:e.and.map(n=>sE(n,t))}:_ne(e)?{or:e.or.map(n=>sE(n,t))}:t(e)}const tn=structuredClone;function n6e(e){throw new Error(e)}function mx(e,t){const n={};for(const r of t)Ft(e,r)&&(n[r]=e[r]);return n}function zu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Fr(e)).join(",")})`};function Un(e){if(ar(e))return e;const t=gt(e)?e:Fr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function BH(e){return e===!1||e===null}function zn(e,t){return e.includes(t)}function lb(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function xne(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function r6e(e,...t){for(const n of t)JGt(e,n??{});return e}function JGt(e,t){for(const n of Qe(t))PS(e,n,t[n],!0)}function Kd(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function ZGt(e,t){const n=Qe(e),r=Qe(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function i6e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Sne(e,t){for(const n of e)if(t.has(n))return!0;return!1}function UH(e){const t=new Set;for(const n of e){const i=Wh(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Tne(e,t){return e===void 0||t===void 0?!0:Sne(UH(e),UH(t))}function Lr(e){return Qe(e).length===0}const Qe=Object.keys,Do=Object.values,cy=Object.entries;function II(e){return e===!0||e===!1}function Si(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function zA(e,t){return Ene(e)?`!(${zA(e.not,t)})`:wne(e)?`(${e.and.map(n=>zA(n,t)).join(") && (")})`:_ne(e)?`(${e.or.map(n=>zA(n,t)).join(") || (")})`:t(e)}function vM(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&vM(e[n],t)&&delete e[n],Lr(e)}function vR(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Ane(e,t="datum"){const n=Wh(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(ot).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function s6e(e,t="datum"){return`${t}[${ot(Wh(e).join("."))}]`}function eYt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Oc(e){return`${Wh(e).map(eYt).join("\\.")}`}function cb(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function zS(e){return`${Wh(e).join(".")}`}function gx(e){return e?Wh(e).length:0}function as(...e){for(const t of e)if(t!==void 0)return t}let o6e=42;function a6e(e){const t=++o6e;return e?String(e)+t:t}function tYt(){o6e=42}function u6e(e){return l6e(e)?e:`__${e}`}function l6e(e){return e.startsWith("__")}function kI(e){if(e!==void 0)return(e%360+360)%360}function AF(e){return ar(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Wme=Object.getPrototypeOf(structuredClone({}));function Sl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Sl(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Sl(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Wme.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Wme.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Sl(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Fr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const em="row",tm="column",CF="facet",Ti="x",fo="y",id="x2",Xh="y2",zy="xOffset",VS="yOffset",sd="radius",tg="radius2",qc="theta",ng="theta2",od="latitude",ad="longitude",ud="latitude2",$c="longitude2",Zu="color",Qh="fill",Jh="stroke",el="shape",rg="size",Qb="angle",ig="opacity",Vy="fillOpacity",Hy="strokeOpacity",qy="strokeWidth",Wy="strokeDash",bR="text",yx="order",_R="detail",IF="key",fb="tooltip",kF="href",RF="url",NF="description",nYt={x:1,y:1,x2:1,y2:1},c6e={theta:1,theta2:1,radius:1,radius2:1};function f6e(e){return e in c6e}const Cne={longitude:1,longitude2:1,latitude:1,latitude2:1};function d6e(e){switch(e){case od:return"y";case ud:return"y2";case ad:return"x";case $c:return"x2"}}function h6e(e){return e in Cne}const rYt=Qe(Cne),Ine={...nYt,...c6e,...Cne,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function oE(e){return e===Zu||e===Qh||e===Jh}const p6e={row:1,column:1,facet:1},_c=Qe(p6e),kne={...Ine,...p6e},iYt=Qe(kne),{order:$on,detail:Mon,tooltip:Lon,...sYt}=kne,{row:Fon,column:jon,facet:Bon,...oYt}=sYt;function aYt(e){return!!oYt[e]}function m6e(e){return!!kne[e]}const uYt=[id,Xh,ud,$c,ng,tg];function g6e(e){return Jb(e)!==e}function Jb(e){switch(e){case id:return Ti;case Xh:return fo;case ud:return od;case $c:return ad;case ng:return qc;case tg:return sd}return e}function fy(e){if(f6e(e))switch(e){case qc:return"startAngle";case ng:return"endAngle";case sd:return"outerRadius";case tg:return"innerRadius"}return e}function Zh(e){switch(e){case Ti:return id;case fo:return Xh;case od:return ud;case ad:return $c;case qc:return ng;case sd:return tg}}function tl(e){switch(e){case Ti:case id:return"width";case fo:case Xh:return"height"}}function y6e(e){switch(e){case Ti:return"xOffset";case fo:return"yOffset";case id:return"x2Offset";case Xh:return"y2Offset";case qc:return"thetaOffset";case sd:return"radiusOffset";case ng:return"theta2Offset";case tg:return"radius2Offset"}}function Rne(e){switch(e){case Ti:return"xOffset";case fo:return"yOffset"}}function lYt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const cYt=Qe(Ine),{x:Uon,y:zon,x2:Von,y2:Hon,xOffset:qon,yOffset:Won,latitude:Gon,longitude:Yon,latitude2:Kon,longitude2:Xon,theta:Qon,theta2:Jon,radius:Zon,radius2:ean,...Nne}=Ine,fYt=Qe(Nne),Pne={x:1,y:1},ep=Qe(Pne);function us(e){return e in Pne}const Dne={theta:1,radius:1},dYt=Qe(Dne);function PF(e){return e==="width"?Ti:fo}const v6e={xOffset:1,yOffset:1};function wR(e){return e in v6e}const{text:tan,tooltip:nan,href:ran,url:ian,description:san,detail:oan,key:aan,order:uan,...b6e}=Nne,hYt=Qe(b6e);function pYt(e){return!!Nne[e]}function mYt(e){switch(e){case Zu:case Qh:case Jh:case rg:case el:case ig:case qy:case Wy:return!0;case Vy:case Hy:case Qb:return!1}}const _6e={...Pne,...Dne,...v6e,...b6e},DF=Qe(_6e);function sg(e){return!!_6e[e]}function gYt(e,t){return vYt(e)[t]}const w6e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:lan,...yYt}=w6e;function vYt(e){switch(e){case Zu:case Qh:case Jh:case NF:case _R:case IF:case fb:case kF:case yx:case ig:case Vy:case Hy:case qy:case CF:case em:case tm:return w6e;case Ti:case fo:case zy:case VS:case od:case ad:return yYt;case id:case Xh:case ud:case $c:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case rg:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Wy:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case el:return{point:"always",geoshape:"always"};case bR:return{text:"always"};case Qb:return{point:"always",square:"always",text:"always"};case RF:return{image:"always"};case qc:return{text:"always",arc:"always"};case sd:return{text:"always",arc:"always"};case ng:case tg:return{arc:"always"}}}function rB(e){switch(e){case Ti:case fo:case qc:case sd:case zy:case VS:case rg:case Qb:case qy:case ig:case Vy:case Hy:case id:case Xh:case ng:case tg:return;case CF:case em:case tm:case el:case Wy:case bR:case fb:case kF:case RF:case NF:return"discrete";case Zu:case Qh:case Jh:return"flexible";case od:case ad:case ud:case $c:case _R:case IF:case yx:return}}const bYt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},_Yt={count:1,min:1,max:1};function Pm(e){return!!e&&!!e.argmin}function Gy(e){return!!e&&!!e.argmax}function One(e){return gt(e)&&!!bYt[e]}const wYt=new Set(["count","valid","missing","distinct"]);function E6e(e){return gt(e)&&wYt.has(e)}function EYt(e){return gt(e)&&zn(["min","max"],e)}const xYt=new Set(["count","sum","distinct","valid","missing"]),SYt=new Set(["mean","average","median","q1","q3","min","max"]);function x6e(e){return jy(e)&&(e=qF(e,void 0)),"bin"+Qe(e).map(t=>OF(e[t])?Si(`_${t}_${cy(e[t])}`):Si(`_${t}_${e[t]}`)).join("")}function ri(e){return e===!0||Zb(e)&&!e.binned}function xo(e){return e==="binned"||Zb(e)&&e.binned===!0}function Zb(e){return yt(e)}function OF(e){return e==null?void 0:e.param}function Gme(e){switch(e){case em:case tm:case rg:case Zu:case Qh:case Jh:case qy:case ig:case Vy:case Hy:case el:return 6;case Wy:return 4;default:return 10}}function ER(e){return!!(e!=null&&e.expr)}function Su(e){const t=Qe(e||{}),n={};for(const r of t)n[r]=gl(e[r]);return n}function S6e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=mx(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function Ng(e){return gt(e)||Ve(e)&&gt(e[0])}function Nt(e){return!!(e!=null&&e.signal)}function Yy(e){return!!e.step}function TYt(e){return Ve(e)?!1:"fields"in e&&!("data"in e)}function AYt(e){return Ve(e)?!1:"fields"in e&&"data"in e}function Wp(e){return Ve(e)?!1:"field"in e&&"data"in e}const CYt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},IYt=Qe(CYt),kYt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},zH=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function T6e(e){const t=Ve(e.condition)?e.condition.map(Yme):Yme(e.condition);return{...gl(e),condition:t}}function gl(e){if(ER(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Yme(e){if(ER(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function ui(e){if(ER(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Nt(e)?e:e!==void 0?{value:e}:void 0}function RYt(e){return Nt(e)?e.signal:ot(e)}function Kme(e){return Nt(e)?e.signal:ot(e.value)}function Cf(e){return Nt(e)?e.signal:e==null?null:ot(e)}function NYt(e,t,n){for(const r of n){const i=Dm(r,t.markDef,t.config);i!==void 0&&(e[r]=ui(i))}return e}function A6e(e){return[].concat(e.type,e.style??[])}function br(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Dm(e,t,n,r)}function Dm(e,t,n,{vgChannel:r}={}){return as(r?bM(e,t,n.style):void 0,bM(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function bM(e,t,n){return C6e(e,A6e(t),n)}function C6e(e,t,n){t=mt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function I6e(e,t){return mt(e).reduce((n,r)=>(n.field.push(lt(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function k6e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Sl(i,r))return;n.push(r)}),n}function R6e(e,t){return Sl(e,t)||!t?e:e?[...mt(e),...mt(t)].join(", "):t}function N6e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Ng(n)||Nt(n))&&(Ng(r)||Nt(r)))return{explicit:e.explicit,value:R6e(n,r)};if(Ng(n)||Nt(n))return{explicit:e.explicit,value:n};if(Ng(r)||Nt(r))return{explicit:e.explicit,value:r};if(!Ng(n)&&!Nt(n)&&!Ng(r)&&!Nt(r))return{explicit:e.explicit,value:k6e(n,r)};throw new Error("It should never reach here")}function $ne(e){return`Invalid specification ${Fr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const PYt='Autosize "fit" only works for single views and layered views.';function Xme(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Qme(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Jme(e){return e?`Dropping "fit-${e}" because spec has discrete ${tl(e)}.`:'Dropping "fit" because spec has discrete size.'}function Mne(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Zme(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function DYt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function OYt(e){return`The "nearest" transform is not supported for ${e} marks.`}function P6e(e){return`Selection not supported for ${e} yet.`}function $Yt(e){return`Cannot find a selection named "${e}".`}const MYt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",LYt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",FYt="Legend bindings are only supported for selections over an individual field or encoding channel.";function jYt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function BYt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const UYt="The same selection must be used to override scale domains in a layered view.",zYt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function VYt(e){return`Unknown repeated value "${e}".`}function ege(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const HYt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function qYt(e){return`Unrecognized parse "${e}".`}function tge(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const WYt="Attempt to add the same child twice.";function GYt(e){return`Ignoring an invalid transform: ${Fr(e)}.`}const YYt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function nge(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function KYt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Fr(t)} is overridden by a child projection ${Fr(n)}.`}const XYt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function QYt(e){return`${e}Offset dropped because ${e} is continuous`}function JYt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Fr(n)}}.`}function D6e(e){return`Invalid field type "${e}".`}function ZYt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function eKt(e){return`Invalid aggregation operator "${e}".`}function O6e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function tKt(e){return`Position range does not support relative band size for ${e}.`}function VH(e,t){return`Dropping ${Fr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const nKt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function $F(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function rKt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function iKt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function sKt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function oKt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function iB(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function aKt(e){return`The ${e} for range marks cannot be an expression`}function uKt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function lKt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function cKt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function fKt(e){return`Cannot use the relative band size with ${e} scale.`}function dKt(e){return`Using unaggregated domain with raw field has no effect (${Fr(e)}).`}function hKt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function pKt(e){return`Unaggregated domain is currently unsupported for log scale (${Fr(e)}).`}function mKt(e){return`Cannot apply size to non-oriented mark "${e}".`}function gKt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function yKt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function $6e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function M6e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function vKt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Fr(n)} and ${Fr(r)}). Using ${Fr(n)}.`}function bKt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Fr(n)} and ${Fr(r)}). Using the union of the two domains.`}function _Kt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function wKt(e){return`Dropping sort property ${Fr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const rge="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",EKt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",xKt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",SKt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function TKt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function AKt(e){return`Stack is applied to a non-linear scale (${e}).`}function CKt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function _M(e,t){return`Invalid ${e}: ${Fr(t)}.`}function IKt(e){return`Dropping day from datetime ${Fr(e)} as day cannot be combined with other units.`}function kKt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function RKt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function NKt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function ige(e){return`1D error band does not support ${e}.`}function L6e(e){return`Channel ${e} is required for "binned" bin.`}function PKt(e){return`Channel ${e} should not be used with "binned" bin.`}function DKt(e){return`Domain for ${e} is required for threshold scale.`}const F6e=mZ(pZ);let vx=F6e;function OKt(e){return vx=e,vx}function $Kt(){return vx=F6e,vx}function tt(...e){vx.warn(...e)}function MKt(...e){vx.debug(...e)}function e_(e){if(e&&yt(e)){for(const t of Fne)if(t in e)return!0}return!1}const j6e=["january","february","march","april","may","june","july","august","september","october","november","december"],LKt=j6e.map(e=>e.substr(0,3)),B6e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],FKt=B6e.map(e=>e.substr(0,3));function jKt(e){if(AF(e)&&(e=+e),ar(e))return e>4&&tt(_M("quarter",e)),e-1;throw new Error(_M("quarter",e))}function BKt(e){if(AF(e)&&(e=+e),ar(e))return e-1;{const t=e.toLowerCase(),n=j6e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=LKt.indexOf(r);if(i!==-1)return i;throw new Error(_M("month",e))}}function UKt(e){if(AF(e)&&(e=+e),ar(e))return e%7;{const t=e.toLowerCase(),n=B6e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=FKt.indexOf(r);if(i!==-1)return i;throw new Error(_M("day",e))}}function Lne(e,t){const n=[];if(t&&e.day!==void 0&&Qe(e).length>1&&(tt(IKt(e)),e=tn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?BKt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?jKt(e.quarter):e.quarter;n.push(ar(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?UKt(e.day):e.day;n.push(ar(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function db(e){const n=Lne(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function zKt(e){const n=Lne(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function VKt(e){const t=Lne(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const U6e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Fne=Qe(U6e);function HKt(e){return!!U6e[e]}function t_(e){return yt(e)?e.binned:z6e(e)}function z6e(e){return e&&e.startsWith("binned")}function jne(e){return e.startsWith("utc")}function qKt(e){return e.substring(3)}const WKt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function MF(e){return Fne.filter(t=>H6e(e,t))}function V6e(e){const t=MF(e);return t[t.length-1]}function H6e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function GKt(e,t,{end:n}={end:!1}){const r=Ane(t),i=jne(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Fne)H6e(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),zKt(a)}function q6e(e){if(!e)return;const t=MF(e);return`timeUnitSpecifier(${Fr(t)}, ${Fr(WKt)})`}function YKt(e,t,n){if(!e)return;const r=q6e(e);return`${n||jne(e)?"utc":"time"}Format(${t}, ${r})`}function ao(e){if(!e)return;let t;return gt(e)?z6e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:yt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),jne(t.unit)&&(t.utc=!0,t.unit=qKt(t.unit)),t}function KKt(e){const{utc:t,...n}=ao(e);return n.unit?(t?"utc":"")+Qe(n).map(r=>Si(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Qe(n).map(r=>Si(`_${r}_${n[r]}`)).join("")}function W6e(e,t=n=>n){const n=ao(e),r=V6e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=G6e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(db(a))} - ${t(db(i))}`}}const XKt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function QKt(e){return!!XKt[e]}function G6e(e,t=1){if(QKt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function JKt(e){return e==null?void 0:e.param}function Bne(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Une(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function zne(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Vne(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Hne(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function qne(e){if(e!=null&&e.field){if(Ve(e.range)&&e.range.length===2)return!0;if(Nt(e.range))return!0}return!1}function Wne(e){return!!(e!=null&&e.field)&&(Ve(e.oneOf)||Ve(e.in))}function ZKt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function Y6e(e){return Wne(e)||Bne(e)||qne(e)||Une(e)||Vne(e)||zne(e)||Hne(e)}function vd(e,t){return WF(e,{timeUnit:t,wrapTime:!0})}function eXt(e,t){return e.map(n=>vd(n,t))}function K6e(e,t=!0){const{field:n}=e,r=ao(e.timeUnit),{unit:i,binned:s}=r||{},o=lt(e,{expr:"datum"}),a=i?`time(${s?o:GKt(i,n)})`:o;if(Bne(e))return`${a}===${vd(e.equal,i)}`;if(Une(e)){const u=e.lt;return`${a}<${vd(u,i)}`}else if(Vne(e)){const u=e.gt;return`${a}>${vd(u,i)}`}else if(zne(e)){const u=e.lte;return`${a}<=${vd(u,i)}`}else if(Hne(e)){const u=e.gte;return`${a}>=${vd(u,i)}`}else{if(Wne(e))return`indexof([${eXt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(ZKt(e))return Gne(a,e.valid);if(qne(e)){const{range:u}=e,l=Nt(u)?{signal:`${u.signal}[0]`}:u[0],c=Nt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+vd(l,i)+", "+vd(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${vd(l,i)}`),c!==null&&f.push(`${a} <= ${vd(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Fr(e)}`)}function Gne(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function tXt(e){return Y6e(e)&&e.timeUnit?{...e,timeUnit:ao(e.timeUnit)}:e}const xR={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function nXt(e){return e==="quantitative"||e==="temporal"}function X6e(e){return e==="ordinal"||e==="nominal"}const hb=xR.quantitative,Yne=xR.ordinal,bx=xR.temporal,Kne=xR.nominal,HS=xR.geojson;function rXt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case hb:return"quantitative";case"t":case bx:return"temporal";case"o":case Yne:return"ordinal";case"n":case Kne:return"nominal";case HS:return"geojson"}}const Vu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},HH={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function iXt(e,t){const n=HH[e],r=HH[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const sXt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function sge(e){return sXt[e]}const Q6e=new Set(["linear","log","pow","sqrt","symlog"]),J6e=new Set([...Q6e,"time","utc"]);function Z6e(e){return Q6e.has(e)}const e4e=new Set(["quantile","quantize","threshold"]),oXt=new Set([...J6e,...e4e,"sequential","identity"]),aXt=new Set(["ordinal","bin-ordinal","point","band"]);function uo(e){return aXt.has(e)}function Vl(e){return oXt.has(e)}function If(e){return J6e.has(e)}function _x(e){return e4e.has(e)}const uXt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function lXt(e){return!gt(e)&&!!e.name}function t4e(e){return e==null?void 0:e.param}function cXt(e){return e==null?void 0:e.unionWith}function fXt(e){return yt(e)&&"field"in e}const dXt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:can,domain:fan,range:dan,rangeMax:han,rangeMin:pan,scheme:man,...hXt}=dXt,pXt=Qe(hXt);function qH(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return If(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return If(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return If(e);case"nice":return If(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Vl(e)&&!zn(["log","time","utc","threshold","quantile"],e)}}function n4e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return oE(e)?void 0:cKt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function mXt(e,t){return zn([Yne,Kne],t)?e===void 0||uo(e):t===bx?zn([Vu.TIME,Vu.UTC,void 0],e):t===hb?Z6e(e)||_x(e)||e===void 0:!0}function gXt(e,t,n=!1){if(!sg(e))return!1;switch(e){case Ti:case fo:case zy:case VS:case qc:case sd:return If(t)||t==="band"?!0:t==="point"?!n:!1;case rg:case qy:case ig:case Vy:case Hy:case Qb:return If(t)||_x(t)||zn(["band","point","ordinal"],t);case Zu:case Qh:case Jh:return t!=="band";case Wy:case el:return t==="ordinal"||_x(t)}}function Xne(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=Jne(e);return nt(n)&&!E6e(n.aggregate)&&i&&If(i.get("type"))?yXt({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function yXt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return br("invalid",n,i)===null?[vXt(e,t),r]:r}function vXt(e,t){const n=Qne(e,!0),i=Jb(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Qne(e,t=!0){return Gne(gt(e)?e:lt(e,{expr:"datum"}),!t)}function bXt(e){const{datum:t}=e;return e_(t)?db(t):`${Fr(t)}`}function S1(e,t,n,r){const i={};if(t&&(i.scale=t),tp(e)){const{datum:s}=e;e_(s)?i.signal=db(s):Nt(s)?i.signal=s.signal:ER(s)?i.signal=s.expr:i.value=s}else i.field=lt(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function wM({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Nt(o)&&0<o&&o<1?"datum":void 0,u=lt(t,{expr:a,suffix:i}),l=n!==void 0?lt(n,{expr:a}):lt(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Nt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function _Xt({scaleName:e,fieldDef:t}){const n=lt(t,{expr:"datum"}),r=lt(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function Jne({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(an(t)){const f=o==null?void 0:o.get("type");if(Ja(t)){c??(c=dy({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(ri(d)||c&&h&&p===bx)return a!=null&&a.impute?S1(t,s,{binSuffix:"mid"},{offset:u}):c&&!uo(f)?wM({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):S1(t,s,CR(t,e)?{binSuffix:"range"}:{},{offset:u});if(xo(d)){if(nt(n))return wM({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});tt(L6e(e===Ti?id:Xh))}}return S1(t,s,uo(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Yf(t)){const f=t.value,d=u?{offset:u}:{};return{...VA(e,f),...d}}}return vn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function VA(e,t){return zn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:zn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:ui(t)}function pb(e){return e&&e!=="number"&&e!=="time"}function r4e(e,t,n){return`${e}(${t}${n?`, ${Fr(n)}`:""})`}const wXt="  ";function Zne({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(pb(n))return kf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=i4e(e,r,i),a=wx(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return kf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return kf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&nt(e)&&e.timeUnit===void 0)return kf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(xx(e)){const c=xXt({field:o,timeUnit:nt(e)?(u=ao(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:r_(e)&&((l=e.scale)==null?void 0:l.type)===Vu.UTC});return c?{signal:c}:void 0}if(t=WH({type:a,specifiedFormat:t,config:s,normalizeStack:i}),nt(e)&&ri(e.bin)){const c=lt(e,{expr:r,binSuffix:"end"});return{signal:SR(o,c,t,n,s)}}else return t||wx(e)==="quantitative"?{signal:`${a4e(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function i4e(e,t,n){return nt(e)?n?`${lt(e,{expr:t,suffix:"end"})}-${lt(e,{expr:t,suffix:"start"})}`:lt(e,{expr:t}):bXt(e)}function kf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=i4e(e,r,i)),o!=="datum.value"&&nt(e)&&ri(e.bin)){const a=lt(e,{expr:r,binSuffix:"end"});return{signal:SR(o,a,t,n,s)}}return{signal:r4e(n,o,t)}}function s4e(e,t,n,r,i,s){var o;if(!(gt(r)&&pb(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&wx(e)==="quantitative"&&(i.normalizedNumberFormatType&&Ex(e)&&e.stack==="normalize"||i.numberFormatType))){if(Ex(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return WH({type:"quantitative",config:i,normalizeStack:!0});if(xx(e)){const a=nt(e)?(o=ao(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:EXt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return WH({type:t,specifiedFormat:n,config:i})}}function o4e(e,t,n){var r;if(e&&(Nt(e)||e==="number"||e==="time"))return e;if(xx(t)&&n!=="time"&&n!=="utc")return nt(t)&&((r=ao(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function WH({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(gt(t))return t;if(e===hb)return r?n.normalizedNumberFormat:n.numberFormat}function EXt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:q6e(t)}:r?void 0:n.timeFormat)}function a4e(e,t){return`format(${e}, "${t||""}")`}function oge(e,t,n,r){return pb(n)?r4e(n,e,t):a4e(e,(gt(t)?t:void 0)??r.numberFormat)}function SR(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return SR(e,t,i.numberFormat,i.numberFormatType,i);const s=oge(e,n,r,i),o=oge(t,n,r,i);return`${Gne(e,!1)} ? "null" : ${s} + "${wXt}" + ${o}`}function xXt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=gt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):YKt(t,e,s)}const iu={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},u4e=iu.arc,LF=iu.area,FF=iu.bar,SXt=iu.image,jF=iu.line,BF=iu.point,TXt=iu.rect,EM=iu.rule,l4e=iu.text,ere=iu.tick,AXt=iu.trail,tre=iu.circle,nre=iu.square,c4e=iu.geoshape;function n_(e){return["line","area","trail"].includes(e)}function RI(e){return["rect","bar","image","arc"].includes(e)}const CXt=new Set(Qe(iu));function kh(e){return e.type}const IXt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],kXt=["fill","fillOpacity"],RXt=[...IXt,...kXt],NXt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},age=Qe(NXt),PXt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},DXt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},OXt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},f4e=Qe(OXt);function mb(e){return e&&e.band!=null}const $Xt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},d4e=5,MXt={binSpacing:1,continuousBandSize:d4e,minBandSize:.25,timeUnitBandPosition:.5},LXt={binSpacing:0,continuousBandSize:d4e,minBandSize:.25,timeUnitBandPosition:.5},FXt={thickness:1};function jXt(e){return kh(e)?e.type:e}const UF="min",BXt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function uge(e){return e in BXt}function h4e(e){return!!(e!=null&&e.encoding)}function ch(e){return e&&(e.op==="count"||!!e.field)}function p4e(e){return e&&Ve(e)}function TR(e){return"row"in e||"column"in e}function rre(e){return!!e&&"header"in e}function zF(e){return"facet"in e}function UXt(e){return e.param}function zXt(e){return e&&!gt(e)&&"repeat"in e}function lge(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function ire(e){return"sort"in e}function dy({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(an(e)&&e.bandPosition!==void 0)return e.bandPosition;if(nt(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Dm("timeUnitBandPosition",n,r);if(ri(s))return .5}}function m4e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=tl(e),u=br(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(nt(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Dm("timeUnitBandSize",r,i)};if(ri(h)&&!uo(s))return{band:1}}if(RI(r.type))return s?uo(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function g4e(e,t,n,r){return ri(e.bin)||e.timeUnit&&Ja(e)&&e.type==="temporal"?dy({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function y4e(e){return e&&!!e.sort&&!e.field}function VF(e){return e&&"condition"in e}function HF(e){const t=e==null?void 0:e.condition;return!!t&&!Ve(t)&&nt(t)}function AR(e){const t=e==null?void 0:e.condition;return!!t&&!Ve(t)&&an(t)}function VXt(e){const t=e==null?void 0:e.condition;return!!t&&(Ve(t)||Yf(t))}function nt(e){return e&&(!!e.field||e.aggregate==="count")}function wx(e){return e==null?void 0:e.type}function tp(e){return e&&"datum"in e}function r0(e){return Ja(e)&&!SM(e)||xM(e)}function cge(e){return Ja(e)&&e.type==="quantitative"&&!e.bin||xM(e)}function xM(e){return tp(e)&&ar(e.datum)}function an(e){return nt(e)||tp(e)}function Ja(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Yf(e){return e&&"value"in e&&"value"in e}function r_(e){return e&&("scale"in e||"sort"in e)}function Ex(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function v4e(e){return e&&"legend"in e}function b4e(e){return e&&("format"in e||"formatType"in e)}function HXt(e){return zu(e,["legend","axis","header","scale"])}function qXt(e){return"op"in e}function lt(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(GXt(e))n=u6e("count");else{let o;if(!t.nofn)if(qXt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;ri(a)?(o=x6e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Gy(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Pm(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!t_(l)&&(o=KKt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?zS(n):t.expr?s6e(n,t.expr)+s:Oc(n)+s}function SM(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return nt(e)&&!!e.bin;case"temporal":return!1}throw new Error(D6e(e.type))}function WXt(e){var t;return r_(e)&&_x((t=e.scale)==null?void 0:t.type)}function GXt(e){return e.aggregate==="count"}function YXt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(ri(r))return`${n} (binned)`;if(i&&!t_(i)){const a=(o=ao(i))==null?void 0:o.unit;if(a)return`${n} (${MF(a).join("-")})`}else if(s)return Gy(s)?`${n} for max ${s.argmax}`:Pm(s)?`${n} for min ${s.argmin}`:`${vR(s)} of ${n}`;return n}function KXt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Gy(t))return`${i} for argmax(${t.argmax})`;if(Pm(t))return`${i} for argmin(${t.argmin})`;const s=r&&!t_(r)?ao(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||ri(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const _4e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return KXt(e);default:return YXt(e,t)}};let w4e=_4e;function E4e(e){w4e=e}function XXt(){E4e(_4e)}function aE(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=sre(e))==null?void 0:a.title;if(!nt(e))return i??e.title;const s=e,o=r?ore(s,t):void 0;return n?as(i,s.title,o):i??s.title??o}function sre(e){if(Ex(e)&&e.axis)return e.axis;if(v4e(e)&&e.legend)return e.legend;if(rre(e)&&e.header)return e.header}function ore(e,t){return w4e(e,t)}function TM(e){if(b4e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=sre(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function QXt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(ire(e)&&Ve(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Gy(n)&&!Pm(n))return"quantitative";if(r_(e)&&((s=e.scale)!=null&&s.type))switch(HH[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Rh(e){if(nt(e))return e;if(HF(e))return e.condition}function Os(e){if(an(e))return e;if(AR(e))return e.condition}function x4e(e,t,n,r={}){if(gt(e)||ar(e)||jy(e)){const i=gt(e)?"string":ar(e)?"number":"boolean";return tt(JYt(t,i,e)),{value:e}}return an(e)?AM(e,t,n,r):AR(e)?{...e,condition:AM(e.condition,t,n,r)}:e}function AM(e,t,n,r){if(b4e(e)){const{format:i,formatType:s,...o}=e;if(pb(s)&&!n.customFormatTypes)return tt(nge(t)),AM(o,t,n,r)}else{const i=Ex(e)?"axis":v4e(e)?"legend":rre(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(pb(o)&&!n.customFormatTypes)return tt(nge(t)),AM({...e,[i]:a},t,n,r)}}return nt(e)?are(e,t,r):JXt(e)}function JXt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=ar(n)?"quantitative":gt(n)?"nominal":e_(n)?"temporal":void 0,{...e,type:t}}function are(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!One(r)&&!Gy(r)&&!Pm(r)&&(tt(eKt(r)),delete a.aggregate),i&&(a.timeUnit=ao(i)),o&&(a.field=`${o}`),ri(s)&&(a.bin=qF(s,t)),xo(s)&&!us(t)&&tt(PKt(t)),Ja(a)){const{type:u}=a,l=rXt(u);u!==l&&(a.type=l),u!=="quantitative"&&E6e(r)&&(tt(ZYt(u,r)),a.type="quantitative")}else if(!g6e(t)){const u=QXt(a,t);a.type=u}if(Ja(a)){const{compatible:u,warning:l}=ZXt(a,t)||{};u===!1&&tt(l)}if(ire(a)&&gt(a.sort)){const{sort:u}=a;if(uge(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&uge(l))return{...a,sort:{encoding:l,order:"descending"}}}if(rre(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function qF(e,t){return jy(e)?{maxbins:Gme(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Gme(t)}:e}const D_={compatible:!0};function ZXt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case em:case tm:case CF:return SM(e)?D_:{compatible:!1,warning:iKt(t)};case Ti:case fo:case zy:case VS:case Zu:case Qh:case Jh:case bR:case _R:case IF:case fb:case kF:case RF:case Qb:case qc:case sd:case NF:return D_;case ad:case $c:case od:case ud:return n!==hb?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:D_;case ig:case Vy:case Hy:case qy:case rg:case ng:case tg:case id:case Xh:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:D_;case el:case Wy:return!SM(e)&&!WXt(e)?{compatible:!1,warning:sKt(t)}:D_;case yx:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:D_}}function xx(e){const{formatType:t}=TM(e);return t==="time"||!t&&eQt(e)}function eQt(e){return e&&(e.type==="temporal"||nt(e)&&!!e.timeUnit)}function WF(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=ao(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return ER(e)?a=e.expr:Nt(e)?a=e.signal:e_(e)?(o=!0,a=db(e)):(gt(e)||ar(e))&&o&&(a=`datetime(${Fr(e)})`,HKt(s)&&(ar(e)&&e<1e4||gt(e)&&isNaN(Date.parse(e)))&&(a=db({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Fr(e)}function S4e(e,t){const{type:n}=e;return t.map(r=>{const i=nt(e)&&!t_(e.timeUnit)?e.timeUnit:void 0,s=WF(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function CR(e,t){return ri(e.bin)?sg(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const fge={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function IR(e){return e==null?void 0:e.condition}const T4e=["domain","grid","labels","ticks","title"],tQt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},A4e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},nQt={...A4e,style:1,labelExpr:1,encoding:1};function dge(e){return!!nQt[e]}const rQt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},C4e=Qe(rQt);function og(e){return"mark"in e}class GF{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return og(t)?jXt(t.mark)===this.name:!1}}function T1(e,t){const n=e&&e[t];return n?Ve(n)?lb(n,r=>!!r.field):nt(n)||HF(n):!1}function I4e(e,t){const n=e&&e[t];return n?Ve(n)?lb(n,r=>!!r.field):nt(n)||tp(n)||AR(n):!1}function k4e(e,t){if(us(t)){const n=e[t];if((nt(n)||tp(n))&&(X6e(n.type)||nt(n)&&n.timeUnit)){const r=Rne(t);return I4e(e,r)}}return!1}function ure(e){return lb(iYt,t=>{if(T1(e,t)){const n=e[t];if(Ve(n))return lb(n,r=>!!r.aggregate);{const r=Rh(n);return r&&!!r.aggregate}}return!1})}function R4e(e,t){const n=[],r=[],i=[],s=[],o={};return lre(e,(a,u)=>{if(nt(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=sre(a),m=p==null?void 0:p.title;let g=lt(a,{forAs:!0});const y={...m?[]:{title:aE(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(Gy(c)?(v="argmax",g=lt({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Pm(c)?(v="argmin",g=lt({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),Ja(a)&&ri(f)){if(r.push({bin:f,field:l,as:g}),n.push(lt(a,{binSuffix:"end"})),CR(a,u)&&n.push(lt(a,{binSuffix:"range"})),us(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",g6e(u)||(y.type=hb)}else if(d&&!t_(d)){i.push({timeUnit:d,field:l,as:g});const v=Ja(a)&&a.type!==bx&&"time";v&&(u===bR||u===fb?y.formatType=v:pYt(u)?y.legend={formatType:v,...y.legend}:us(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function iQt(e,t,n){const r=gYt(t,n);if(r){if(r==="binned"){const i=e[t===id?Ti:fo];return!!(nt(i)&&nt(e[t])&&xo(i.bin))}}else return!1;return!0}function sQt(e,t,n,r){const i={};for(const s of Qe(e))m6e(s)||tt(rKt(s));for(let s of cYt){if(!e[s])continue;const o=e[s];if(wR(s)){const a=lYt(s),u=i[a];if(nt(u)&&nXt(u.type)&&nt(o)&&!u.timeUnit){tt(QYt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(tt(XYt),s=qc),!iQt(e,s,t)){tt($F(s,t));continue}if(s===rg&&t==="line"){const a=Rh(e[s]);if(a!=null&&a.aggregate){tt(nKt);continue}}if(s===Zu&&(n?"fill"in e:"stroke"in e)){tt(O6e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===_R||s===yx&&!Ve(o)&&!Yf(o)||s===fb&&Ve(o)){if(o){if(s===yx){const a=e[s];if(y4e(a)){i[s]=a;continue}}i[s]=mt(o).reduce((a,u)=>(nt(u)?a.push(are(u,s)):tt(VH(u,s)),a),[])}}else{if(s===fb&&o===null)i[s]=null;else if(!nt(o)&&!tp(o)&&!Yf(o)&&!VF(o)&&!Nt(o)){tt(VH(o,s));continue}i[s]=x4e(o,s,r)}}return i}function YF(e,t){const n={};for(const r of Qe(e)){const i=x4e(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function oQt(e){const t=[];for(const n of Qe(e))if(T1(e,n)){const r=e[n],i=mt(r);for(const s of i)nt(s)?t.push(s):HF(s)&&t.push(s.condition)}return t}function lre(e,t,n){if(e)for(const r of Qe(e)){const i=e[r];if(Ve(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function aQt(e,t,n,r){return e?Qe(e).reduce((i,s)=>{const o=e[s];return Ve(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function N4e(e,t){return Qe(t).reduce((n,r)=>{switch(r){case Ti:case fo:case kF:case NF:case RF:case id:case Xh:case zy:case VS:case qc:case ng:case sd:case tg:case od:case ad:case ud:case $c:case bR:case el:case Qb:case fb:return n;case yx:if(e==="line"||e==="trail")return n;case _R:case IF:{const i=t[r];if(Ve(i)||nt(i))for(const s of mt(i))s.aggregate||n.push(lt(s,{}));return n}case rg:if(e==="trail")return n;case Zu:case Qh:case Jh:case ig:case Vy:case Hy:case Wy:case qy:{const i=Rh(t[r]);return i&&!i.aggregate&&n.push(lt(i,{})),n}}},[])}function uQt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Ve(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Ve(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function GH(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${cre(t)}`:"";return{field:o+t.field,type:t.type,title:Nt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=oQt(n).map(HXt);return{tooltip:[...i,...Kd(s,Un)]}}function cre(e){const{title:t,field:n}=e;return as(t,n)}function fre(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=cre(n);return P4e(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...gt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function P4e(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...kh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...jy(e[t])?{}:e[t]}}]:[]}function D4e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:_P(s,n),continuousAxisChannelDef2:_P(o,n),continuousAxisChannelDefError:_P(a,n),continuousAxisChannelDefError2:_P(u,n),continuousAxis:i}}function _P(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&tt(NKt(n,t)),r}else return e}function O4e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(kh(n)&&n.orient)return n.orient;if(r0(i)){if(r0(s)){const o=nt(i)&&i.aggregate,a=nt(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return xx(s)&&!xx(i)?"horizontal":"vertical"}return"horizontal"}else{if(r0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const CM="boxplot",lQt=["box","median","outliers","rule","ticks"],cQt=new GF(CM,M4e);function $4e(e){return ar(e)?"tukey":e}function M4e(e,{config:t}){e={...e,encoding:YF(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=kh(n)?n:{type:n};i&&tt(P6e("boxplot"));const u=a.extent??t.boxplot.extent,l=br("size",a,t),c=a.invalid,f=$4e(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:T}=fQt(e,u,t),S=zS(m.field),{color:A,size:C,...k}=b,N=Re=>fre(a,g,m,Re,t.boxplot),O=N(k),P=N(b),$=(yt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=N({...k,...C?{size:C}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...A||{value:$}}}}),M=GH([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),B={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},U=f==="min-max"?M:GH([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),H=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...O({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:U}),...O({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:U})],D=[...f!=="tukey"?H:[],...P({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:M}),...F({partName:"median",mark:{type:"tick",invalid:c,...yt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:M})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:D};const z=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,j=`(${W} - ${z})`,q=`${z} - ${u} * ${j}`,G=`${W} + ${u} * ${j}`,re=`datum["${m.field}"]`,de={joinaggregate:L4e(m.field),groupby:y},pe={transform:[{filter:`(${q} <= ${re}) && (${re} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${S}`},{op:"max",field:m.field,as:`upper_whisker_${S}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${S}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${S}`},...v],groupby:y}],layer:H},{tooltip:ge,...Ee}=k,{scale:Z,axis:Q}=m,fe=cre(m),be=zu(Q,["title"]),Me=P4e(a,"outliers",t.boxplot,{transform:[{filter:`(${re} < ${q}) || (${re} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...fe!==void 0?{title:fe}:{},...Z!==void 0?{scale:Z}:{},...Lr(be)?{}:{axis:be}},...Ee,...A?{color:A}:{},...T?{tooltip:T}:{}}})[0];let Be;const ve=[...d,...h,de];return Me?Be={transform:ve,layer:[Me,pe]}:(Be=pe,Be.transform.unshift(...ve)),{...o,layer:[Be,{transform:p,layer:D}]}}function L4e(e){const t=zS(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function fQt(e,t,n){const r=O4e(e,CM),{continuousAxisChannelDef:i,continuousAxis:s}=D4e(e,r,CM),o=i.field,a=zS(o),u=$4e(t),l=[...L4e(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=uQt(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=R4e(p,n),w=r==="vertical"?"horizontal":"vertical",E=r,T=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:T,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:h}}const dre="errorbar",dQt=["ticks","rule"],hQt=new GF(dre,F4e);function F4e(e,{config:t}){e={...e,encoding:YF(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=j4e(e,dre,t);delete s.size;const c=fre(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function pQt(e,t){const{encoding:n}=e;if(mQt(n))return{orient:O4e(e,t),inputType:"raw"};const r=gQt(n),i=yQt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(an(a)&&an(u))throw new Error(`${t} cannot have both x2 and y2`);if(an(a)){if(r0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(an(u)){if(r0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(an(u)&&!an(a))throw new Error(`${t} cannot have xError2 without xError`);if(an(c)&&!an(l))throw new Error(`${t} cannot have yError2 without yError`);if(an(a)&&an(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(an(a)){if(r0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(an(l)){if(r0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function mQt(e){return(an(e.x)||an(e.y))&&!an(e.x2)&&!an(e.y2)&&!an(e.xError)&&!an(e.xError2)&&!an(e.yError)&&!an(e.yError2)}function gQt(e){return an(e.x2)||an(e.y2)}function yQt(e){return an(e.xError)||an(e.xError2)||an(e.yError)||an(e.yError2)}function j4e(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=kh(r)?r:{type:r};s&&tt(P6e(t));const{orient:l,inputType:c}=pQt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=D4e(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=vQt(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:T,[m==="x"?"xError2":"yError2"]:S,...A}=i,{bins:C,timeUnits:k,aggregate:N,groupby:O,encoding:P}=R4e(A,n),$=[...N,...g],F=c!=="raw"?[]:O,M=GH(v,f,P,b);return{transform:[...a.transform??[],...C,...k,...$.length===0?[]:[{aggregate:$,groupby:F}],...y],groupby:F,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:P,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:M}}function vQt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&tt(RKt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:vR(h)},{fieldPrefix:"upper_",titlePrefix:hge(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:hge(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:aE({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:aE({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:aE({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&tt(kKt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:cb(cb(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function hge(e,t,n){return`${vR(e)} ${n} ${t}`}const hre="errorband",bQt=["band","borders"],_Qt=new GF(hre,B4e);function B4e(e,{config:t}){e={...e,encoding:YF(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=j4e(e,hre,t),l=o,c=fre(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?tt(ige("interpolate")):l.tension&&tt(ige("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const U4e={};function pre(e,t,n){const r=new GF(e,t);U4e[e]={normalizer:r,parts:n}}function wQt(){return Qe(U4e)}pre(CM,M4e,lQt);pre(dre,F4e,dQt);pre(hre,B4e,bQt);const EQt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],z4e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},V4e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},xQt=Qe(z4e),SQt=Qe(V4e),TQt={header:1,headerRow:1,headerColumn:1,headerFacet:1},H4e=Qe(TQt),q4e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],AQt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},CQt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Kf="_vgsid_",IQt={point:{on:"click",fields:[Kf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function mre(e){return e==="legend"||!!(e!=null&&e.legend)}function sB(e){return mre(e)&&yt(e)}function gre(e){return!!(e!=null&&e.select)}function W4e(e){const t=[];for(const n of e||[]){if(gre(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function kQt(e){return KF(e)||vre(e)||yre(e)}function yre(e){return"concat"in e}function KF(e){return"vconcat"in e}function vre(e){return"hconcat"in e}function G4e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Nh(e){return yt(e)&&e.step!==void 0}function pge(e){return e.view||e.width||e.height}const mge=20,RQt={align:1,bounds:1,center:1,columns:1,spacing:1},NQt=Qe(RQt);function PQt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(zF(e)&&!TR(e.facet)||yre(e))&&(i.columns=o),KF(e)&&(i.columns=1);for(const a of NQt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=ar(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function YH(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function IM(e,t){const n=kM(e,t);return Nh(n)?n.step:Y4e}function kM(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return as(n,{step:e.step})}const Y4e=20,DQt={continuousWidth:200,continuousHeight:200,step:Y4e},OQt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:DQt,mark:DXt,arc:{},area:{},bar:MXt,circle:{},geoshape:{},image:{},line:{},point:{},rect:LXt,rule:{color:"black"},square:{},text:{color:"black"},tick:FXt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:uXt,projection:{},legend:AQt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:IQt,style:{},title:{},facet:{spacing:mge},concat:{spacing:mge},normalizedNumberFormat:".0%"},mp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],gge={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},yge={blue:mp[0],orange:mp[1],red:mp[2],teal:mp[3],green:mp[4],yellow:mp[5],purple:mp[6],pink:mp[7],brown:mp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function $Qt(e={}){return{signals:[{name:"color",value:yt(e)?{...yge,...e}:yge}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function MQt(e){return{signals:[{name:"fontSize",value:yt(e)?{...gge,...e}:gge}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function LQt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function K4e(e){const t=Qe(e||{}),n={};for(const r of t){const i=e[r];n[r]=IR(i)?T6e(i):gl(i)}return n}function FQt(e){const t=Qe(e),n={};for(const r of t)n[r]=K4e(e[r]);return n}const jQt=[...f4e,...C4e,...H4e,"background","padding","legend","lineBreak","scale","style","title","view"];function X4e(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=NS({},tn(OQt),n?LQt(n):{},t?$Qt(t):{},r?MQt(r):{},s||{});i&&PS(o,"selection",i,!0);const a=zu(o,jQt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=gl(o[u]));for(const u of f4e)o[u]&&(a[u]=Su(o[u]));for(const u of C4e)o[u]&&(a[u]=K4e(o[u]));for(const u of H4e)o[u]&&(a[u]=Su(o[u]));return o.legend&&(a.legend=Su(o.legend)),o.scale&&(a.scale=Su(o.scale)),o.style&&(a.style=FQt(o.style)),o.title&&(a.title=Su(o.title)),o.view&&(a.view=Su(o.view)),a}const BQt=new Set(["view",...CXt]),UQt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],zQt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...PXt};function VQt(e){e=tn(e);for(const t of UQt)delete e[t];if(e.axis)for(const t in e.axis)IR(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of EQt)delete e.legend[t];if(e.mark){for(const t of age)delete e.mark[t];e.mark.tooltip&&yt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(W4e(e.params)),delete e.params);for(const t of BQt){for(const r of age)delete e[t][r];const n=zQt[t];if(n)for(const r of n)delete e[t][r];qQt(e,t)}for(const t of wQt())delete e[t];HQt(e);for(const t in e)yt(e[t])&&Lr(e[t])&&delete e[t];return Lr(e)?void 0:e}function HQt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=S6e(e.title);Lr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Lr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Lr(r)?delete e.title:e.title=r}function qQt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Lr(s)||(e.style[n??t]=s),delete e[t]}function XF(e){return"layer"in e}function WQt(e){return"repeat"in e}function GQt(e){return!Ve(e.repeat)&&e.repeat.layer}class bre{map(t,n){return zF(t)?this.mapFacet(t,n):WQt(t)?this.mapRepeat(t,n):vre(t)?this.mapHConcat(t,n):KF(t)?this.mapVConcat(t,n):yre(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(XF(t))return this.mapLayer(t,n);if(og(t))return this.mapUnit(t,n);throw new Error($ne(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const YQt={zero:1,center:1,normalize:1};function KQt(e){return e in YQt}const XQt=new Set([u4e,FF,LF,EM,BF,tre,nre,jF,l4e,ere]),QQt=new Set([FF,LF,u4e]);function O_(e){return nt(e)&&wx(e)==="quantitative"&&!e.bin}function vge(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(nt(o)&&nt(a))if(O_(o)&&O_(a)){if(o.stack)return t;if(a.stack)return i;const u=nt(o)&&!!o.aggregate,l=nt(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(O_(o))return t;if(O_(a))return i}else{if(O_(o))return s&&n==="vertical"?void 0:t;if(O_(a))return s&&n==="horizontal"?void 0:i}}function JQt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function Q4e(e,t){var m,g;const n=kh(e)?e:{type:e},r=n.type;if(!XQt.has(r))return null;const i=vge(t,"x",n)||vge(t,"theta",n);if(!i)return null;const s=t[i],o=nt(s)?lt(s,{}):void 0,a=JQt(i),u=[],l=new Set;if(t[a]){const y=t[a],v=nt(y)?lt(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=nt(f)?lt(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=fYt.reduce((y,v)=>{if(v!=="tooltip"&&T1(t,v)){const b=t[v];for(const w of mt(b)){const E=Rh(w);if(E.aggregate)continue;const T=lt(E,{});(!T||!l.has(T))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?jy(s.stack)?p=s.stack?"zero":null:p=s.stack:QQt.has(r)&&(p="zero"),!p||!KQt(p)||ure(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Vu.LINEAR&&s!=null&&s.stack&&tt(AKt(s.scale.type)),an(t[Zh(i)])?(s.stack!==void 0&&tt(TKt(i)),null):(nt(s)&&s.aggregate&&!xYt.has(s.aggregate)&&tt(CKt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:n_(r),stackBy:h,offset:p}))}function J4e(e,t,n){const r=Su(e),i=br("orient",r,n);if(r.orient=nJt(r.type,t,i),i!==void 0&&i!==r.orient&&tt(lKt(r.orient,i)),r.type==="bar"&&r.orient){const u=br("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:$Xt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=br("opacity",r,n),o=br("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=eJt(r.type,t)),br("cursor",r,n)===void 0&&(r.cursor=ZQt(r,t,n)),r}function ZQt(e,t,n){return t.href||e.href||br("href",e,n)?"pointer":e.cursor}function eJt(e,t){if(zn([BF,ere,tre,nre],e)&&!ure(t))return .7}function tJt(e,t,{graticule:n}){if(n)return!1;const r=Dm("filled",e,t),i=e.type;return as(r,i!==BF&&i!==jF&&i!==EM)}function nJt(e,t,n){switch(e){case BF:case tre:case nre:case l4e:case TXt:case SXt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case FF:if(nt(r)&&(xo(r.bin)||nt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(nt(i)&&(xo(i.bin)||nt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(nt(r)&&r.type===hb&&!ri(r.bin)||xM(r))&&nt(i)&&xo(i.bin)?"horizontal":"vertical";if(!o)return(nt(i)&&i.type===hb&&!ri(i.bin)||xM(i))&&nt(r)&&xo(r.bin)?"vertical":"horizontal"}case EM:if(s&&!(nt(r)&&xo(r.bin))&&o&&!(nt(i)&&xo(i.bin)))return;case LF:if(o)return nt(i)&&xo(i.bin)?"horizontal":"vertical";if(s)return nt(r)&&xo(r.bin)?"vertical":"horizontal";if(e===EM){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case jF:case ere:{const a=cge(r),u=cge(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=Ja(r)&&r.type===bx,c=Ja(i)&&i.type===bx;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function rJt(e){const{point:t,line:n,...r}=e;return Qe(r).length>1?r:r.type}function iJt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:zu(e[t],["point","line"])});return e}function oB(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?yt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?yt(t.point)?t.point:{}:void 0}function bge(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class sJt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(og(t)){const{mark:r,encoding:i}=t,s=kh(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!oB(s,n[s.type],i);case"area":return!!oB(s,n[s.type],i)||!!bge(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=YF(l,i),d=kh(a)?a:{type:a},h=oB(d,i[d.type],f),p=d.type==="area"&&bge(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:rJt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:zu(f,["shape"])}],g=Q4e(J4e(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=zu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...mx(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...mx(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:iJt(i)})}}function oJt(e,t){return t?TR(e)?eFe(e,t):Z4e(e,t):e}function aB(e,t){return t?eFe(e,t):e}function KH(e,t,n){const r=t[e];if(zXt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};tt(VYt(r.repeat));return}return t}function Z4e(e,t){if(e=KH("field",e,t),e!==void 0){if(e===null)return null;if(ire(e)&&ch(e.sort)){const n=KH("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function _ge(e,t){if(nt(e))return Z4e(e,t);{const n=KH("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function wge(e,t){if(an(e)){const n=_ge(e,t);if(n)return n;if(VF(e))return{condition:e.condition}}else{if(AR(e)){const n=_ge(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function eFe(e,t){const n={};for(const r in e)if(Ft(e,r)){const i=e[r];if(Ve(i))n[r]=i.map(s=>wge(s,t)).filter(s=>s);else{const s=wge(i,t);s!==void 0&&(n[r]=s)}}return n}class aJt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(og(t)){const{encoding:n,mark:r}=t;if(r==="line"||kh(r)&&r.type==="line")for(const i of uYt){const s=Jb(i),o=n[s];if(n[i]&&(nt(o)&&!xo(o.bin)||tp(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return tt(uKt(!!i.x2,!!i.y2)),r({...t,mark:yt(s)?{...s,type:"rule"}:"rule"},n)}}class uJt extends bre{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[cQt,hQt,_Qt,new sJt,new aJt]}map(t,n){if(og(t)){const r=T1(t.encoding,em),i=T1(t.encoding,tm),s=T1(t.encoding,CF);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=aB(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return GQt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Si(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Ve(r)&&t.columns&&(t=zu(t,["columns"]),tt(ege("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Ve(r)&&r.row||[u?u.row:null],f=!Ve(r)&&r.column||[u?u.column:null],d=Ve(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Ve(r)?`${Si(p)}`:(r.row?`row_${Si(m)}`:"")+(r.column?`column_${Si(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(zu(b,["data"]))}const h=Ve(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return TR(r)&&t.columns&&(t=zu(t,["columns"]),tt(ege("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=xge({parentProjection:o,projection:i}),l=Ege({parentEncoding:s,encoding:aB(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=aB(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&tt(oKt([...r?[em]:[],...i?[tm]:[]]));const o={},a={};for(const u of[em,tm]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:oJt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Ege({parentEncoding:n,encoding:s,layer:!0}),parentProjection:xge({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Ege({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Qe(e),...Qe(t)]);for(const s of i){const o=t[s],a=e[s];if(an(o)){const u={...a,...o};r[s]=u}else AR(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Yf(a)||Nt(a)||an(a)||Ve(a))&&(r[s]=a)}}else r=t;return!r||Lr(r)?void 0:r}function xge(e){const{parentProjection:t,projection:n}=e;return t&&n&&tt(KYt({parentProjection:t,projection:n})),n??t}function _re(e){return"filter"in e}function lJt(e){return(e==null?void 0:e.stop)!==void 0}function tFe(e){return"lookup"in e}function cJt(e){return"data"in e}function fJt(e){return"param"in e}function dJt(e){return"pivot"in e}function hJt(e){return"density"in e}function pJt(e){return"quantile"in e}function mJt(e){return"regression"in e}function gJt(e){return"loess"in e}function yJt(e){return"sample"in e}function vJt(e){return"window"in e}function bJt(e){return"joinaggregate"in e}function _Jt(e){return"flatten"in e}function wJt(e){return"calculate"in e}function nFe(e){return"bin"in e}function EJt(e){return"impute"in e}function xJt(e){return"timeUnit"in e}function SJt(e){return"aggregate"in e}function TJt(e){return"stack"in e}function AJt(e){return"fold"in e}function CJt(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function IJt(e){return e.map(t=>_re(t)?{filter:sE(t.filter,tXt)}:t)}class kJt extends bre{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Sge(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Sge(t,n),t.encoding){const r={};for(const[i,s]of cy(t.encoding))r[i]=rFe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:cy(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Do(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function Sge(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(_re(s))return{filter:XH(s,t)};if(nFe(s)&&Zb(s.bin))return{...s,bin:iFe(s.bin)};if(tFe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function rFe(e,t){var r,i;const n=tn(e);if(nt(n)&&Zb(n.bin)&&(n.bin=iFe(n.bin)),r_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(VF(n))if(Ve(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:XH(s,t)}});else{const{selection:s,param:o,test:a,...u}=rFe(n.condition,t);n.condition=o?n.condition:{...u,test:XH(n.condition,t)}}return n}function iFe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function XH(e,t){const n=r=>sE(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):sE(e.test||e.filter,r=>r.selection?n(r.selection):r)}class QH extends bre{map(t,n){const r=n.selections??[];if(t.params&&!og(t)){const i=[];for(const s of t.params)gre(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(gt(a)&&(a===t.name||i.includes(a))||Ve(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=QH.prototype[e];QH.prototype[e]=function(n,r){return t.call(this,n,RJt(n,r))}}function RJt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function sFe(e,t){t===void 0&&(t=X4e(e.config));const n=OJt(e,t),{width:r,height:i}=e,s=$Jt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const NJt=new uJt,PJt=new kJt,DJt=new QH;function OJt(e,t={}){const n={config:t};return DJt.map(NJt.map(PJt.map(e,n),n),n)}function Tge(e){return gt(e)?{type:e}:e??{}}function $Jt(e,t,n){let{width:r,height:i}=t;const s=og(e)||XF(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(tt(Xme("width")),r=void 0),i=="container"&&(tt(Xme("height")),i=void 0));const a={type:"pad",...o,...n?Tge(n.autosize):{},...Tge(e.autosize)};if(a.type==="fit"&&!s&&(tt(PYt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&tt(Qme("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&tt(Qme("height")),!Sl(a,{type:"pad"}))return a}function MJt(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function LJt(e){return e?`fit-${PF(e)}`:"fit"}const FJt=["background","padding"];function Age(e,t){const n={};for(const r of FJt)e&&e[r]!==void 0&&(n[r]=gl(e[r]));return t&&(n.params=e.params),n}class ag{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new ag(tn(this.explicit),tn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return as(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Qe(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Id(e){return{explicit:!0,value:e}}function ul(e){return{explicit:!1,value:e}}function oFe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:QF(t,n,r,i)}}function QF(e,t,n,r){return e.explicit&&t.explicit&&tt(vKt(n,r,e.value,t.value)),e}function hy(e,t,n,r,i=QF){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Sl(e.value,t.value)?e:i(e,t,n,r)}class jJt extends ag{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Sx(e){return"url"in e}function NI(e){return"values"in e}function aFe(e){return"name"in e&&!Sx(e)&&!NI(e)&&!I0(e)}function I0(e){return e&&(uFe(e)||lFe(e)||wre(e))}function uFe(e){return"sequence"in e}function lFe(e){return"sphere"in e}function wre(e){return"graticule"in e}var vi;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(vi||(vi={}));function cFe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Oc(i.field),i}function gb(e,t=!0,n=ba){if(Ve(e)){const r=e.map(i=>gb(i,t,n));return t?`[${r.join(", ")}]`:r}else if(e_(e))return n(t?db(e):VKt(e));return t?n(Fr(e)):e}function BJt(e,t){for(const n of Do(e.component.selection??{})){const r=n.name;let i=`${r}${my}, ${n.resolve==="global"?"true":`{unit: ${A1(e)}}`}`;for(const s of t5)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+vZt,on:[{events:{signal:n.name+my},update:`modify(${ot(n.name+yb)}, ${i})`}]})}return Ere(t)}function UJt(e,t){if(e.component.selection&&Qe(e.component.selection).length){const n=ot(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Uy("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Ere(t)}function zJt(e,t){let n=!1;for(const r of Do(e.component.selection??{})){const i=r.name,s=ot(i+yb);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${IFe}(${s}, ${ot(a)}${u}`})}n=!0;for(const a of t5)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Ere(t)}function VJt(e,t){const n=[...t],r=A1(e,{escape:!1});for(const i of Do(e.component.selection??{})){const s={name:i.name+yb};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Kf}}]),i.init){const a=i.project.items.map(cFe);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[Kf]:gb(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:gb(u,!1)}))}n.filter(a=>a.name===i.name+yb).length||n.push(s)}return n}function fFe(e,t){for(const n of Do(e.component.selection??{}))for(const r of t5)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function HJt(e,t){for(const n of e.children)Hi(n)&&(t=fFe(n,t));return t}function qJt(e,t,n,r){const i=DFe(e,t.param,t);return{signal:Vl(n.get("type"))&&Ve(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function Ere(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Or{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){tt(WYt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Hu extends Or{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${a6e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function uB(e){return e.as!==void 0}function Cge(e){return`${e}_end`}class fh extends Or{clone(){return new fh(null,tn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(t_(u)){if(Hi(n)){const{mark:c,markDef:f,config:d}=n,h=dy({fieldDef:s,markDef:f,config:d});(RI(c)||h)&&(l={timeUnit:ao(u),field:a})}}else l={as:lt(s,{forAs:!0}),field:a,timeUnit:u};if(Hi(n)){const{mark:c,markDef:f,config:d}=n,h=dy({fieldDef:s,markDef:f,config:d});RI(c)&&us(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Un(l)]=l)}return i},{});return Lr(r)?null:new fh(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=ao(r),o={...i,timeUnit:s};return new fh(t,{[Un(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of cy(this.timeUnits)){const s=uB(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Do(this.timeUnits).map(t=>uB(t)?t.as:Cge(t.field)))}dependentFields(){return new Set(Do(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Un(this.timeUnits)}`}assemble(){const t=[];for(const n of Do(this.timeUnits)){const{rectBandPosition:r}=n,i=ao(n.timeUnit);if(uB(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Oc(s),type:"timeunit",...a?{units:MF(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...Ige(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=dFe({timeUnit:i,field:o}),u=Cge(o);t.push({type:"formula",expr:a,as:u}),t.push(...Ige([o,u],r,i))}}return t}}const JF="offsetted_rect_start",ZF="offsetted_rect_end";function dFe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=V6e(r),{part:o,step:a}=G6e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function Ige([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:kge([dFe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${JF}`},{type:"formula",expr:kge([i,s],n+.5),as:`${e}_${ZF}`}]}return[]}function kge([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const kR="_tuple_fields";class WJt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const GJt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new WJt),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Si(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Si(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?mt(n.value):null;let{fields:d,encodings:h}=yt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(yt(p))for(const m of Qe(p))aYt(m)?(h||(h=[])).push(m):l==="interval"?(tt(zYt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){tt(DYt(p,m.aggregate));continue}else if(!g){tt(Zme(p));continue}if(m.timeUnit&&!t_(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[Un(y)]=y}if(!s[g]){const y=l==="interval"&&sg(p)&&Vl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===Kf,h6e(p)?(v.geoChannel=p,v.channel=d6e(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else tt(Zme(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===Kf}f&&(t.init=f.map(p=>i.items.map(m=>yt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Lr(o)||(i.timeUnit=new fh(null,o))},signals:(e,t,n)=>{const r=t.name+kR;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(cFe)})}},nm={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!sg(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&tt(LYt),!s||!Vl(o)){tt(MYt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||Rge(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(IFe)>=0)i.update=`{${r.map(o=>`${ot(Oc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${ot(Oc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Rge(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function JH(e,t){return`domain(${ot(e.scaleName(t))})`}function Rge(e){return e.parent&&KS(e.parent)&&!e.parent.parent}const uE="_brush",hFe="_scale_trigger",YT="geo_interval_init_tick",pFe="_init",YJt="_center",KJt={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...yt(n.select)?n.select:{}};i.fields=[Kf],i.encodings||(i.encodings=n.value?Qe(n.value):[ad,od]),n.select={type:"interval",...i}}if(t.translate&&!nm.defined(t)){const i=`!event.item || event.item.mark.name !== ${ot(t.name+uE)}`;for(const s of t.events){if(!s.between){tt(`${s} is not an ordered event stream for interval selections.`);continue}const o=mt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+my,s=Do(t.project.hasChannel).filter(a=>a.channel===Ti||a.channel===fo),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(XJt(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=ot(e.projectionName()),u=e.projectionName()+YJt,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+pFe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(T=>T.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${ot(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${A1(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,w=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:YT}]:[]],update:b}]})}else{if(!nm.defined(t)){const l=r+hFe,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=ot(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Vl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${A1(e)}, fields: ${r+kR}, values`;return n.concat({name:i,...o?{init:`{${u}: ${gb(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Hi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===YT).length||n.unshift({name:YT,value:null,on:[{events:"timer{1}",update:`${YT} === null ? {} : ${YT}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${ot(t.name+yb)})`;if(nm.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Qe(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${A1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Qe(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+uE}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+uE,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function XJt(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=ot(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Ti?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=nm.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:gb(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+hFe},update:Vl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:gb(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Ti?0:1,h=t.name+pFe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const QJt={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+kR,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Do(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+uE):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${A1(e)}, `;if(t.project.hasSelectionId)l+=`${Kf}: ${o}[${ot(Kf)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${ot(e.vgField(d.channel,{}))}], ${o}[${ot(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${ot(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+my,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function qS(e,t,n,r){const i=VF(t)&&t.condition,s=r(t);if(i){const a=mt(i).map(u=>{const l=r(u);if(UXt(u)){const{param:c,empty:f}=u;return{test:PFe(e,{param:c,empty:f}),...l}}else return{test:PM(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function xre(e,t="text"){const n=e.encoding[t];return qS(e,n,t,r=>e5(r,e.config))}function e5(e,t,n="datum"){if(e){if(Yf(e))return ui(e.value);if(an(e)){const{format:r,formatType:i}=TM(e);return Zne({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function mFe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Ve(o))return{tooltip:Nge({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return qS(e,o,"tooltip",u=>{const l=e5(u,i,a);if(l)return l;if(u===null)return;let c=br("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),gt(c))return{value:c};if(yt(c))return Nt(c)?c:c.content==="encoding"?Nge(n,s,i,t):{signal:a}})}}function gFe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=Jb(f),h=Ja(c)?c:{...c,type:e[d].type},p=h.title||ore(h,i),m=mt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(us(f)){const y=f==="x"?"x2":"y2",v=Rh(e[y]);if(xo(h.bin)&&v){const b=lt(h,{expr:o}),w=lt(v,{expr:o}),{format:E,formatType:T}=TM(h);g=SR(b,w,E,T,i),s[y]=!0}}if((us(f)||f===qc||f===sd)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=TM(h);g=Zne({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=e5(h,i,o).signal),a.push({channel:f,key:m,value:g})}lre(e,(c,f)=>{nt(c)?u(c,f):HF(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function Nge(e,t,n,{reactiveGeom:r}={}){const i=gFe(e,t,n,{reactiveGeom:r}),s=cy(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function JJt(e){const{markDef:t,config:n}=e,r=br("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...ZJt(e),...eZt(e)}}function ZJt(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=br("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in kYt?{}:{ariaRoleDescription:{value:t}}}function eZt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return qS(e,s,"description",u=>e5(u,e.config));const o=br("description",n,r);if(o!=null)return{description:ui(o)};if(r.aria===!1)return{};const a=gFe(t,i,r);if(!Lr(a))return{description:{signal:cy(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function Js(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=br(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=ui(u)));const l=i[e];return qS(t,l,o??e,c=>Jne({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function yFe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??br("filled",n,i),a=zn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=br(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=br(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:ui(u)}:{},...l?{stroke:ui(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&tt(O6e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Js("color",e,{vgChannel:c,defaultValue:o?u:l}),...Js("fill",e,{defaultValue:r.fill?u:void 0}),...Js("stroke",e,{defaultValue:r.stroke?l:void 0})}}function tZt(e){const{encoding:t,mark:n}=e,r=t.order;return!n_(n)&&Yf(r)?qS(e,r,"zindex",i=>ui(i.value)):{}}function Tx({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:Jne({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:ui(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function ca(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[Zh(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=Tx({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=Sre({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&us(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:nZt({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function nZt(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(an(n)&&i&&t===i.fieldChannel){if(nt(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return wM({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return S1(n,r,{suffix:"end"},{offset:s})}return Xne(e)}function Sre({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=Jb(n),u=fy(n),l=br(n,s,o,{vgChannel:u});if(l!==void 0)return VA(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!zn([Vu.LOG,Vu.TIME,Vu.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[tl(n)],mult:.5}}}}const rZt={left:"x",center:"xc",right:"x2"},iZt={top:"y",middle:"yc",bottom:"y2"};function vFe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return fy(e);const i=e==="x"?"align":"baseline",s=br(i,t,n);let o;return Nt(s)?(tt(aKt(i)),o=void 0):o=s,e==="x"?rZt[o||(r==="top"?"left":"center")]:iZt[o||r]}function RM(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?bFe(e,t,{defaultPos:n,defaultPos2:r}):ca(e,t,{defaultPos:n})}function bFe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Zh(e),a=tl(e),u=sZt(t,r,o),l=u[a]?vFe(e,i,s):fy(e);return{...ca(e,t,{defaultPos:n,vgChannel:l}),...u}}function sZt(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=Jb(n),l=tl(n),c=fy(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?Tx({channel:n,markDef:s,encoding:r,model:e}):Tx({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=tl(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=oZt({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:wP(n,s)||wP(n,{[n]:bM(n,s,a.style),[l]:bM(l,s,a.style)})||wP(n,a[i])||wP(n,a.mark)||{[c]:Sre({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function oZt({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return an(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?S1(t,s,{suffix:"start"},{offset:u}):Xne({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function wP(e,t){const n=tl(e),r=fy(e);if(t[r]!==void 0)return{[r]:VA(e,t[r])};if(t[e]!==void 0)return{[r]:VA(e,t[e])};if(t[n]){const i=t[n];if(mb(i))tt(tKt(n));else return{[n]:VA(e,i)}}}function py(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Zh(t),a=tl(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??br("size",i,n,{vgChannel:a}),p=y6e(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return nt(u)&&(ri(u.bin)||xo(u.bin)||u.timeUnit&&!l)&&!(h&&!mb(h))&&!r[p]&&!uo(f)?lZt({fieldDef:u,fieldDef2:l,channel:t,model:e}):(an(u)&&uo(f)||m)&&!l?uZt(u,t,e):bFe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function aZt(e,t,n,r,i,s,o){if(mb(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Dm("minBandSize",{type:o},r);return{signal:c?`max(${Cf(c)}, ${l})`:l}}else i.band!==1&&(tt(fKt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Nt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Yy(u)&&ar(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=as(u,o==="bar"?l:c);if(Nt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(ar(f))return{signal:`${1-f} * ${e}`}}return{value:IM(r.view,e)-2}}function uZt(e,t,n){var C,k;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=tl(t),f=Zh(t),d=y6e(t),h=n.scaleName(d),p=n.getScaleComponent(Rne(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=Js("size",n,{vgChannel:c,defaultRef:ui(r.size)}):tt(mKt(r.type)));const y=!!g,v=m4e({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(C=l||p)==null?void 0:C.get("type"),useVlSizeChannel:m});g=g||{[c]:aZt(c,h||u,p||l,s,v,!!e,r.type)};const b=((k=l||p)==null?void 0:k.get("type"))==="band"&&mb(v)&&!y?"top":"middle",w=vFe(t,r,s,b),E=w==="xc"||w==="yc",{offset:T,offsetType:S}=Tx({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),A=Xne({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:T,defaultRef:Sre({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?S==="encoding"?0:.5:Nt(v)?{signal:`(1-${v})/2`}:mb(v)?(1-v.band)/2:0});if(c)return{[w]:A,...g};{const N=fy(f),O=g[c],P=T?{...O,offset:T}:O;return{[w]:A,[N]:Ve(A)?[A[0],{...A[1],offset:P}]:{...A,offset:P}}}}function Pge(e,t,n,r,i,s,o){if(f6e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Nt(n)||Nt(i)||Nt(r)||s){const l=Cf(n),c=Cf(i),f=Cf(r),d=Cf(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function lZt({fieldDef:e,fieldDef2:t,channel:n,model:r}){var k;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=m4e({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(k=r.component.axes[n])==null?void 0:k[0],h=(d==null?void 0:d.get("translate"))??.5,p=us(n)?br("binSpacing",s,i)??0:0,m=Zh(n),g=fy(n),y=fy(m),v=Dm("minBandSize",s,i),{offset:b}=Tx({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=Tx({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=_Xt({fieldDef:e,scaleName:u}),T=Pge(n,p,c,h,b,v,E),S=Pge(m,p,c,h,w??b,v,E),A=Nt(f)?{signal:`(1-${f.signal})/2`}:mb(f)?(1-f.band)/2:.5,C=dy({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(ri(e.bin)||e.timeUnit){const N=e.timeUnit&&C!==.5;return{[y]:Dge({fieldDef:e,scaleName:u,bandPosition:A,offset:S,useRectOffsetField:N}),[g]:Dge({fieldDef:e,scaleName:u,bandPosition:Nt(A)?{signal:`1-${A.signal}`}:1-A,offset:T,useRectOffsetField:N})}}else if(xo(e.bin)){const N=S1(e,u,{},{offset:S});if(nt(t))return{[y]:N,[g]:S1(t,u,{},{offset:T})};if(Zb(e.bin)&&e.bin.step)return{[y]:N,[g]:{signal:`scale("${u}", ${lt(e,{expr:"datum"})} + ${e.bin.step})`,offset:T}}}tt(L6e(m))}function Dge({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return wM({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:JF,endSuffix:ZF}:{}})}const cZt=new Set(["aria","width","height"]);function Wc(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?yFe(e):{};return{...fZt(e.markDef,t),...Oge(e,"fill",n),...Oge(e,"stroke",r),...Js("opacity",e),...Js("fillOpacity",e),...Js("strokeOpacity",e),...Js("strokeWidth",e),...Js("strokeDash",e),...tZt(e),...mFe(e),...xre(e,"href"),...JJt(e)}}function Oge(e,t,n){const{config:r,mark:i,markDef:s}=e;if(br("invalid",s,r)==="hide"&&n&&!n_(i)){const a=dZt(e,{invalid:!0,channels:DF});if(a)return{[t]:[{test:a,value:null},...mt(n)]}}return n?{[t]:n}:{}}function fZt(e,t){return IYt.reduce((n,r)=>(!cZt.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=ui(e[r])),n),{})}function dZt(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&Vl(u)&&(s[l]=!0)}return s},{}),i=Qe(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Qne(o,t)).join(` ${s} `)}}function Tre(e){const{config:t,markDef:n}=e;if(br("invalid",n,t)){const i=hZt(e,{channels:ep});if(i)return{defined:{signal:i}}}return{}}function hZt(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Vl(l)&&(s[c]=!0)}return s},{}),i=Qe(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Qne(o,t)).join(` ${s} `)}}function $ge(e,t){if(t!==void 0)return{[e]:ui(t)}}const lB="voronoi",_Fe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(lB)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(n_(s))return tt(OYt(s)),n;const o={name:e.getName(lB),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...mFe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(lB)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},wFe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!mre(e.bind),parse:(e,t,n)=>kFe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=_Fe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Si(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:gb(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${ot(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+my)[0],o=r+kR,a=i.items.map(l=>Si(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},NM="_toggle",EFe={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+NM,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+my,r=t.name+NM;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${A1(e)}}, `)+`${r} ? ${n} : null`}},pZt={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=gt(t.clear)?Uy(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(wFe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Si(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+my);r(i,"null"),EFe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+NM),r(i,"false"))}return n}},xFe={defined:e=>{const t=e.resolve==="global"&&e.bind&&mre(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Kf;return t&&!n&&tt(FYt),t&&n},parse:(e,t,n)=>{const r=tn(n);if(r.select=gt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},kFe(t,r),yt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=mt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=sB(t.bind)?t.bind.legend:"click",s=gt(i)?Uy(i,"view"):mt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=sB(t.bind)&&t.bind.legend,s=o=>a=>{const u=tn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Si(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+my),o=r+kR,a=i.items.filter(d=>d.hasLegend).map(d=>Si(`${r}_${Si(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+NM),f=sB(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function mZt(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Do(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&xFe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const SFe="_translate_anchor",TFe="_translate_delta",gZt={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=nm.defined(t),s=r+SFe,{x:o,y:a}=t.project.hasChannel;let u=Uy(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+uE,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?JH(e,Ti):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?JH(e,fo):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+TFe,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Mge(e,t,o,"width",n),a!==void 0&&Mge(e,t,a,"height",n),n}};function Mge(e,t,n,r,i){const s=t.name,o=s+SFe,a=s+TFe,u=n.channel,l=nm.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Ti?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const AFe="_zoom_anchor",CFe="_zoom_delta",yZt={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=nm.defined(t),s=r+CFe,{x:o,y:a}=t.project.hasChannel,u=ot(e.scaleName(Ti)),l=ot(e.scaleName(fo));let c=Uy(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+uE,f))),n.push({name:r+AFe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&Lge(e,t,o,"width",n),a!==void 0&&Lge(e,t,a,"height",n),n}};function Lge(e,t,n,r,i){const s=t.name,o=n.channel,a=nm.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?JH(e,o):u.name,h=s+CFe,p=`${s}${AFe}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const yb="_store",my="_tuple",vZt="_modify",IFe="vlSelectionResolve",t5=[QJt,KJt,GJt,EFe,wFe,nm,xFe,pZt,gZt,yZt,_Fe];function bZt(e){let t=e.parent;for(;t&&!kl(t);)t=t.parent;return t}function A1(e,{escape:t}={escape:!0}){let n=t?ot(e.name):e.name;const r=bZt(e);if(r){const{facet:i}=r;for(const s of _c)i[s]&&(n+=` + '__facet_${s}_' + (facet[${ot(r.vgField(s))}])`)}return n}function Are(e){return Do(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function kFe(e,t){(gt(t.select)||!t.select.on)&&delete e.events,(gt(t.select)||!t.select.clear)&&delete e.clear,(gt(t.select)||!t.select.toggle)&&delete e.toggle}function ZH(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...ZH(e.object)),t.push(...ZH(e.property))),t)}function RFe(e){return e.object.type==="MemberExpression"?RFe(e.object):e.object.name==="datum"}function NFe(e){const t=Wte(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&RFe(r)&&n.add(ZH(r).slice(1).join("."))}),n}class WS extends Or{clone(){return new WS(null,this.model,tn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=PM(this.model,this.filter,this),this._dependentFields=NFe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function _Zt(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Si(i.name),o=i.select,a=gt(o)?o:o.type,u=yt(o)?tn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=tn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:gt(u.on)?Uy(u.on,"scope"):mt(tn(u.on))},f=tn(i);for(const d of t5)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function PFe(e,t,n,r="datum"){const i=gt(t)?t:t.param,s=Si(i),o=ot(s+yb);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${ot(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function DFe(e,t,n){const r=Si(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&tt(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ot(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,tt((a.length?"Multiple ":"No ")+`matching ${ot(i)} encoding found for selection ${ot(n.param)}. Using "field": ${ot(s)}.`)):s=a[0].field}return`${o.name}[${ot(Oc(s))}]`}function wZt(e,t){for(const[n,r]of cy(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Hu(new WS(t,e,{param:n}),i,vi.Lookup,e.component.data.outputNodeRefCounts)}}function PM(e,t,n){return zA(t,r=>gt(r)?r:JKt(r)?PFe(e,r,n):K6e(r))}function EZt(e,t){if(e)return Ve(e)&&!Ng(e)?e.map(n=>ore(n,t)).join(", "):e}function cB(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function V2(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=tQt[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(IR(m)){const{condition:g,...y}=m,v=mt(g),b=fge[h];if(b){const{vgProp:w,part:E}=b,T=[...v.map(S=>{const{test:A,...C}=S;return{test:PM(null,A),...C}}),y];cB(c,E,w,T),delete c[h]}else if(b===null){const w={signal:v.map(E=>{const{test:T,...S}=E;return`${PM(null,T)} ? ${Kme(S)} : `}).join("")+Kme(y)};c[h]=w}}else if(Nt(m)){const g=fge[h];if(g){const{vgProp:y,part:v}=g;cB(c,v,y,m),delete c[h]}}zn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Lr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:as(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Nt(c.encode.labels.update.text)&&(p=cb(a,"datum.label",c.encode.labels.update.text.signal)),cB(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of T4e)e.hasAxisPart(p)||delete c.encode[p];Lr(c.encode)&&delete c.encode}const h=EZt(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:as(l,0)}}}}function OFe(e){const{axes:t}=e.component,n=[];for(const r of ep)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function xZt(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>V2(i,"grid",t)),...r.map(i=>V2(i,"grid",t)),...n.map(i=>V2(i,"main",t)),...r.map(i=>V2(i,"main",t))].filter(i=>i)}function Fge(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Qe(o),...Qe(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Cf(o[c])} : ${Cf(a[c])}`};return l}return t[i]})])}function SZt(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:Z6e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Nt(n)?"axisOrient":`axis${vR(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:Fge(a,r,e,n),vgAxisConfig:Fge(u,r,e,n),axisConfigStyle:TZt([...u,...a],r)}}function TZt(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=mt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function eq(e,t,n,r={}){var s;const i=C6e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const jge={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??AZt(n,e),gridScale:({model:e,channel:t})=>CZt(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||MFe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||$Fe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??kZt(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??RZt(t.type,n,nt(t)&&!!t.timeUnit,nt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??PZt({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:DZt,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=LFe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return k6e(i?[lge(i)]:[],nt(o)?[lge(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>OZt(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??$Zt(n,t)};function AZt(e,t){return!uo(e)&&nt(t)&&!ri(t==null?void 0:t.bin)&&!xo(t==null?void 0:t.bin)}function CZt(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function IZt(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Nt(s)?s:kI(s);{const{configValue:o}=eq("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?kI(o):n===Ti&&zn([Kne,Yne],e.type)&&!(nt(e)&&e.timeUnit)?270:void 0}}function tq(e){return`(((${e.signal} % 360) + 360) % 360)`}function $Fe(e,t,n,r){if(e!==void 0)if(n==="x"){if(Nt(e)){const i=tq(e),s=Nt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Nt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Nt(e)){const i=tq(e),s=Nt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Nt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function MFe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Nt(e)){const o=tq(e),a=Nt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Nt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function kZt(e,t){if(t==="x"&&zn(["quantitative","temporal"],e))return!0}function RZt(e,t,n,r){if(n&&!yt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function NZt(e){return e==="x"?"bottom":"left"}function PZt({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!uo(t)&&t!=="log"){if(nt(e)){if(ri(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&zn(["month","hours","day","quarter"],(i=ao(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function DZt({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(nt(t)){const{timeUnit:n}=t;if(n){const r=W6e(n);if(r)return{signal:r}}}}function LFe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return R6e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function OZt(e,t){const n=e.values;if(Ve(n))return S4e(t,n);if(Nt(n))return n}function $Zt(e,t){return e==="rect"&&SM(t)?1:0}class Ax extends Or{clone(){return new Ax(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=NFe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(r_(r)&&p4e(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${K6e({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new Ax(t,{calculate:u,as:Cx(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Un(this.transform)}`}}function Cx(e,t,n){return lt(e,{prefix:t,suffix:"sort_index",...n})}function n5(e,t){return zn(["top","bottom"],t)?"column":zn(["left","right"],t)||e==="row"?"row":"column"}function Ix(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return as((t||{})[e],i[e],n.header[e])}function r5(e,t,n,r){const i={};for(const s of e){const o=Ix(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Cre=["row","column"],Ire=["header","footer"];function MZt(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=r5(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=n5(t,a),l=kI(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...jFe(l,u),...FFe(u,l,s),...BFe(r,i,t,xQt,z4e)}}}function FFe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=MFe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function jFe(e,t){const n=$Fe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function LZt(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Ire)if(n[i])for(const s of n[i]){const o=jZt(e,t,i,n,s);o!=null&&r.push(o)}return r}function FZt(e,t){const{sort:n}=e;return ch(n)?{field:lt(n,{expr:"datum"}),order:n.order??"ascending"}:Ve(n)?{field:Cx(e,t,{expr:"datum"}),order:"ascending"}:{field:lt(e,{expr:"datum"}),order:n??"ascending"}}function nq(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=r5(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Zne({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=n5(t,a);return{text:{signal:u?cb(cb(u,"datum.label",l),"datum.value",lt(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...jFe(s,c),...FFe(c,s,o),...BFe(n,e,t,SQt,V4e)}}function jZt(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=r5(["labelOrient"],o.header,a,t);(t==="row"&&!zn(["top","bottom"],f)||t==="column"&&!zn(["left","right"],f))&&(s=nq(o,t,a))}const u=kl(e)&&!TR(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:FZt(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const BZt={column:{start:0,end:1},row:{start:1,end:0}};function UZt(e,t){return BZt[t][e]}function zZt(e,t){const n={};for(const r of _c){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=r5(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=n5(r,o),u=UZt(s,a);u!==void 0&&(n[a]=u)}}return Lr(n)?void 0:n}function BFe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=Ix(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function kre(e){return[...EP(e,"width"),...EP(e,"height"),...EP(e,"childWidth"),...EP(e,"childHeight")]}function EP(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(uo(o)&&Yy(a)){const u=e.scaleName(n);return kl(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Bge(u,a)]:[Bge(u,a),{name:i,update:UFe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=YH(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Bge(e,t){const n=`${e}_step`;return Nt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function UFe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=as(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Cf(o)}, ${Cf(s)}) * ${e}_step`}function zFe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function VFe(e,t){return Qe(e).reduce((n,r)=>{const i=e[r];return{...n,...qS(t,i,r,s=>ui(s.value))}},{})}function HFe(e,t){if(kl(t))return e==="theta"?"independent":"shared";if(KS(t))return"shared";if(Mre(t))return us(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Rre(e,t){const n=e.scale[t],r=us(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&tt(_Kt(t)),"independent"):e[r][t]||"shared"}const VZt={...CQt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},qFe=Qe(VZt);class HZt extends ag{}const Uge={symbols:qZt,gradient:WZt,labels:GZt,entries:YZt};function qZt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...NYt({},n,RXt),...yFe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?WFe(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Zu)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=ui(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=ui(m??1));else if(Ve(f.fill)){const g=rq(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=ui(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Zu)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Ve(f.stroke)){const g=as(rq(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==ig){const g=nt(t)&&YFe(n,i,t);g?f.opacity=[{test:g,...ui(m??1)},ui(u.legend.unselectedOpacity)]:m&&(f.opacity=ui(m))}return f={...f,...e},Lr(f)?void 0:f}function WZt(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?WFe(o.opacity)||s.opacity:void 0;return l&&(a.opacity=ui(l)),a={...a,...e},Lr(a)?void 0:a}function GZt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=nt(t)?YFe(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;pb(c)?f=kf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=kf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&nt(t)&&t.timeUnit===void 0&&(f=kf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Lr(d)?void 0:d}function YZt(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function WFe(e){return GFe(e,(t,n)=>Math.max(t,n.value))}function rq(e){return GFe(e,(t,n)=>as(t,n.value))}function GFe(e,t){if(VXt(e))return mt(e.condition).reduce(t,e.value);if(Yf(e))return e.value}function YFe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=ot(n.field);return r.map(s=>`(!length(data(${ot(Si(s)+yb)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const zge={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return s4e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return o4e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??ten(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??nen(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??XZt(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>aE(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(oE(n)&&If(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>KZt(t,e)};function KZt(e,t){const n=e.values;if(Ve(n))return S4e(t,n);if(Nt(n))return n}function XZt(e,t,n,r){if(t!=="shape"){const i=rq(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function QZt(e){const{legend:t}=e;return as(t.type,JZt(e))}function JZt({channel:e,timeUnit:t,scaleType:n}){if(oE(e)){if(zn(["quarter","month","day"],t))return"symbol";if(If(n))return"gradient"}return"symbol"}function ZZt({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??een(n,t)}function een(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function ten({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(If(i))return n==="horizontal"?r==="top"||r==="bottom"?Vge(t,"width",o,s):o:Vge(t,"height",u,a)}function Vge(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function nen(e){if(zn(["quantile","threshold","log","symlog"],e))return"greedy"}function KFe(e){const t=Hi(e)?ren(e):aen(e);return e.component.legends=t,t}function ren(e){const{encoding:t}=e,n={};for(const r of[Zu,...q4e]){const i=Os(t[r]);!i||!e.getScaleComponent(r)||r===el&&nt(i)&&i.type===HS||(n[r]=oen(e,r))}return n}function ien(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function sen(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function oen(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new HZt({},ien(e,t));mZt(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Os(i[t]),f=nt(c)?(w=ao(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=QZt({legend:n,channel:t,timeUnit:f,scaleType:l}),p=ZZt({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of qFe){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const T=E in zge?zge[E](m):n[E];if(T!==void 0){const S=sen(T,E,n,e.fieldDef(t));(S||s.legend[E]===void 0)&&a.set(E,T,S)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const T=VFe(g[E]??{},e),S=E in Uge?Uge[E](T,b):T;S!==void 0&&!Lr(S)&&(v[E]={...y!=null&&y.length&&nt(c)?{name:`${Si(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:S})}return Lr(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function aen(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){KFe(r);for(const i of Qe(r.component.legends))n.legend[i]=Rre(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=XFe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Qe(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function XFe(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of qFe){const c=hy(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return uen(f,d);case"title":return N6e(f,d);case"type":return i=!0,ul("symbol")}return QF(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&vM(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&vM(e.explicit,["encode","gradient"])),e}function uen(e,t){return t.value==="circle"?t:e}function len(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function QFe(e){const t=e.component.legends,n={};for(const i of Qe(t)){const s=e.getScaleComponent(i),o=Fr(s.get("domains"));if(n[o])for(const a of n[o])XFe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Do(n).flat().map(i=>cen(i,e.config)).filter(i=>i!==void 0)}function cen(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of q4e)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Nt(s.encode.labels.update.text)&&(l=cb(r,"datum.label",s.encode.labels.update.text.signal)),len(s,"labels","text",{signal:l})}return s}}function fen(e){return KS(e)||Mre(e)?den(e):JFe(e)}function den(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),JFe(e))}function JFe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Nt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return zn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const hen=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class ZFe extends ag{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function e5e(e){e.component.projection=Hi(e)?pen(e):yen(e)}function pen(e){if(e.hasProjection){const t=Su(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?men(e):void 0,s=new ZFe(e.projectionName(!0),{...Su(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function men(e){const t=[],{encoding:n}=e;for(const r of[[ad,od],[$c,ud]])(Os(n[r[0]])||Os(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(el)&&e.typedFieldDef(el).type===HS&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(vi.Main)),t}function gen(e,t){const n=xne(hen,i=>!!(!Ft(e.explicit,i)&&!Ft(t.explicit,i)||Ft(e.explicit,i)&&Ft(t.explicit,i)&&Sl(e.get(i),t.get(i))));if(Sl(e.size,t.size)){if(n)return e;if(Sl(e.explicit,{}))return t;if(Sl(t.explicit,{}))return e}return null}function yen(e){if(e.children.length===0)return;let t;for(const r of e.children)e5e(r);const n=xne(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=gen(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new ZFe(r,t.specifiedProjection,t.size,tn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function ven(e,t,n,r){if(CR(t,n)){const i=Hi(e)?e.axis(n)??e.legend(n)??{}:{},s=lt(t,{expr:"datum"}),o=lt(t,{expr:"datum",binSuffix:"end"});return{formulaAs:lt(t,{binSuffix:"range",forAs:!0}),formula:SR(s,o,i.format,i.formatType,r)}}return{}}function t5e(e,t){return`${x6e(e)}_${t}`}function ben(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Nre(e,t,n){const r=qF(n,void 0)??{},i=t5e(r,t);return e.getName(`${i}_bins`)}function _en(e){return"as"in e}function Hge(e,t,n){let r,i;_en(e)?r=gt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[lt(e,{forAs:!0}),lt(e,{binSuffix:"end",forAs:!0})];const s={...qF(t,void 0)},o=t5e(s,e.field),{signal:a,extentSignal:u}=ben(n,o);if(OF(s.extent)){const c=s.extent;i=DFe(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class dh extends Or{clone(){return new dh(null,tn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(Ja(s)&&ri(s.bin)){const{key:a,binComponent:u}=Hge(s,s.bin,n);i[a]={...u,...i[a],...ven(n,s,o,n.config)}}return i},{});return Lr(r)?null:new dh(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=Hge(n,n.bin,r);return new dh(t,{[i]:s})}merge(t,n){for(const r of Qe(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Kd([...this.bins[r].as,...t.bins[r].as],Un)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Do(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Do(this.bins).map(t=>t.field))}hash(){return`Bin ${Un(this.bins)}`}assemble(){return Do(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Oc(t.field),as:r,signal:t.signal,...OF(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Oc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:lt({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function wen(e,t,n,r){var s;const i=Hi(r)?r.encoding[Zh(t)]:void 0;if(Ja(n)&&Hi(r)&&g4e(n,i,r.markDef,r.config)){e.add(lt(n,{})),e.add(lt(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=dy({fieldDef:n,markDef:a,config:u});RI(o)&&l!==.5&&us(t)&&(e.add(lt(n,{suffix:JF})),e.add(lt(n,{suffix:ZF}))),n.bin&&CR(n,t)&&e.add(lt(n,{binSuffix:"range"}))}else if(h6e(t)){const o=d6e(t);e.add(r.getName(o))}else e.add(lt(n));return r_(n)&&fXt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function Een(e,t){for(const n of Qe(t)){const r=t[n];for(const i of Qe(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Lf extends Or{clone(){return new Lf(null,new Set(this.dimensions),tn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([lt(o,{forAs:!0})]);else{if(Pm(u)||Gy(u)){const c=Pm(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([lt({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([lt(o,{forAs:!0})]);sg(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([lt({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([lt({field:l,aggregate:"max"},{forAs:!0})]))}else wen(s,a,o,n)}),s.size+Qe(i).length===0)?null:new Lf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||lt(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||lt(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Qe(i).length===0?null:new Lf(t,r,i)}merge(t){return i6e(this.dimensions,t.dimensions)?(Een(this.measures,t.measures),!0):(MKt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Qe(this.measures)])}producedFields(){const t=new Set;for(const n of Qe(this.measures))for(const r of Qe(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Un({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Qe(this.measures))for(const o of Qe(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Oc(s));return{type:"aggregate",groupby:[...this.dimensions].map(Oc),ops:t,fields:n,as:r}}}class GS extends Or{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of _c){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[lt(o),...ri(a)?[lt(o,{binSuffix:"end"})]:[]],...ch(u)?{sortField:u}:Ve(u)?{sortIndexField:Cx(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of _c)this[n]&&(t+=` ${n.charAt(0)}:${Un(this[n])}`);return t}get fields(){var n;const t=[];for(const r of _c)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of _c)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of ep){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(uo(i)&&Yy(s)){const o=i5(this.childModel,n),a=$re(o);a?t[n]=a:tt(Mne(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=UF,field:f}=u;s.push(f),o.push(c),a.push(lt(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of Cre){for(const c of Ire){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[tm,em])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function qge(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function xen(e,t){const n=Ane(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=qge(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=qge(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return tt(qYt(t)),null}function Sen(e){const t={};return XD(e.filter,n=>{if(Y6e(n)){let r=null;Bne(n)?r=gl(n.equal):zne(n)?r=gl(n.lte):Une(n)?r=gl(n.lt):Vne(n)?r=gl(n.gt):Hne(n)?r=gl(n.gte):qne(n)?r=n.range[0]:Wne(n)&&(r=(n.oneOf??n.in)[0]),r&&(e_(r)?t[n.field]="date":ar(r)?t[n.field]="number":gt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Ten(e){const t={};function n(r){xx(r)?t[r.field]="date":r.type==="quantitative"&&EYt(r.aggregate)?t[r.field]="number":gx(r.field)>1?r.field in t||(t[r.field]="flatten"):r_(r)&&ch(r.sort)&&gx(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Hi(e)||kl(e))&&e.forEachFieldDef((r,i)=>{if(Ja(r))n(r);else{const s=Jb(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Hi(e)){const{mark:r,markDef:i,encoding:s}=e;if(n_(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];nt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function Aen(e){const t={};if(Hi(e)&&e.component.selection)for(const n of Qe(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&gx(i.field)>1&&(t[i.field]="flatten")}return t}class fa extends Or{clone(){return new fa(null,tn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Un(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!I0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Qe(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:tt(tge(a,r[a],u.value)))}for(const a of Qe(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:tt(tge(a,n[a],u)))}const s=new ag(n,r);i.copyAll(s);const o={};for(const a of Qe(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Qe(o).length===0||i.parseNothing?null:new fa(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Qe(this._parse)){const r=this._parse[n];gx(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Qe(this._parse))}dependentFields(){return new Set(Qe(this._parse))}assembleTransforms(t=!1){return Qe(this._parse).filter(n=>t?gx(n)>1:!0).map(n=>{const r=xen(n,this._parse[n]);return r?{type:"formula",expr:r,as:zS(n)}:null}).filter(n=>n!==null)}}class gy extends Or{clone(){return new gy(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Kf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Kf}}}class RR extends Or{clone(){return new RR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Un(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class NR extends Or{clone(){return new NR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Un(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class vb extends Or{constructor(t){super(null),t??(t={name:"source"});let n;if(I0(t)||(n=t.format?{...zu(t.format,["parse"])}:{}),NI(t))this._data={values:t.values};else if(Sx(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];zn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else lFe(t)?this._data={values:[{type:"Sphere"}]}:(aFe(t)||I0(t))&&(this._data={});this._generator=I0(t),t.name&&(this._name=t.name),n&&!Lr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Wge=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Cen=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},H2;function Pre(e){return e instanceof vb||e instanceof RR||e instanceof NR}class Dre{constructor(){H2.set(this,void 0),Wge(this,H2,!1,"f")}setModified(){Wge(this,H2,!0,"f")}get modifiedFlag(){return Cen(this,H2,"f")}}H2=new WeakMap;class i_ extends Dre{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Ore extends Dre{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class Ien extends Ore{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Qe(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class ken extends Ore{constructor(t){super(),this.requiresSelectionId=t&&Are(t)}run(t){t instanceof gy&&(this.requiresSelectionId&&(Pre(t.parent)||t.parent instanceof Lf||t.parent instanceof fa)||(this.setModified(),t.remove()))}}class Ren extends Dre{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof fh&&(r=t.producedFields(),Sne(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Nen extends Ore{constructor(){super()}run(t){t instanceof Hu&&!t.isRequired()&&(this.setModified(),t.remove())}}class Pen extends i_{run(t){if(!Pre(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof fa)if(t instanceof fa)this.setModified(),t.merge(n);else{if(Tne(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Den extends i_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof fa);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Qe(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Lr(i)){this.setModified();const o=new fa(t,i);for(const a of n){if(a instanceof fa)for(const u of Qe(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof fa&&Qe(a.parse).length===0&&a.remove()}}}}}class Oen extends i_{run(t){t instanceof Hu||t.numChildren()>0||t instanceof GS||t instanceof vb||(this.setModified(),t.remove())}}class $en extends i_{run(t){const n=t.children.filter(i=>i instanceof fh),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Men extends i_{run(t){const n=t.children.filter(i=>i instanceof Lf),r={};for(const i of n){const s=Un(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Qe(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class Len extends i_{constructor(t){super(),this.model=t}run(t){const n=!(Pre(t)||t instanceof WS||t instanceof fa||t instanceof gy),r=[],i=[];for(const s of t.children)s instanceof dh&&(n&&!Tne(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof dh?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Fen extends i_{run(t){const n=[...t.children];if(!lb(n,o=>o instanceof Hu)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Hu){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Hu)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class s_ extends Or{clone(){return new s_(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Kd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??lt(t)}hash(){return`JoinAggregateTransform ${Un(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function jen(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=lt(r);return i&&t.push(i),t},[])}function Ben(e){return Ve(e)&&e.every(t=>gt(t))&&e.length>1}class rm extends Or{clone(){return new rm(null,tn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(as(f.order,"ascending"));const l={field:a,order:u};let c;return Ben(s)?c=s:gt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new rm(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Rh(p)}).filter(h=>!!h),c=jen(n),f=n.encoding.order;let d;if(Ve(f)||nt(f))d=I6e(f);else{const h=y4e(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new rm(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Un(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[lt(i,{binSuffix:"mid"})]:[lt(i,{}),lt(i,{binSuffix:"end"})]:[lt(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=lt(c,{expr:"datum"}),p=lt(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:lt(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:lt(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class YS extends Or{clone(){return new YS(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Kd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??lt(t)}hash(){return`WindowTransform ${Un(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>One(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Uen(e){function t(n){if(!(n instanceof GS)){const r=n.clone();if(r instanceof Hu){const i=sq+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Lf||r instanceof rm||r instanceof YS||r instanceof s_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function iq(e){if(e instanceof GS)if(e.numChildren()===1&&!(e.children[0]instanceof Hu)){const t=e.children[0];(t instanceof Lf||t instanceof rm||t instanceof YS||t instanceof s_)&&t.addDimensions(e.fields),t.swapWithParent(),iq(e)}else{const t=e.model.component.data.main;n5e(t);const n=Uen(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(iq)}function n5e(e){if(e instanceof Hu&&e.type===vi.Main&&e.numChildren()===1){const t=e.children[0];t instanceof GS||(t.swapWithParent(),n5e(e))}}const sq="scale_",xP=5;function oq(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!oq(t.children))return!1}return!0}function Jc(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Gge(e,t,n){let r=e.sources,i=!1;return i=Jc(new Nen,r)||i,i=Jc(new ken(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Jc(new Oen,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Jc(new Pen,r)||i,i=Jc(new Len(t),r)||i,i=Jc(new Ren,r)||i,i=Jc(new Den,r)||i,i=Jc(new Men,r)||i,i=Jc(new $en,r)||i,i=Jc(new Ien,r)||i,i=Jc(new Fen,r)||i),e.sources=r,i}function zen(e,t){oq(e.sources);let n=0,r=0;for(let i=0;i<xP&&Gge(e,t,!0);i++)n++;e.sources.map(iq);for(let i=0;i<xP&&Gge(e,t,!1);i++)r++;oq(e.sources),Math.max(n,r)===xP&&tt(`Maximum optimization runs(${xP}) reached.`)}class Xs{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Xs(()=>t(n))}}function r5e(e){Hi(e)?Ven(e):Hen(e)}function Ven(e){const t=e.component.scales;for(const n of Qe(t)){const r=Wen(e,n);if(t[n].setWithExplicit("domains",r),Yen(e,n),e.component.data.isFaceted){let s=e;for(;!kl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Wp(a)&&(a.data=sq+a.data.replace(sq,""))}}}function Hen(e){for(const n of e.children)r5e(n);const t=e.component.scales;for(const n of Qe(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=hy(r,o.getWithExplicit("domains"),"domains","scale",aq);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&tt(UYt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function qen(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=Yge(t,n);if(!i){tt(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Yge(t,n);if(i)return"unaggregated"}return e}function Wen(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=qen(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Os(r.x2)?Os(r.x)?hy(wg(n,i,e,"x"),wg(n,i,e,"x2"),"domain","scale",aq):wg(n,i,e,"x2"):t==="y"&&Os(r.y2)?Os(r.y)?hy(wg(n,i,e,"y"),wg(n,i,e,"y2"),"domain","scale",aq):wg(n,i,e,"y2"):wg(n,i,e,t)}function Gen(e,t,n){return e.map(r=>({signal:`{data: ${WF(r,{timeUnit:n,type:t})}}`}))}function fB(e,t,n){var i;const r=(i=ao(n))==null?void 0:i.unit;return t==="temporal"||r?Gen(e,t,r):[e]}function wg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=Os(i[r]),{type:c}=l,f=l.timeUnit;if(cXt(t)){const p=wg(e,void 0,n,r),m=fB(t.unionWith,c,f);return Id([...m,...p.value])}else{if(Nt(t))return Id([t]);if(t&&t!=="unaggregated"&&!t4e(t))return Id(fB(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return ul([[0,1]]);const p=n.requestDataName(vi.Main);return ul([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=sg(r)&&nt(l)?Ken(n,r,e):void 0;if(tp(l)){const p=fB([l.datum],c,f);return ul(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(vi.Main),{field:m}=l;return ul([{data:p,field:lt({field:m,aggregate:"min"})},{data:p,field:lt({field:m,aggregate:"max"})}])}else if(ri(h.bin)){if(uo(e))return ul(e==="bin-ordinal"?[]:[{data:II(d)?n.requestDataName(vi.Main):n.requestDataName(vi.Raw),field:n.vgField(r,CR(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!yt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(ri(p)){const m=Nre(n,h.field,p);return ul([new Xs(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return ul([{data:n.requestDataName(vi.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&zn(["time","utc"],e)){const p=i[Zh(r)];if(g4e(h,p,s,a)){const m=n.requestDataName(vi.Main),g=dy({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=RI(o)&&g!==.5&&us(r);return ul([{data:m,field:n.vgField(r,y?{suffix:JF}:{})},{data:m,field:n.vgField(r,{suffix:y?ZF:"end"})}])}}return ul(d?[{data:II(d)?n.requestDataName(vi.Main):n.requestDataName(vi.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(vi.Main),field:n.vgField(r)}])}function dB(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":UF),...r?{field:Oc(r)}:{},...i?{order:i}:{}}}function Yen(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=t4e(r)&&r,o=Zb(i)&&OF(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Ken(e,t,n){if(!uo(n))return;const r=e.fieldDef(t),i=r.sort;if(p4e(i))return{op:"min",field:Cx(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(ch(i)){const a=s&&!o.has(i.field);return dB(i,a)}else if(h4e(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Pm(c)||Gy(c))return dB({field:lt(l),order:u},d);if(One(c)||!c)return dB({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(zn(["ascending",void 0],i))return!0}}function Yge(e,t){const{aggregate:n,type:r}=e;return n?gt(n)&&!SYt.has(n)?{valid:!1,reason:hKt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:pKt(e)}:{valid:!0}:{valid:!1,reason:dKt(e)}}function aq(e,t,n,r){return e.explicit&&t.explicit&&tt(bKt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Xen(e){const t=Kd(e.map(o=>{if(Wp(o)){const{sort:a,...u}=o;return u}return o}),Un),n=Kd(e.map(o=>{if(Wp(o)){const a=o.sort;return a!==void 0&&!II(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Un);if(t.length===0)return;if(t.length===1){const o=e[0];if(Wp(o)&&n.length>0){let a=n[0];if(n.length>1){tt(rge);const u=n.filter(l=>yt(l)&&"op"in l&&l.op!=="min");n.every(l=>yt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(yt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Kd(n.map(o=>II(o)||!("op"in o)||gt(o.op)&&o.op in _Yt?o:(tt(wKt(o)),!0)),Un);let i;r.length===1?i=r[0]:r.length>1&&(tt(rge),i=!0);const s=Kd(e.map(o=>Wp(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function $re(e){if(Wp(e)&&gt(e.field))return e.field;if(TYt(e)){let t;for(const n of e.fields)if(Wp(n)&&gt(n.field)){if(!t)t=n.field;else if(t!==n.field)return tt(EKt),t}return tt(xKt),t}else if(AYt(e)){tt(SKt);const t=e.fields[0];return gt(t)?t:void 0}}function i5(e,t){const r=e.component.scales[t].get("domains").map(i=>(Wp(i)&&(i.data=e.lookupDataSource(i.data)),i));return Xen(r)}function i5e(e){return KS(e)||Mre(e)?e.children.reduce((t,n)=>t.concat(i5e(n)),Kge(e)):Kge(e)}function Kge(e){return Qe(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=Qen(i.range,s,n,e),h=i5(e,n),p=a?qJt(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function Qen(e,t,n,r){if(us(n)){if(Yy(e))return{step:{signal:`${t}_step`}}}else if(yt(e)&&Wp(e))return{...e,data:r.lookupDataSource(e.data)};return e}class s5e extends ag{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:lb(this.get("domains"),t=>Ve(t)&&t.length===2&&ar(t[0])&&t[0]<=0&&ar(t[1])&&t[1]>=0)}}const Jen=["range","scheme"];function Zen(e){const t=e.component.scales;for(const n of DF){const r=t[n];if(!r)continue;const i=etn(n,e);r.setWithExplicit("range",i)}}function Xge(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=tl(t),o=e.getName(s);if(yt(r)&&r.binned&&r.step!==void 0)return new Xs(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(ri(r)){const a=Nre(e,i,r);return new Xs(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function etn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of Jen)if(n[f]!==void 0){const d=qH(s,f),h=n4e(e,f);if(!d)tt($6e(s,f,e));else if(h)tt(h);else switch(f){case"range":{const p=n.range;if(Ve(p)){if(us(e))return Id(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Xs.fromName(y,g)}return m}))}else if(yt(p))return Id({data:t.requestDataName(vi.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Id(p)}case"scheme":return Id(ttn(n[f]))}}const o=e===Ti||e==="xOffset"?"width":"height",a=r[o];if(Nh(a)){if(us(e))if(uo(s)){const f=a5e(a,t,e);if(f)return Id({step:f})}else tt(M6e(o));else if(wR(e)){const f=e===zy?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=u5e(a,s);if(p)return Id(p)}}}const{rangeMin:u,rangeMax:l}=n,c=ntn(e,t);return(u!==void 0||l!==void 0)&&qH(s,"rangeMin")&&Ve(c)&&c.length===2?Id([u??c[0],l??c[1]]):ul(c)}function ttn(e){return lXt(e)?{scheme:e.name,...zu(e,["name"])}:{scheme:e}}function o5e(e,t,n,{center:r}={}){const i=tl(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===fo&&Vl(n)?r?[Xs.fromName(a=>`${o(a)}/2`,s),Xs.fromName(a=>`-${o(a)}/2`,s)]:[Xs.fromName(o,s),0]:r?[Xs.fromName(a=>`-${o(a)}/2`,s),Xs.fromName(a=>`${o(a)}/2`,s)]:[0,Xs.fromName(o,s)]}function ntn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Os(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Ti:case fo:{if(zn(["point","band"],u)){const f=l5e(e,n,r.view);if(Nh(f))return{step:a5e(f,t,e)}}return o5e(e,t,u)}case zy:case VS:return rtn(e,t,u);case rg:{const f=t.component.scales[e].get("zero"),d=c5e(i,f,r),h=otn(i,n,t,r);return _x(u)?stn(d,h,itn(u,r,l,e)):[d,h]}case qc:return[0,Math.PI*2];case Qb:return[0,360];case sd:return[0,new Xs(()=>{const f=t.getSignalName(kl(t.parent)?"child_width":"width"),d=t.getSignalName(kl(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case qy:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Wy:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case el:return"symbol";case Zu:case Qh:case Jh:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case ig:case Vy:case Hy:return[r.scale.minOpacity,r.scale.maxOpacity]}}function a5e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=Rne(n),o=r[s];if(G4e({step:e,offsetIsDiscrete:an(o)&&X6e(o.type)})==="offset"&&I4e(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${RYt(f)})`}}else return e.step}function u5e(e,t){if(G4e({step:e,offsetIsDiscrete:uo(t)})==="offset")return{step:e.step}}function rtn(e,t,n){const r=e===zy?"x":"y",i=t.getScaleComponent(r);if(!i)return o5e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=l5e(r,t.size,t.config.view);if(Nh(l)){const c=u5e(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(nt(l)&&l.timeUnit){const c=W6e(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=dy({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Nt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Nt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return n6e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function l5e(e,t,n){const r=e===Ti?"width":"height",i=t[r];return i||kM(n,r)}function itn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Ve(n)?n.length+1:(tt(DKt(r)),3)}}function stn(e,t,n){const r=()=>{const i=Cf(t),s=Cf(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Nt(t)?new Xs(r):{signal:r()}}function c5e(e,t,n){if(t)return Nt(t)?{signal:`${t.signal} ? 0 : ${c5e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error($F("size",e))}const Qge=.95;function otn(e,t,n,r){const i={x:Xge(n,"x"),y:Xge(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Jge(t,i,r.view);return ar(s)?s-1:new Xs(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Jge(t,i,r.view);return ar(s)?Math.pow(Qge*s,2):new Xs(()=>`pow(${Qge} * ${s.signal}, 2)`)}}throw new Error($F("size",e))}function Jge(e,t,n){const r=Nh(e.width)?e.width.step:IM(n,"width"),i=Nh(e.height)?e.height.step:IM(n,"height");return t.x||t.y?new Xs(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function f5e(e,t){Hi(e)?atn(e,t):h5e(e,t)}function atn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Qe(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=Os(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=qH(h,t),y=n4e(a,t);if(d!==void 0&&(g?y&&tt(y):tt($6e(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":e_(u[t])||b==="temporal"||v?l.set(t,{signal:WF(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in Zge?Zge[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:k4e(i,a),hasSecondaryRangeChannel:!!i[Zh(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const Zge={bins:({model:e,fieldOrDatumDef:t})=>nt(t)?utn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>ltn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>ctn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>ftn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>dtn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>htn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=nt(e)?e.sort:void 0;return ptn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>mtn(e,t,n,r,i,s.scale,o)};function d5e(e){Hi(e)?Zen(e):h5e(e,"range")}function h5e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?d5e(r):f5e(r,t);for(const r of Qe(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=hy(i,a,t,"scale",oFe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function utn(e,t){const n=t.bin;if(ri(n)){const r=Nre(e,t.field,n);return new Xs(()=>e.getSignalName(r))}else if(xo(n)&&Zb(n)&&n.step!==void 0)return{step:n.step}}function ltn(e,t){if(zn([Zu,Qh,Jh],e)&&t!=="nominal")return"hcl"}function ctn(e,t,n,r,i,s){var o;if(!((o=Rh(s))!=null&&o.bin||Ve(n)||i!=null||r!=null||zn([Vu.TIME,Vu.UTC],e)))return us(t)?!0:void 0}function ftn(e,t,n,r,i,s){if(us(e)){if(If(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(nt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Vu.POINT)return n.pointPadding}}function dtn(e,t,n,r,i,s=!1){if(e===void 0){if(us(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:as(o,n==="bar"?a:u)}else if(wR(t)&&r===Vu.BAND)return i.offsetBandPaddingInner}}function htn(e,t,n,r,i,s=!1){if(e===void 0){if(us(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Vu.BAND)return as(o,Nt(r)?{signal:`${r.signal}/2`}:r/2)}else if(wR(t)){if(n===Vu.POINT)return .5;if(n===Vu.BAND)return i.offsetBandPaddingOuter}}}function ptn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Vl(e)&&t==="descending"?Nt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Vl(e)&&t==="descending")return!0}function mtn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Vl(i)){if(Ve(n)){const u=n[0],l=n[n.length-1];if(ar(u)&&u<=0&&ar(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!_x(i))return!0;if(!(nt(t)&&t.bin)&&zn([...ep,...dYt],e)){const{orient:u,type:l}=r;return zn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:zn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function gtn(e,t,n,r,i=!1){const s=ytn(t,n,r,i),{type:o}=e;return sg(t)?o!==void 0?gXt(t,o)?nt(n)&&!mXt(o,n.type)?(tt(yKt(o,s)),s):o:(tt(gKt(t,o,s)),s):s:null}function ytn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(oE(e)||rB(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&tt(iB(e,"ordinal")),"ordinal";if(us(e)||wR(e)){if(zn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Dne)return"band";const s=n[tl(e)];return mb(s)||Ex(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return oE(e)?"time":rB(e)==="discrete"?(tt(iB(e,"temporal")),"ordinal"):nt(t)&&t.timeUnit&&ao(t.timeUnit).utc?"utc":"time";case"quantitative":return oE(e)?nt(t)&&ri(t.bin)?"bin-ordinal":"linear":rB(e)==="discrete"?(tt(iB(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(D6e(t.type))}function vtn(e,{ignoreRange:t}={}){p5e(e),r5e(e);for(const n of pXt)f5e(e,n);t||d5e(e)}function p5e(e){Hi(e)?e.component.scales=btn(e):e.component.scales=wtn(e)}function btn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of DF){const o=Os(t[s]);if(o&&n===c4e&&s===el&&o.type===HS)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=k4e(t,s),l=gtn(a,s,o,r,u);i[s]=new s5e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const _tn=oFe((e,t)=>sge(e)-sge(t));function wtn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){p5e(s);for(const o of Qe(s.component.scales))if((t=i.scale)[o]??(t[o]=HFe(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?iXt(a.value,u.value)?r[o]=hy(a,u,"type","scale",_tn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Qe(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new s5e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class hB{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Hi(e){return(e==null?void 0:e.type)==="unit"}function kl(e){return(e==null?void 0:e.type)==="facet"}function Mre(e){return(e==null?void 0:e.type)==="concat"}function KS(e){return(e==null?void 0:e.type)==="layer"}class Lre{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=Su(a),this.name=t.name??i,this.title=Ng(t.title)?{text:t.title}:t.title?Su(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new hB,this.projectionNameMap=r?r.projectionNameMap:new hB,this.signalNameMap=r?r.signalNameMap:new hB,this.data=t.data,this.description=t.description,this.transforms=IJt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:PQt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:zF(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new ag,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?tn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){vtn(this)}parseProjection(){e5e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){KFe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Qe(r)){const o=r[s];o!==void 0&&(i[s]=ui(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=ui(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Lr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=zZt(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of _c)t[r].title&&n.push(MZt(this,r));for(const r of Cre)n=n.concat(LZt(this,r));return n}assembleAxes(){return xZt(this.component.axes,this.config)}assembleLegends(){return QFe(this)}assembleProjections(){return fen(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...S6e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return zn(["unit","layer"],this.type)?zn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Lr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||kl(this.parent)?i5e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Si((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(vi[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(kl(this.parent)){const n=zFe(t),r=PF(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(uo(s)&&Yy(o)){const a=i.get("name"),u=i5(this,r),l=$re(u);if(l){const c=lt({aggregate:"distinct",field:l},{expr:"datum"});return{signal:UFe(a,i,c)}}else return tt(Mne(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(m6e(t)&&sg(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error($Yt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class m5e extends Lre{vgField(t,n={}){const r=this.fieldDef(t);if(r)return lt(r,n)}reduceFieldDef(t,n){return aQt(this.getMapping(),(r,i,s)=>{const o=Rh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){lre(this.getMapping(),(r,i)=>{const s=Rh(r);s&&t(s,i)},n)}}class s5 extends Or{clone(){return new s5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Un(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class o5 extends Or{clone(){return new o5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Un(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class PI extends Or{clone(){return new PI(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(br("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=sg(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Vl(d)&&l.aggregate!=="count"&&!n_(i)&&(u[l.field]=l)}return u},{});return Qe(a).length?new PI(t,a):null}dependentFields(){return new Set(Qe(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Un(this.filter)}`}assemble(){const t=Qe(this.filter).reduce((n,r)=>{const i=this.filter[r],s=lt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class a5 extends Or{clone(){return new a5(this.parent,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Un(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class u5 extends Or{clone(){return new u5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Un(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class lE extends Or{clone(){return new lE(null,tn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[ad,od],[$c,ud]]){const s=i.map(o=>{const a=Os(n.encoding[o]);return nt(a)?a.field:tp(a)?{expr:`${a.datum}`}:Yf(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new lE(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(el)){const i=n.typedFieldDef(el);i.type===HS&&(t=new lE(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(gt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Un(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class DI extends Or{clone(){return new DI(null,this.projection,tn(this.fields),tn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[ad,od],[$c,ud]]){const i=r.map(o=>{const a=Os(n.encoding[o]);return nt(a)?a.field:tp(a)?{expr:`${a.datum}`}:Yf(a)?{expr:`${a.value}`}:void 0}),s=r[0]===$c?"2":"";(i[0]||i[1])&&(t=new DI(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(gt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Un(this.fields)} ${Un(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class C1 extends Or{clone(){return new C1(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new C1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(nt(i)&&nt(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=N4e(n.mark,r);return new C1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Un(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:lJt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class l5 extends Or{clone(){return new l5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Un(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class OI extends Or{clone(){return new OI(null,tn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(cJt(o)){let u=v5e(o.data,s);u||(u=new vb(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Hu(u,l,vi.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(fJt(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Si(u),u)}catch{throw new Error(jYt(u))}if(a=l.materialized,!a)throw new Error(BYt(u))}return new OI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?mt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Un({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:mt(this.transform.as)}:{}};else{let n=this.transform.as;gt(n)||(tt(YYt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class c5 extends Or{clone(){return new c5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Un(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class f5 extends Or{clone(){return new f5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Un(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class d5 extends Or{clone(){return new d5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Kd((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Un(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class h5 extends Or{clone(){return new h5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Un(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function g5e(e){let t=0;function n(r,i){if(r instanceof vb&&!r.isGenerator&&!Sx(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof fa&&(r.parent instanceof vb&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof GS){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof RR||r instanceof NR||r instanceof PI||r instanceof WS||r instanceof Ax||r instanceof DI||r instanceof Lf||r instanceof OI||r instanceof YS||r instanceof s_||r instanceof u5||r instanceof a5||r instanceof s5||r instanceof l5||r instanceof c5||r instanceof f5||r instanceof gy||r instanceof h5||r instanceof d5||r instanceof o5)&&i.transform.push(r.assemble()),(r instanceof dh||r instanceof fh||r instanceof C1||r instanceof rm||r instanceof lE)&&i.transform.push(...r.assemble()),r instanceof Hu&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Hu?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Hu&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function Etn(e){const t=[],n=g5e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function xtn(e,t){const n=[],r=g5e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function Stn(e){return e==="top"||e==="left"||Nt(e)?"header":"footer"}function Ttn(e){for(const t of _c)Atn(e,t);e0e(e,"x"),e0e(e,"y")}function Atn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=Ix("title",null,r,t);let l=aE(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Ve(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=Ix("labelOrient",a.header,r,t),f=a.header!==null?as((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=zn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[y5e(e,t,f)]}}}function y5e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function e0e(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Rre(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=Stn(a.get("orient"));o[u]??(o[u]=[y5e(e,s,!1)]);const l=V2(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function Ctn(e){Fre(e),DM(e,"width"),DM(e,"height")}function Itn(e){Fre(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";DM(e,t),DM(e,n)}function Fre(e){for(const t of e.children)t.parseLayoutSize()}function DM(e,t){const n=zFe(t),r=PF(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??HFe(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=hy(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function ktn(e){const{size:t,component:n}=e;for(const r of ep){const i=tl(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Nh(s)?"step":s,!0)}else{const s=Rtn(e,i);n.layoutSize.set(i,s,!1)}}}function Rtn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(uo(s)){const a=kM(r.view,t);return Yy(o)||Nh(a)?"step":a}else return YH(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return YH(r.view,t);{const s=kM(r.view,t);return Nh(s)?s.step:s}}}function uq(e,t,n){return lt(t,{suffix:`by_${lt(e)}`,...n})}class HA extends m5e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Vre(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!TR(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Qe(t),r={};for(const i of n){if(![em,tm].includes(i)){tt($F(i,"facet"));break}const s=t[i];if(s.field===void 0){tt(VH(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=are(t,n);return r.header?r.header=Su(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=p5(this),this.child.parseData()}parseLayoutSize(){Fre(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Ttn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of _c)for(const r of Ire){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=Ix("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=n5(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof HA))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof HA?{...this.channelHasField("column")?{encode:{update:{columns:{field:lt(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof HA){if(this.child.channelHasField("column")){const i=lt(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of ep){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(uo(o)&&Yy(a)){const u=i5(this.child,i),l=$re(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):tt(Mne(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of _c){const f=this.facet[c];if(f){u.push(lt(f));const{bin:d,sort:h}=f;if(ri(d)&&u.push(lt(f,{binSuffix:"end"})),ch(h)){const{field:p,op:m=UF}=h,g=uq(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Ve(h)){const p=Cx(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?ch(r.sort)?[uq(r,r.sort,{expr:"datum"})]:Ve(r.sort)?[Cx(r,t,{expr:"datum"})]:[lt(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(ch(i)?i.order:!Ve(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return nq(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of Cre)if(t[s]){const o=Ix("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return nq(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Etn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:_c.map(u=>this.facetSortFields(u)).flat(),order:_c.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(UJt(this,[]))}]}getMapping(){return this.facet}}function Ntn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(ch(s.sort)){const{field:o,op:a=UF}=s.sort;e=i=new s_(e,{joinaggregate:[{op:a,field:o,as:uq(s,s.sort,{forAs:!0})}],groupby:[lt(s)]})}return i}return null}function v5e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(NI(e)&&NI(a)){if(Sl(e.values,a.values))return o}else if(Sx(e)&&Sx(a)){if(e.url===a.url)return o}else if(aFe(e)&&e.name===o.dataName)return o}}return null}function Ptn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new vb({values:[]});return t.push(r),r}const n=v5e(e.data,t);if(n)return I0(e.data)||(n.data.format=r6e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new vb(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Dtn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(wJt(i))o=e=new Ax(e,i),s="derived";else if(_re(i)){const a=Sen(i);o=e=fa.makeWithAncestors(e,{},a,n)??e,e=new WS(e,t,i.filter)}else if(nFe(i))o=e=dh.makeFromTransform(e,i,t),s="number";else if(xJt(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new fa(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=fh.makeFromTransform(e,i);else if(SJt(i))o=e=Lf.makeFromTransform(e,i),s="number",Are(t)&&(e=new gy(e));else if(tFe(i))o=e=OI.make(e,t,i,r++),s="derived";else if(vJt(i))o=e=new YS(e,i),s="number";else if(bJt(i))o=e=new s_(e,i),s="number";else if(TJt(i))o=e=rm.makeFromTransform(e,i),s="derived";else if(AJt(i))o=e=new u5(e,i),s="derived";else if(CJt(i))o=e=new o5(e,i),s="derived";else if(_Jt(i))o=e=new a5(e,i),s="derived";else if(dJt(i))o=e=new d5(e,i),s="derived";else if(yJt(i))e=new h5(e,i);else if(EJt(i))o=e=C1.makeFromTransform(e,i),s="derived";else if(hJt(i))o=e=new s5(e,i),s="derived";else if(pJt(i))o=e=new c5(e,i),s="derived";else if(mJt(i))o=e=new f5(e,i),s="derived";else if(gJt(i))o=e=new l5(e,i),s="derived";else{tt(GYt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function p5(e){var h;let t=Ptn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(I0(i)||Sx(i)||NI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new jJt;I0(i)?(uFe(i)?t=new NR(t,i.sequence):wre(i)&&(t=new RR(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=fa.makeExplicit(t,e,o)??t,t=new gy(t);const a=e.parent&&KS(e.parent);(Hi(e)||kl(e))&&a&&(t=dh.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Dtn(t,e,o));const u=Aen(e),l=Ten(e);t=fa.makeWithAncestors(t,{},{...u,...l},o)??t,Hi(e)&&(t=lE.parseAll(t,e),t=DI.parseAll(t,e)),(Hi(e)||kl(e))&&(a||(t=dh.makeFromEncoding(t,e)??t),t=fh.makeFromEncoding(t,e)??t,t=Ax.parseAllForSortIndex(t,e));const c=t=t0e(vi.Raw,e,t);if(Hi(e)){const p=Lf.makeFromEncoding(t,e);p&&(t=p,Are(e)&&(t=new gy(t))),t=C1.makeFromEncoding(t,e)??t,t=rm.makeFromEncoding(t,e)??t}Hi(e)&&(t=PI.make(t,e)??t);const f=t=t0e(vi.Main,e,t);Hi(e)&&wZt(e,f);let d=null;if(kl(e)){const p=e.getName("facet");t=Ntn(t,e.facet)??t,d=new GS(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function t0e(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Hu(n,s,e,i);return r[s]=o,o}class Otn extends Lre{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&tt(HYt),this.children=this.getChildren(t).map((l,c)=>Vre(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=p5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Qe(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return KF(t)?t.vconcat:vre(t)?t.hconcat:t.concat}parseLayoutSize(){Itn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=kre(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function $tn(e){return e===!1||e===null}const Mtn={disable:1,gridScale:1,scale:1,...A4e,labelExpr:1,encode:1},b5e=Qe(Mtn);class jre extends ag{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new jre(tn(this.explicit),tn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!$tn(this.get(t))}hasOrientSignalRef(){return Nt(this.explicit.orient)}}function Ltn(e,t,n){const{encoding:r,config:i}=e,s=Os(r[t])??Os(r[Zh(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(pb(u))return{text:kf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(wx(s)==="quantitative"){if(Ex(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:kf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:kf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(wx(s)==="temporal"&&i.timeFormatType&&nt(s)&&!s.timeUnit)return{text:kf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Ftn(e){return ep.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[qtn(n,e)]),t),{})}const jtn={bottom:"top",top:"bottom",left:"right",right:"left"};function Btn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Qe(i.component.axes))n.axis[s]=Rre(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Utn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of ep){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Nt(a)){if(r[a]>0&&!u){const l=jtn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function Utn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=ztn(i,s)}}}else return t.map(n=>n.clone());return e}function ztn(e,t){for(const n of b5e){const r=hy(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return N6e(i,s);case"gridScale":return{explicit:i.explicit,value:as(i.value,s.value)}}return QF(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Vtn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Nt(n.labelAngle)?n.labelAngle:kI(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===LFe(r,i))return!0}return e===n[t]}const Htn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function qtn(e,t){var y,v;let n=t.axis(e);const r=new jre,i=Os(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||NZt(e),u=t.getScaleComponent(e).get("type"),l=SZt(e,u,a,t.config),c=n!==void 0?!n:eq("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=IZt(i,n,e,o.style,l),d=o4e(n.formatType,i,u),h=s4e(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of b5e){const w=b in jge?jge[b](p):dge(b)?n[b]:void 0,E=w!==void 0,T=Vtn(w,b,n,t,e);if(E&&T)r.set(b,w,T);else{const{configValue:S=void 0,configFrom:A=void 0}=dge(b)&&b!=="values"?eq(b,o.style,n.style,l):{},C=S!==void 0;E&&!C?r.set(b,w,T):(A!=="vgAxisConfig"||Htn.has(b)&&C||IR(S)||Nt(S))&&r.set(b,S,!1)}}const m=n.encoding??{},g=T4e.reduce((b,w)=>{if(!r.hasAxisPart(w))return b;const E=VFe(m[w]??{},t),T=w==="labels"?Ltn(t,e,E):E;return T!==void 0&&!Lr(T)&&(b[w]={update:T}),b},{});return Lr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Wtn({encoding:e,size:t}){for(const n of ep){const r=tl(n);Nh(t[r])&&r0(e[n])&&(delete t[r],tt(M6e(r)))}return t}const Gtn={vgMark:"arc",encodeEntry:e=>({...Wc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ca("x",e,{defaultPos:"mid"}),...ca("y",e,{defaultPos:"mid"}),...py(e,"radius"),...py(e,"theta")})},Ytn={vgMark:"area",encodeEntry:e=>({...Wc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...RM("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...RM("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Tre(e)})},Ktn={vgMark:"rect",encodeEntry:e=>({...Wc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...py(e,"x"),...py(e,"y")})},Xtn={vgMark:"shape",encodeEntry:e=>({...Wc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&nt(n)&&n.type===HS?{field:lt(n,{expr:"datum"})}:{}}]}},Qtn={vgMark:"image",encodeEntry:e=>({...Wc(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...py(e,"x"),...py(e,"y"),...xre(e,"url")})},Jtn={vgMark:"line",encodeEntry:e=>({...Wc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ca("x",e,{defaultPos:"mid"}),...ca("y",e,{defaultPos:"mid"}),...Js("size",e,{vgChannel:"strokeWidth"}),...Tre(e)})},Ztn={vgMark:"trail",encodeEntry:e=>({...Wc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ca("x",e,{defaultPos:"mid"}),...ca("y",e,{defaultPos:"mid"}),...Js("size",e),...Tre(e)})};function Bre(e,t){const{config:n}=e;return{...Wc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ca("x",e,{defaultPos:"mid"}),...ca("y",e,{defaultPos:"mid"}),...Js("size",e),...Js("angle",e),...enn(e,n,t)}}function enn(e,t,n){return n?{shape:{value:n}}:Js("shape",e)}const tnn={vgMark:"symbol",encodeEntry:e=>Bre(e)},nnn={vgMark:"symbol",encodeEntry:e=>Bre(e,"circle")},rnn={vgMark:"symbol",encodeEntry:e=>Bre(e,"square")},inn={vgMark:"rect",encodeEntry:e=>({...Wc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...py(e,"x"),...py(e,"y")})},snn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Wc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...RM("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...RM("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Js("size",e,{vgChannel:"strokeWidth"})}}},onn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Wc(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ca("x",e,{defaultPos:"mid"}),...ca("y",e,{defaultPos:"mid"}),...xre(e),...Js("size",e,{vgChannel:"fontSize"}),...Js("angle",e),...$ge("align",ann(e.markDef,n,t)),...$ge("baseline",unn(e.markDef,n,t)),...ca("radius",e,{defaultPos:null}),...ca("theta",e,{defaultPos:null})}}};function ann(e,t,n){if(br("align",e,n)===void 0)return"center"}function unn(e,t,n){if(br("baseline",e,n)===void 0)return"middle"}const lnn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...Wc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ca("x",e,{defaultPos:"mid",vgChannel:"xc"}),...ca("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Js("size",e,{defaultValue:cnn(e),vgChannel:i}),[s]:ui(br("thickness",n,t))}}};function cnn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=br("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&Yy(a)&&ar(a.step)?a.step*3/4:IM(t.view,i)*3/4}}const SP={arc:Gtn,area:Ytn,bar:Ktn,circle:nnn,geoshape:Xtn,image:Qtn,line:Jtn,point:tnn,rect:inn,rule:snn,square:rnn,text:onn,tick:lnn,trail:Ztn};function fnn(e){if(zn([jF,LF,AXt],e.mark)){const t=N4e(e.mark,e.encoding);if(t.length>0)return dnn(e,t)}else if(e.mark===FF){const t=zH.some(n=>br(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return hnn(e)}return Ure(e)}const n0e="faceted_path_";function dnn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:n0e+e.requestDataName(vi.Main),data:e.requestDataName(vi.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Ure(e,{fromPrefix:n0e})}]}const r0e="stack_group_";function hnn(e){var l;const[t]=Ure(e,{fromPrefix:r0e}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...mx(t.encode.update,["y","yc","y2","height",...zH]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...zu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...mx(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...zu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of zH){const f=Dm(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=ui(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=lt(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(lt(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Dm(f,e.markDef,e.config);return d!==void 0?{...c,[f]:ui(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(vi.Main),name:r0e+e.requestDataName(vi.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function pnn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Ve(o)&&Yf(o)&&BH(o.value)||!o&&BH(br("order",i,s)))){if((Ve(o)||nt(o))&&!n)return I6e(o,{expr:"datum"});if(n_(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(nt(l)){const c=l.sort;if(Ve(c))return{field:lt(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(ch(c))return{field:lt({aggregate:ure(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(h4e(c)){const f=e.fieldDef(c.encoding);return{field:lt(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:lt(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function Ure(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=as(r.clip,mnn(e),gnn(e)),a=A6e(r),u=i.key,l=pnn(e),c=ynn(e),f=br("aria",r,s),d=SP[n].postEncodingTransform?SP[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:SP[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(vi.Main)},encode:{update:SP[n].encodeEntry(e)},...d?{transform:d}:{}}]}function mnn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function gnn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function ynn(e){if(!e.component.selection)return null;const t=Qe(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Qe(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class _5e extends m5e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,pge(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=kh(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=tJt(o,s,{graticule:t.data&&wre(t.data)}));const u=this.encoding=sQt(t.encoding||{},a,o.filled,s);this.markDef=J4e(o,u,s),this.size=Wtn({encoding:u,size:pge(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=Q4e(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>gre(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===c4e,r=t&&rYt.some(i=>an(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return DF.reduce((r,i)=>{const s=Os(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Su(t);return Ve(n)&&(i.domain=n.map(gl)),Ve(r)&&(i.range=r.map(gl)),i}initAxes(t){return ep.reduce((n,r)=>{const i=t[r];if(an(i)||r===Ti&&an(t.x2)||r===fo&&an(t.y2)){const s=an(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Qe(t),r={};for(const i of n){const s=t[i];r[i]=IR(s)?T6e(s):gl(s)}return r}initLegends(t){return hYt.reduce((n,r)=>{const i=Os(t[r]);if(i&&mYt(r)){const s=i.legend;n[r]=s&&Su(s)}return n},{})}parseData(){this.component.data=p5(this)}parseLayoutSize(){ktn(this)}parseSelections(){this.component.selection=_Zt(this,this.selection)}parseMarkGroup(){this.component.mark=fnn(this)}parseAxesAndHeaders(){this.component.axes=Ftn(this)}assembleSelectionTopLevelSignals(t){return zJt(this,t)}assembleSignals(){return[...OFe(this),...BJt(this,[])]}assembleSelectionData(t){return VJt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return kre(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!KS(this.parent))&&(t=fFe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return T1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Rh(n)}typedFieldDef(t){const n=this.fieldDef(t);return Ja(n)?n:null}}class zre extends Lre{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(XF(a))return new zre(a,this,this.getName(`layer_${u}`),o,s);if(og(a))return new _5e(a,this,this.getName(`layer_${u}`),o,s);throw new Error($ne(a))})}parseData(){this.component.data=p5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Ctn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Qe(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Btn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),OFe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),kre(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of mt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return HJt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),QFe(this))}}function Vre(e,t,n,r,i){if(zF(e))return new HA(e,t,n,i);if(XF(e))return new zre(e,t,n,r,i);if(og(e))return new _5e(e,t,n,r,i);if(kQt(e))return new Otn(e,t,n,i);throw new Error($ne(e))}function vnn(e,t={}){t.logger&&OKt(t.logger),t.fieldTitle&&E4e(t.fieldTitle);try{const n=X4e(NS(t.config,e.config)),r=sFe(e,n),i=Vre(r,null,"",void 0,n);return i.parse(),zen(i.component.data,i),{spec:_nn(i,bnn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&$Kt(),t.fieldTitle&&XXt()}}function bnn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):gt(t)&&(t={type:t}),i&&s&&MJt(t.type)){if(i==="step"&&s==="step")tt(Jme()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";tt(Jme(PF(o)));const a=o==="width"?"height":"width";t.type=LJt(a)}}return{...Qe(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Age(n,!1),...Age(e,!0)}}function _nn(e,t,n={},r){const i=e.config?VQt(e.config):void 0,s=[].concat(e.assembleSelectionData([]),xtn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...W4e(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const wnn=QGt.version,Enn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:gx,accessPathWithDatum:Ane,compile:vnn,contains:zn,deepEqual:Sl,deleteNestedProperty:vM,duplicate:tn,entries:cy,every:xne,fieldIntersection:Tne,flatAccessWithDatum:s6e,getFirstDefined:as,hasIntersection:Sne,hash:Un,internalField:u6e,isBoolean:II,isEmpty:Lr,isEqual:ZGt,isInternalField:l6e,isNullOrFalse:BH,isNumeric:AF,keys:Qe,logicalExpr:zA,mergeDeep:r6e,never:n6e,normalize:sFe,normalizeAngle:kI,omit:zu,pick:mx,prefixGenerator:UH,removePathFromField:zS,replaceAll:cb,replacePathInField:Oc,resetIdCounter:tYt,setEqual:i6e,some:lb,stringify:Fr,titleCase:vR,unique:Kd,uniqueId:a6e,vals:Do,varName:Si,version:wnn},Symbol.toStringTag,{value:"Module"}));function w5e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var xnn="vega-themes",Snn="2.15.0",Tnn="Themes for stylized Vega and Vega-Lite visualizations.",Ann=["vega","vega-lite","themes","style"],Cnn="BSD-3-Clause",Inn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},knn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Rnn="build/vega-themes.js",Hre="build/vega-themes.module.js",Nnn="build/vega-themes.min.js",Pnn="build/vega-themes.min.js",Dnn="build/vega-themes.module.d.ts",Onn={type:"git",url:"https://github.com/vega/vega-themes.git"},$nn=["src","build"],Mnn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Lnn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Fnn={vega:"*","vega-lite":"*"},jnn={},Bnn={name:xnn,version:Snn,description:Tnn,keywords:Ann,license:Cnn,author:Inn,contributors:knn,main:Rnn,module:Hre,unpkg:Nnn,jsdelivr:Pnn,types:Dnn,repository:Onn,files:$nn,scripts:Mnn,devDependencies:Lnn,peerDependencies:Fnn,dependencies:jnn};const $_="#fff",i0e="#888",Unn={background:"#333",view:{stroke:i0e},title:{color:$_,subtitleColor:$_},style:{"guide-label":{fill:$_},"guide-title":{fill:$_}},axis:{domainColor:$_,gridColor:i0e,tickColor:$_}},lv="#4572a7",znn={background:"#fff",arc:{fill:lv},area:{fill:lv},line:{stroke:lv,strokeWidth:2},path:{stroke:lv},rect:{fill:lv},shape:{stroke:lv},symbol:{fill:lv,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},cv="#30a2da",pB="#cbcbcb",Vnn="#999",Hnn="#333",s0e="#f0f0f0",o0e="#333",qnn={arc:{fill:cv},area:{fill:cv},axis:{domainColor:pB,grid:!0,gridColor:pB,gridWidth:1,labelColor:Vnn,labelFontSize:10,titleColor:Hnn,tickColor:pB,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:s0e,group:{fill:s0e},legend:{labelColor:o0e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:o0e,titleFontSize:14,titlePadding:10},line:{stroke:cv,strokeWidth:2},path:{stroke:cv,strokeWidth:.5},rect:{fill:cv},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:cv},bar:{binSpacing:2,fill:cv,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},fv="#000",Wnn={group:{fill:"#e5e5e5"},arc:{fill:fv},area:{fill:fv},line:{stroke:fv},path:{stroke:fv},rect:{fill:fv},shape:{stroke:fv},symbol:{fill:fv,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Gnn=22,Ynn="normal",a0e="Benton Gothic, sans-serif",u0e=11.5,Knn="normal",dv="#82c6df",mB="Benton Gothic Bold, sans-serif",l0e="normal",c0e=13,KT={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Xnn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:mB,fontSize:Gnn,fontWeight:Ynn},arc:{fill:dv},area:{fill:dv},line:{stroke:dv,strokeWidth:2},path:{stroke:dv},rect:{fill:dv},shape:{stroke:dv},symbol:{fill:dv,size:30},axis:{labelFont:a0e,labelFontSize:u0e,labelFontWeight:Knn,titleFont:mB,titleFontSize:c0e,titleFontWeight:l0e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:a0e,labelFontSize:u0e,symbolType:"square",titleFont:mB,titleFontSize:c0e,titleFontWeight:l0e},range:{category:KT["category-6"],diverging:KT["fireandice-6"],heatmap:KT["fire-7"],ordinal:KT["fire-7"],ramp:KT["fire-7"]}},hv="#ab5787",TP="#979797",Qnn={background:"#f9f9f9",arc:{fill:hv},area:{fill:hv},line:{stroke:hv},path:{stroke:hv},rect:{fill:hv},shape:{stroke:hv},symbol:{fill:hv,size:30},axis:{domainColor:TP,domainWidth:.5,gridWidth:.2,labelColor:TP,tickColor:TP,tickWidth:.2,titleColor:TP},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},pv="#3e5c69",Jnn={background:"#fff",arc:{fill:pv},area:{fill:pv},line:{stroke:pv},path:{stroke:pv},rect:{fill:pv},shape:{stroke:pv},symbol:{fill:pv},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},rc="#1696d2",f0e="#000000",Znn="#FFFFFF",AP="Lato",gB="Lato",ern="Lato",trn="#DEDDDD",nrn=18,XT={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},rrn={background:Znn,title:{anchor:"start",fontSize:nrn,font:AP},axisX:{domain:!0,domainColor:f0e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:gB,labelAngle:0,tickColor:f0e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:AP},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:trn,gridWidth:1,labelFontSize:12,labelFont:gB,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:AP,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:gB,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:AP,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:XT["six-groups-cat-1"],diverging:XT["diverging-colors"],heatmap:XT["diverging-colors"],ordinal:XT["six-groups-seq"],ramp:XT["shades-blue"]},area:{fill:rc},rect:{fill:rc},line:{color:rc,stroke:rc,strokeWidth:5},trail:{color:rc,stroke:rc,strokeWidth:0,size:1},path:{stroke:rc,strokeWidth:.5},point:{filled:!0},text:{font:ern,color:rc,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:rc,stroke:null}},arc:{fill:rc},shape:{stroke:rc},symbol:{fill:rc,size:30}},mv="#3366CC",d0e="#ccc",CP="Arial, sans-serif",irn={arc:{fill:mv},area:{fill:mv},path:{stroke:mv},rect:{fill:mv},shape:{stroke:mv},symbol:{stroke:mv},circle:{fill:mv},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:CP,fontSize:12},"guide-title":{font:CP,fontSize:12},"group-title":{font:CP,fontSize:12}},title:{font:CP,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:d0e,tickColor:d0e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},qre=e=>e*(1/3+1),h0e=qre(9),p0e=qre(10),m0e=qre(12),QT="Segoe UI",g0e="wf_standard-font, helvetica, arial, sans-serif",y0e="#252423",JT="#605E5C",v0e="transparent",srn="#C8C6C4",rf="#118DFF",orn="#12239E",arn="#E66C37",urn="#6B007B",lrn="#E044A7",crn="#744EC2",frn="#D9B300",drn="#D64550",E5e=rf,x5e="#DEEFFF",b0e=[x5e,E5e],hrn=[x5e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",E5e],prn={view:{stroke:v0e},background:v0e,font:QT,header:{titleFont:g0e,titleFontSize:m0e,titleColor:y0e,labelFont:QT,labelFontSize:p0e,labelColor:JT},axis:{ticks:!1,grid:!1,domain:!1,labelColor:JT,labelFontSize:h0e,titleFont:g0e,titleColor:y0e,titleFontSize:m0e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:srn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:rf},line:{stroke:rf,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:QT,fontSize:h0e,fill:JT},arc:{fill:rf},area:{fill:rf,line:!0,opacity:.6},path:{stroke:rf},rect:{fill:rf},point:{fill:rf,filled:!0,size:75},shape:{stroke:rf},symbol:{fill:rf,strokeWidth:1.5,size:50},legend:{titleFont:QT,titleFontWeight:"bold",titleColor:JT,labelFont:QT,labelFontSize:p0e,labelColor:JT,symbolType:"circle",symbolSize:75},range:{category:[rf,orn,arn,urn,lrn,crn,frn,drn],diverging:b0e,heatmap:b0e,ordinal:hrn}},yB='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',mrn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',vB=400,IP={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},grn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],yrn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function m5({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=IP.gridBg[e],i=IP.textPrimary[e],s=IP.textSecondary[e],o=n==="dark"?grn:yrn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:yB,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:mrn,labelFontWeight:vB,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:IP.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:yB,fill:s,fontWeight:vB},"guide-title":{font:yB,fill:s,fontWeight:vB}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const vrn=m5({theme:"white",background:"#ffffff"}),brn=m5({theme:"g10",background:"#f4f4f4"}),_rn=m5({theme:"g90",background:"#262626"}),wrn=m5({theme:"g100",background:"#161616"}),Ern=Bnn.version,xrn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:brn,carbong100:wrn,carbong90:_rn,carbonwhite:vrn,dark:Unn,excel:znn,fivethirtyeight:qnn,ggplot2:Wnn,googlecharts:irn,latimes:Xnn,powerbi:prn,quartz:Qnn,urbaninstitute:rrn,version:Ern,vox:Jnn},Symbol.toStringTag,{value:"Module"}));function Srn(e,t,n,r){if(Ve(e))return`[${e.map(i=>t(gt(i)?i:_0e(i,n))).join(", ")}]`;if(yt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(yt(c)&&(c=_0e(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function Trn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function _0e(e,t){return JSON.stringify(e,Trn(t))}var Arn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const S5e="vg-tooltip-element",Crn={offsetX:10,offsetY:10,id:S5e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Irn,maxDepth:2,formatTooltip:Srn,baseURL:""};function Irn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function krn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Arn.toString().replace(S5e,e)}function Rrn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Nrn{constructor(t){this.options={...Crn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=krn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=Rrn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var bB={};function Prn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _B,w0e;function Drn(){return w0e||(w0e=1,_B=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),_B}var Orn=mr;mr.Node=bb;mr.create=mr;function mr(e){var t=this;if(t instanceof mr||(t=new mr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}mr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};mr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};mr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};mr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Mrn(this,arguments[e]);return this.length};mr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Lrn(this,arguments[e]);return this.length};mr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};mr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};mr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};mr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};mr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};mr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};mr.prototype.map=function(e,t){t=t||this;for(var n=new mr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};mr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new mr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};mr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};mr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};mr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};mr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};mr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new mr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};mr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new mr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};mr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=$rn(this,i,n[r]);return s};mr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function $rn(e,t,n){var r=t===e.head?new bb(n,null,t,e):new bb(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function Mrn(e,t){e.tail=new bb(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Lrn(e,t){e.head=new bb(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function bb(e,t,n,r){if(!(this instanceof bb))return new bb(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Drn()(mr)}catch{}const Frn=Orn,Hv=Symbol("max"),Cp=Symbol("length"),M_=Symbol("lengthCalculator"),qA=Symbol("allowStale"),f1=Symbol("maxAge"),Ep=Symbol("dispose"),E0e=Symbol("noDisposeOnSet"),qs=Symbol("lruList"),sf=Symbol("cache"),T5e=Symbol("updateAgeOnGet"),wB=()=>1;class jrn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Hv]=t.max||1/0;const n=t.length||wB;if(this[M_]=typeof n!="function"?wB:n,this[qA]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[f1]=t.maxAge||0,this[Ep]=t.dispose,this[E0e]=t.noDisposeOnSet||!1,this[T5e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Hv]=t||1/0,ZT(this)}get max(){return this[Hv]}set allowStale(t){this[qA]=!!t}get allowStale(){return this[qA]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[f1]=t,ZT(this)}get maxAge(){return this[f1]}set lengthCalculator(t){typeof t!="function"&&(t=wB),t!==this[M_]&&(this[M_]=t,this[Cp]=0,this[qs].forEach(n=>{n.length=this[M_](n.value,n.key),this[Cp]+=n.length})),ZT(this)}get lengthCalculator(){return this[M_]}get length(){return this[Cp]}get itemCount(){return this[qs].length}rforEach(t,n){n=n||this;for(let r=this[qs].tail;r!==null;){const i=r.prev;x0e(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[qs].head;r!==null;){const i=r.next;x0e(this,t,r,n),r=i}}keys(){return this[qs].toArray().map(t=>t.key)}values(){return this[qs].toArray().map(t=>t.value)}reset(){this[Ep]&&this[qs]&&this[qs].length&&this[qs].forEach(t=>this[Ep](t.key,t.value)),this[sf]=new Map,this[qs]=new Frn,this[Cp]=0}dump(){return this[qs].map(t=>OM(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[qs]}set(t,n,r){if(r=r||this[f1],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[M_](n,t);if(this[sf].has(t)){if(s>this[Hv])return cE(this,this[sf].get(t)),!1;const u=this[sf].get(t).value;return this[Ep]&&(this[E0e]||this[Ep](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Cp]+=s-u.length,u.length=s,this.get(t),ZT(this),!0}const o=new Brn(t,n,s,i,r);return o.length>this[Hv]?(this[Ep]&&this[Ep](t,n),!1):(this[Cp]+=o.length,this[qs].unshift(o),this[sf].set(t,this[qs].head),ZT(this),!0)}has(t){if(!this[sf].has(t))return!1;const n=this[sf].get(t).value;return!OM(this,n)}get(t){return EB(this,t,!0)}peek(t){return EB(this,t,!1)}pop(){const t=this[qs].tail;return t?(cE(this,t),t.value):null}del(t){cE(this,this[sf].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[sf].forEach((t,n)=>EB(this,n,!1))}}const EB=(e,t,n)=>{const r=e[sf].get(t);if(r){const i=r.value;if(OM(e,i)){if(cE(e,r),!e[qA])return}else n&&(e[T5e]&&(r.value.now=Date.now()),e[qs].unshiftNode(r));return i.value}},OM=(e,t)=>{if(!t||!t.maxAge&&!e[f1])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[f1]&&n>e[f1]},ZT=e=>{if(e[Cp]>e[Hv])for(let t=e[qs].tail;e[Cp]>e[Hv]&&t!==null;){const n=t.prev;cE(e,t),t=n}},cE=(e,t)=>{if(t){const n=t.value;e[Ep]&&e[Ep](n.key,n.value),e[Cp]-=n.length,e[sf].delete(n.key),e[qs].removeNode(t)}};class Brn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const x0e=(e,t,n,r)=>{let i=n.value;OM(e,i)&&(cE(e,n),e[qA]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var Urn=jrn;const zrn=Object.freeze({loose:!0}),Vrn=Object.freeze({}),Hrn=e=>e?typeof e!="object"?zrn:e:Vrn;var Wre=Hrn,lq={exports:{}};const qrn="2.0.0",A5e=256,Wrn=Number.MAX_SAFE_INTEGER||9007199254740991,Grn=16,Yrn=A5e-6,Krn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Gre={MAX_LENGTH:A5e,MAX_SAFE_COMPONENT_LENGTH:Grn,MAX_SAFE_BUILD_LENGTH:Yrn,MAX_SAFE_INTEGER:Wrn,RELEASE_TYPES:Krn,SEMVER_SPEC_VERSION:qrn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Xrn=typeof process=="object"&&bB&&bB.NODE_DEBUG&&/\bsemver\b/i.test(bB.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var g5=Xrn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Gre,s=g5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(lq,lq.exports);var Yre=lq.exports;const S0e=/^[0-9]+$/,C5e=(e,t)=>{const n=S0e.test(e),r=S0e.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Qrn=(e,t)=>C5e(t,e);var Jrn={compareIdentifiers:C5e,rcompareIdentifiers:Qrn};const kP=g5,{MAX_LENGTH:T0e,MAX_SAFE_INTEGER:RP}=Gre,{safeRe:A0e,t:C0e}=Yre,Zrn=Wre,{compareIdentifiers:L_}=Jrn;let ein=class bd{constructor(t,n){if(n=Zrn(n),t instanceof bd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>T0e)throw new TypeError(`version is longer than ${T0e} characters`);kP("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?A0e[C0e.LOOSE]:A0e[C0e.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>RP||this.major<0)throw new TypeError("Invalid major version");if(this.minor>RP||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>RP||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<RP)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(kP("SemVer.compare",this.version,this.options,t),!(t instanceof bd)){if(typeof t=="string"&&t===this.version)return 0;t=new bd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof bd||(t=new bd(t,this.options)),L_(this.major,t.major)||L_(this.minor,t.minor)||L_(this.patch,t.patch)}comparePre(t){if(t instanceof bd||(t=new bd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(kP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return L_(r,i)}while(++n)}compareBuild(t){t instanceof bd||(t=new bd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(kP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return L_(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),L_(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Kre=ein;const I0e=Kre,tin=(e,t,n)=>new I0e(e,n).compare(new I0e(t,n));var XS=tin;const nin=XS,rin=(e,t,n)=>nin(e,t,n)===0;var iin=rin;const sin=XS,oin=(e,t,n)=>sin(e,t,n)!==0;var ain=oin;const uin=XS,lin=(e,t,n)=>uin(e,t,n)>0;var cin=lin;const fin=XS,din=(e,t,n)=>fin(e,t,n)>=0;var hin=din;const pin=XS,min=(e,t,n)=>pin(e,t,n)<0;var gin=min;const yin=XS,vin=(e,t,n)=>yin(e,t,n)<=0;var bin=vin;const _in=iin,win=ain,Ein=cin,xin=hin,Sin=gin,Tin=bin,Ain=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return _in(e,n,r);case"!=":return win(e,n,r);case">":return Ein(e,n,r);case">=":return xin(e,n,r);case"<":return Sin(e,n,r);case"<=":return Tin(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Cin=Ain,xB,k0e;function Iin(){if(k0e)return xB;k0e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}xB=t;const n=Wre,{safeRe:r,t:i}=Yre,s=Cin,o=g5,a=Kre,u=I5e();return xB}var SB,R0e;function I5e(){if(R0e)return SB;R0e=1;class e{constructor($,F){if(F=r(F),$ instanceof e)return $.loose===!!F.loose&&$.includePrerelease===!!F.includePrerelease?$:new e($.raw,F);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(M=>this.parseRange(M.trim())).filter(M=>M.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const M=this.set[0];if(this.set=this.set.filter(B=>!p(B[0])),this.set.length===0)this.set=[M];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&m(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const M=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+$,B=n.get(M);if(B)return B;const U=this.options.loose,H=U?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];$=$.replace(H,N(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(a[u.COMPARATORTRIM],l),s("comparator trim",$),$=$.replace(a[u.TILDETRIM],c),s("tilde trim",$),$=$.replace(a[u.CARETTRIM],f),s("caret trim",$);let D=$.split(" ").map(q=>y(q,this.options)).join(" ").split(/\s+/).map(q=>k(q,this.options));U&&(D=D.filter(q=>(s("loose invalid filter",q,this.options),!!q.match(a[u.COMPARATORLOOSE])))),s("range list",D);const z=new Map,W=D.map(q=>new i(q,this.options));for(const q of W){if(p(q))return[q];z.set(q.value,q)}z.size>1&&z.has("")&&z.delete("");const j=[...z.values()];return n.set(M,j),j}intersects($,F){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(M=>g(M,F)&&$.set.some(B=>g(B,F)&&M.every(U=>B.every(H=>U.intersects(H,F)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(O(this.set[F],$,this.options))return!0;return!1}}SB=e;const t=Urn,n=new t({max:1e3}),r=Wre,i=Iin(),s=g5,o=Kre,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Yre,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Gre,p=P=>P.value==="<0.0.0-0",m=P=>P.value==="",g=(P,$)=>{let F=!0;const M=P.slice();let B=M.pop();for(;F&&M.length;)F=M.every(U=>B.intersects(U,$)),B=M.pop();return F},y=(P,$)=>(s("comp",P,$),P=E(P,$),s("caret",P),P=b(P,$),s("tildes",P),P=S(P,$),s("xrange",P),P=C(P,$),s("stars",P),P),v=P=>!P||P.toLowerCase()==="x"||P==="*",b=(P,$)=>P.trim().split(/\s+/).map(F=>w(F,$)).join(" "),w=(P,$)=>{const F=$.loose?a[u.TILDELOOSE]:a[u.TILDE];return P.replace(F,(M,B,U,H,D)=>{s("tilde",P,M,B,U,H,D);let z;return v(B)?z="":v(U)?z=`>=${B}.0.0 <${+B+1}.0.0-0`:v(H)?z=`>=${B}.${U}.0 <${B}.${+U+1}.0-0`:D?(s("replaceTilde pr",D),z=`>=${B}.${U}.${H}-${D} <${B}.${+U+1}.0-0`):z=`>=${B}.${U}.${H} <${B}.${+U+1}.0-0`,s("tilde return",z),z})},E=(P,$)=>P.trim().split(/\s+/).map(F=>T(F,$)).join(" "),T=(P,$)=>{s("caret",P,$);const F=$.loose?a[u.CARETLOOSE]:a[u.CARET],M=$.includePrerelease?"-0":"";return P.replace(F,(B,U,H,D,z)=>{s("caret",P,B,U,H,D,z);let W;return v(U)?W="":v(H)?W=`>=${U}.0.0${M} <${+U+1}.0.0-0`:v(D)?U==="0"?W=`>=${U}.${H}.0${M} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.0${M} <${+U+1}.0.0-0`:z?(s("replaceCaret pr",z),U==="0"?H==="0"?W=`>=${U}.${H}.${D}-${z} <${U}.${H}.${+D+1}-0`:W=`>=${U}.${H}.${D}-${z} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${D}-${z} <${+U+1}.0.0-0`):(s("no pr"),U==="0"?H==="0"?W=`>=${U}.${H}.${D}${M} <${U}.${H}.${+D+1}-0`:W=`>=${U}.${H}.${D}${M} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${D} <${+U+1}.0.0-0`),s("caret return",W),W})},S=(P,$)=>(s("replaceXRanges",P,$),P.split(/\s+/).map(F=>A(F,$)).join(" ")),A=(P,$)=>{P=P.trim();const F=$.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return P.replace(F,(M,B,U,H,D,z)=>{s("xRange",P,M,B,U,H,D,z);const W=v(U),j=W||v(H),q=j||v(D),G=q;return B==="="&&G&&(B=""),z=$.includePrerelease?"-0":"",W?B===">"||B==="<"?M="<0.0.0-0":M="*":B&&G?(j&&(H=0),D=0,B===">"?(B=">=",j?(U=+U+1,H=0,D=0):(H=+H+1,D=0)):B==="<="&&(B="<",j?U=+U+1:H=+H+1),B==="<"&&(z="-0"),M=`${B+U}.${H}.${D}${z}`):j?M=`>=${U}.0.0${z} <${+U+1}.0.0-0`:q&&(M=`>=${U}.${H}.0${z} <${U}.${+H+1}.0-0`),s("xRange return",M),M})},C=(P,$)=>(s("replaceStars",P,$),P.trim().replace(a[u.STAR],"")),k=(P,$)=>(s("replaceGTE0",P,$),P.trim().replace(a[$.includePrerelease?u.GTE0PRE:u.GTE0],"")),N=P=>($,F,M,B,U,H,D,z,W,j,q,G,re)=>(v(M)?F="":v(B)?F=`>=${M}.0.0${P?"-0":""}`:v(U)?F=`>=${M}.${B}.0${P?"-0":""}`:H?F=`>=${F}`:F=`>=${F}${P?"-0":""}`,v(W)?z="":v(j)?z=`<${+W+1}.0.0-0`:v(q)?z=`<${W}.${+j+1}.0-0`:G?z=`<=${W}.${j}.${q}-${G}`:P?z=`<${W}.${j}.${+q+1}-0`:z=`<=${z}`,`${F} ${z}`.trim()),O=(P,$,F)=>{for(let M=0;M<P.length;M++)if(!P[M].test($))return!1;if($.prerelease.length&&!F.includePrerelease){for(let M=0;M<P.length;M++)if(s(P[M].semver),P[M].semver!==i.ANY&&P[M].semver.prerelease.length>0){const B=P[M].semver;if(B.major===$.major&&B.minor===$.minor&&B.patch===$.patch)return!0}return!1}return!0};return SB}const kin=I5e(),Rin=(e,t,n)=>{try{t=new kin(t,n)}catch{return!1}return t.test(e)};var Nin=Rin,k5e=Prn(Nin);function Pin(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var Din=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function R5e(e,...t){for(const n of t)Oin(e,n);return e}function Oin(e,t){for(const n of Object.keys(t))PS(e,n,t[n],!0)}const af=yGt;let $I=Enn;const NP=typeof window<"u"?window:void 0;var j0e;$I===void 0&&((j0e=NP==null?void 0:NP.vl)!=null&&j0e.compile)&&($I=NP.vl);const $in={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Min={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},q2={vega:"Vega","vega-lite":"Vega-Lite"},$M={vega:af.version,"vega-lite":$I?$I.version:"not available"},Lin={vega:e=>e,"vega-lite":(e,t)=>$I.compile(e,{config:t}).spec},Fin=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,jin="chart-wrapper";function Bin(e){return typeof e=="function"}function N0e(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${q2[r]} JSON Source`}function Uin(e,t){if(e.$schema){const n=w5e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${q2[n.library]}, but mode argument sets ${q2[t]??t}.`);const r=n.library;return k5e($M[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${q2[r]} ${n.version}, but the current version of ${q2[r]} is v${$M[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function N5e(e){return!!(e&&"load"in e)}function P0e(e){return N5e(e)?e:af.loader(e)}function zin(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return gt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Vin(e,t,n={}){let r,i;gt(t)?(i=P0e(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=zin(r),o=s.loader;(!i||o)&&(i=P0e(n.loader??o));const a=await D0e(s,i),u=await D0e(n,i),l={...R5e(u,a),config:NS(u.config??{},a.config??{})};return await qin(e,r,l,i)}async function D0e(e,t){const n=gt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=gt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Hin(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function qin(e,t,n={},r){const i=n.theme?NS(xrn[n.theme],n.config??{}):n.config,s=jy(n.actions)?n.actions:R5e({},$in,n.actions??{}),o={...Min,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??af.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:T,rootContainer:S}=Hin(c);if(!T.getElementById(E)){const A=document.createElement("style");A.id=E,A.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Din.toString():n.defaultStyle,S.appendChild(A)}}const f=Uin(t,n.mode);let d=Lin[f](t,i);if(f==="vega-lite"&&d.$schema){const E=w5e(d.$schema);k5e($M.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${$M.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(jin),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):N4(d,p,!0,!1).newDocument),n.formatLocale&&af.formatLocale(n.formatLocale),n.timeFormatLocale&&af.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const T=n.expressionFunctions[E];"fn"in T?af.expressionFunction(E,T.fn,T.visitor):T instanceof Function&&af.expressionFunction(E,T)}const{ast:m}=n,g=af.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||af.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:af.expressionInterpreter??n.expr??CGt}:{}});if(y.addSignalListener("autosize",(E,T)=>{const{type:S}=T;S=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):S=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):S=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:T}=n,S=E&&!N5e(E)?E==null?void 0:E.baseURL:void 0,A=Bin(T)?T:new Nrn({baseURL:S,...T===!0?{}:T}).call;y.tooltip(A)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:T}=typeof v=="boolean"?{}:v;y.hover(E,T)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=o.CLICK_TO_VIEW_ACTIONS,c.append(S),E=S;const A=document.createElement("summary");A.innerHTML=Fin,S.append(A),b=C=>{S.contains(C.target)||S.removeAttribute("open")},document.addEventListener("click",b)}const T=document.createElement("div");if(E.append(T),T.classList.add("vega-actions"),s===!0||s.export!==!1){for(const S of["svg","png"])if(s===!0||s.export===!0||s.export[S]){const A=o[`${S.toUpperCase()}_ACTION`],C=document.createElement("a"),k=yt(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;C.text=A,C.href="#",C.target="_blank",C.download=`${l}.${S}`,C.addEventListener("mousedown",async function(N){N.preventDefault();const O=await y.toImageURL(S,k);this.href=O}),T.append(C)}}if(s===!0||s.source!==!1){const S=document.createElement("a");S.text=o.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(A){N0e(T9(t),n.sourceHeader??"",n.sourceFooter??"",f),A.preventDefault()}),T.append(S)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const S=document.createElement("a");S.text=o.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(A){N0e(T9(d),n.sourceHeader??"",n.sourceFooter??"","vega"),A.preventDefault()}),T.append(S)}if(s===!0||s.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",A=document.createElement("a");A.text=o.EDITOR_ACTION,A.href="#",A.addEventListener("click",function(C){Pin(window,S,{config:i,mode:f,renderer:a,spec:T9(t)}),C.preventDefault()}),T.append(A)}}function w(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function Win(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Gin(e,t,n){n&&(Win(n)?n(e.data(t)):e.change(t,af.changeset().remove(()=>!0).insert(n)))}function Yin(e,t){Object.keys(t).forEach(n=>{Gin(e,n,t[n])})}function P5e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const D5e=()=>{};function TB(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function Kin(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=P5e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!ZP(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function O0e(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function AB(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function W2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class O5e extends vr.PureComponent{constructor(){super(...arguments),W2(this,"containerRef",vr.createRef()),W2(this,"resultPromise",void 0),W2(this,"handleError",t=>{const{onError:n=D5e}=this.props;n(t,this.containerRef.current),console.warn(t)}),W2(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=P5e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Kin(AB(this.props),AB(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!$V(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&O0e(a,s),i&&TB(a,i)),a.run()})}else $V(i,s)||this.modifyView(o=>{s&&O0e(o,s),i&&TB(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=AB(this.props);this.resultPromise=Vin(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;TB(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return vr.createElement("div",{ref:this.containerRef,className:t,style:n})}}W2(O5e,"propTypes",{className:Ioe.string,onError:Ioe.func});function cq(){return cq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cq.apply(this,arguments)}function fq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Xin={};class $5e extends vr.PureComponent{constructor(){super(...arguments),fq(this,"vegaEmbed",vr.createRef()),fq(this,"handleNewView",t=>{this.update();const{onNewView:n=D5e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){$V(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Yin(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return vr.createElement(O5e,cq({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}fq($5e,"defaultProps",{data:Xin});function dq(){return dq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dq.apply(this,arguments)}function hq(e){return vr.createElement($5e,dq({},e,{mode:"vega-lite"}))}function Qin({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=nL(!0),[o,a]=p1(),u=I.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=I.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=I.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.map(([g,y])=>(y.endTime-y.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return _.jsxs(Ox,{p:"lg",withBorder:!0,ref:o,children:[_.jsxs(Pt,{direction:"row",justify:"space-between",onClick:s,children:[_.jsxs(Pt,{align:"center",children:[e.type==="metadata"&&_.jsx(EXe,{size:20}),e.type==="numerical"&&_.jsx(NXe,{size:20}),(e.type==="shortText"||e.type==="longText")&&_.jsx(yXe,{size:20}),e.type==="likert"&&_.jsx(TXe,{size:20}),e.type==="dropdown"&&_.jsx(FXe,{size:20}),e.type==="slider"&&_.jsx(dXe,{size:20}),e.type==="radio"&&_.jsx(OXe,{size:20}),e.type==="checkbox"&&_.jsx(jXe,{size:20}),e.type==="iframe"&&_.jsx(IXe,{size:20}),_.jsx(Ei,{order:5,ml:4,children:e.id})]}),_.jsx(wXe,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),_.jsxs(iL,{in:i,mah:400,children:[_.jsx(we,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:_.jsx(xE,{})}),_.jsxs(qG,{cols:2,h:360,children:[_.jsx(um,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="iframe"?_.jsx(hq,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):_.jsxs(Pt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&_.jsx(rA,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&_.jsxs(_.Fragment,{children:[_.jsx(it,{fw:700,children:"Response Values: "}),u.map((f,d)=>_.jsx(Pt,{align:"center",gap:"xs",children:_.jsx(it,{children:f[e.id]})},d))]})]})}),_.jsx(um,{mih:200,children:e.type==="metadata"?_.jsx(hq,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):_.jsxs(_.Fragment,{children:[_.jsx(it,{fw:700,children:"Response Specification: "}),_.jsx(rA,{block:!0,children:JSON.stringify(e,null,2)}),_.jsx("br",{}),l&&_.jsxs(_.Fragment,{children:[_.jsx(it,{fw:700,children:"Correct Answer: "}),_.jsx(rA,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function Jin({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&SRe(t.components[n],t),i=I.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?_.jsx(Pt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>_.jsx(Qin,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):_.jsx(Pt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:_.jsx(it,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function Zin({studyConfig:e,inprogress:t,completed:n,rejected:r}){const[i,s]=I.useState([...n]),o=I.useCallback(l=>{const c=[];l.includes("completed")&&c.push(...n),l.includes("inprogress")&&c.push(...t),l.includes("rejected")&&c.push(...r),s(c)},[n,t,r]),a=I.useMemo(()=>{let l=m0(e.sequence);return l=MY(l,"root"),l.components.push("end"),l},[e.sequence]),{trialId:u}=dm();return _.jsxs(Ox,{shadow:"sm",p:"md",withBorder:!0,children:[_.jsx(Pt,{direction:"row",justify:"space-between",children:_.jsx(bl.Group,{defaultValue:["completed"],onChange:o,mb:"xs",mt:8,ml:"xs",children:_.jsxs(Es,{children:[_.jsx(bl,{value:"completed",label:"Completed"}),_.jsx(bl,{value:"inprogress",label:"In Progress"}),_.jsx(bl,{value:"rejected",label:"Rejected"})]})})}),_.jsx(xE,{my:"xs"}),i.length===0?_.jsx(Pt,{justify:"center",align:"center",pt:"lg",pb:"md",children:_.jsx(it,{children:"No data available."})}):_.jsxs(Pt,{direction:"row",children:[_.jsx(we,{w:340,children:_.jsx(S$,{configSequence:a,participantSequence:a,fullSequence:a,participantView:!1,studyConfig:e,analysisNavigation:!0})}),_.jsx(xE,{orientation:"vertical",mx:"md"}),_.jsx(Jin,{participantData:i,studyConfig:e,trialId:u})]})]})}function esn({globalConfig:e}){const{studyId:t}=dm(),[n,r]=I.useState([]),[i,s]=I.useState(void 0),[o,a]=I.useState(!1),{storageEngine:u}=Ss(),l=Hm(),{tab:c}=dm(),{user:f}=Hb(),d=I.useCallback(async()=>{if(a(!0),t){const g=await s4(t,e);if(!g||!u)return;await u.initializeStudyDb(t,g);const y=await u.getAllParticipantsData();r(y),s(g),a(!1)}},[e,u,t]);I.useEffect(()=>{d()},[e,u,t,d]);const[h,p,m]=I.useMemo(()=>{const g=n.filter(b=>!b.rejected&&b.completed),y=n.filter(b=>!b.rejected&&!b.completed),v=n.filter(b=>b.rejected);return[g,y,v]},[n]);return _.jsxs(_.Fragment,{children:[_.jsx($A,{studyIds:e.configsList}),_.jsx(ci.Main,{children:_.jsxs(Cc,{fluid:!0,style:{height:"100%",position:"relative"},children:[_.jsx(Pl,{visible:o}),_.jsxs(Pt,{direction:"row",align:"center",children:[_.jsx(Ei,{order:5,children:t}),_.jsx(bDe,{completed:h.length,inProgress:p.length,rejected:m.length})]}),_.jsx(Al,{h:"xs"}),_.jsxs(es,{variant:"outline",value:c,onChange:g=>l(`/analysis/stats/${t}/${g}`),style:{height:"100%"},children:[_.jsxs(es.List,{children:[_.jsx(es.Tab,{value:"table",leftSection:_.jsx(BXe,{size:16}),children:"Table View"}),_.jsx(es.Tab,{value:"stats",leftSection:_.jsx(bXe,{size:16}),children:"Trial Stats"}),_.jsx(wi,{label:"Coming soon",position:"bottom",children:_.jsx(es.Tab,{value:"replay",leftSection:_.jsx(DXe,{size:16}),disabled:!0,children:"Participant Replay"})}),_.jsx(es.Tab,{value:"manage",leftSection:_.jsx(iwe,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),_.jsx(es.Panel,{value:"table",pt:"xs",children:i&&_.jsx(lLt,{completed:h,inProgress:p,rejected:m,studyConfig:i,refresh:d})}),_.jsx(es.Panel,{value:"stats",pt:"xs",children:i&&_.jsx(Zin,{studyConfig:i,completed:h,inprogress:p,rejected:m})}),_.jsx(es.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),_.jsx(es.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?_.jsx(yLt,{studyId:t,refresh:d}):_.jsx(Cc,{mt:20,children:_.jsx(jx,{title:"Unauthorized Access",variant:"light",color:"red",icon:_.jsx(nwe,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function $0e({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=Hb(),{storageEngine:o}=Ss(),[a,u]=I.useState(!1),l=dm();return I.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?_.jsx(Pl,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?_.jsx(oY,{to:"/login"}):_.jsx(_.Fragment,{children:e})}async function M5e(e,t){if(e instanceof pf){t(!0);const n=new Op,r=P$();try{await ZNt(r,n,mNe)}catch(i){U$({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function tsn(){const{user:e}=Hb(),[t,n]=I.useState(!1),{storageEngine:r}=Ss();return I.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&U$({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?_.jsx(oY,{to:"/"}):_.jsx(Cc,{children:_.jsx(Cb,{padding:"lg",children:_.jsxs(Pt,{align:"center",direction:"column",justify:"center",children:[_.jsx(Ty,{maw:200,mt:50,mb:100,src:`${Fu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsxs(_.Fragment,{children:[_.jsx(it,{mb:20,children:"To access admin settings, please sign in using your Google account."}),_.jsx(ln,{onClick:()=>M5e(r,n),leftSection:_.jsx(UXe,{}),variant:"filled",children:"Sign In With Google"})]}),_.jsx(Pl,{visible:t})]})})})}var L5e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Zs,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var F=["th","st","nd","rd"],M=$%100;return"["+$+(F[(M-20)%10]||F[M]||F[0])+"]"}},b=function($,F,M){var B=String($);return!B||B.length>=F?$:""+Array(F+1-B.length).join(M)+$},w={s:b,z:function($){var F=-$.utcOffset(),M=Math.abs(F),B=Math.floor(M/60),U=M%60;return(F<=0?"+":"-")+b(B,2,"0")+":"+b(U,2,"0")},m:function $(F,M){if(F.date()<M.date())return-$(M,F);var B=12*(M.year()-F.year())+(M.month()-F.month()),U=F.clone().add(B,f),H=M-U<0,D=F.clone().add(B+(H?-1:1),f);return+(-(B+(M-U)/(H?U-D:D-U))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},E="en",T={};T[E]=v;var S="$isDayjsObject",A=function($){return $ instanceof O||!(!$||!$[S])},C=function $(F,M,B){var U;if(!F)return E;if(typeof F=="string"){var H=F.toLowerCase();T[H]&&(U=H),M&&(T[H]=M,U=H);var D=F.split("-");if(!U&&D.length>1)return $(D[0])}else{var z=F.name;T[z]=F,U=z}return!B&&U&&(E=U),U||!B&&E},k=function($,F){if(A($))return $.clone();var M=typeof F=="object"?F:{};return M.date=$,M.args=arguments,new O(M)},N=w;N.l=C,N.i=A,N.w=function($,F){return k($,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var O=function(){function $(M){this.$L=C(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[S]=!0}var F=$.prototype;return F.parse=function(M){this.$d=function(B){var U=B.date,H=B.utc;if(U===null)return new Date(NaN);if(N.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var D=U.match(g);if(D){var z=D[2]-1||0,W=(D[7]||"0").substring(0,3);return H?new Date(Date.UTC(D[1],z,D[3]||1,D[4]||0,D[5]||0,D[6]||0,W)):new Date(D[1],z,D[3]||1,D[4]||0,D[5]||0,D[6]||0,W)}}return new Date(U)}(M),this.init()},F.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},F.$utils=function(){return N},F.isValid=function(){return this.$d.toString()!==m},F.isSame=function(M,B){var U=k(M);return this.startOf(B)<=U&&U<=this.endOf(B)},F.isAfter=function(M,B){return k(M)<this.startOf(B)},F.isBefore=function(M,B){return this.endOf(B)<k(M)},F.$g=function(M,B,U){return N.u(M)?this[B]:this.set(U,M)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(M,B){var U=this,H=!!N.u(B)||B,D=N.p(M),z=function(ge,Ee){var Z=N.w(U.$u?Date.UTC(U.$y,Ee,ge):new Date(U.$y,Ee,ge),U);return H?Z:Z.endOf(l)},W=function(ge,Ee){return N.w(U.toDate()[ge].apply(U.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(Ee)),U)},j=this.$W,q=this.$M,G=this.$D,re="set"+(this.$u?"UTC":"");switch(D){case h:return H?z(1,0):z(31,11);case f:return H?z(1,q):z(0,q+1);case c:var de=this.$locale().weekStart||0,pe=(j<de?j+7:j)-de;return z(H?G-pe:G+(6-pe),q);case l:case p:return W(re+"Hours",0);case u:return W(re+"Minutes",1);case a:return W(re+"Seconds",2);case o:return W(re+"Milliseconds",3);default:return this.clone()}},F.endOf=function(M){return this.startOf(M,!1)},F.$set=function(M,B){var U,H=N.p(M),D="set"+(this.$u?"UTC":""),z=(U={},U[l]=D+"Date",U[p]=D+"Date",U[f]=D+"Month",U[h]=D+"FullYear",U[u]=D+"Hours",U[a]=D+"Minutes",U[o]=D+"Seconds",U[s]=D+"Milliseconds",U)[H],W=H===l?this.$D+(B-this.$W):B;if(H===f||H===h){var j=this.clone().set(p,1);j.$d[z](W),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else z&&this.$d[z](W);return this.init(),this},F.set=function(M,B){return this.clone().$set(M,B)},F.get=function(M){return this[N.p(M)]()},F.add=function(M,B){var U,H=this;M=Number(M);var D=N.p(B),z=function(q){var G=k(H);return N.w(G.date(G.date()+Math.round(q*M)),H)};if(D===f)return this.set(f,this.$M+M);if(D===h)return this.set(h,this.$y+M);if(D===l)return z(1);if(D===c)return z(7);var W=(U={},U[a]=r,U[u]=i,U[o]=n,U)[D]||1,j=this.$d.getTime()+M*W;return N.w(j,this)},F.subtract=function(M,B){return this.add(-1*M,B)},F.format=function(M){var B=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var H=M||"YYYY-MM-DDTHH:mm:ssZ",D=N.z(this),z=this.$H,W=this.$m,j=this.$M,q=U.weekdays,G=U.months,re=U.meridiem,de=function(Ee,Z,Q,fe){return Ee&&(Ee[Z]||Ee(B,H))||Q[Z].slice(0,fe)},pe=function(Ee){return N.s(z%12||12,Ee,"0")},ge=re||function(Ee,Z,Q){var fe=Ee<12?"AM":"PM";return Q?fe.toLowerCase():fe};return H.replace(y,function(Ee,Z){return Z||function(Q){switch(Q){case"YY":return String(B.$y).slice(-2);case"YYYY":return N.s(B.$y,4,"0");case"M":return j+1;case"MM":return N.s(j+1,2,"0");case"MMM":return de(U.monthsShort,j,G,3);case"MMMM":return de(G,j);case"D":return B.$D;case"DD":return N.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return de(U.weekdaysMin,B.$W,q,2);case"ddd":return de(U.weekdaysShort,B.$W,q,3);case"dddd":return q[B.$W];case"H":return String(z);case"HH":return N.s(z,2,"0");case"h":return pe(1);case"hh":return pe(2);case"a":return ge(z,W,!0);case"A":return ge(z,W,!1);case"m":return String(W);case"mm":return N.s(W,2,"0");case"s":return String(B.$s);case"ss":return N.s(B.$s,2,"0");case"SSS":return N.s(B.$ms,3,"0");case"Z":return D}return null}(Ee)||D.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(M,B,U){var H,D=this,z=N.p(B),W=k(M),j=(W.utcOffset()-this.utcOffset())*r,q=this-W,G=function(){return N.m(D,W)};switch(z){case h:H=G()/12;break;case f:H=G();break;case d:H=G()/3;break;case c:H=(q-j)/6048e5;break;case l:H=(q-j)/864e5;break;case u:H=q/i;break;case a:H=q/r;break;case o:H=q/n;break;default:H=q}return U?H:N.a(H)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return T[this.$L]},F.locale=function(M,B){if(!M)return this.$L;var U=this.clone(),H=C(M,B,!0);return H&&(U.$L=H),U},F.clone=function(){return N.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},$}(),P=O.prototype;return k.prototype=P,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function($){P[$[1]]=function(F){return this.$g(F,$[0],$[1])}}),k.extend=function($,F){return $.$i||($(F,O,k),$.$i=!0),k},k.locale=C,k.isDayjs=A,k.unix=function($){return k(1e3*$)},k.en=T[E],k.Ls=T,k.p={},k})})(L5e);var nsn=L5e.exports;const At=Hl(nsn);function rsn({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>At(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function isn({formatter:e,...t}){return(e||rsn)(t)}function ssn({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function F5e({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=ssn({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?F5e({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function osn(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function asn(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function Xre({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=osn(i.key);if(s){i.preventDefault();const o=asn(e);F5e({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var j5e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Zs,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var b=v.timeZoneName||"short",w=y+"|"+b,E=r[w];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[w]=E),E}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,b=y.value,w=n[v];w>=0&&(m[w]=parseInt(b,10))}var E=m[3],T=E===24?0:E,S=m[0]+"-"+m[1]+"-"+m[2]+" "+T+":"+m[4]+":"+m[5]+":000",A=+d;return(o.utc(S).valueOf()-(A-=A%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var b=v.utcOffset();v=v.add(p-b,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(T,S,A){var C=T-60*S*1e3,k=l(C,A);if(S===k)return[C,S];var N=l(C-=60*(k-S)*1e3,A);return k===N?[C,k]:[T-60*Math.min(k,N)*1e3,Math.max(k,N)]}(o.utc(d,m).valueOf(),y,g),b=v[0],w=v[1],E=o(b).utcOffset(w);return E.$x.$timezone=g,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(j5e);var usn=j5e.exports;const lsn=Hl(usn);var B5e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Zs,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var T=E.match(r);if(!T)return null;var S=(""+T[0]).match(i)||["-",0,0],A=S[0],C=60*+S[1]+ +S[2];return C===0?0:A==="+"?C:-C}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,b=this;if(g)return b.$offset=v,b.$u=m===0,b;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(v+w,n)).$offset=v,b.$x.$localOffset=w}else b=this.utc();return b};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),b=a(m).local();return p.call(v,b,g,y)}}})})(B5e);var csn=B5e.exports;const fsn=Hl(csn);At.extend(fsn);At.extend(lsn);function dsn(e,t){return t?At(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const M0e=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=dsn(e,t);return n==="remove"&&(r*=-1),At(e).add(r,"minutes").toDate()};function k0(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>M0e(i,n,e)):M0e(t,n,e)}function hsn({minDate:e,maxDate:t,timezone:n}){const r=k0("add",new Date,n);return!e&&!t?r:e&&At(r).isBefore(e)?e:t&&At(r).isAfter(t)?t:r}const psn={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},msn=I.createContext(psn);function Kl(){const e=I.useContext(msn),t=I.useCallback(o=>o||e.locale,[e.locale]),n=I.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=I.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=I.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=I.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function gsn(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function U5e({value:e,type:t,name:n,form:r}){return _.jsx("input",{type:"hidden",value:gsn(e,t),name:n,form:r})}U5e.displayName="@mantine/dates/HiddenDatesInput";var z5e={day:"m_396ce5cb"};const ysn={},vsn=(e,{size:t})=>({day:{"--day-size":en(t,"day-size")}}),Qre=je((e,t)=>{const n=Ae("Day",ysn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:b,static:w,...E}=n,T=ht({name:f||"Day",classes:z5e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vsn,rootSelector:"day"}),S=Kl();return _.jsx(_s,{...T("day",{style:b?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":At(l).isSame(k0("add",new Date,S.getTimezone()),"day")||void 0,"data-hidden":b||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":w||void 0,unstyled:a,...E,children:(m==null?void 0:m(l))||l.getDate()})});Qre.classes=z5e;Qre.displayName="@mantine/dates/Day";function bsn({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=At().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(At(r).add(s,"days").locale(e).format(t)):i.push(t(At(r).add(s,"days").toDate()));return i}var V5e={weekday:"m_18a3eca"};const _sn={},wsn=(e,{size:t})=>({weekdaysRow:{"--wr-fz":oo(t),"--wr-spacing":is(t)}}),Jre=je((e,t)=>{const n=Ae("WeekdaysRow",_sn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=ht({name:h||"WeekdaysRow",classes:V5e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wsn,rootSelector:"weekdaysRow"}),g=Kl(),y=bsn({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,b)=>_.jsx(d,{...m("weekday"),children:v},b));return _.jsx(we,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});Jre.classes=V5e;Jre.displayName="@mantine/dates/WeekdaysRow";function Esn(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function xsn(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function Ssn({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=Esn(s,t),a=xsn(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function H5e(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function q5e(e,t){return t instanceof Date?At(e).isAfter(At(t).subtract(1,"day"),"day"):!0}function W5e(e,t){return t instanceof Date?At(e).isBefore(At(t).add(1,"day"),"day"):!0}function Tsn(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return W5e(c,n)&&q5e(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||H5e(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>At().isSame(c,"date"));return l||a[0]}var G5e={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const Asn={withCellSpacing:!0},y5=je((e,t)=>{const n=Ae("Month",Asn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:b,hideOutsideDates:w,hideWeekdays:E,getDayAriaLabel:T,static:S,__getDayRef:A,__onDayKeyDown:C,__onDayClick:k,__onDayMouseEnter:N,__preventFocus:O,__stopPropagation:P,withCellSpacing:$,size:F,...M}=n,B=ht({name:l||"Month",classes:G5e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),U=Kl(),H=Ssn({month:h,firstDayOfWeek:U.getFirstDayOfWeek(f),consistentWeeks:U.consistentWeeks}),D=Tsn(H,y,v,m,g,w,h),{resolvedClassNames:z,resolvedStyles:W}=$m({classNames:r,styles:o,props:n}),j=H.map((q,G)=>{const re=q.map((de,pe)=>{const ge=!H5e(de,h),Ee=(T==null?void 0:T(de))||At(de).locale(c||U.locale).format("D MMMM YYYY"),Z=m==null?void 0:m(de),Q=At(de).isSame(D,"date");return _.jsx("td",{...B("monthCell"),"data-with-spacing":$||void 0,children:_.jsx(Qre,{__staticSelector:l||"Month",classNames:z,styles:W,unstyled:a,"data-mantine-stop-propagation":P||void 0,renderDay:b,date:de,size:F,weekend:U.getWeekendDays(p).includes(de.getDay()),outside:ge,hidden:w?ge:!1,"aria-label":Ee,static:S,disabled:(g==null?void 0:g(de))||!W5e(de,v)||!q5e(de,y),ref:fe=>A==null?void 0:A(G,pe,fe),...Z,onKeyDown:fe=>{var be;(be=Z==null?void 0:Z.onKeyDown)==null||be.call(Z,fe),C==null||C(fe,{rowIndex:G,cellIndex:pe,date:de})},onMouseEnter:fe=>{var be;(be=Z==null?void 0:Z.onMouseEnter)==null||be.call(Z,fe),N==null||N(fe,de)},onClick:fe=>{var be;(be=Z==null?void 0:Z.onClick)==null||be.call(Z,fe),k==null||k(fe,de)},onMouseDown:fe=>{var be;(be=Z==null?void 0:Z.onMouseDown)==null||be.call(Z,fe),O&&fe.preventDefault()},tabIndex:O||!Q?-1:0})},de.toString())});return _.jsx("tr",{...B("monthRow"),children:re},G)});return _.jsxs(we,{component:"table",...B("month"),size:F,ref:t,...M,children:[!E&&_.jsx("thead",{...B("monthThead"),children:_.jsx(Jre,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:F,classNames:z,styles:W,unstyled:a})}),_.jsx("tbody",{...B("monthTbody"),children:j})]})});y5.classes=G5e;y5.displayName="@mantine/dates/Month";var Y5e={pickerControl:"m_dc6a3c71"};const Csn={},Isn=(e,{size:t})=>({pickerControl:{"--dpc-fz":oo(t),"--dpc-size":en(t,"dpc-size")}}),v5=je((e,t)=>{const n=Ae("PickerControl",Csn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=ht({name:d||"PickerControl",classes:Y5e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Isn,rootSelector:"pickerControl"});return _.jsx(_s,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});v5.classes=Y5e;v5.displayName="@mantine/dates/PickerControl";function K5e(e,t,n){return!t&&!n?!1:!!(t&&At(e).isBefore(t,"year")||n&&At(e).isAfter(n,"year"))}function ksn(e,t,n,r){const i=e.flat().filter(a=>{var u;return!K5e(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>At().isSame(a,"year"));return o||i[0]}function X5e(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var Q5e={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const Rsn={yearsListFormat:"YYYY",withCellSpacing:!0},b5=je((e,t)=>{const n=Ae("YearsList",Rsn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:T,size:S,...A}=n,C=ht({name:m||"YearsList",classes:Q5e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),k=Kl(),N=X5e(l),O=ksn(N,d,h,p),P=N.map(($,F)=>{const M=$.map((B,U)=>{const H=p==null?void 0:p(B),D=At(B).isSame(O,"year");return _.jsx("td",{...C("yearsListCell"),"data-with-spacing":T||void 0,children:_.jsx(v5,{...C("yearsListControl"),size:S,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:K5e(B,d,h),ref:z=>g==null?void 0:g(F,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:F,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!D?-1:0,children:At(B).locale(k.getLocale(f)).format(c)})},U)});return _.jsx("tr",{...C("yearsListRow"),children:M},F)});return _.jsx(we,{component:"table",ref:t,size:S,...C("yearsList"),...A,children:_.jsx("tbody",{children:P})})});b5.classes=Q5e;b5.displayName="@mantine/dates/YearsList";function J5e(e,t,n){return!t&&!n?!1:!!(t&&At(e).isBefore(t,"month")||n&&At(e).isAfter(n,"month"))}function Nsn(e,t,n,r){const i=e.flat().filter(a=>{var u;return!J5e(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>At().isSame(a,"month"));return o||i[0]}function Psn(e){const t=At(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(At(t).add(r,"months").toDate()),r+=1;return n}var Z5e={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const Dsn={monthsListFormat:"MMM",withCellSpacing:!0},_5=je((e,t)=>{const n=Ae("MonthsList",Dsn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:T,size:S,...A}=n,C=ht({name:l||"MonthsList",classes:Z5e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),k=Kl(),N=Psn(c),O=Nsn(N,h,p,m),P=N.map(($,F)=>{const M=$.map((B,U)=>{const H=m==null?void 0:m(B),D=At(B).isSame(O,"month");return _.jsx("td",{...C("monthsListCell"),"data-with-spacing":T||void 0,children:_.jsx(v5,{...C("monthsListControl"),size:S,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:J5e(B,h,p),ref:z=>g==null?void 0:g(F,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:F,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!D?-1:0,children:At(B).locale(k.getLocale(d)).format(f)})},U)});return _.jsx("tr",{...C("monthsListRow"),children:M},F)});return _.jsx(we,{component:"table",ref:t,size:S,...C("monthsList"),...A,children:_.jsx("tbody",{children:P})})});_5.classes=Z5e;_5.displayName="@mantine/dates/MonthsList";var eje={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const Osn={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},$sn=(e,{size:t})=>({calendarHeader:{"--dch-control-size":en(t,"dch-control-size"),"--dch-fz":oo(t)}}),Ky=je((e,t)=>{const n=Ae("CalendarHeader",Osn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:b,levelControlAriaLabel:w,withNext:E,withPrevious:T,__staticSelector:S,__preventFocus:A,__stopPropagation:C,...k}=n,N=ht({name:S||"CalendarHeader",classes:eje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$sn,rootSelector:"calendarHeader"}),O=A?P=>P.preventDefault():void 0;return _.jsxs(we,{...N("calendarHeader"),ref:t,...k,children:[T&&_.jsx(_s,{...N("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:O,disabled:v,"data-disabled":v||void 0,tabIndex:A||v?-1:0,"data-mantine-stop-propagation":C||void 0,children:c||_.jsx(wE,{...N("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),_.jsx(_s,{component:b?"button":"div",...N("calendarHeaderLevel"),onClick:b?m:void 0,unstyled:a,onMouseDown:b?O:void 0,disabled:!b,"data-static":!b||void 0,"aria-label":w,tabIndex:A||!b?-1:0,"data-mantine-stop-propagation":C||void 0,children:g}),E&&_.jsx(_s,{...N("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:O,disabled:y,"data-disabled":y||void 0,tabIndex:A||y?-1:0,"data-mantine-stop-propagation":C||void 0,children:l||_.jsx(wE,{...N("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});Ky.classes=eje;Ky.displayName="@mantine/dates/CalendarHeader";function Msn(e){const t=X5e(e);return[t[0][0],t[3][0]]}const Lsn={decadeLabelFormat:"YYYY"},w5=je((e,t)=>{const n=Ae("DecadeLevel",Lsn,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:E,previousDisabled:T,levelControlAriaLabel:S,withNext:A,withPrevious:C,decadeLabelFormat:k,classNames:N,styles:O,unstyled:P,__staticSelector:$,__stopPropagation:F,size:M,...B}=n,U=Kl(),[H,D]=Msn(r),z={__staticSelector:$||"DecadeLevel",classNames:N,styles:O,unstyled:P,size:M},W=typeof E=="boolean"?E:o?!At(D).endOf("year").isBefore(o):!1,j=typeof T=="boolean"?T:s?!At(H).startOf("year").isAfter(s):!1,q=(G,re)=>At(G).locale(i||U.locale).format(re);return _.jsxs(we,{"data-decade-level":!0,size:M,ref:t,...B,children:[_.jsx(Ky,{label:typeof k=="function"?k(H,D):`${q(H,k)}  ${q(D,k)}`,__preventFocus:p,__stopPropagation:F,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:W,previousDisabled:j,hasNextLevel:!1,levelControlAriaLabel:S,withNext:A,withPrevious:C,...z}),_.jsx(b5,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:F,withCellSpacing:h,...z})]})});w5.classes={...b5.classes,...Ky.classes};w5.displayName="@mantine/dates/DecadeLevel";const Fsn={yearLabelFormat:"YYYY"},E5=je((e,t)=>{const n=Ae("YearLevel",Fsn,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:T,previousDisabled:S,hasNextLevel:A,levelControlAriaLabel:C,withNext:k,withPrevious:N,yearLabelFormat:O,__staticSelector:P,__stopPropagation:$,size:F,classNames:M,styles:B,unstyled:U,...H}=n,D=Kl(),z={__staticSelector:P||"YearLevel",classNames:M,styles:B,unstyled:U,size:F},W=typeof T=="boolean"?T:o?!At(r).endOf("year").isBefore(o):!1,j=typeof S=="boolean"?S:s?!At(r).startOf("year").isAfter(s):!1;return _.jsxs(we,{"data-year-level":!0,size:F,ref:t,...H,children:[_.jsx(Ky,{label:typeof O=="function"?O(r):At(r).locale(i||D.locale).format(O),__preventFocus:p,__stopPropagation:$,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:W,previousDisabled:j,hasNextLevel:A,levelControlAriaLabel:C,withNext:k,withPrevious:N,...z}),_.jsx(_5,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:$,withCellSpacing:h,...z})]})});E5.classes={...Ky.classes,..._5.classes};E5.displayName="@mantine/dates/YearLevel";const jsn={monthLabelFormat:"MMMM YYYY"},x5=je((e,t)=>{const n=Ae("MonthLevel",jsn,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,withCellSpacing:w,__preventFocus:E,__stopPropagation:T,nextIcon:S,previousIcon:A,nextLabel:C,previousLabel:k,onNext:N,onPrevious:O,onLevelClick:P,nextDisabled:$,previousDisabled:F,hasNextLevel:M,levelControlAriaLabel:B,withNext:U,withPrevious:H,monthLabelFormat:D,classNames:z,styles:W,unstyled:j,__staticSelector:q,size:G,static:re,...de}=n,pe=Kl(),ge={__staticSelector:q||"MonthLevel",classNames:z,styles:W,unstyled:j,size:G},Ee=typeof $=="boolean"?$:f?!At(r).endOf("month").isBefore(f):!1,Z=typeof F=="boolean"?F:c?!At(r).startOf("month").isAfter(c):!1;return _.jsxs(we,{"data-month-level":!0,size:G,ref:t,...de,children:[_.jsx(Ky,{label:typeof D=="function"?D(r):At(r).locale(i||pe.locale).format(D),__preventFocus:E,__stopPropagation:T,nextIcon:S,previousIcon:A,nextLabel:C,previousLabel:k,onNext:N,onPrevious:O,onLevelClick:P,nextDisabled:Ee,previousDisabled:Z,hasNextLevel:M,levelControlAriaLabel:B,withNext:U,withPrevious:H,...ge}),_.jsx(y5,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,__preventFocus:E,__stopPropagation:T,static:re,withCellSpacing:w,...ge})]})});x5.classes={...y5.classes,...Ky.classes};x5.displayName="@mantine/dates/MonthLevel";var tje={levelsGroup:"m_30b26e33"};const Bsn={},Xy=je((e,t)=>{const n=Ae("LevelsGroup",Bsn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=ht({name:l||"LevelsGroup",classes:tje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return _.jsx(we,{ref:t,...f("levelsGroup"),...c})});Xy.classes=tje;Xy.displayName="@mantine/dates/LevelsGroup";const Usn={numberOfColumns:1},S5=je((e,t)=>{const n=Ae("DecadeLevelGroup",Usn,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,classNames:E,styles:T,unstyled:S,__staticSelector:A,__stopPropagation:C,numberOfColumns:k,levelControlAriaLabel:N,decadeLabelFormat:O,size:P,vars:$,...F}=n,M=I.useRef([]),B=Array(k).fill(0).map((U,H)=>{const D=At(r).add(H*10,"years").toDate();return _.jsx(w5,{size:P,yearsListFormat:a,decade:D,withNext:H===k-1,withPrevious:H===0,decadeLabelFormat:O,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(z,W)=>Xre({levelIndex:H,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:z,controlsRef:M}),__getControlRef:(z,W,j)=>{Array.isArray(M.current[H])||(M.current[H]=[]),Array.isArray(M.current[H][z])||(M.current[H][z]=[]),M.current[H][z][W]=j},levelControlAriaLabel:typeof N=="function"?N(D):N,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:C,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,getYearControlProps:u,__staticSelector:A||"DecadeLevelGroup",classNames:E,styles:T,unstyled:S,withCellSpacing:f},H)});return _.jsx(Xy,{classNames:E,styles:T,__staticSelector:A||"DecadeLevelGroup",ref:t,size:P,unstyled:S,...F,children:B})});S5.classes={...Xy.classes,...w5.classes};S5.displayName="@mantine/dates/DecadeLevelGroup";const zsn={numberOfColumns:1},T5=je((e,t)=>{const n=Ae("YearLevelGroup",zsn,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:T,classNames:S,styles:A,unstyled:C,__staticSelector:k,__stopPropagation:N,numberOfColumns:O,levelControlAriaLabel:P,yearLabelFormat:$,size:F,vars:M,...B}=n,U=I.useRef([]),H=Array(O).fill(0).map((D,z)=>{const W=At(r).add(z,"years").toDate();return _.jsx(E5,{size:F,monthsListFormat:a,year:W,withNext:z===O-1,withPrevious:z===0,yearLabelFormat:$,__stopPropagation:N,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(j,q)=>Xre({levelIndex:z,rowIndex:q.rowIndex,cellIndex:q.cellIndex,event:j,controlsRef:U}),__getControlRef:(j,q,G)=>{Array.isArray(U.current[z])||(U.current[z]=[]),Array.isArray(U.current[z][j])||(U.current[z][j]=[]),U.current[z][j][q]=G},levelControlAriaLabel:typeof P=="function"?P(W):P,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:T,getMonthControlProps:u,classNames:S,styles:A,unstyled:C,__staticSelector:k||"YearLevelGroup",withCellSpacing:f},z)});return _.jsx(Xy,{classNames:S,styles:A,__staticSelector:k||"YearLevelGroup",ref:t,size:F,unstyled:C,...B,children:H})});T5.classes={...E5.classes,...Xy.classes};T5.displayName="@mantine/dates/YearLevelGroup";const Vsn={numberOfColumns:1},A5=je((e,t)=>{const n=Ae("MonthLevelGroup",Vsn,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:T,previousLabel:S,onNext:A,onPrevious:C,onLevelClick:k,nextDisabled:N,previousDisabled:O,hasNextLevel:P,classNames:$,styles:F,unstyled:M,numberOfColumns:B,levelControlAriaLabel:U,monthLabelFormat:H,__staticSelector:D,__stopPropagation:z,size:W,static:j,vars:q,...G}=n,re=I.useRef([]),de=Array(B).fill(0).map((pe,ge)=>{const Ee=At(r).add(ge,"months").toDate();return _.jsx(x5,{month:Ee,withNext:ge===B-1,withPrevious:ge===0,monthLabelFormat:H,__stopPropagation:z,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Z,Q)=>Xre({levelIndex:ge,rowIndex:Q.rowIndex,cellIndex:Q.cellIndex,event:Z,controlsRef:re}),__getDayRef:(Z,Q,fe)=>{Array.isArray(re.current[ge])||(re.current[ge]=[]),Array.isArray(re.current[ge][Z])||(re.current[ge][Z]=[]),re.current[ge][Z][Q]=fe},levelControlAriaLabel:typeof U=="function"?U(Ee):U,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:T,previousLabel:S,onNext:A,onPrevious:C,onLevelClick:k,nextDisabled:N,previousDisabled:O,hasNextLevel:P,classNames:$,styles:F,unstyled:M,__staticSelector:D||"MonthLevelGroup",size:W,static:j,withCellSpacing:v},ge)});return _.jsx(Xy,{classNames:$,styles:F,__staticSelector:D||"MonthLevelGroup",ref:t,size:W,...G,children:de})});A5.classes={...Xy.classes,...x5.classes};A5.displayName="@mantine/dates/MonthLevelGroup";var nje={input:"m_6fa5e2aa"};const Hsn={},C5=je((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:b,shouldClear:w,readOnly:E,disabled:T,value:S,name:A,form:C,type:k,...N}=gbe("PickerInputBase",Hsn,e),O=b||(g&&w&&!E&&!T?_.jsx(Fm,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),P=()=>{k==="range"&&Array.isArray(S)&&S[0]&&!S[1]&&y(),h.close()};return _.jsxs(_.Fragment,{children:[c==="modal"&&!E&&_.jsx(Wi,{opened:p,onClose:P,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),_.jsx(fi.Wrapper,{...r,children:_.jsxs(ko,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||E,onClose:()=>{var $;($=u==null?void 0:u.onClose)==null||$.call(u),P()},children:[_.jsx(ko.Target,{children:_.jsx(fi,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":E||void 0,disabled:T,component:"button",type:"button",multiline:!0,onClick:$=>{m==null||m($),h.toggle()},rightSection:O,...n,ref:t,classNames:{...s,input:Yi(nje.input,s==null?void 0:s.input)},...N,children:d||_.jsx(fi.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),_.jsx(ko.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),_.jsx(U5e,{value:S,name:A,form:C,type:k})]})});C5.classes=nje;C5.displayName="@mantine/dates/PickerInputBase";const L0e=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function Zre({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=I.useRef(e),o=Kl(),[a,u,l]=ws({value:k0("add",t,o.getTimezone(),!i),defaultValue:k0("add",n,o.getTimezone(),!i),finalValue:L0e(e),onChange:f=>{r==null||r(k0("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:L0e(e),u(c))),[c,u,l]}function CB(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function qsn(e){return e===0?"month":e===1?"year":"decade"}function e2(e,t,n){return qsn(Vd(CB(e,0),CB(t,0),CB(n,2)))}const Wsn={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},I5=je((e,t)=>{const n=Ae("Calendar",Wsn,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:b,__updateDateOnMonthSelect:w,firstDayOfWeek:E,weekdayFormat:T,weekendDays:S,getDayProps:A,excludeDate:C,renderDay:k,hideOutsideDates:N,hideWeekdays:O,getDayAriaLabel:P,monthLabelFormat:$,nextIcon:F,previousIcon:M,__onDayClick:B,__onDayMouseEnter:U,withCellSpacing:H,monthsListFormat:D,getMonthControlProps:z,yearLabelFormat:W,yearsListFormat:j,getYearControlProps:q,decadeLabelFormat:G,classNames:re,styles:de,unstyled:pe,minDate:ge,maxDate:Ee,locale:Z,__staticSelector:Q,size:fe,__preventFocus:be,__stopPropagation:Me,onNextDecade:Be,onPreviousDecade:ve,onNextYear:Re,onPreviousYear:He,onNextMonth:Ze,onPreviousMonth:bt,static:Ge,__timezoneApplied:ye,...pt}=n,{resolvedClassNames:vt,resolvedStyles:_e}=$m({classNames:re,styles:de,props:n}),[Ne,Ye]=ws({value:a?e2(a,s,i):void 0,defaultValue:o?e2(o,s,i):void 0,finalValue:e2(void 0,s,i),onChange:u}),[ct,wt]=Zre({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!ye}),$n={__staticSelector:Q||"Calendar",styles:_e,classNames:vt,unstyled:pe,size:fe},Sr=Kl(),Mn=h||d||1,ur=ct||k0("add",new Date,Sr.getTimezone()),pn=()=>{const An=At(ur).add(Mn,"month").toDate();Ze==null||Ze(An),wt(An)},Tn=()=>{const An=At(ur).subtract(Mn,"month").toDate();bt==null||bt(An),wt(An)},er=()=>{const An=At(ur).add(Mn,"year").toDate();Re==null||Re(An),wt(An)},tr=()=>{const An=At(ur).subtract(Mn,"year").toDate();He==null||He(An),wt(An)},jo=()=>{const An=At(ur).add(10*Mn,"year").toDate();Be==null||Be(An),wt(An)},Di=()=>{const An=At(ur).subtract(10*Mn,"year").toDate();ve==null||ve(An),wt(An)};return _.jsxs(we,{ref:t,size:fe,"data-calendar":!0,...pt,children:[Ne==="month"&&_.jsx(A5,{month:ur,minDate:ge,maxDate:Ee,firstDayOfWeek:E,weekdayFormat:T,weekendDays:S,getDayProps:A,excludeDate:C,renderDay:k,hideOutsideDates:N,hideWeekdays:O,getDayAriaLabel:P,onNext:pn,onPrevious:Tn,hasNextLevel:i!=="month",onLevelClick:()=>Ye("year"),numberOfColumns:d,locale:Z,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:F,previousLabel:p==null?void 0:p.previousMonth,previousIcon:M,monthLabelFormat:$,__onDayClick:B,__onDayMouseEnter:U,__preventFocus:be,__stopPropagation:Me,static:Ge,withCellSpacing:H,...$n}),Ne==="year"&&_.jsx(T5,{year:ur,numberOfColumns:d,minDate:ge,maxDate:Ee,monthsListFormat:D,getMonthControlProps:z,locale:Z,onNext:er,onPrevious:tr,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>Ye("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:F,previousLabel:p==null?void 0:p.previousYear,previousIcon:M,yearLabelFormat:W,__onControlMouseEnter:v,__onControlClick:(An,Oi)=>{w&&wt(Oi),Ye(e2("month",s,i)),g==null||g(Oi)},__preventFocus:be,__stopPropagation:Me,withCellSpacing:H,...$n}),Ne==="decade"&&_.jsx(S5,{decade:ur,minDate:ge,maxDate:Ee,yearsListFormat:j,getYearControlProps:q,locale:Z,onNext:jo,onPrevious:Di,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:F,previousLabel:p==null?void 0:p.previousDecade,previousIcon:M,decadeLabelFormat:G,__onControlMouseEnter:y,__onControlClick:(An,Oi)=>{b&&wt(Oi),Ye(e2("year",s,i)),m==null||m(Oi)},__preventFocus:be,__stopPropagation:Me,withCellSpacing:H,...$n})]})});I5.classes={...S5.classes,...T5.classes,...A5.classes};I5.displayName="@mantine/dates/Calendar";function Gsn(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:T,onPreviousDecade:S,withCellSpacing:A,__updateDateOnYearSelect:C,__updateDateOnMonthSelect:k,firstDayOfWeek:N,weekdayFormat:O,weekendDays:P,getDayProps:$,excludeDate:F,renderDay:M,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:D,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:re,allowSingleDateInRange:de,allowDeselect:pe,minDate:ge,maxDate:Ee,locale:Z,...Q}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:T,onPreviousDecade:S,withCellSpacing:A,__updateDateOnYearSelect:C,__updateDateOnMonthSelect:k,firstDayOfWeek:N,weekdayFormat:O,weekendDays:P,getDayProps:$,excludeDate:F,renderDay:M,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:D,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:re,allowSingleDateInRange:de,allowDeselect:pe,minDate:ge,maxDate:Ee,locale:Z},others:Q}}function F0e(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return At(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&At(n[1]).endOf("day").add(1,"ms").isAfter(e)}function Ysn({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=Zre({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=I.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=I.useState(null),m=T=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(At(T).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const S=[T,f];S.sort((A,C)=>A.getTime()-C.getTime()),c(S),p(null),d(null);return}if(l[0]&&!l[1]&&At(T).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([T,null]),p(null),d(T);return}if(e==="multiple"){l.some(S=>At(S).isSame(T,t))?c(l.filter(S=>!At(S).isSame(T,t))):c([...l,T]);return}l&&o&&At(T).isSame(l,t)?c(null):c(T)},g=T=>f instanceof Date&&h instanceof Date?F0e(T,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?F0e(T,l):!1,y=e==="range"?T=>{a==null||a(T),p(null)}:a,v=T=>l[0]instanceof Date&&At(T).isSame(l[0],t)?!(h&&At(h).isBefore(l[0])):!1,b=T=>l[1]instanceof Date?At(T).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:At(h).isBefore(l[0])&&At(T).isSame(l[0],t),w=T=>{if(e==="range")return{selected:l.some(A=>A&&At(A).isSame(T,t)),inRange:g(T),firstInRange:v(T),lastInRange:b(T),"data-autofocus":!!l[0]&&At(l[0]).isSame(T,t)||void 0};if(e==="multiple")return{selected:l.some(A=>A&&At(A).isSame(T,t)),"data-autofocus":!!l[0]&&At(l[0]).isSame(T,t)||void 0};const S=At(l).isSame(T,t);return{selected:S,"data-autofocus":S||void 0}},E=e==="range"&&f?p:()=>{};return I.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:E,getControlProps:w,_value:l,setValue:c}}const Ksn={type:"default",defaultLevel:"month",numberOfColumns:1},k5=je((e,t)=>{const n=Ae("DatePicker",Ksn,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:b,...w}=n,{onDateChange:E,onRootMouseLeave:T,onHoveredDateChange:S,getControlProps:A}=Ysn({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!b}),{resolvedClassNames:C,resolvedStyles:k}=$m({classNames:r,styles:i,props:n}),N=Kl();return _.jsx(I5,{ref:t,minLevel:"month",classNames:C,styles:k,__staticSelector:c||"DatePicker",onMouseLeave:T,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(O,P)=>{S(P),y==null||y(O,P)},__onDayClick:(O,P)=>{E(P),v==null||v(O,P)},getDayProps:O=>({...A(O),...f==null?void 0:f(O)}),...w,date:k0("add",w.date,N.getTimezone(),b),__timezoneApplied:!0})});k5.classes=I5.classes;k5.displayName="@mantine/dates/DatePicker";function Xsn({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=Kl(),[f,d]=nL(!1),[h,p]=Zre({type:e,value:t,defaultValue:n,onChange:r}),m=isn({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=b=>{o&&(e==="default"&&d.close(),e==="range"&&b[0]&&b[1]&&d.close()),p(a&&e==="multiple"?[...b].sort((w,E)=>w.getTime()-E.getTime()):b)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const Qsn={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},eie=je((e,t)=>{const n=Ae("DatePickerInput",Qsn,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:b,vars:w,defaultDate:E,valueFormatter:T,...S}=n,{resolvedClassNames:A,resolvedStyles:C}=$m({classNames:c,styles:f,props:n}),{calendarProps:k,others:N}=Gsn(S),{_value:O,setValue:P,formattedValue:$,dropdownHandlers:F,dropdownOpened:M,onClear:B,shouldClear:U}=Xsn({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:T}),H=Array.isArray(O)?O[0]||E:O||E,D=Kl();return _.jsx(C5,{formattedValue:$,dropdownOpened:M,dropdownHandlers:F,classNames:A,styles:C,unstyled:d,ref:t,onClear:B,shouldClear:U,value:O,size:p,variant:m,dropdownType:g,...N,type:r,__staticSelector:"DatePickerInput",children:_.jsx(k5,{...k,size:p,variant:m,type:r,value:O,defaultDate:H||hsn({maxDate:b,minDate:v,timezone:D.getTimezone()}),onChange:P,locale:l,classNames:A,styles:C,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:b,date:k0("add",k.date,D.getTimezone()),__timezoneApplied:!0})})});eie.classes={...C5.classes,...k5.classes};eie.displayName="@mantine/dates/DatePickerInput";function Jsn(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function Zsn({studyId:e,allParticipants:t}){const n=Hm(),[r,i]=p1(),s=t.filter(p=>p.completed).map(p=>Math.max(...Object.values(p.answers).map(m=>m.endTime).filter(m=>m!==void 0))).filter(p=>Number.isFinite(p)),[o,a]=I.useState([new Date(new Date(Math.min(...s.length>0?s:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...s.length>0?s:[new Date().getTime()])).setHours(24,0,0,0))]),[u,l,c,f]=I.useMemo(()=>{const p=t.filter(y=>!y.rejected&&y.completed),m=t.filter(y=>!y.rejected&&!y.completed),g=t.filter(y=>y.rejected);return[p,m,g,p.filter(y=>Jsn(y.answers,o))]},[t,o]),d=I.useMemo(()=>{var p,m;return f.length>0?[{Date:(p=o[0])==null?void 0:p.getTime(),Participants:0},...f.map(g=>Math.max(...Object.values(g.answers).map(y=>y.endTime).flat())).sort((g,y)=>g-y).map((g,y)=>({Date:g,Participants:y})),{Date:(m=o[1])==null?void 0:m.getTime(),Participants:f.length}]:[]},[f,o]),h=I.useMemo(()=>{var p,m;return{width:i.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(p=o[0])==null?void 0:p.getTime(),(m=o[1])==null?void 0:m.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:d}}},[i.width,o,d]);return _.jsx(Cc,{children:_.jsxs(Cb,{ref:r,padding:"lg",shadow:"md",withBorder:!0,children:[_.jsxs(Pt,{align:"center",mb:"xs",justify:"space-between",children:[_.jsxs(Pt,{direction:"row",align:"center",children:[_.jsx(Ei,{order:5,children:e}),_.jsx(bDe,{completed:u.length,inProgress:l.length,rejected:c.length,filteredCompleted:f.length})]}),_.jsxs(Es,{children:[_.jsx(cZ,{allParticipants:t,studyId:e}),_.jsx(wi,{label:"Analyze and manage study data",children:_.jsx(ln,{onClick:p=>{!p.ctrlKey&&!p.metaKey&&(p.preventDefault(),n(`/analysis/stats/${e}`))},px:4,component:"a",href:`${Fu}analysis/stats/${e}`,children:_.jsx(_Xe,{})})})]})]}),_.jsx(eie,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:o,onChange:a}),d.length>0?_.jsxs(_.Fragment,{children:[_.jsx(it,{mt:16,children:"Finished Participants"}),_.jsx(hq,{spec:h,actions:!1})]}):_.jsx(we,{h:293.4,children:_.jsx(fm,{style:{height:"100%"},children:_.jsx(it,{children:"Not enough participants for chart"})})})]})})}function eon({globalConfig:e}){const[t,n]=I.useState(!1),[r,i]=I.useState({}),[s,o]=I.useState({}),{storageEngine:a}=Ss(),{user:u}=Hb();I.useEffect(()=>{(async()=>{n(!0);const f={},d={},h=async m=>{const g=await s4(m,e);if(a){if(f[m]=await a.getAllParticipantsDataByStudy(m),g===null)return;if(a instanceof pf){const y=await a.getModes(m);d[m]=y.analyticsInterfacePubliclyAccessible}}};await(async()=>{const m=e.configsList.map(g=>h(g));try{await Promise.all(m),i(f),o(d)}catch(g){console.error("Error fetching data:",g)}finally{n(!1)}})()})()},[e,a]);const l=e.configsList.map(c=>r[c]&&((s[c]||u.isAdmin)&&!e.configs[c].test?_.jsx(ja.Col,{span:{md:12,xl:6},children:_.jsx(Zsn,{studyId:c,allParticipants:r[c]})},`${c}-panel`):null));return _.jsxs(_.Fragment,{children:[_.jsx($A,{studyIds:e.configsList}),_.jsx(ci.Main,{children:_.jsx(Cc,{fluid:!0,children:_.jsxs(we,{children:[_.jsx(Ei,{mb:20,order:4,children:"Your Studies:"}),_.jsxs(ja,{children:[l.length>0?l:_.jsx(Cc,{mt:100,children:_.jsx(it,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),_.jsx(Pl,{visible:t})]})]})})})]})}function ton(){const{user:e,triggerAuth:t}=Hb(),{storageEngine:n}=Ss(),[r,i]=I.useState(!1),[s,o]=I.useState([]),[a,u]=I.useState(!1),[l,c]=I.useState(!1),[f,d]=I.useState(!1),[h,p]=I.useState(!1),[m,g]=I.useState(!1),[y,v]=I.useState(""),[b,w]=I.useState(null),E=lxe({initialValues:{email:""},validate:{email:wot("Invalid email")}});I.useEffect(()=>{(async()=>{if(u(!0),n instanceof pf){const P=await(n==null?void 0:n.getUserManagementData("authentication"));i(P==null?void 0:P.isEnabled);const $=await(n==null?void 0:n.getUserManagementData("adminUsers"));$&&$.adminUsersList&&o($==null?void 0:$.adminUsersList.map(F=>F.email))}else i(!1);u(!1)})()},[n]);const T=async()=>{if(u(!0),n instanceof pf){const O=await M5e(n,u);O&&O.email?(w({email:O.email,uid:O.uid}),p(!0)):g(!0)}u(!1)},S=async O=>{u(!0),n instanceof pf&&O&&(await n.changeAuth(!0),await n.addAdminUser(O),o([O.email]),i(!0),t()),p(!1),u(!1)},A=async()=>{if(u(!0),n instanceof pf){await n.addAdminUser({email:E.values.email,uid:null});const O=await n.getUserManagementData("adminUsers");o(O==null?void 0:O.adminUsersList.map(P=>P.email))}u(!1),c(!1),E.setValues({email:""})},C=O=>{d(!0),v(O)},k=async()=>{if(u(!0),n instanceof pf){await n.removeAdminUser(y);const O=await n.getUserManagementData("adminUsers");o(O==null?void 0:O.adminUsersList.map(P=>P.email))}d(!1),u(!1)},N=I.useMemo(()=>n instanceof pf,[n]);return _.jsxs(_.Fragment,{children:[_.jsx(Cc,{children:_.jsxs(Cb,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(Ei,{mb:20,order:3,children:"Authentication"}),r?_.jsx(Pt,{children:_.jsx(it,{children:"Authentication is enabled."})}):_.jsxs(Pt,{justify:"space-between",children:[_.jsx(we,{children:_.jsx(it,{children:"Authentication is currently disabled."})}),_.jsx(wi,{label:"You can only enable auth when using Firebase",disabled:N,children:_.jsx(ln,{onClick:O=>N?T():O.preventDefault(),color:"green","data-disabled":N?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?_.jsxs(Pt,{mt:40,direction:"column",children:[_.jsxs(Pt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[_.jsx(Ei,{order:6,children:"Enabled Users"}),_.jsx(lY,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(O=>{var P;return _.jsxs(Pt,{justify:"space-between",mb:10,children:[_.jsx(it,{children:O}),O===((P=e.user)==null?void 0:P.email)?_.jsx(it,{color:"blue",size:"xs",children:"You"}):_.jsx(Ab,{variant:"subtle",onClick:()=>C(O),children:_.jsx(owe,{color:"red"})})]},O)}):null]}):null]})}),_.jsx(Wi,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:_.jsxs(we,{component:"form",onSubmit:E.onSubmit(()=>A()),children:[_.jsx(Hg,{leftSection:_.jsx(mXe,{}),placeholder:"User Gmail Account",...E.getInputProps("email")}),_.jsxs(Pt,{mt:30,justify:"right",children:[_.jsx(ln,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),_.jsx(ln,{type:"submit",children:"Save"})]})]})}),_.jsxs(Wi,{opened:f,size:"large",onClose:()=>d(!1),title:_.jsxs(it,{fw:700,children:["Remove",y,"?"]}),children:[_.jsxs(it,{mt:40,children:["Are you sure you want to remove",_.jsx("b",{children:y})," ","as an administrator?"]}),_.jsxs(Pt,{mt:40,justify:"right",children:[_.jsx(ln,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),_.jsx(ln,{onClick:()=>k(),children:"Yes, I'm sure."})]})]}),_.jsxs(Wi,{opened:h,size:"md",onClose:()=>p(!1),title:_.jsx(it,{fw:700,children:"Enable Authentication?"}),children:[_.jsxs(it,{mt:40,children:["User"," ",_.jsx("b",{children:b==null?void 0:b.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),_.jsxs(Pt,{mt:40,justify:"right",children:[_.jsx(ln,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),_.jsx(ln,{onClick:()=>S(b),children:"Yes, I'm sure."})]})]}),_.jsxs(Wi,{opened:m,size:"md",onClose:()=>g(!1),title:_.jsx(it,{fw:700,children:"An Error Occurred."}),children:[_.jsxs(it,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",_.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),_.jsx(Pt,{mt:40,justify:"right",children:_.jsx(ln,{mr:5,onClick:()=>g(!1),children:"Okay"})})]}),_.jsx(Pl,{visible:a})]})}class non extends yDe{constructor(){super("localStorage");uu(this,"studyDatabase");uu(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await Q_.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await B$(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await B$(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await Q_.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=j$();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=Q_.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=j$();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}async setMode(n,r,i){this.studyDatabase=await Q_.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await Q_.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function ron(){let e;{const t=new non;await t.connect(),e=t}return e}function F_({title:e}){const t=Ay();return I.useEffect(()=>{document.title=e},[t,e]),null}async function ion(){const t=await(await fetch(`${Fu}global.json`)).text();return MIt(t)}function son(){const[e,t]=I.useState(null),[n,r]=I.useState({});I.useEffect(()=>{async function a(){e&&r(await akt(e))}a()},[e]),I.useEffect(()=>{e||ion().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Ss();I.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await ron();s(u)}a()},[s,i]);const o=async a=>i instanceof pf?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?_.jsx(iXe,{basename:Fu,children:_.jsx(oLt,{children:_.jsx(cXe,{children:_.jsx(ci,{padding:"md",header:{height:70},children:_.jsxs(eXe,{children:[_.jsx(gp,{path:"/",element:_.jsxs(_.Fragment,{children:[_.jsx(F_,{title:"ReVISit | Home"}),_.jsx($A,{studyIds:e.configsList}),_.jsx(Cit,{globalConfig:e,studyConfigs:n})]})}),_.jsx(gp,{path:"/:studyId/*",element:_.jsxs(_.Fragment,{children:[_.jsx(F_,{title:"ReVISit | Study"}),_.jsx(ukt,{globalConfig:e})]})}),_.jsx(gp,{path:"/analysis/dashboard",element:_.jsxs(_.Fragment,{children:[_.jsx(F_,{title:"ReVISit | Analysis"}),_.jsx(eon,{globalConfig:e})]})}),_.jsx(gp,{path:"/analysis",element:_.jsx(aV,{to:"/analysis/dashboard"})}),_.jsx(gp,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:_.jsxs(_.Fragment,{children:[_.jsx(F_,{title:"ReVISit | Analysis"}),_.jsx($0e,{paramToCheck:"studyId",paramCallback:o,children:_.jsx(esn,{globalConfig:e})})]})}),_.jsx(gp,{path:"/analysis/stats/:studyId",element:_.jsx(aV,{to:"./table",replace:!0})}),_.jsx(gp,{path:"/settings",element:_.jsxs($0e,{children:[_.jsx(F_,{title:"ReVISit | Settings"}),_.jsx($A,{studyIds:e.configsList}),_.jsx(ci.Main,{children:_.jsx(ton,{})})]})}),_.jsx(gp,{path:"/login",element:_.jsxs(_.Fragment,{children:[_.jsx(F_,{title:"ReVISit | Login"}),_.jsx($A,{studyIds:e.configsList}),_.jsx(ci.Main,{children:_.jsx(tsn,{})})]})})]})})})})}):null}IB.createRoot(document.getElementById("root")).render(_.jsx(vr.StrictMode,{children:_.jsx(cKe,{children:_.jsxs(_1e,{children:[_.jsx(Vm,{}),_.jsx(son,{})]})})}))});export default oon();
